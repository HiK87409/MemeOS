/* 导入卡片动画样式 */
@import './styles/cardAnimations.css';

/* 导入字体优化工具类 */
@import './styles/fontOptimization.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* 弹出层动画定义 */
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes zoom-in {
  from { transform: scale(0.95); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes zoom-out {
  from { transform: scale(1); opacity: 1; }
  to { transform: scale(0.95); opacity: 0; }
}

/* 动画工具类 */
.animate-in {
  animation-fill-mode: both;
}

.animate-out {
  animation-fill-mode: both;
}

.fade-in-0 {
  animation-name: fade-in;
}

.fade-out-0 {
  animation-name: fade-out;
}

.zoom-in-95 {
  animation-name: zoom-in;
}

.zoom-out-95 {
  animation-name: zoom-out;
}

/* 动画时长类 */
.duration-200 {
  animation-duration: 200ms;
}

/* 滚动动画类 */
.scroll-smooth {
  scroll-behavior: smooth;
}

/* 滚动条动画 */
.scrollbar-smooth::-webkit-scrollbar {
  width: 8px;
  height: 8px;
  transition: all 0.3s ease;
}

.scrollbar-smooth::-webkit-scrollbar-track {
  background: var(--theme-surface);
  transition: all 0.3s ease;
}

.scrollbar-smooth::-webkit-scrollbar-thumb {
  background: var(--theme-border);
  border-radius: 4px;
  transition: all 0.3s ease;
}

.scrollbar-smooth::-webkit-scrollbar-thumb:hover {
  background: var(--theme-text-muted);
  transform: scale(1.1);
}

/* 隐藏滚动条但保持滚动功能 */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* 平滑滚动容器 */
.smooth-scroll-container {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* 滚动时的淡入效果 */
.scroll-fade-in {
  animation: scrollFadeIn 0.6s ease-out;
}

@keyframes scrollFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 主题变量定义 */
:root {
  /* 浅色主题 - 纸张质感设计 */
  --theme-bg: #fafafa; /* 外层背景色 */
  --theme-surface: #ffffff; /* 内容区域背景色 - 纸张白色 */
  --theme-elevated: #ffffff;
  --theme-text: #0f172a;
  --theme-text-secondary: #334155;
  --theme-text-muted: #64748b;
  --theme-border: #e5e7eb;
  --theme-primary: #3b82f6;
  --theme-primary-hover: #2563eb;
  --theme-secondary: #64748b;
  --theme-accent: #8b5cf6;
  
  /* 状态颜色 */
  --theme-success: #10b981;
  --theme-warning: #f59e0b;
  --theme-error: #ef4444;
  --theme-info: #06b6d4;
  
  /* 卡片全局设置变量 - 带回退值 */
  --card-global-bg: var(--theme-surface);
  --card-global-border: var(--theme-border);
  --card-global-border-width: 1px;
  --card-global-border-radius: 8px;
  --card-global-shadow: sm;
  --card-global-text: var(--theme-text);
  --card-global-text-secondary: var(--theme-text-secondary);
  --card-global-link: var(--theme-primary);
}

/* 深色主题 */
html.dark {
  --theme-bg: #141415;
  --theme-surface: #1a1a1b;
  --theme-elevated: #1f1f1f;
  --theme-text: #f1f5f9;
  --theme-text-secondary: #cbd5e1;
  --theme-text-muted: #94a3b8;
  --theme-border: #475569;
  --theme-primary: #3b82f6;
  --theme-primary-hover: #2563eb;
  --theme-secondary: #64748b;
  --theme-accent: #8b5cf6;
  
  /* 状态颜色 */
  --theme-success: #10b981;
  --theme-warning: #f59e0b;
  --theme-error: #ef4444;
  --theme-info: #06b6d4;
}

/* 基础样式 */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--theme-bg);
  color: var(--theme-text);
  transition: background-color 0.3s ease, color 0.3s ease;
  font-size: 16px; /* 桌面设备基础字体大小 */
  line-height: 1.6; /* 桌面设备基础行高 */
}

/* 响应式字体大小优化 */
/* 移动设备字体适配 (≤768px) */
@media (max-width: 768px) {
  body {
    font-size: 14px; /* 移动设备字体大小缩放为桌面的87.5% */
    line-height: 1.5; /* 移动设备行高略小 */
  }
  
  /* 标题字体大小适配 */
  h1 { font-size: 1.75rem; } /* 28px，桌面32px的87.5% */
  h2 { font-size: 1.5rem; }  /* 24px，桌面28px的85.7% */

/* 移除所有标签相关输入框的焦点轮廓 */
input:focus,
input[type="text"]:focus,
input[type="search"]:focus,
input[type="color"]:focus,
textarea:focus,
button:focus,
[role="button"]:focus,
[tabindex]:focus {
  outline: none !important;
  box-shadow: none !important;
  ring: none !important;
  ring-offset: none !important;
  ring-color: transparent !important;
  ring-width: 0 !important;
  ring-offset-width: 0 !important;
  border-color: inherit !important;
}

/* 特别针对标签相关的输入框 */
.tag-input:focus,
.tag-search:focus,
.tag-filter:focus,
.tag-manager input:focus,
.tag-picker input:focus,
.tag-selector input:focus {
  outline: none !important;
  box-shadow: none !important;
  ring: none !important;
  border-color: inherit !important;
}
  h3 { font-size: 1.25rem; } /* 20px，桌面24px的83.3% */
  h4 { font-size: 1.125rem; } /* 18px，桌面20px的90% */
  h5 { font-size: 1rem; }    /* 16px，桌面18px的88.9% */
  h6 { font-size: 0.875rem; } /* 14px，桌面16px的87.5% */
  
  /* 段落文本 */
  p { font-size: 1rem; } /* 14px */
  
  /* 小文本 */
  .text-sm { font-size: 0.875rem; } /* 12.25px */
  .text-xs { font-size: 0.75rem; }  /* 10.5px */
  
  /* 按钮和表单元素 */
  button, input, textarea, select {
    font-size: 1rem; /* 14px */
  }
  
  /* 导航和菜单项 */
  .nav-item, .menu-item {
    font-size: 1rem; /* 14px */
  }
  
  /* 卡片和面板内容 */
  .card-content, .panel-content {
    font-size: 1rem; /* 14px */
  }
}

/* 特别小的手机设备适配 (≤400px) */
@media (max-width: 400px) {
  body {
    font-size: 12px; /* 小屏幕设备字体大小缩放为桌面的75% */
    line-height: 1.4; /* 小屏幕设备行高进一步压缩 */
  }
  
  /* 标题字体大小适配 */
  h1 { font-size: 1.5rem; }  /* 18px，桌面32px的56.3% */
  h2 { font-size: 1.25rem; } /* 15px，桌面28px的53.6% */
  h3 { font-size: 1.125rem; } /* 13.5px，桌面24px的56.3% */
  h4 { font-size: 1rem; }    /* 12px，桌面20px的60% */
  h5 { font-size: 0.875rem; } /* 10.5px，桌面18px的58.3% */
  h6 { font-size: 0.75rem; }  /* 9px，桌面16px的56.3% */
  
  /* 段落文本 */
  p { font-size: 0.875rem; } /* 10.5px */
  
  /* 小文本 */
  .text-sm { font-size: 0.75rem; }  /* 9px */
  .text-xs { font-size: 0.625rem; } /* 7.5px */
  
  /* 按钮和表单元素 */
  button, input, textarea, select {
    font-size: 0.875rem; /* 10.5px */
  }
  
  /* 导航和菜单项 */
  .nav-item, .menu-item {
    font-size: 0.875rem; /* 10.5px */
  }
  
  /* 卡片和面板内容 */
  .card-content, .panel-content {
    font-size: 0.875rem; /* 10.5px */
  }
}

/* 平板设备适配 (769px - 1024px) */
@media (min-width: 769px) and (max-width: 1024px) {
  body {
    font-size: 15px; /* 平板设备字体大小缩放为桌面的93.8% */
    line-height: 1.55; /* 平板设备行高适中 */
  }
  
  /* 标题字体大小适配 */
  h1 { font-size: 2rem; }    /* 30px，桌面32px的93.8% */
  h2 { font-size: 1.625rem; } /* 24.4px，桌面28px的87.1% */
  h3 { font-size: 1.375rem; } /* 20.6px，桌面24px的85.8% */
  h4 { font-size: 1.125rem; } /* 16.9px，桌面20px的84.5% */
  h5 { font-size: 1rem; }    /* 15px，桌面18px的83.3% */
  h6 { font-size: 0.875rem; } /* 13.1px，桌面16px的81.9% */
}

/* 大屏幕设备适配 (≥1920px) */
@media (min-width: 1920px) {
  body {
    font-size: 18px; /* 大屏幕设备字体大小放大为桌面的112.5% */
    line-height: 1.65; /* 大屏幕设备行高略大 */
  }
  
  /* 标题字体大小适配 */
  h1 { font-size: 2.25rem; } /* 40.5px，桌面32px的126.6% */
  h2 { font-size: 1.875rem; } /* 33.8px，桌面28px的120.7% */
  h3 { font-size: 1.625rem; } /* 29.3px，桌面24px的122.1% */
  h4 { font-size: 1.375rem; } /* 24.8px，桌面20px的124% */
  h5 { font-size: 1.25rem; }  /* 22.5px，桌面18px的125% */
  h6 { font-size: 1.125rem; } /* 20.3px，桌面16px的126.9% */
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

/* 滚动条样式 - 默认隐藏 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
  display: none;
}

::-webkit-scrollbar-track {
  background: var(--theme-surface);
}

::-webkit-scrollbar-thumb {
  background: var(--theme-border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--theme-text-muted);
}

/* 为需要显示滚动条的元素提供样式 */
.show-scrollbar::-webkit-scrollbar {
  display: block;
}

/* 选择文本样式 */
::selection {
  background-color: var(--theme-primary);
  color: white;
}

/* 焦点样式 - 移除蓝色边框 */
*:focus {
  outline: none;
  box-shadow: none;
}

/* 为可访问性保留键盘导航的焦点样式 */
*:focus-visible {
  outline: 2px solid var(--theme-primary);
  outline-offset: 2px;
}

/* 输入框样式 */
input, textarea, select {
  background-color: var(--theme-surface);
  border: 1px solid var(--theme-border);
  color: var(--theme-text);
}

input:focus, textarea:focus, select:focus {
  border-color: var(--theme-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* 按钮样式 */
button {
  transition: all 0.2s ease;
}

/* 链接样式 */
a {
  color: var(--theme-primary);
  text-decoration: none;
}

a:hover {
  color: var(--theme-primary-hover);
  text-decoration: underline;
}

/* 笔记编辑器自定义样式 */
.note-editor-custom-bg {
  background-color: var(--theme-surface) !important;
}

.note-toolbar-custom-bg {
  background-color: var(--theme-surface) !important;
}

.note-editor-custom-text {
  color: var(--theme-text) !important;
}
// ç»Ÿä¸€çš„å¿ƒæƒ…å¤©æ°”é…ç½®
export const moodWeatherConfig = {
  // æ‰€æœ‰å¿ƒæƒ…çš„é›†åˆ
  allMoods: [
    { emoji: 'ğŸ˜Š', name: 'å¼€å¿ƒ', description: 'å¿ƒæƒ…æ„‰æ‚¦' },
    { emoji: 'ğŸ˜¢', name: 'éš¾è¿‡', description: 'æ„Ÿåˆ°æ‚²ä¼¤' },
    { emoji: 'ğŸ˜¡', name: 'ç”Ÿæ°”', description: 'æ„¤æ€’ä¸æ»¡' },
    { emoji: 'ğŸ˜´', name: 'å›°å€¦', description: 'æƒ³è¦ç¡è§‰' },
    { emoji: 'ğŸ¤”', name: 'æ€è€ƒ', description: 'æ·±åº¦æ€è€ƒ' },
    { emoji: 'ğŸ˜', name: 'å–œçˆ±', description: 'éå¸¸å–œæ¬¢' },
    { emoji: 'ğŸ˜', name: 'é…·', description: 'æ„Ÿè§‰å¾ˆé…·' },
    { emoji: 'ğŸ¤—', name: 'æ‹¥æŠ±', description: 'æƒ³è¦æ‹¥æŠ±' },
    { emoji: 'ğŸ˜…', name: 'å°´å°¬', description: 'æ„Ÿåˆ°å°´å°¬' },
    { emoji: 'ğŸ˜­', name: 'å¤§å“­', description: 'éå¸¸ä¼¤å¿ƒ' },
    { emoji: 'ğŸ¥³', name: 'åº†ç¥', description: 'å€¼å¾—åº†ç¥' },
    { emoji: 'ğŸ˜Œ', name: 'æ»¡è¶³', description: 'å†…å¿ƒæ»¡è¶³' }
  ],

  // æ‰€æœ‰å¤©æ°”çš„é›†åˆ
  allWeathers: [
    { emoji: 'â˜€ï¸', name: 'æ™´å¤©', description: 'é˜³å…‰æ˜åªš' },
    { emoji: 'â›…', name: 'å¤šäº‘', description: 'äº‘æœµé£˜é£˜' },
    { emoji: 'â˜ï¸', name: 'é˜´å¤©', description: 'å¤©ç©ºé˜´æ²‰' },
    { emoji: 'ğŸŒ§ï¸', name: 'é›¨å¤©', description: 'ä¸‹é›¨äº†' },
    { emoji: 'â›ˆï¸', name: 'é›·é›¨', description: 'é›·ç”µäº¤åŠ ' },
    { emoji: 'ğŸŒ¨ï¸', name: 'é›ªå¤©', description: 'é›ªèŠ±é£èˆ' },
    { emoji: 'ğŸŒªï¸', name: 'å¤§é£', description: 'ç‹‚é£å‘¼å•¸' },
    { emoji: 'ğŸŒˆ', name: 'å½©è™¹', description: 'é›¨åå½©è™¹' },
    { emoji: 'ğŸŒ™', name: 'å¤œæ™š', description: 'å¤œå¹•é™ä¸´' },
    { emoji: 'â­', name: 'æ˜Ÿç©º', description: 'ç¹æ˜Ÿç‚¹ç‚¹' },
    { emoji: 'ğŸŒ…', name: 'æ—¥å‡º', description: 'æœé˜³åˆå‡' },
    { emoji: 'ğŸŒ„', name: 'æ—¥è½', description: 'å¤•é˜³è¥¿ä¸‹' },
    { emoji: 'ğŸŒ«ï¸', name: 'é›¾å¤©', description: 'é›¾æ°”æœ¦èƒ§' },
    { emoji: 'ğŸŒŠ', name: 'æµ·æµª', description: 'æ³¢æ¶›æ±¹æ¶Œ' },
    { emoji: 'â„ï¸', name: 'é›ªèŠ±', description: 'é›ªèŠ±çº·é£' },
    { emoji: 'ğŸ’¨', name: 'å¤§é£', description: 'é£åŠ›å¼ºåŠ²' },
    { emoji: 'ğŸŒ€', name: 'å°é£', description: 'å°é£æ¥è¢­' },
    { emoji: 'ğŸŒ¡ï¸', name: 'é«˜æ¸©', description: 'å¤©æ°”ç‚çƒ­' },
    { emoji: 'ğŸ§Š', name: 'ä¸¥å¯’', description: 'å¤©æ°”å¯’å†·' },
    { emoji: 'ğŸŒ›', name: 'æ–°æœˆ', description: 'æ–°æœˆå¦‚é’©' },
    { emoji: 'ğŸŒŒ', name: 'æ˜Ÿç©º', description: 'é“¶æ²³ç’€ç’¨' },
    { emoji: 'ğŸŒ†', name: 'é»„æ˜', description: 'é»„æ˜æ—¶åˆ†' },
    { emoji: 'ğŸŒ‡', name: 'æ—¥è½', description: 'è½æ—¥ä½™æ™–' },
    { emoji: 'ğŸŒƒ', name: 'å¤œæ™š', description: 'å¤œè‰²æ·±æ²‰' }
  ],

  // åˆ›å»ºå¿ƒæƒ…æ˜ å°„è¡¨ï¼ˆç”¨äºå¿«é€ŸæŸ¥æ‰¾ï¼‰
  get moodMap() {
    const map = {};
    this.allMoods.forEach(mood => {
      map[mood.emoji] = mood;
    });
    return map;
  },

  // åˆ›å»ºå¤©æ°”æ˜ å°„è¡¨ï¼ˆç”¨äºå¿«é€ŸæŸ¥æ‰¾ï¼‰
  get weatherMap() {
    const map = {};
    this.allWeathers.forEach(weather => {
      map[weather.emoji] = weather;
    });
    return map;
  },

  // è§£æå†…å®¹ä¸­çš„å¿ƒæƒ…å’Œå¤©æ°”
  parseContentForMoodAndWeather(content) {
    if (!content) return { mood: null, weather: null };

    let foundMood = null;
    let foundWeather = null;

    // æŸ¥æ‰¾å¿ƒæƒ…
    for (const mood of this.allMoods) {
      const pattern = `${mood.emoji} ${mood.name}`;
      if (content.includes(pattern)) {
        foundMood = mood;
        break; // åªå–ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„å¿ƒæƒ…
      }
    }

    // æŸ¥æ‰¾å¤©æ°”
    for (const weather of this.allWeathers) {
      const pattern = `${weather.emoji} ${weather.name}`;
      if (content.includes(pattern)) {
        foundWeather = weather;
        break; // åªå–ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„å¤©æ°”
      }
    }

    return { mood: foundMood, weather: foundWeather };
  },

  // ç§»é™¤å†…å®¹ä¸­çš„æ‰€æœ‰å¿ƒæƒ…å’Œå¤©æ°”
  removeAllMoodAndWeather(content) {
    if (!content) return '';

    let cleanContent = content;

    // ç§»é™¤æ‰€æœ‰å¿ƒæƒ…
    for (const mood of this.allMoods) {
      const pattern = `${mood.emoji} ${mood.name}`;
      cleanContent = cleanContent.replace(new RegExp(pattern, 'g'), '');
    }

    // ç§»é™¤æ‰€æœ‰å¤©æ°”
    for (const weather of this.allWeathers) {
      const pattern = `${weather.emoji} ${weather.name}`;
      cleanContent = cleanContent.replace(new RegExp(pattern, 'g'), '');
    }

    return cleanContent.trim();
  },

  // ç§»é™¤å†…å®¹ä¸­çš„æ‰€æœ‰å¿ƒæƒ…ï¼ˆä¿ç•™å¤©æ°”ï¼‰
  removeAllMood(content) {
    if (!content) return '';

    let cleanContent = content;

    // ç§»é™¤æ‰€æœ‰å¿ƒæƒ…
    for (const mood of this.allMoods) {
      const pattern = `${mood.emoji} ${mood.name}`;
      cleanContent = cleanContent.replace(new RegExp(pattern, 'g'), '');
    }

    return cleanContent.trim();
  },

  // ç§»é™¤å†…å®¹ä¸­çš„æ‰€æœ‰å¤©æ°”ï¼ˆä¿ç•™å¿ƒæƒ…ï¼‰
  removeAllWeather(content) {
    if (!content) return '';

    let cleanContent = content;

    // ç§»é™¤æ‰€æœ‰å¤©æ°”
    for (const weather of this.allWeathers) {
      const pattern = `${weather.emoji} ${weather.name}`;
      cleanContent = cleanContent.replace(new RegExp(pattern, 'g'), '');
    }

    return cleanContent.trim();
  },

  // æ·»åŠ å¿ƒæƒ…åˆ°å†…å®¹å¼€å¤´ï¼ˆä¿ç•™å¤©æ°”ï¼‰
  addMoodToContent(content, mood) {
    // å…ˆç§»é™¤æ‰€æœ‰å¿ƒæƒ…ï¼Œä½†ä¿ç•™å¤©æ°”
    let workingContent = this.removeAllMood(content);
    const moodText = `${mood.emoji} ${mood.name}`;
    
    // æŸ¥æ‰¾æ˜¯å¦æœ‰å¤©æ°”
    let hasWeather = false;
    let weatherPattern = '';
    for (const weather of this.allWeathers) {
      const pattern = `${weather.emoji} ${weather.name}`;
      if (workingContent.includes(pattern)) {
        hasWeather = true;
        weatherPattern = pattern;
        break;
      }
    }
    
    if (hasWeather) {
      // å¦‚æœæœ‰å¤©æ°”ï¼Œåœ¨å¤©æ°”å‰æ·»åŠ å¿ƒæƒ…
      workingContent = workingContent.replace(weatherPattern, `${moodText} ${weatherPattern}`);
    } else {
      // å¦‚æœæ²¡æœ‰å¤©æ°”ï¼Œåœ¨å†…å®¹å¼€å¤´æ·»åŠ å¿ƒæƒ…
      workingContent = workingContent.trim();
      workingContent = workingContent ? `${moodText} ${workingContent}` : moodText;
    }
    
    return workingContent.trim();
  },

  // æ·»åŠ å¤©æ°”åˆ°å†…å®¹ï¼ˆä¿ç•™å¿ƒæƒ…ï¼‰
  addWeatherToContent(content, weather) {
    // å…ˆç§»é™¤æ‰€æœ‰å¤©æ°”ï¼Œä½†ä¿ç•™å¿ƒæƒ…
    let workingContent = this.removeAllWeather(content);
    const weatherText = `${weather.emoji} ${weather.name}`;
    
    // æŸ¥æ‰¾æ˜¯å¦æœ‰å¿ƒæƒ…
    let hasMood = false;
    let moodPattern = '';
    for (const mood of this.allMoods) {
      const pattern = `${mood.emoji} ${mood.name}`;
      if (workingContent.includes(pattern)) {
        hasMood = true;
        moodPattern = pattern;
        break;
      }
    }
    
    if (hasMood) {
      // å¦‚æœæœ‰å¿ƒæƒ…ï¼Œåœ¨å¿ƒæƒ…åæ·»åŠ å¤©æ°”
      workingContent = workingContent.replace(moodPattern, `${moodPattern} ${weatherText}`);
    } else {
      // å¦‚æœæ²¡æœ‰å¿ƒæƒ…ï¼Œåœ¨å†…å®¹å¼€å¤´æ·»åŠ å¤©æ°”
      workingContent = workingContent.trim();
      workingContent = workingContent ? `${weatherText} ${workingContent}` : weatherText;
    }
    
    return workingContent.trim();
  }
};

export default moodWeatherConfig;
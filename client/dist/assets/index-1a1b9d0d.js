function NI(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ra(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function SI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var fE={exports:{}},Bh={},hE={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p1=Symbol.for("react.element"),kI=Symbol.for("react.portal"),AI=Symbol.for("react.fragment"),OI=Symbol.for("react.strict_mode"),RI=Symbol.for("react.profiler"),II=Symbol.for("react.provider"),jI=Symbol.for("react.context"),LI=Symbol.for("react.forward_ref"),DI=Symbol.for("react.suspense"),MI=Symbol.for("react.memo"),PI=Symbol.for("react.lazy"),kv=Symbol.iterator;function FI(e){return e===null||typeof e!="object"?null:(e=kv&&e[kv]||e["@@iterator"],typeof e=="function"?e:null)}var mE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pE=Object.assign,gE={};function uc(e,t,n){this.props=e,this.context=t,this.refs=gE,this.updater=n||mE}uc.prototype.isReactComponent={};uc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};uc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yE(){}yE.prototype=uc.prototype;function ax(e,t,n){this.props=e,this.context=t,this.refs=gE,this.updater=n||mE}var lx=ax.prototype=new yE;lx.constructor=ax;pE(lx,uc.prototype);lx.isPureReactComponent=!0;var Av=Array.isArray,xE=Object.prototype.hasOwnProperty,cx={current:null},vE={key:!0,ref:!0,__self:!0,__source:!0};function bE(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)xE.call(t,r)&&!vE.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:p1,type:e,key:o,ref:i,props:s,_owner:cx.current}}function BI(e,t){return{$$typeof:p1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ux(e){return typeof e=="object"&&e!==null&&e.$$typeof===p1}function zI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ov=/\/+/g;function tp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zI(""+e.key):t.toString(36)}function ff(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case p1:case kI:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+tp(i,0):r,Av(s)?(n="",e!=null&&(n=e.replace(Ov,"$&/")+"/"),ff(s,t,n,"",function(f){return f})):s!=null&&(ux(s)&&(s=BI(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Ov,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",Av(e))for(var l=0;l<e.length;l++){o=e[l];var u=r+tp(o,l);i+=ff(o,t,n,u,s)}else if(u=FI(e),typeof u=="function")for(e=u.call(e),l=0;!(o=e.next()).done;)o=o.value,u=r+tp(o,l++),i+=ff(o,t,n,u,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Td(e,t,n){if(e==null)return e;var r=[],s=0;return ff(e,r,"","",function(o){return t.call(n,o,s++)}),r}function UI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Nr={current:null},hf={transition:null},HI={ReactCurrentDispatcher:Nr,ReactCurrentBatchConfig:hf,ReactCurrentOwner:cx};function wE(){throw Error("act(...) is not supported in production builds of React.")}At.Children={map:Td,forEach:function(e,t,n){Td(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Td(e,function(){t++}),t},toArray:function(e){return Td(e,function(t){return t})||[]},only:function(e){if(!ux(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};At.Component=uc;At.Fragment=AI;At.Profiler=RI;At.PureComponent=ax;At.StrictMode=OI;At.Suspense=DI;At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HI;At.act=wE;At.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=pE({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=cx.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)xE.call(t,u)&&!vE.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:p1,type:e.type,key:s,ref:o,props:r,_owner:i}};At.createContext=function(e){return e={$$typeof:jI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:II,_context:e},e.Consumer=e};At.createElement=bE;At.createFactory=function(e){var t=bE.bind(null,e);return t.type=e,t};At.createRef=function(){return{current:null}};At.forwardRef=function(e){return{$$typeof:LI,render:e}};At.isValidElement=ux;At.lazy=function(e){return{$$typeof:PI,_payload:{_status:-1,_result:e},_init:UI}};At.memo=function(e,t){return{$$typeof:MI,type:e,compare:t===void 0?null:t}};At.startTransition=function(e){var t=hf.transition;hf.transition={};try{e()}finally{hf.transition=t}};At.unstable_act=wE;At.useCallback=function(e,t){return Nr.current.useCallback(e,t)};At.useContext=function(e){return Nr.current.useContext(e)};At.useDebugValue=function(){};At.useDeferredValue=function(e){return Nr.current.useDeferredValue(e)};At.useEffect=function(e,t){return Nr.current.useEffect(e,t)};At.useId=function(){return Nr.current.useId()};At.useImperativeHandle=function(e,t,n){return Nr.current.useImperativeHandle(e,t,n)};At.useInsertionEffect=function(e,t){return Nr.current.useInsertionEffect(e,t)};At.useLayoutEffect=function(e,t){return Nr.current.useLayoutEffect(e,t)};At.useMemo=function(e,t){return Nr.current.useMemo(e,t)};At.useReducer=function(e,t,n){return Nr.current.useReducer(e,t,n)};At.useRef=function(e){return Nr.current.useRef(e)};At.useState=function(e){return Nr.current.useState(e)};At.useSyncExternalStore=function(e,t,n){return Nr.current.useSyncExternalStore(e,t,n)};At.useTransition=function(){return Nr.current.useTransition()};At.version="18.3.1";hE.exports=At;var N=hE.exports;const St=ra(N),$I=NI({__proto__:null,default:St},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WI=N,GI=Symbol.for("react.element"),KI=Symbol.for("react.fragment"),YI=Object.prototype.hasOwnProperty,VI=WI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qI={key:!0,ref:!0,__self:!0,__source:!0};function TE(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)YI.call(t,r)&&!qI.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:GI,type:e,key:o,ref:i,props:s,_owner:VI.current}}Bh.Fragment=KI;Bh.jsx=TE;Bh.jsxs=TE;fE.exports=Bh;var c=fE.exports,kg={},EE={exports:{}},ls={},CE={exports:{}},_E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(G,H){var U=G.length;G.push(H);e:for(;0<U;){var ee=U-1>>>1,te=G[ee];if(0<s(te,H))G[ee]=H,G[U]=te,U=ee;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var H=G[0],U=G.pop();if(U!==H){G[0]=U;e:for(var ee=0,te=G.length,V=te>>>1;ee<V;){var xe=2*(ee+1)-1,we=G[xe],Le=xe+1,Ve=G[Le];if(0>s(we,U))Le<te&&0>s(Ve,we)?(G[ee]=Ve,G[Le]=U,ee=Le):(G[ee]=we,G[xe]=U,ee=xe);else if(Le<te&&0>s(Ve,U))G[ee]=Ve,G[Le]=U,ee=Le;else break e}}return H}function s(G,H){var U=G.sortIndex-H.sortIndex;return U!==0?U:G.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var u=[],f=[],m=1,h=null,g=3,p=!1,b=!1,v=!1,T=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var H=n(f);H!==null;){if(H.callback===null)r(f);else if(H.startTime<=G)r(f),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(f)}}function I(G){if(v=!1,w(G),!b)if(n(u)!==null)b=!0,Ne(j);else{var H=n(f);H!==null&&$(I,H.startTime-G)}}function j(G,H){b=!1,v&&(v=!1,y(k),k=-1),p=!0;var U=g;try{for(w(H),h=n(u);h!==null&&(!(h.expirationTime>H)||G&&!Y());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,g=h.priorityLevel;var te=ee(h.expirationTime<=H);H=e.unstable_now(),typeof te=="function"?h.callback=te:h===n(u)&&r(u),w(H)}else r(u);h=n(u)}if(h!==null)var V=!0;else{var xe=n(f);xe!==null&&$(I,xe.startTime-H),V=!1}return V}finally{h=null,g=U,p=!1}}var _=!1,C=null,k=-1,R=5,P=-1;function Y(){return!(e.unstable_now()-P<R)}function z(){if(C!==null){var G=e.unstable_now();P=G;var H=!0;try{H=C(!0,G)}finally{H?Q():(_=!1,C=null)}}else _=!1}var Q;if(typeof E=="function")Q=function(){E(z)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,le=M.port2;M.port1.onmessage=z,Q=function(){le.postMessage(null)}}else Q=function(){T(z,0)};function Ne(G){C=G,_||(_=!0,Q())}function $(G,H){k=T(function(){G(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,Ne(j))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(G){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var U=g;g=H;try{return G()}finally{g=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,H){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var U=g;g=G;try{return H()}finally{g=U}},e.unstable_scheduleCallback=function(G,H,U){var ee=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?ee+U:ee):U=ee,G){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=U+te,G={id:m++,callback:H,priorityLevel:G,startTime:U,expirationTime:te,sortIndex:-1},U>ee?(G.sortIndex=U,t(f,G),n(u)===null&&G===n(f)&&(v?(y(k),k=-1):v=!0,$(I,U-ee))):(G.sortIndex=te,t(u,G),b||p||(b=!0,Ne(j))),G},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(G){var H=g;return function(){var U=g;g=H;try{return G.apply(this,arguments)}finally{g=U}}}})(_E);CE.exports=_E;var QI=CE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XI=N,as=QI;function Pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var NE=new Set,Du={};function Va(e,t){Zl(e,t),Zl(e+"Capture",t)}function Zl(e,t){for(Du[e]=t,e=0;e<t.length;e++)NE.add(t[e])}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ag=Object.prototype.hasOwnProperty,JI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rv={},Iv={};function ZI(e){return Ag.call(Iv,e)?!0:Ag.call(Rv,e)?!1:JI.test(e)?Iv[e]=!0:(Rv[e]=!0,!1)}function ej(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tj(e,t,n,r){if(t===null||typeof t>"u"||ej(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sr(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){sr[e]=new Sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];sr[t]=new Sr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){sr[e]=new Sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){sr[e]=new Sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){sr[e]=new Sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){sr[e]=new Sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){sr[e]=new Sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){sr[e]=new Sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){sr[e]=new Sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var dx=/[\-:]([a-z])/g;function fx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dx,fx);sr[t]=new Sr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dx,fx);sr[t]=new Sr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dx,fx);sr[t]=new Sr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){sr[e]=new Sr(e,1,!1,e.toLowerCase(),null,!1,!1)});sr.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){sr[e]=new Sr(e,1,!1,e.toLowerCase(),null,!0,!0)});function hx(e,t,n,r){var s=sr.hasOwnProperty(t)?sr[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tj(t,n,s,r)&&(n=null),r||s===null?ZI(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var li=XI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ed=Symbol.for("react.element"),Sl=Symbol.for("react.portal"),kl=Symbol.for("react.fragment"),mx=Symbol.for("react.strict_mode"),Og=Symbol.for("react.profiler"),SE=Symbol.for("react.provider"),kE=Symbol.for("react.context"),px=Symbol.for("react.forward_ref"),Rg=Symbol.for("react.suspense"),Ig=Symbol.for("react.suspense_list"),gx=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),AE=Symbol.for("react.offscreen"),jv=Symbol.iterator;function Hc(e){return e===null||typeof e!="object"?null:(e=jv&&e[jv]||e["@@iterator"],typeof e=="function"?e:null)}var yn=Object.assign,np;function au(e){if(np===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);np=t&&t[1]||""}return`
`+np+e}var rp=!1;function sp(e,t){if(!e||rp)return"";rp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var u=`
`+s[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=l);break}}}finally{rp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?au(e):""}function nj(e){switch(e.tag){case 5:return au(e.type);case 16:return au("Lazy");case 13:return au("Suspense");case 19:return au("SuspenseList");case 0:case 2:case 15:return e=sp(e.type,!1),e;case 11:return e=sp(e.type.render,!1),e;case 1:return e=sp(e.type,!0),e;default:return""}}function jg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kl:return"Fragment";case Sl:return"Portal";case Og:return"Profiler";case mx:return"StrictMode";case Rg:return"Suspense";case Ig:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kE:return(e.displayName||"Context")+".Consumer";case SE:return(e._context.displayName||"Context")+".Provider";case px:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gx:return t=e.displayName||null,t!==null?t:jg(e.type)||"Memo";case Ii:t=e._payload,e=e._init;try{return jg(e(t))}catch{}}return null}function rj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jg(t);case 8:return t===mx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function OE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sj(e){var t=OE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cd(e){e._valueTracker||(e._valueTracker=sj(e))}function RE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=OE(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function $f(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lg(e,t){var n=t.checked;return yn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Lv(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Zi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function IE(e,t){t=t.checked,t!=null&&hx(e,"checked",t,!1)}function Dg(e,t){IE(e,t);var n=Zi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Mg(e,t.type,Zi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Dv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Mg(e,t,n){(t!=="number"||$f(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var lu=Array.isArray;function Hl(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Zi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Pg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return yn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Pe(92));if(lu(n)){if(1<n.length)throw Error(Pe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zi(n)}}function jE(e,t){var n=Zi(t.value),r=Zi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Pv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function LE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?LE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _d,DE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_d=_d||document.createElement("div"),_d.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_d.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var pu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oj=["Webkit","ms","Moz","O"];Object.keys(pu).forEach(function(e){oj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pu[t]=pu[e]})});function ME(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||pu.hasOwnProperty(e)&&pu[e]?(""+t).trim():t+"px"}function PE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ME(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ij=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bg(e,t){if(t){if(ij[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pe(62))}}function zg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ug=null;function yx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hg=null,$l=null,Wl=null;function Fv(e){if(e=x1(e)){if(typeof Hg!="function")throw Error(Pe(280));var t=e.stateNode;t&&(t=Wh(t),Hg(e.stateNode,e.type,t))}}function FE(e){$l?Wl?Wl.push(e):Wl=[e]:$l=e}function BE(){if($l){var e=$l,t=Wl;if(Wl=$l=null,Fv(e),t)for(e=0;e<t.length;e++)Fv(t[e])}}function zE(e,t){return e(t)}function UE(){}var op=!1;function HE(e,t,n){if(op)return e(t,n);op=!0;try{return zE(e,t,n)}finally{op=!1,($l!==null||Wl!==null)&&(UE(),BE())}}function Pu(e,t){var n=e.stateNode;if(n===null)return null;var r=Wh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Pe(231,t,typeof n));return n}var $g=!1;if(ri)try{var $c={};Object.defineProperty($c,"passive",{get:function(){$g=!0}}),window.addEventListener("test",$c,$c),window.removeEventListener("test",$c,$c)}catch{$g=!1}function aj(e,t,n,r,s,o,i,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(m){this.onError(m)}}var gu=!1,Wf=null,Gf=!1,Wg=null,lj={onError:function(e){gu=!0,Wf=e}};function cj(e,t,n,r,s,o,i,l,u){gu=!1,Wf=null,aj.apply(lj,arguments)}function uj(e,t,n,r,s,o,i,l,u){if(cj.apply(this,arguments),gu){if(gu){var f=Wf;gu=!1,Wf=null}else throw Error(Pe(198));Gf||(Gf=!0,Wg=f)}}function qa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function $E(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bv(e){if(qa(e)!==e)throw Error(Pe(188))}function dj(e){var t=e.alternate;if(!t){if(t=qa(e),t===null)throw Error(Pe(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Bv(s),e;if(o===r)return Bv(s),t;o=o.sibling}throw Error(Pe(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i)throw Error(Pe(189))}}if(n.alternate!==r)throw Error(Pe(190))}if(n.tag!==3)throw Error(Pe(188));return n.stateNode.current===n?e:t}function WE(e){return e=dj(e),e!==null?GE(e):null}function GE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=GE(e);if(t!==null)return t;e=e.sibling}return null}var KE=as.unstable_scheduleCallback,zv=as.unstable_cancelCallback,fj=as.unstable_shouldYield,hj=as.unstable_requestPaint,Cn=as.unstable_now,mj=as.unstable_getCurrentPriorityLevel,xx=as.unstable_ImmediatePriority,YE=as.unstable_UserBlockingPriority,Kf=as.unstable_NormalPriority,pj=as.unstable_LowPriority,VE=as.unstable_IdlePriority,zh=null,Eo=null;function gj(e){if(Eo&&typeof Eo.onCommitFiberRoot=="function")try{Eo.onCommitFiberRoot(zh,e,void 0,(e.current.flags&128)===128)}catch{}}var Js=Math.clz32?Math.clz32:vj,yj=Math.log,xj=Math.LN2;function vj(e){return e>>>=0,e===0?32:31-(yj(e)/xj|0)|0}var Nd=64,Sd=4194304;function cu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~s;l!==0?r=cu(l):(o&=i,o!==0&&(r=cu(o)))}else i=n&~s,i!==0?r=cu(i):o!==0&&(r=cu(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Js(t),s=1<<n,r|=e[n],t&=~s;return r}function bj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Js(o),l=1<<i,u=s[i];u===-1?(!(l&n)||l&r)&&(s[i]=bj(l,t)):u<=t&&(e.expiredLanes|=l),o&=~l}}function Gg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qE(){var e=Nd;return Nd<<=1,!(Nd&4194240)&&(Nd=64),e}function ip(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function g1(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Js(t),e[t]=n}function Tj(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Js(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function vx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Js(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Kt=0;function QE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var XE,bx,JE,ZE,e8,Kg=!1,kd=[],Hi=null,$i=null,Wi=null,Fu=new Map,Bu=new Map,Pi=[],Ej="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uv(e,t){switch(e){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":Fu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bu.delete(t.pointerId)}}function Wc(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=x1(t),t!==null&&bx(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Cj(e,t,n,r,s){switch(t){case"focusin":return Hi=Wc(Hi,e,t,n,r,s),!0;case"dragenter":return $i=Wc($i,e,t,n,r,s),!0;case"mouseover":return Wi=Wc(Wi,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Fu.set(o,Wc(Fu.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Bu.set(o,Wc(Bu.get(o)||null,e,t,n,r,s)),!0}return!1}function t8(e){var t=ja(e.target);if(t!==null){var n=qa(t);if(n!==null){if(t=n.tag,t===13){if(t=$E(n),t!==null){e.blockedOn=t,e8(e.priority,function(){JE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ug=r,n.target.dispatchEvent(r),Ug=null}else return t=x1(n),t!==null&&bx(t),e.blockedOn=n,!1;t.shift()}return!0}function Hv(e,t,n){mf(e)&&n.delete(t)}function _j(){Kg=!1,Hi!==null&&mf(Hi)&&(Hi=null),$i!==null&&mf($i)&&($i=null),Wi!==null&&mf(Wi)&&(Wi=null),Fu.forEach(Hv),Bu.forEach(Hv)}function Gc(e,t){e.blockedOn===t&&(e.blockedOn=null,Kg||(Kg=!0,as.unstable_scheduleCallback(as.unstable_NormalPriority,_j)))}function zu(e){function t(s){return Gc(s,e)}if(0<kd.length){Gc(kd[0],e);for(var n=1;n<kd.length;n++){var r=kd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Hi!==null&&Gc(Hi,e),$i!==null&&Gc($i,e),Wi!==null&&Gc(Wi,e),Fu.forEach(t),Bu.forEach(t),n=0;n<Pi.length;n++)r=Pi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pi.length&&(n=Pi[0],n.blockedOn===null);)t8(n),n.blockedOn===null&&Pi.shift()}var Gl=li.ReactCurrentBatchConfig,Vf=!0;function Nj(e,t,n,r){var s=Kt,o=Gl.transition;Gl.transition=null;try{Kt=1,wx(e,t,n,r)}finally{Kt=s,Gl.transition=o}}function Sj(e,t,n,r){var s=Kt,o=Gl.transition;Gl.transition=null;try{Kt=4,wx(e,t,n,r)}finally{Kt=s,Gl.transition=o}}function wx(e,t,n,r){if(Vf){var s=Yg(e,t,n,r);if(s===null)gp(e,t,r,qf,n),Uv(e,r);else if(Cj(s,e,t,n,r))r.stopPropagation();else if(Uv(e,r),t&4&&-1<Ej.indexOf(e)){for(;s!==null;){var o=x1(s);if(o!==null&&XE(o),o=Yg(e,t,n,r),o===null&&gp(e,t,r,qf,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else gp(e,t,r,null,n)}}var qf=null;function Yg(e,t,n,r){if(qf=null,e=yx(r),e=ja(e),e!==null)if(t=qa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=$E(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qf=e,null}function n8(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mj()){case xx:return 1;case YE:return 4;case Kf:case pj:return 16;case VE:return 536870912;default:return 16}default:return 16}}var Bi=null,Tx=null,pf=null;function r8(){if(pf)return pf;var e,t=Tx,n=t.length,r,s="value"in Bi?Bi.value:Bi.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return pf=s.slice(e,1<r?1-r:void 0)}function gf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ad(){return!0}function $v(){return!1}function cs(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ad:$v,this.isPropagationStopped=$v,this}return yn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ad)},persist:function(){},isPersistent:Ad}),t}var dc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ex=cs(dc),y1=yn({},dc,{view:0,detail:0}),kj=cs(y1),ap,lp,Kc,Uh=yn({},y1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kc&&(Kc&&e.type==="mousemove"?(ap=e.screenX-Kc.screenX,lp=e.screenY-Kc.screenY):lp=ap=0,Kc=e),ap)},movementY:function(e){return"movementY"in e?e.movementY:lp}}),Wv=cs(Uh),Aj=yn({},Uh,{dataTransfer:0}),Oj=cs(Aj),Rj=yn({},y1,{relatedTarget:0}),cp=cs(Rj),Ij=yn({},dc,{animationName:0,elapsedTime:0,pseudoElement:0}),jj=cs(Ij),Lj=yn({},dc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dj=cs(Lj),Mj=yn({},dc,{data:0}),Gv=cs(Mj),Pj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Bj[e])?!!t[e]:!1}function Cx(){return zj}var Uj=yn({},y1,{key:function(e){if(e.key){var t=Pj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cx,charCode:function(e){return e.type==="keypress"?gf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hj=cs(Uj),$j=yn({},Uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kv=cs($j),Wj=yn({},y1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cx}),Gj=cs(Wj),Kj=yn({},dc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yj=cs(Kj),Vj=yn({},Uh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qj=cs(Vj),Qj=[9,13,27,32],_x=ri&&"CompositionEvent"in window,yu=null;ri&&"documentMode"in document&&(yu=document.documentMode);var Xj=ri&&"TextEvent"in window&&!yu,s8=ri&&(!_x||yu&&8<yu&&11>=yu),Yv=String.fromCharCode(32),Vv=!1;function o8(e,t){switch(e){case"keyup":return Qj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i8(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Al=!1;function Jj(e,t){switch(e){case"compositionend":return i8(t);case"keypress":return t.which!==32?null:(Vv=!0,Yv);case"textInput":return e=t.data,e===Yv&&Vv?null:e;default:return null}}function Zj(e,t){if(Al)return e==="compositionend"||!_x&&o8(e,t)?(e=r8(),pf=Tx=Bi=null,Al=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return s8&&t.locale!=="ko"?null:t.data;default:return null}}var eL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eL[e.type]:t==="textarea"}function a8(e,t,n,r){FE(r),t=Qf(t,"onChange"),0<t.length&&(n=new Ex("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xu=null,Uu=null;function tL(e){x8(e,0)}function Hh(e){var t=Il(e);if(RE(t))return e}function nL(e,t){if(e==="change")return t}var l8=!1;if(ri){var up;if(ri){var dp="oninput"in document;if(!dp){var Qv=document.createElement("div");Qv.setAttribute("oninput","return;"),dp=typeof Qv.oninput=="function"}up=dp}else up=!1;l8=up&&(!document.documentMode||9<document.documentMode)}function Xv(){xu&&(xu.detachEvent("onpropertychange",c8),Uu=xu=null)}function c8(e){if(e.propertyName==="value"&&Hh(Uu)){var t=[];a8(t,Uu,e,yx(e)),HE(tL,t)}}function rL(e,t,n){e==="focusin"?(Xv(),xu=t,Uu=n,xu.attachEvent("onpropertychange",c8)):e==="focusout"&&Xv()}function sL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hh(Uu)}function oL(e,t){if(e==="click")return Hh(t)}function iL(e,t){if(e==="input"||e==="change")return Hh(t)}function aL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var no=typeof Object.is=="function"?Object.is:aL;function Hu(e,t){if(no(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ag.call(t,s)||!no(e[s],t[s]))return!1}return!0}function Jv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zv(e,t){var n=Jv(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jv(n)}}function u8(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?u8(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function d8(){for(var e=window,t=$f();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$f(e.document)}return t}function Nx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lL(e){var t=d8(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&u8(n.ownerDocument.documentElement,n)){if(r!==null&&Nx(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Zv(n,o);var i=Zv(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cL=ri&&"documentMode"in document&&11>=document.documentMode,Ol=null,Vg=null,vu=null,qg=!1;function e4(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qg||Ol==null||Ol!==$f(r)||(r=Ol,"selectionStart"in r&&Nx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vu&&Hu(vu,r)||(vu=r,r=Qf(Vg,"onSelect"),0<r.length&&(t=new Ex("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ol)))}function Od(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rl={animationend:Od("Animation","AnimationEnd"),animationiteration:Od("Animation","AnimationIteration"),animationstart:Od("Animation","AnimationStart"),transitionend:Od("Transition","TransitionEnd")},fp={},f8={};ri&&(f8=document.createElement("div").style,"AnimationEvent"in window||(delete Rl.animationend.animation,delete Rl.animationiteration.animation,delete Rl.animationstart.animation),"TransitionEvent"in window||delete Rl.transitionend.transition);function $h(e){if(fp[e])return fp[e];if(!Rl[e])return e;var t=Rl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in f8)return fp[e]=t[n];return e}var h8=$h("animationend"),m8=$h("animationiteration"),p8=$h("animationstart"),g8=$h("transitionend"),y8=new Map,t4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sa(e,t){y8.set(e,t),Va(t,[e])}for(var hp=0;hp<t4.length;hp++){var mp=t4[hp],uL=mp.toLowerCase(),dL=mp[0].toUpperCase()+mp.slice(1);sa(uL,"on"+dL)}sa(h8,"onAnimationEnd");sa(m8,"onAnimationIteration");sa(p8,"onAnimationStart");sa("dblclick","onDoubleClick");sa("focusin","onFocus");sa("focusout","onBlur");sa(g8,"onTransitionEnd");Zl("onMouseEnter",["mouseout","mouseover"]);Zl("onMouseLeave",["mouseout","mouseover"]);Zl("onPointerEnter",["pointerout","pointerover"]);Zl("onPointerLeave",["pointerout","pointerover"]);Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Va("onBeforeInput",["compositionend","keypress","textInput","paste"]);Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fL=new Set("cancel close invalid load scroll toggle".split(" ").concat(uu));function n4(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,uj(r,t,void 0,e),e.currentTarget=null}function x8(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;n4(s,l,f),o=u}else for(i=0;i<r.length;i++){if(l=r[i],u=l.instance,f=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;n4(s,l,f),o=u}}}if(Gf)throw e=Wg,Gf=!1,Wg=null,e}function ln(e,t){var n=t[ey];n===void 0&&(n=t[ey]=new Set);var r=e+"__bubble";n.has(r)||(v8(t,e,2,!1),n.add(r))}function pp(e,t,n){var r=0;t&&(r|=4),v8(n,e,r,t)}var Rd="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[Rd]){e[Rd]=!0,NE.forEach(function(n){n!=="selectionchange"&&(fL.has(n)||pp(n,!1,e),pp(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rd]||(t[Rd]=!0,pp("selectionchange",!1,t))}}function v8(e,t,n,r){switch(n8(t)){case 1:var s=Nj;break;case 4:s=Sj;break;default:s=wx}n=s.bind(null,t,n,e),s=void 0,!$g||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function gp(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;i=i.return}for(;l!==null;){if(i=ja(l),i===null)return;if(u=i.tag,u===5||u===6){r=o=i;continue e}l=l.parentNode}}r=r.return}HE(function(){var f=o,m=yx(n),h=[];e:{var g=y8.get(e);if(g!==void 0){var p=Ex,b=e;switch(e){case"keypress":if(gf(n)===0)break e;case"keydown":case"keyup":p=Hj;break;case"focusin":b="focus",p=cp;break;case"focusout":b="blur",p=cp;break;case"beforeblur":case"afterblur":p=cp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Wv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Oj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Gj;break;case h8:case m8:case p8:p=jj;break;case g8:p=Yj;break;case"scroll":p=kj;break;case"wheel":p=qj;break;case"copy":case"cut":case"paste":p=Dj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Kv}var v=(t&4)!==0,T=!v&&e==="scroll",y=v?g!==null?g+"Capture":null:g;v=[];for(var E=f,w;E!==null;){w=E;var I=w.stateNode;if(w.tag===5&&I!==null&&(w=I,y!==null&&(I=Pu(E,y),I!=null&&v.push(Wu(E,I,w)))),T)break;E=E.return}0<v.length&&(g=new p(g,b,null,n,m),h.push({event:g,listeners:v}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",g&&n!==Ug&&(b=n.relatedTarget||n.fromElement)&&(ja(b)||b[si]))break e;if((p||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=f,b=b?ja(b):null,b!==null&&(T=qa(b),b!==T||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=f),p!==b)){if(v=Wv,I="onMouseLeave",y="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(v=Kv,I="onPointerLeave",y="onPointerEnter",E="pointer"),T=p==null?g:Il(p),w=b==null?g:Il(b),g=new v(I,E+"leave",p,n,m),g.target=T,g.relatedTarget=w,I=null,ja(m)===f&&(v=new v(y,E+"enter",b,n,m),v.target=w,v.relatedTarget=T,I=v),T=I,p&&b)t:{for(v=p,y=b,E=0,w=v;w;w=ml(w))E++;for(w=0,I=y;I;I=ml(I))w++;for(;0<E-w;)v=ml(v),E--;for(;0<w-E;)y=ml(y),w--;for(;E--;){if(v===y||y!==null&&v===y.alternate)break t;v=ml(v),y=ml(y)}v=null}else v=null;p!==null&&r4(h,g,p,v,!1),b!==null&&T!==null&&r4(h,T,b,v,!0)}}e:{if(g=f?Il(f):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var j=nL;else if(qv(g))if(l8)j=iL;else{j=sL;var _=rL}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(j=oL);if(j&&(j=j(e,f))){a8(h,j,n,m);break e}_&&_(e,g,f),e==="focusout"&&(_=g._wrapperState)&&_.controlled&&g.type==="number"&&Mg(g,"number",g.value)}switch(_=f?Il(f):window,e){case"focusin":(qv(_)||_.contentEditable==="true")&&(Ol=_,Vg=f,vu=null);break;case"focusout":vu=Vg=Ol=null;break;case"mousedown":qg=!0;break;case"contextmenu":case"mouseup":case"dragend":qg=!1,e4(h,n,m);break;case"selectionchange":if(cL)break;case"keydown":case"keyup":e4(h,n,m)}var C;if(_x)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Al?o8(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(s8&&n.locale!=="ko"&&(Al||k!=="onCompositionStart"?k==="onCompositionEnd"&&Al&&(C=r8()):(Bi=m,Tx="value"in Bi?Bi.value:Bi.textContent,Al=!0)),_=Qf(f,k),0<_.length&&(k=new Gv(k,e,null,n,m),h.push({event:k,listeners:_}),C?k.data=C:(C=i8(n),C!==null&&(k.data=C)))),(C=Xj?Jj(e,n):Zj(e,n))&&(f=Qf(f,"onBeforeInput"),0<f.length&&(m=new Gv("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:f}),m.data=C))}x8(h,t)})}function Wu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qf(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Pu(e,n),o!=null&&r.unshift(Wu(e,o,s)),o=Pu(e,t),o!=null&&r.push(Wu(e,o,s))),e=e.return}return r}function ml(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function r4(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,s?(u=Pu(n,o),u!=null&&i.unshift(Wu(n,u,l))):s||(u=Pu(n,o),u!=null&&i.push(Wu(n,u,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var hL=/\r\n?/g,mL=/\u0000|\uFFFD/g;function s4(e){return(typeof e=="string"?e:""+e).replace(hL,`
`).replace(mL,"")}function Id(e,t,n){if(t=s4(t),s4(e)!==t&&n)throw Error(Pe(425))}function Xf(){}var Qg=null,Xg=null;function Jg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zg=typeof setTimeout=="function"?setTimeout:void 0,pL=typeof clearTimeout=="function"?clearTimeout:void 0,o4=typeof Promise=="function"?Promise:void 0,gL=typeof queueMicrotask=="function"?queueMicrotask:typeof o4<"u"?function(e){return o4.resolve(null).then(e).catch(yL)}:Zg;function yL(e){setTimeout(function(){throw e})}function yp(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),zu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);zu(t)}function Gi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function i4(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var fc=Math.random().toString(36).slice(2),vo="__reactFiber$"+fc,Gu="__reactProps$"+fc,si="__reactContainer$"+fc,ey="__reactEvents$"+fc,xL="__reactListeners$"+fc,vL="__reactHandles$"+fc;function ja(e){var t=e[vo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[si]||n[vo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=i4(e);e!==null;){if(n=e[vo])return n;e=i4(e)}return t}e=n,n=e.parentNode}return null}function x1(e){return e=e[vo]||e[si],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Il(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pe(33))}function Wh(e){return e[Gu]||null}var ty=[],jl=-1;function oa(e){return{current:e}}function cn(e){0>jl||(e.current=ty[jl],ty[jl]=null,jl--)}function rn(e,t){jl++,ty[jl]=e.current,e.current=t}var ea={},pr=oa(ea),zr=oa(!1),Ua=ea;function ec(e,t){var n=e.type.contextTypes;if(!n)return ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ur(e){return e=e.childContextTypes,e!=null}function Jf(){cn(zr),cn(pr)}function a4(e,t,n){if(pr.current!==ea)throw Error(Pe(168));rn(pr,t),rn(zr,n)}function b8(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Pe(108,rj(e)||"Unknown",s));return yn({},n,r)}function Zf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ea,Ua=pr.current,rn(pr,e),rn(zr,zr.current),!0}function l4(e,t,n){var r=e.stateNode;if(!r)throw Error(Pe(169));n?(e=b8(e,t,Ua),r.__reactInternalMemoizedMergedChildContext=e,cn(zr),cn(pr),rn(pr,e)):cn(zr),rn(zr,n)}var Xo=null,Gh=!1,xp=!1;function w8(e){Xo===null?Xo=[e]:Xo.push(e)}function bL(e){Gh=!0,w8(e)}function ia(){if(!xp&&Xo!==null){xp=!0;var e=0,t=Kt;try{var n=Xo;for(Kt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xo=null,Gh=!1}catch(s){throw Xo!==null&&(Xo=Xo.slice(e+1)),KE(xx,ia),s}finally{Kt=t,xp=!1}}return null}var Ll=[],Dl=0,eh=null,th=0,Es=[],Cs=0,Ha=null,Jo=1,Zo="";function Sa(e,t){Ll[Dl++]=th,Ll[Dl++]=eh,eh=e,th=t}function T8(e,t,n){Es[Cs++]=Jo,Es[Cs++]=Zo,Es[Cs++]=Ha,Ha=e;var r=Jo;e=Zo;var s=32-Js(r)-1;r&=~(1<<s),n+=1;var o=32-Js(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Jo=1<<32-Js(t)+s|n<<s|r,Zo=o+e}else Jo=1<<o|n<<s|r,Zo=e}function Sx(e){e.return!==null&&(Sa(e,1),T8(e,1,0))}function kx(e){for(;e===eh;)eh=Ll[--Dl],Ll[Dl]=null,th=Ll[--Dl],Ll[Dl]=null;for(;e===Ha;)Ha=Es[--Cs],Es[Cs]=null,Zo=Es[--Cs],Es[Cs]=null,Jo=Es[--Cs],Es[Cs]=null}var os=null,ss=null,fn=!1,Xs=null;function E8(e,t){var n=Ss(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function c4(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,os=e,ss=Gi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,os=e,ss=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ha!==null?{id:Jo,overflow:Zo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ss(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,os=e,ss=null,!0):!1;default:return!1}}function ny(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ry(e){if(fn){var t=ss;if(t){var n=t;if(!c4(e,t)){if(ny(e))throw Error(Pe(418));t=Gi(n.nextSibling);var r=os;t&&c4(e,t)?E8(r,n):(e.flags=e.flags&-4097|2,fn=!1,os=e)}}else{if(ny(e))throw Error(Pe(418));e.flags=e.flags&-4097|2,fn=!1,os=e}}}function u4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;os=e}function jd(e){if(e!==os)return!1;if(!fn)return u4(e),fn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jg(e.type,e.memoizedProps)),t&&(t=ss)){if(ny(e))throw C8(),Error(Pe(418));for(;t;)E8(e,t),t=Gi(t.nextSibling)}if(u4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ss=Gi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ss=null}}else ss=os?Gi(e.stateNode.nextSibling):null;return!0}function C8(){for(var e=ss;e;)e=Gi(e.nextSibling)}function tc(){ss=os=null,fn=!1}function Ax(e){Xs===null?Xs=[e]:Xs.push(e)}var wL=li.ReactCurrentBatchConfig;function Yc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Pe(309));var r=n.stateNode}if(!r)throw Error(Pe(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Pe(284));if(!n._owner)throw Error(Pe(290,e))}return e}function Ld(e,t){throw e=Object.prototype.toString.call(t),Error(Pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function d4(e){var t=e._init;return t(e._payload)}function _8(e){function t(y,E){if(e){var w=y.deletions;w===null?(y.deletions=[E],y.flags|=16):w.push(E)}}function n(y,E){if(!e)return null;for(;E!==null;)t(y,E),E=E.sibling;return null}function r(y,E){for(y=new Map;E!==null;)E.key!==null?y.set(E.key,E):y.set(E.index,E),E=E.sibling;return y}function s(y,E){return y=qi(y,E),y.index=0,y.sibling=null,y}function o(y,E,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<E?(y.flags|=2,E):w):(y.flags|=2,E)):(y.flags|=1048576,E)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,E,w,I){return E===null||E.tag!==6?(E=_p(w,y.mode,I),E.return=y,E):(E=s(E,w),E.return=y,E)}function u(y,E,w,I){var j=w.type;return j===kl?m(y,E,w.props.children,I,w.key):E!==null&&(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ii&&d4(j)===E.type)?(I=s(E,w.props),I.ref=Yc(y,E,w),I.return=y,I):(I=Ef(w.type,w.key,w.props,null,y.mode,I),I.ref=Yc(y,E,w),I.return=y,I)}function f(y,E,w,I){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=Np(w,y.mode,I),E.return=y,E):(E=s(E,w.children||[]),E.return=y,E)}function m(y,E,w,I,j){return E===null||E.tag!==7?(E=Ba(w,y.mode,I,j),E.return=y,E):(E=s(E,w),E.return=y,E)}function h(y,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=_p(""+E,y.mode,w),E.return=y,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ed:return w=Ef(E.type,E.key,E.props,null,y.mode,w),w.ref=Yc(y,null,E),w.return=y,w;case Sl:return E=Np(E,y.mode,w),E.return=y,E;case Ii:var I=E._init;return h(y,I(E._payload),w)}if(lu(E)||Hc(E))return E=Ba(E,y.mode,w,null),E.return=y,E;Ld(y,E)}return null}function g(y,E,w,I){var j=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(y,E,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ed:return w.key===j?u(y,E,w,I):null;case Sl:return w.key===j?f(y,E,w,I):null;case Ii:return j=w._init,g(y,E,j(w._payload),I)}if(lu(w)||Hc(w))return j!==null?null:m(y,E,w,I,null);Ld(y,w)}return null}function p(y,E,w,I,j){if(typeof I=="string"&&I!==""||typeof I=="number")return y=y.get(w)||null,l(E,y,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ed:return y=y.get(I.key===null?w:I.key)||null,u(E,y,I,j);case Sl:return y=y.get(I.key===null?w:I.key)||null,f(E,y,I,j);case Ii:var _=I._init;return p(y,E,w,_(I._payload),j)}if(lu(I)||Hc(I))return y=y.get(w)||null,m(E,y,I,j,null);Ld(E,I)}return null}function b(y,E,w,I){for(var j=null,_=null,C=E,k=E=0,R=null;C!==null&&k<w.length;k++){C.index>k?(R=C,C=null):R=C.sibling;var P=g(y,C,w[k],I);if(P===null){C===null&&(C=R);break}e&&C&&P.alternate===null&&t(y,C),E=o(P,E,k),_===null?j=P:_.sibling=P,_=P,C=R}if(k===w.length)return n(y,C),fn&&Sa(y,k),j;if(C===null){for(;k<w.length;k++)C=h(y,w[k],I),C!==null&&(E=o(C,E,k),_===null?j=C:_.sibling=C,_=C);return fn&&Sa(y,k),j}for(C=r(y,C);k<w.length;k++)R=p(C,y,k,w[k],I),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?k:R.key),E=o(R,E,k),_===null?j=R:_.sibling=R,_=R);return e&&C.forEach(function(Y){return t(y,Y)}),fn&&Sa(y,k),j}function v(y,E,w,I){var j=Hc(w);if(typeof j!="function")throw Error(Pe(150));if(w=j.call(w),w==null)throw Error(Pe(151));for(var _=j=null,C=E,k=E=0,R=null,P=w.next();C!==null&&!P.done;k++,P=w.next()){C.index>k?(R=C,C=null):R=C.sibling;var Y=g(y,C,P.value,I);if(Y===null){C===null&&(C=R);break}e&&C&&Y.alternate===null&&t(y,C),E=o(Y,E,k),_===null?j=Y:_.sibling=Y,_=Y,C=R}if(P.done)return n(y,C),fn&&Sa(y,k),j;if(C===null){for(;!P.done;k++,P=w.next())P=h(y,P.value,I),P!==null&&(E=o(P,E,k),_===null?j=P:_.sibling=P,_=P);return fn&&Sa(y,k),j}for(C=r(y,C);!P.done;k++,P=w.next())P=p(C,y,k,P.value,I),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?k:P.key),E=o(P,E,k),_===null?j=P:_.sibling=P,_=P);return e&&C.forEach(function(z){return t(y,z)}),fn&&Sa(y,k),j}function T(y,E,w,I){if(typeof w=="object"&&w!==null&&w.type===kl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ed:e:{for(var j=w.key,_=E;_!==null;){if(_.key===j){if(j=w.type,j===kl){if(_.tag===7){n(y,_.sibling),E=s(_,w.props.children),E.return=y,y=E;break e}}else if(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ii&&d4(j)===_.type){n(y,_.sibling),E=s(_,w.props),E.ref=Yc(y,_,w),E.return=y,y=E;break e}n(y,_);break}else t(y,_);_=_.sibling}w.type===kl?(E=Ba(w.props.children,y.mode,I,w.key),E.return=y,y=E):(I=Ef(w.type,w.key,w.props,null,y.mode,I),I.ref=Yc(y,E,w),I.return=y,y=I)}return i(y);case Sl:e:{for(_=w.key;E!==null;){if(E.key===_)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(y,E.sibling),E=s(E,w.children||[]),E.return=y,y=E;break e}else{n(y,E);break}else t(y,E);E=E.sibling}E=Np(w,y.mode,I),E.return=y,y=E}return i(y);case Ii:return _=w._init,T(y,E,_(w._payload),I)}if(lu(w))return b(y,E,w,I);if(Hc(w))return v(y,E,w,I);Ld(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(n(y,E.sibling),E=s(E,w),E.return=y,y=E):(n(y,E),E=_p(w,y.mode,I),E.return=y,y=E),i(y)):n(y,E)}return T}var nc=_8(!0),N8=_8(!1),nh=oa(null),rh=null,Ml=null,Ox=null;function Rx(){Ox=Ml=rh=null}function Ix(e){var t=nh.current;cn(nh),e._currentValue=t}function sy(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kl(e,t){rh=e,Ox=Ml=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pr=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Ox!==e)if(e={context:e,memoizedValue:t,next:null},Ml===null){if(rh===null)throw Error(Pe(308));Ml=e,rh.dependencies={lanes:0,firstContext:e}}else Ml=Ml.next=e;return t}var La=null;function jx(e){La===null?La=[e]:La.push(e)}function S8(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,jx(t)):(n.next=s.next,s.next=n),t.interleaved=n,oi(e,r)}function oi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ji=!1;function Lx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k8(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ti(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ki(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Bt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,oi(e,n)}return s=r.interleaved,s===null?(t.next=t,jx(r)):(t.next=s.next,s.next=t),r.interleaved=t,oi(e,n)}function yf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,vx(e,n)}}function f4(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sh(e,t,n,r){var s=e.updateQueue;ji=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,f=u.next;u.next=null,i===null?o=f:i.next=f,i=u;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==i&&(l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=u))}if(o!==null){var h=s.baseState;i=0,m=f=u=null,l=o;do{var g=l.lane,p=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,v=l;switch(g=t,p=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){h=b.call(p,h,g);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,g=typeof b=="function"?b.call(p,h,g):b,g==null)break e;h=yn({},h,g);break e;case 2:ji=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else p={eventTime:p,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(f=m=p,u=h):m=m.next=p,i|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(1);if(m===null&&(u=h),s.baseState=u,s.firstBaseUpdate=f,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Wa|=i,e.lanes=i,e.memoizedState=h}}function h4(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Pe(191,s));s.call(r)}}}var v1={},Co=oa(v1),Ku=oa(v1),Yu=oa(v1);function Da(e){if(e===v1)throw Error(Pe(174));return e}function Dx(e,t){switch(rn(Yu,t),rn(Ku,e),rn(Co,v1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fg(t,e)}cn(Co),rn(Co,t)}function rc(){cn(Co),cn(Ku),cn(Yu)}function A8(e){Da(Yu.current);var t=Da(Co.current),n=Fg(t,e.type);t!==n&&(rn(Ku,e),rn(Co,n))}function Mx(e){Ku.current===e&&(cn(Co),cn(Ku))}var pn=oa(0);function oh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vp=[];function Px(){for(var e=0;e<vp.length;e++)vp[e]._workInProgressVersionPrimary=null;vp.length=0}var xf=li.ReactCurrentDispatcher,bp=li.ReactCurrentBatchConfig,$a=0,gn=null,Bn=null,Yn=null,ih=!1,bu=!1,Vu=0,TL=0;function cr(){throw Error(Pe(321))}function Fx(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!no(e[n],t[n]))return!1;return!0}function Bx(e,t,n,r,s,o){if($a=o,gn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xf.current=e===null||e.memoizedState===null?NL:SL,e=n(r,s),bu){o=0;do{if(bu=!1,Vu=0,25<=o)throw Error(Pe(301));o+=1,Yn=Bn=null,t.updateQueue=null,xf.current=kL,e=n(r,s)}while(bu)}if(xf.current=ah,t=Bn!==null&&Bn.next!==null,$a=0,Yn=Bn=gn=null,ih=!1,t)throw Error(Pe(300));return e}function zx(){var e=Vu!==0;return Vu=0,e}function go(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?gn.memoizedState=Yn=e:Yn=Yn.next=e,Yn}function Is(){if(Bn===null){var e=gn.alternate;e=e!==null?e.memoizedState:null}else e=Bn.next;var t=Yn===null?gn.memoizedState:Yn.next;if(t!==null)Yn=t,Bn=e;else{if(e===null)throw Error(Pe(310));Bn=e,e={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},Yn===null?gn.memoizedState=Yn=e:Yn=Yn.next=e}return Yn}function qu(e,t){return typeof t=="function"?t(e):t}function wp(e){var t=Is(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=Bn,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=i=null,u=null,f=o;do{var m=f.lane;if(($a&m)===m)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var h={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=h,i=r):u=u.next=h,gn.lanes|=m,Wa|=m}f=f.next}while(f!==null&&f!==o);u===null?i=r:u.next=l,no(r,t.memoizedState)||(Pr=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,gn.lanes|=o,Wa|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Tp(e){var t=Is(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);no(o,t.memoizedState)||(Pr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function O8(){}function R8(e,t){var n=gn,r=Is(),s=t(),o=!no(r.memoizedState,s);if(o&&(r.memoizedState=s,Pr=!0),r=r.queue,Ux(L8.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Yn!==null&&Yn.memoizedState.tag&1){if(n.flags|=2048,Qu(9,j8.bind(null,n,r,s,t),void 0,null),Qn===null)throw Error(Pe(349));$a&30||I8(n,t,s)}return s}function I8(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=gn.updateQueue,t===null?(t={lastEffect:null,stores:null},gn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function j8(e,t,n,r){t.value=n,t.getSnapshot=r,D8(t)&&M8(e)}function L8(e,t,n){return n(function(){D8(t)&&M8(e)})}function D8(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!no(e,n)}catch{return!0}}function M8(e){var t=oi(e,1);t!==null&&Zs(t,e,1,-1)}function m4(e){var t=go();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:e},t.queue=e,e=e.dispatch=_L.bind(null,gn,e),[t.memoizedState,e]}function Qu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=gn.updateQueue,t===null?(t={lastEffect:null,stores:null},gn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function P8(){return Is().memoizedState}function vf(e,t,n,r){var s=go();gn.flags|=e,s.memoizedState=Qu(1|t,n,void 0,r===void 0?null:r)}function Kh(e,t,n,r){var s=Is();r=r===void 0?null:r;var o=void 0;if(Bn!==null){var i=Bn.memoizedState;if(o=i.destroy,r!==null&&Fx(r,i.deps)){s.memoizedState=Qu(t,n,o,r);return}}gn.flags|=e,s.memoizedState=Qu(1|t,n,o,r)}function p4(e,t){return vf(8390656,8,e,t)}function Ux(e,t){return Kh(2048,8,e,t)}function F8(e,t){return Kh(4,2,e,t)}function B8(e,t){return Kh(4,4,e,t)}function z8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function U8(e,t,n){return n=n!=null?n.concat([e]):null,Kh(4,4,z8.bind(null,t,e),n)}function Hx(){}function H8(e,t){var n=Is();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fx(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $8(e,t){var n=Is();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fx(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function W8(e,t,n){return $a&21?(no(n,t)||(n=qE(),gn.lanes|=n,Wa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pr=!0),e.memoizedState=n)}function EL(e,t){var n=Kt;Kt=n!==0&&4>n?n:4,e(!0);var r=bp.transition;bp.transition={};try{e(!1),t()}finally{Kt=n,bp.transition=r}}function G8(){return Is().memoizedState}function CL(e,t,n){var r=Vi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},K8(e))Y8(t,n);else if(n=S8(e,t,n,r),n!==null){var s=_r();Zs(n,e,r,s),V8(n,t,r)}}function _L(e,t,n){var r=Vi(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(K8(e))Y8(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,n);if(s.hasEagerState=!0,s.eagerState=l,no(l,i)){var u=t.interleaved;u===null?(s.next=s,jx(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=S8(e,t,s,r),n!==null&&(s=_r(),Zs(n,e,r,s),V8(n,t,r))}}function K8(e){var t=e.alternate;return e===gn||t!==null&&t===gn}function Y8(e,t){bu=ih=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function V8(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,vx(e,n)}}var ah={readContext:Rs,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useInsertionEffect:cr,useLayoutEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useMutableSource:cr,useSyncExternalStore:cr,useId:cr,unstable_isNewReconciler:!1},NL={readContext:Rs,useCallback:function(e,t){return go().memoizedState=[e,t===void 0?null:t],e},useContext:Rs,useEffect:p4,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,vf(4194308,4,z8.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vf(4194308,4,e,t)},useInsertionEffect:function(e,t){return vf(4,2,e,t)},useMemo:function(e,t){var n=go();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=go();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=CL.bind(null,gn,e),[r.memoizedState,e]},useRef:function(e){var t=go();return e={current:e},t.memoizedState=e},useState:m4,useDebugValue:Hx,useDeferredValue:function(e){return go().memoizedState=e},useTransition:function(){var e=m4(!1),t=e[0];return e=EL.bind(null,e[1]),go().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gn,s=go();if(fn){if(n===void 0)throw Error(Pe(407));n=n()}else{if(n=t(),Qn===null)throw Error(Pe(349));$a&30||I8(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,p4(L8.bind(null,r,o,e),[e]),r.flags|=2048,Qu(9,j8.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=go(),t=Qn.identifierPrefix;if(fn){var n=Zo,r=Jo;n=(r&~(1<<32-Js(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Vu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=TL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},SL={readContext:Rs,useCallback:H8,useContext:Rs,useEffect:Ux,useImperativeHandle:U8,useInsertionEffect:F8,useLayoutEffect:B8,useMemo:$8,useReducer:wp,useRef:P8,useState:function(){return wp(qu)},useDebugValue:Hx,useDeferredValue:function(e){var t=Is();return W8(t,Bn.memoizedState,e)},useTransition:function(){var e=wp(qu)[0],t=Is().memoizedState;return[e,t]},useMutableSource:O8,useSyncExternalStore:R8,useId:G8,unstable_isNewReconciler:!1},kL={readContext:Rs,useCallback:H8,useContext:Rs,useEffect:Ux,useImperativeHandle:U8,useInsertionEffect:F8,useLayoutEffect:B8,useMemo:$8,useReducer:Tp,useRef:P8,useState:function(){return Tp(qu)},useDebugValue:Hx,useDeferredValue:function(e){var t=Is();return Bn===null?t.memoizedState=e:W8(t,Bn.memoizedState,e)},useTransition:function(){var e=Tp(qu)[0],t=Is().memoizedState;return[e,t]},useMutableSource:O8,useSyncExternalStore:R8,useId:G8,unstable_isNewReconciler:!1};function Vs(e,t){if(e&&e.defaultProps){t=yn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function oy(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:yn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Yh={isMounted:function(e){return(e=e._reactInternals)?qa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_r(),s=Vi(e),o=ti(r,s);o.payload=t,n!=null&&(o.callback=n),t=Ki(e,o,s),t!==null&&(Zs(t,e,s,r),yf(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_r(),s=Vi(e),o=ti(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ki(e,o,s),t!==null&&(Zs(t,e,s,r),yf(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_r(),r=Vi(e),s=ti(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ki(e,s,r),t!==null&&(Zs(t,e,r,n),yf(t,e,r))}};function g4(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Hu(n,r)||!Hu(s,o):!0}function q8(e,t,n){var r=!1,s=ea,o=t.contextType;return typeof o=="object"&&o!==null?o=Rs(o):(s=Ur(t)?Ua:pr.current,r=t.contextTypes,o=(r=r!=null)?ec(e,s):ea),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function y4(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Yh.enqueueReplaceState(t,t.state,null)}function iy(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Lx(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Rs(o):(o=Ur(t)?Ua:pr.current,s.context=ec(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(oy(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Yh.enqueueReplaceState(s,s.state,null),sh(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function sc(e,t){try{var n="",r=t;do n+=nj(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Ep(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ay(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var AL=typeof WeakMap=="function"?WeakMap:Map;function Q8(e,t,n){n=ti(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ch||(ch=!0,yy=r),ay(e,t)},n}function X8(e,t,n){n=ti(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ay(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ay(e,t),typeof r!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function x4(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new AL;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=$L.bind(null,e,t,n),t.then(e,e))}function v4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function b4(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ti(-1,1),t.tag=2,Ki(n,t,1))),n.lanes|=1),e)}var OL=li.ReactCurrentOwner,Pr=!1;function Tr(e,t,n,r){t.child=e===null?N8(t,null,n,r):nc(t,e.child,n,r)}function w4(e,t,n,r,s){n=n.render;var o=t.ref;return Kl(t,s),r=Bx(e,t,n,r,o,s),n=zx(),e!==null&&!Pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ii(e,t,s)):(fn&&n&&Sx(t),t.flags|=1,Tr(e,t,r,s),t.child)}function T4(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Qx(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,J8(e,t,o,r,s)):(e=Ef(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Hu,n(i,r)&&e.ref===t.ref)return ii(e,t,s)}return t.flags|=1,e=qi(o,r),e.ref=t.ref,e.return=t,t.child=e}function J8(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Hu(o,r)&&e.ref===t.ref)if(Pr=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Pr=!0);else return t.lanes=e.lanes,ii(e,t,s)}return ly(e,t,n,r,s)}function Z8(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Fl,ts),ts|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rn(Fl,ts),ts|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,rn(Fl,ts),ts|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,rn(Fl,ts),ts|=r;return Tr(e,t,s,n),t.child}function eC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ly(e,t,n,r,s){var o=Ur(n)?Ua:pr.current;return o=ec(t,o),Kl(t,s),n=Bx(e,t,n,r,o,s),r=zx(),e!==null&&!Pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ii(e,t,s)):(fn&&r&&Sx(t),t.flags|=1,Tr(e,t,n,s),t.child)}function E4(e,t,n,r,s){if(Ur(n)){var o=!0;Zf(t)}else o=!1;if(Kl(t,s),t.stateNode===null)bf(e,t),q8(t,n,r),iy(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var u=i.context,f=n.contextType;typeof f=="object"&&f!==null?f=Rs(f):(f=Ur(n)?Ua:pr.current,f=ec(t,f));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||u!==f)&&y4(t,i,r,f),ji=!1;var g=t.memoizedState;i.state=g,sh(t,r,i,s),u=t.memoizedState,l!==r||g!==u||zr.current||ji?(typeof m=="function"&&(oy(t,n,m,r),u=t.memoizedState),(l=ji||g4(t,n,l,r,g,u,f))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=f,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,k8(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:Vs(t.type,l),i.props=f,h=t.pendingProps,g=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rs(u):(u=Ur(n)?Ua:pr.current,u=ec(t,u));var p=n.getDerivedStateFromProps;(m=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||g!==u)&&y4(t,i,r,u),ji=!1,g=t.memoizedState,i.state=g,sh(t,r,i,s);var b=t.memoizedState;l!==h||g!==b||zr.current||ji?(typeof p=="function"&&(oy(t,n,p,r),b=t.memoizedState),(f=ji||g4(t,n,f,r,g,b,u)||!1)?(m||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,b,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,b,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),i.props=r,i.state=b,i.context=u,r=f):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return cy(e,t,n,r,o,s)}function cy(e,t,n,r,s,o){eC(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&l4(t,n,!1),ii(e,t,o);r=t.stateNode,OL.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=nc(t,e.child,null,o),t.child=nc(t,null,l,o)):Tr(e,t,l,o),t.memoizedState=r.state,s&&l4(t,n,!0),t.child}function tC(e){var t=e.stateNode;t.pendingContext?a4(e,t.pendingContext,t.pendingContext!==t.context):t.context&&a4(e,t.context,!1),Dx(e,t.containerInfo)}function C4(e,t,n,r,s){return tc(),Ax(s),t.flags|=256,Tr(e,t,n,r),t.child}var uy={dehydrated:null,treeContext:null,retryLane:0};function dy(e){return{baseLanes:e,cachePool:null,transitions:null}}function nC(e,t,n){var r=t.pendingProps,s=pn.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),rn(pn,s&1),e===null)return ry(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Qh(i,r,0,null),e=Ba(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=dy(n),t.memoizedState=uy,e):$x(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return RL(e,t,i,r,l,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=qi(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=qi(l,o):(o=Ba(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?dy(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=uy,r}return o=e.child,e=o.sibling,r=qi(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $x(e,t){return t=Qh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Dd(e,t,n,r){return r!==null&&Ax(r),nc(t,e.child,null,n),e=$x(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function RL(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=Ep(Error(Pe(422))),Dd(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Qh({mode:"visible",children:r.children},s,0,null),o=Ba(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&nc(t,e.child,null,i),t.child.memoizedState=dy(i),t.memoizedState=uy,o);if(!(t.mode&1))return Dd(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(Pe(419)),r=Ep(o,r,void 0),Dd(e,t,i,r)}if(l=(i&e.childLanes)!==0,Pr||l){if(r=Qn,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,oi(e,s),Zs(r,e,s,-1))}return qx(),r=Ep(Error(Pe(421))),Dd(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=WL.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,ss=Gi(s.nextSibling),os=t,fn=!0,Xs=null,e!==null&&(Es[Cs++]=Jo,Es[Cs++]=Zo,Es[Cs++]=Ha,Jo=e.id,Zo=e.overflow,Ha=t),t=$x(t,r.children),t.flags|=4096,t)}function _4(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sy(e.return,t,n)}function Cp(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function rC(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Tr(e,t,r.children,n),r=pn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_4(e,n,t);else if(e.tag===19)_4(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(rn(pn,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&oh(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Cp(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&oh(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Cp(t,!0,n,null,o);break;case"together":Cp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ii(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pe(153));if(t.child!==null){for(e=t.child,n=qi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=qi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function IL(e,t,n){switch(t.tag){case 3:tC(t),tc();break;case 5:A8(t);break;case 1:Ur(t.type)&&Zf(t);break;case 4:Dx(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;rn(nh,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(rn(pn,pn.current&1),t.flags|=128,null):n&t.child.childLanes?nC(e,t,n):(rn(pn,pn.current&1),e=ii(e,t,n),e!==null?e.sibling:null);rn(pn,pn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return rC(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rn(pn,pn.current),r)break;return null;case 22:case 23:return t.lanes=0,Z8(e,t,n)}return ii(e,t,n)}var sC,fy,oC,iC;sC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fy=function(){};oC=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Da(Co.current);var o=null;switch(n){case"input":s=Lg(e,s),r=Lg(e,r),o=[];break;case"select":s=yn({},s,{value:void 0}),r=yn({},r,{value:void 0}),o=[];break;case"textarea":s=Pg(e,s),r=Pg(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Xf)}Bg(n,r);var i;n=null;for(f in s)if(!r.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var l=s[f];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Du.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var u=r[f];if(l=s!=null?s[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(o||(o=[]),o.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Du.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&ln("scroll",e),o||l===u||(o=[])):(o=o||[]).push(f,u))}n&&(o=o||[]).push("style",n);var f=o;(t.updateQueue=f)&&(t.flags|=4)}};iC=function(e,t,n,r){n!==r&&(t.flags|=4)};function Vc(e,t){if(!fn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ur(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function jL(e,t,n){var r=t.pendingProps;switch(kx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ur(t),null;case 1:return Ur(t.type)&&Jf(),ur(t),null;case 3:return r=t.stateNode,rc(),cn(zr),cn(pr),Px(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(jd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xs!==null&&(by(Xs),Xs=null))),fy(e,t),ur(t),null;case 5:Mx(t);var s=Da(Yu.current);if(n=t.type,e!==null&&t.stateNode!=null)oC(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Pe(166));return ur(t),null}if(e=Da(Co.current),jd(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[vo]=t,r[Gu]=o,e=(t.mode&1)!==0,n){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(s=0;s<uu.length;s++)ln(uu[s],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":Lv(r,o),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ln("invalid",r);break;case"textarea":Mv(r,o),ln("invalid",r)}Bg(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Id(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Id(r.textContent,l,e),s=["children",""+l]):Du.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&ln("scroll",r)}switch(n){case"input":Cd(r),Dv(r,o,!0);break;case"textarea":Cd(r),Pv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Xf)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=LE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[vo]=t,e[Gu]=r,sC(e,t,!1,!1),t.stateNode=e;e:{switch(i=zg(n,r),n){case"dialog":ln("cancel",e),ln("close",e),s=r;break;case"iframe":case"object":case"embed":ln("load",e),s=r;break;case"video":case"audio":for(s=0;s<uu.length;s++)ln(uu[s],e);s=r;break;case"source":ln("error",e),s=r;break;case"img":case"image":case"link":ln("error",e),ln("load",e),s=r;break;case"details":ln("toggle",e),s=r;break;case"input":Lv(e,r),s=Lg(e,r),ln("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=yn({},r,{value:void 0}),ln("invalid",e);break;case"textarea":Mv(e,r),s=Pg(e,r),ln("invalid",e);break;default:s=r}Bg(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?PE(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&DE(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Mu(e,u):typeof u=="number"&&Mu(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Du.hasOwnProperty(o)?u!=null&&o==="onScroll"&&ln("scroll",e):u!=null&&hx(e,o,u,i))}switch(n){case"input":Cd(e),Dv(e,r,!1);break;case"textarea":Cd(e),Pv(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Zi(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Hl(e,!!r.multiple,o,!1):r.defaultValue!=null&&Hl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Xf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ur(t),null;case 6:if(e&&t.stateNode!=null)iC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Pe(166));if(n=Da(Yu.current),Da(Co.current),jd(t)){if(r=t.stateNode,n=t.memoizedProps,r[vo]=t,(o=r.nodeValue!==n)&&(e=os,e!==null))switch(e.tag){case 3:Id(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Id(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vo]=t,t.stateNode=r}return ur(t),null;case 13:if(cn(pn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fn&&ss!==null&&t.mode&1&&!(t.flags&128))C8(),tc(),t.flags|=98560,o=!1;else if(o=jd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Pe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Pe(317));o[vo]=t}else tc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ur(t),o=!1}else Xs!==null&&(by(Xs),Xs=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||pn.current&1?Hn===0&&(Hn=3):qx())),t.updateQueue!==null&&(t.flags|=4),ur(t),null);case 4:return rc(),fy(e,t),e===null&&$u(t.stateNode.containerInfo),ur(t),null;case 10:return Ix(t.type._context),ur(t),null;case 17:return Ur(t.type)&&Jf(),ur(t),null;case 19:if(cn(pn),o=t.memoizedState,o===null)return ur(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)Vc(o,!1);else{if(Hn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=oh(e),i!==null){for(t.flags|=128,Vc(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return rn(pn,pn.current&1|2),t.child}e=e.sibling}o.tail!==null&&Cn()>oc&&(t.flags|=128,r=!0,Vc(o,!1),t.lanes=4194304)}else{if(!r)if(e=oh(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Vc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!fn)return ur(t),null}else 2*Cn()-o.renderingStartTime>oc&&n!==1073741824&&(t.flags|=128,r=!0,Vc(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Cn(),t.sibling=null,n=pn.current,rn(pn,r?n&1|2:n&1),t):(ur(t),null);case 22:case 23:return Vx(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ts&1073741824&&(ur(t),t.subtreeFlags&6&&(t.flags|=8192)):ur(t),null;case 24:return null;case 25:return null}throw Error(Pe(156,t.tag))}function LL(e,t){switch(kx(t),t.tag){case 1:return Ur(t.type)&&Jf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rc(),cn(zr),cn(pr),Px(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Mx(t),null;case 13:if(cn(pn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pe(340));tc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cn(pn),null;case 4:return rc(),null;case 10:return Ix(t.type._context),null;case 22:case 23:return Vx(),null;case 24:return null;default:return null}}var Md=!1,dr=!1,DL=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Pl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bn(e,t,r)}else n.current=null}function hy(e,t,n){try{n()}catch(r){bn(e,t,r)}}var N4=!1;function ML(e,t){if(Qg=Vf,e=d8(),Nx(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,u=-1,f=0,m=0,h=e,g=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=i+s),h!==o||r!==0&&h.nodeType!==3||(u=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(p=h.firstChild)!==null;)g=h,h=p;for(;;){if(h===e)break t;if(g===n&&++f===s&&(l=i),g===o&&++m===r&&(u=i),(p=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=p}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xg={focusedElem:e,selectionRange:n},Vf=!1,Je=t;Je!==null;)if(t=Je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Je=e;else for(;Je!==null;){t=Je;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,T=b.memoizedState,y=t.stateNode,E=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Vs(t.type,v),T);y.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(I){bn(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,Je=e;break}Je=t.return}return b=N4,N4=!1,b}function wu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&hy(t,n,o)}s=s.next}while(s!==r)}}function Vh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function my(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function aC(e){var t=e.alternate;t!==null&&(e.alternate=null,aC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vo],delete t[Gu],delete t[ey],delete t[xL],delete t[vL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lC(e){return e.tag===5||e.tag===3||e.tag===4}function S4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function py(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xf));else if(r!==4&&(e=e.child,e!==null))for(py(e,t,n),e=e.sibling;e!==null;)py(e,t,n),e=e.sibling}function gy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(gy(e,t,n),e=e.sibling;e!==null;)gy(e,t,n),e=e.sibling}var Zn=null,qs=!1;function Ti(e,t,n){for(n=n.child;n!==null;)cC(e,t,n),n=n.sibling}function cC(e,t,n){if(Eo&&typeof Eo.onCommitFiberUnmount=="function")try{Eo.onCommitFiberUnmount(zh,n)}catch{}switch(n.tag){case 5:dr||Pl(n,t);case 6:var r=Zn,s=qs;Zn=null,Ti(e,t,n),Zn=r,qs=s,Zn!==null&&(qs?(e=Zn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Zn.removeChild(n.stateNode));break;case 18:Zn!==null&&(qs?(e=Zn,n=n.stateNode,e.nodeType===8?yp(e.parentNode,n):e.nodeType===1&&yp(e,n),zu(e)):yp(Zn,n.stateNode));break;case 4:r=Zn,s=qs,Zn=n.stateNode.containerInfo,qs=!0,Ti(e,t,n),Zn=r,qs=s;break;case 0:case 11:case 14:case 15:if(!dr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&hy(n,t,i),s=s.next}while(s!==r)}Ti(e,t,n);break;case 1:if(!dr&&(Pl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){bn(n,t,l)}Ti(e,t,n);break;case 21:Ti(e,t,n);break;case 22:n.mode&1?(dr=(r=dr)||n.memoizedState!==null,Ti(e,t,n),dr=r):Ti(e,t,n);break;default:Ti(e,t,n)}}function k4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new DL),t.forEach(function(r){var s=GL.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ws(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Zn=l.stateNode,qs=!1;break e;case 3:Zn=l.stateNode.containerInfo,qs=!0;break e;case 4:Zn=l.stateNode.containerInfo,qs=!0;break e}l=l.return}if(Zn===null)throw Error(Pe(160));cC(o,i,s),Zn=null,qs=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(f){bn(s,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uC(t,e),t=t.sibling}function uC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ws(t,e),ho(e),r&4){try{wu(3,e,e.return),Vh(3,e)}catch(v){bn(e,e.return,v)}try{wu(5,e,e.return)}catch(v){bn(e,e.return,v)}}break;case 1:Ws(t,e),ho(e),r&512&&n!==null&&Pl(n,n.return);break;case 5:if(Ws(t,e),ho(e),r&512&&n!==null&&Pl(n,n.return),e.flags&32){var s=e.stateNode;try{Mu(s,"")}catch(v){bn(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&IE(s,o),zg(l,i);var f=zg(l,o);for(i=0;i<u.length;i+=2){var m=u[i],h=u[i+1];m==="style"?PE(s,h):m==="dangerouslySetInnerHTML"?DE(s,h):m==="children"?Mu(s,h):hx(s,m,h,f)}switch(l){case"input":Dg(s,o);break;case"textarea":jE(s,o);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Hl(s,!!o.multiple,p,!1):g!==!!o.multiple&&(o.defaultValue!=null?Hl(s,!!o.multiple,o.defaultValue,!0):Hl(s,!!o.multiple,o.multiple?[]:"",!1))}s[Gu]=o}catch(v){bn(e,e.return,v)}}break;case 6:if(Ws(t,e),ho(e),r&4){if(e.stateNode===null)throw Error(Pe(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(v){bn(e,e.return,v)}}break;case 3:if(Ws(t,e),ho(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zu(t.containerInfo)}catch(v){bn(e,e.return,v)}break;case 4:Ws(t,e),ho(e);break;case 13:Ws(t,e),ho(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Kx=Cn())),r&4&&k4(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(dr=(f=dr)||m,Ws(t,e),dr=f):Ws(t,e),ho(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!m&&e.mode&1)for(Je=e,m=e.child;m!==null;){for(h=Je=m;Je!==null;){switch(g=Je,p=g.child,g.tag){case 0:case 11:case 14:case 15:wu(4,g,g.return);break;case 1:Pl(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(v){bn(r,n,v)}}break;case 5:Pl(g,g.return);break;case 22:if(g.memoizedState!==null){O4(h);continue}}p!==null?(p.return=g,Je=p):O4(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{s=h.stateNode,f?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,u=h.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ME("display",i))}catch(v){bn(e,e.return,v)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(v){bn(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ws(t,e),ho(e),r&4&&k4(e);break;case 21:break;default:Ws(t,e),ho(e)}}function ho(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(lC(n)){var r=n;break e}n=n.return}throw Error(Pe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Mu(s,""),r.flags&=-33);var o=S4(e);gy(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,l=S4(e);py(e,l,i);break;default:throw Error(Pe(161))}}catch(u){bn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function PL(e,t,n){Je=e,dC(e)}function dC(e,t,n){for(var r=(e.mode&1)!==0;Je!==null;){var s=Je,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Md;if(!i){var l=s.alternate,u=l!==null&&l.memoizedState!==null||dr;l=Md;var f=dr;if(Md=i,(dr=u)&&!f)for(Je=s;Je!==null;)i=Je,u=i.child,i.tag===22&&i.memoizedState!==null?R4(s):u!==null?(u.return=i,Je=u):R4(s);for(;o!==null;)Je=o,dC(o),o=o.sibling;Je=s,Md=l,dr=f}A4(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Je=o):A4(e)}}function A4(e){for(;Je!==null;){var t=Je;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dr||Vh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!dr)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Vs(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&h4(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}h4(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&zu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}dr||t.flags&512&&my(t)}catch(g){bn(t,t.return,g)}}if(t===e){Je=null;break}if(n=t.sibling,n!==null){n.return=t.return,Je=n;break}Je=t.return}}function O4(e){for(;Je!==null;){var t=Je;if(t===e){Je=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Je=n;break}Je=t.return}}function R4(e){for(;Je!==null;){var t=Je;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Vh(4,t)}catch(u){bn(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){bn(t,s,u)}}var o=t.return;try{my(t)}catch(u){bn(t,o,u)}break;case 5:var i=t.return;try{my(t)}catch(u){bn(t,i,u)}}}catch(u){bn(t,t.return,u)}if(t===e){Je=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Je=l;break}Je=t.return}}var FL=Math.ceil,lh=li.ReactCurrentDispatcher,Wx=li.ReactCurrentOwner,ks=li.ReactCurrentBatchConfig,Bt=0,Qn=null,An=null,nr=0,ts=0,Fl=oa(0),Hn=0,Xu=null,Wa=0,qh=0,Gx=0,Tu=null,Mr=null,Kx=0,oc=1/0,Qo=null,ch=!1,yy=null,Yi=null,Pd=!1,zi=null,uh=0,Eu=0,xy=null,wf=-1,Tf=0;function _r(){return Bt&6?Cn():wf!==-1?wf:wf=Cn()}function Vi(e){return e.mode&1?Bt&2&&nr!==0?nr&-nr:wL.transition!==null?(Tf===0&&(Tf=qE()),Tf):(e=Kt,e!==0||(e=window.event,e=e===void 0?16:n8(e.type)),e):1}function Zs(e,t,n,r){if(50<Eu)throw Eu=0,xy=null,Error(Pe(185));g1(e,n,r),(!(Bt&2)||e!==Qn)&&(e===Qn&&(!(Bt&2)&&(qh|=n),Hn===4&&Fi(e,nr)),Hr(e,r),n===1&&Bt===0&&!(t.mode&1)&&(oc=Cn()+500,Gh&&ia()))}function Hr(e,t){var n=e.callbackNode;wj(e,t);var r=Yf(e,e===Qn?nr:0);if(r===0)n!==null&&zv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&zv(n),t===1)e.tag===0?bL(I4.bind(null,e)):w8(I4.bind(null,e)),gL(function(){!(Bt&6)&&ia()}),n=null;else{switch(QE(r)){case 1:n=xx;break;case 4:n=YE;break;case 16:n=Kf;break;case 536870912:n=VE;break;default:n=Kf}n=vC(n,fC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fC(e,t){if(wf=-1,Tf=0,Bt&6)throw Error(Pe(327));var n=e.callbackNode;if(Yl()&&e.callbackNode!==n)return null;var r=Yf(e,e===Qn?nr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=dh(e,r);else{t=r;var s=Bt;Bt|=2;var o=mC();(Qn!==e||nr!==t)&&(Qo=null,oc=Cn()+500,Fa(e,t));do try{UL();break}catch(l){hC(e,l)}while(1);Rx(),lh.current=o,Bt=s,An!==null?t=0:(Qn=null,nr=0,t=Hn)}if(t!==0){if(t===2&&(s=Gg(e),s!==0&&(r=s,t=vy(e,s))),t===1)throw n=Xu,Fa(e,0),Fi(e,r),Hr(e,Cn()),n;if(t===6)Fi(e,r);else{if(s=e.current.alternate,!(r&30)&&!BL(s)&&(t=dh(e,r),t===2&&(o=Gg(e),o!==0&&(r=o,t=vy(e,o))),t===1))throw n=Xu,Fa(e,0),Fi(e,r),Hr(e,Cn()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Pe(345));case 2:ka(e,Mr,Qo);break;case 3:if(Fi(e,r),(r&130023424)===r&&(t=Kx+500-Cn(),10<t)){if(Yf(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){_r(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Zg(ka.bind(null,e,Mr,Qo),t);break}ka(e,Mr,Qo);break;case 4:if(Fi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Js(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=Cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FL(r/1960))-r,10<r){e.timeoutHandle=Zg(ka.bind(null,e,Mr,Qo),r);break}ka(e,Mr,Qo);break;case 5:ka(e,Mr,Qo);break;default:throw Error(Pe(329))}}}return Hr(e,Cn()),e.callbackNode===n?fC.bind(null,e):null}function vy(e,t){var n=Tu;return e.current.memoizedState.isDehydrated&&(Fa(e,t).flags|=256),e=dh(e,t),e!==2&&(t=Mr,Mr=n,t!==null&&by(t)),e}function by(e){Mr===null?Mr=e:Mr.push.apply(Mr,e)}function BL(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!no(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fi(e,t){for(t&=~Gx,t&=~qh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Js(t),r=1<<n;e[n]=-1,t&=~r}}function I4(e){if(Bt&6)throw Error(Pe(327));Yl();var t=Yf(e,0);if(!(t&1))return Hr(e,Cn()),null;var n=dh(e,t);if(e.tag!==0&&n===2){var r=Gg(e);r!==0&&(t=r,n=vy(e,r))}if(n===1)throw n=Xu,Fa(e,0),Fi(e,t),Hr(e,Cn()),n;if(n===6)throw Error(Pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ka(e,Mr,Qo),Hr(e,Cn()),null}function Yx(e,t){var n=Bt;Bt|=1;try{return e(t)}finally{Bt=n,Bt===0&&(oc=Cn()+500,Gh&&ia())}}function Ga(e){zi!==null&&zi.tag===0&&!(Bt&6)&&Yl();var t=Bt;Bt|=1;var n=ks.transition,r=Kt;try{if(ks.transition=null,Kt=1,e)return e()}finally{Kt=r,ks.transition=n,Bt=t,!(Bt&6)&&ia()}}function Vx(){ts=Fl.current,cn(Fl)}function Fa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,pL(n)),An!==null)for(n=An.return;n!==null;){var r=n;switch(kx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jf();break;case 3:rc(),cn(zr),cn(pr),Px();break;case 5:Mx(r);break;case 4:rc();break;case 13:cn(pn);break;case 19:cn(pn);break;case 10:Ix(r.type._context);break;case 22:case 23:Vx()}n=n.return}if(Qn=e,An=e=qi(e.current,null),nr=ts=t,Hn=0,Xu=null,Gx=qh=Wa=0,Mr=Tu=null,La!==null){for(t=0;t<La.length;t++)if(n=La[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}La=null}return e}function hC(e,t){do{var n=An;try{if(Rx(),xf.current=ah,ih){for(var r=gn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ih=!1}if($a=0,Yn=Bn=gn=null,bu=!1,Vu=0,Wx.current=null,n===null||n.return===null){Hn=1,Xu=t,An=null;break}e:{var o=e,i=n.return,l=n,u=t;if(t=nr,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var p=v4(i);if(p!==null){p.flags&=-257,b4(p,i,l,o,t),p.mode&1&&x4(o,f,t),t=p,u=f;var b=t.updateQueue;if(b===null){var v=new Set;v.add(u),t.updateQueue=v}else b.add(u);break e}else{if(!(t&1)){x4(o,f,t),qx();break e}u=Error(Pe(426))}}else if(fn&&l.mode&1){var T=v4(i);if(T!==null){!(T.flags&65536)&&(T.flags|=256),b4(T,i,l,o,t),Ax(sc(u,l));break e}}o=u=sc(u,l),Hn!==4&&(Hn=2),Tu===null?Tu=[o]:Tu.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=Q8(o,u,t);f4(o,y);break e;case 1:l=u;var E=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Yi===null||!Yi.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var I=X8(o,l,t);f4(o,I);break e}}o=o.return}while(o!==null)}gC(n)}catch(j){t=j,An===n&&n!==null&&(An=n=n.return);continue}break}while(1)}function mC(){var e=lh.current;return lh.current=ah,e===null?ah:e}function qx(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),Qn===null||!(Wa&268435455)&&!(qh&268435455)||Fi(Qn,nr)}function dh(e,t){var n=Bt;Bt|=2;var r=mC();(Qn!==e||nr!==t)&&(Qo=null,Fa(e,t));do try{zL();break}catch(s){hC(e,s)}while(1);if(Rx(),Bt=n,lh.current=r,An!==null)throw Error(Pe(261));return Qn=null,nr=0,Hn}function zL(){for(;An!==null;)pC(An)}function UL(){for(;An!==null&&!fj();)pC(An)}function pC(e){var t=xC(e.alternate,e,ts);e.memoizedProps=e.pendingProps,t===null?gC(e):An=t,Wx.current=null}function gC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=LL(n,t),n!==null){n.flags&=32767,An=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Hn=6,An=null;return}}else if(n=jL(n,t,ts),n!==null){An=n;return}if(t=t.sibling,t!==null){An=t;return}An=t=e}while(t!==null);Hn===0&&(Hn=5)}function ka(e,t,n){var r=Kt,s=ks.transition;try{ks.transition=null,Kt=1,HL(e,t,n,r)}finally{ks.transition=s,Kt=r}return null}function HL(e,t,n,r){do Yl();while(zi!==null);if(Bt&6)throw Error(Pe(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Pe(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Tj(e,o),e===Qn&&(An=Qn=null,nr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pd||(Pd=!0,vC(Kf,function(){return Yl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ks.transition,ks.transition=null;var i=Kt;Kt=1;var l=Bt;Bt|=4,Wx.current=null,ML(e,n),uC(n,e),lL(Xg),Vf=!!Qg,Xg=Qg=null,e.current=n,PL(n),hj(),Bt=l,Kt=i,ks.transition=o}else e.current=n;if(Pd&&(Pd=!1,zi=e,uh=s),o=e.pendingLanes,o===0&&(Yi=null),gj(n.stateNode),Hr(e,Cn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ch)throw ch=!1,e=yy,yy=null,e;return uh&1&&e.tag!==0&&Yl(),o=e.pendingLanes,o&1?e===xy?Eu++:(Eu=0,xy=e):Eu=0,ia(),null}function Yl(){if(zi!==null){var e=QE(uh),t=ks.transition,n=Kt;try{if(ks.transition=null,Kt=16>e?16:e,zi===null)var r=!1;else{if(e=zi,zi=null,uh=0,Bt&6)throw Error(Pe(331));var s=Bt;for(Bt|=4,Je=e.current;Je!==null;){var o=Je,i=o.child;if(Je.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(Je=f;Je!==null;){var m=Je;switch(m.tag){case 0:case 11:case 15:wu(8,m,o)}var h=m.child;if(h!==null)h.return=m,Je=h;else for(;Je!==null;){m=Je;var g=m.sibling,p=m.return;if(aC(m),m===f){Je=null;break}if(g!==null){g.return=p,Je=g;break}Je=p}}}var b=o.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var T=v.sibling;v.sibling=null,v=T}while(v!==null)}}Je=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Je=i;else e:for(;Je!==null;){if(o=Je,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wu(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,Je=y;break e}Je=o.return}}var E=e.current;for(Je=E;Je!==null;){i=Je;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,Je=w;else e:for(i=E;Je!==null;){if(l=Je,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vh(9,l)}}catch(j){bn(l,l.return,j)}if(l===i){Je=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,Je=I;break e}Je=l.return}}if(Bt=s,ia(),Eo&&typeof Eo.onPostCommitFiberRoot=="function")try{Eo.onPostCommitFiberRoot(zh,e)}catch{}r=!0}return r}finally{Kt=n,ks.transition=t}}return!1}function j4(e,t,n){t=sc(n,t),t=Q8(e,t,1),e=Ki(e,t,1),t=_r(),e!==null&&(g1(e,1,t),Hr(e,t))}function bn(e,t,n){if(e.tag===3)j4(e,e,n);else for(;t!==null;){if(t.tag===3){j4(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yi===null||!Yi.has(r))){e=sc(n,e),e=X8(t,e,1),t=Ki(t,e,1),e=_r(),t!==null&&(g1(t,1,e),Hr(t,e));break}}t=t.return}}function $L(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=_r(),e.pingedLanes|=e.suspendedLanes&n,Qn===e&&(nr&n)===n&&(Hn===4||Hn===3&&(nr&130023424)===nr&&500>Cn()-Kx?Fa(e,0):Gx|=n),Hr(e,t)}function yC(e,t){t===0&&(e.mode&1?(t=Sd,Sd<<=1,!(Sd&130023424)&&(Sd=4194304)):t=1);var n=_r();e=oi(e,t),e!==null&&(g1(e,t,n),Hr(e,n))}function WL(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),yC(e,n)}function GL(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Pe(314))}r!==null&&r.delete(t),yC(e,n)}var xC;xC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zr.current)Pr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Pr=!1,IL(e,t,n);Pr=!!(e.flags&131072)}else Pr=!1,fn&&t.flags&1048576&&T8(t,th,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bf(e,t),e=t.pendingProps;var s=ec(t,pr.current);Kl(t,n),s=Bx(null,t,r,e,s,n);var o=zx();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ur(r)?(o=!0,Zf(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Lx(t),s.updater=Yh,t.stateNode=s,s._reactInternals=t,iy(t,r,e,n),t=cy(null,t,r,!0,o,n)):(t.tag=0,fn&&o&&Sx(t),Tr(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(bf(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=YL(r),e=Vs(r,e),s){case 0:t=ly(null,t,r,e,n);break e;case 1:t=E4(null,t,r,e,n);break e;case 11:t=w4(null,t,r,e,n);break e;case 14:t=T4(null,t,r,Vs(r.type,e),n);break e}throw Error(Pe(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vs(r,s),ly(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vs(r,s),E4(e,t,r,s,n);case 3:e:{if(tC(t),e===null)throw Error(Pe(387));r=t.pendingProps,o=t.memoizedState,s=o.element,k8(e,t),sh(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=sc(Error(Pe(423)),t),t=C4(e,t,r,n,s);break e}else if(r!==s){s=sc(Error(Pe(424)),t),t=C4(e,t,r,n,s);break e}else for(ss=Gi(t.stateNode.containerInfo.firstChild),os=t,fn=!0,Xs=null,n=N8(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tc(),r===s){t=ii(e,t,n);break e}Tr(e,t,r,n)}t=t.child}return t;case 5:return A8(t),e===null&&ry(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Jg(r,s)?i=null:o!==null&&Jg(r,o)&&(t.flags|=32),eC(e,t),Tr(e,t,i,n),t.child;case 6:return e===null&&ry(t),null;case 13:return nC(e,t,n);case 4:return Dx(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=nc(t,null,r,n):Tr(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vs(r,s),w4(e,t,r,s,n);case 7:return Tr(e,t,t.pendingProps,n),t.child;case 8:return Tr(e,t,t.pendingProps.children,n),t.child;case 12:return Tr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,rn(nh,r._currentValue),r._currentValue=i,o!==null)if(no(o.value,i)){if(o.children===s.children&&!zr.current){t=ii(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=ti(-1,n&-n),u.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?u.next=u:(u.next=m.next,m.next=u),f.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),sy(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Pe(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),sy(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Tr(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Kl(t,n),s=Rs(s),r=r(s),t.flags|=1,Tr(e,t,r,n),t.child;case 14:return r=t.type,s=Vs(r,t.pendingProps),s=Vs(r.type,s),T4(e,t,r,s,n);case 15:return J8(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vs(r,s),bf(e,t),t.tag=1,Ur(r)?(e=!0,Zf(t)):e=!1,Kl(t,n),q8(t,r,s),iy(t,r,s,n),cy(null,t,r,!0,e,n);case 19:return rC(e,t,n);case 22:return Z8(e,t,n)}throw Error(Pe(156,t.tag))};function vC(e,t){return KE(e,t)}function KL(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(e,t,n,r){return new KL(e,t,n,r)}function Qx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function YL(e){if(typeof e=="function")return Qx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===px)return 11;if(e===gx)return 14}return 2}function qi(e,t){var n=e.alternate;return n===null?(n=Ss(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ef(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")Qx(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case kl:return Ba(n.children,s,o,t);case mx:i=8,s|=8;break;case Og:return e=Ss(12,n,t,s|2),e.elementType=Og,e.lanes=o,e;case Rg:return e=Ss(13,n,t,s),e.elementType=Rg,e.lanes=o,e;case Ig:return e=Ss(19,n,t,s),e.elementType=Ig,e.lanes=o,e;case AE:return Qh(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case SE:i=10;break e;case kE:i=9;break e;case px:i=11;break e;case gx:i=14;break e;case Ii:i=16,r=null;break e}throw Error(Pe(130,e==null?e:typeof e,""))}return t=Ss(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Ba(e,t,n,r){return e=Ss(7,e,r,t),e.lanes=n,e}function Qh(e,t,n,r){return e=Ss(22,e,r,t),e.elementType=AE,e.lanes=n,e.stateNode={isHidden:!1},e}function _p(e,t,n){return e=Ss(6,e,null,t),e.lanes=n,e}function Np(e,t,n){return t=Ss(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function VL(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ip(0),this.expirationTimes=ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ip(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xx(e,t,n,r,s,o,i,l,u){return e=new VL(e,t,n,l,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ss(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lx(o),e}function qL(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function bC(e){if(!e)return ea;e=e._reactInternals;e:{if(qa(e)!==e||e.tag!==1)throw Error(Pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ur(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pe(171))}if(e.tag===1){var n=e.type;if(Ur(n))return b8(e,n,t)}return t}function wC(e,t,n,r,s,o,i,l,u){return e=Xx(n,r,!0,e,s,o,i,l,u),e.context=bC(null),n=e.current,r=_r(),s=Vi(n),o=ti(r,s),o.callback=t??null,Ki(n,o,s),e.current.lanes=s,g1(e,s,r),Hr(e,r),e}function Xh(e,t,n,r){var s=t.current,o=_r(),i=Vi(s);return n=bC(n),t.context===null?t.context=n:t.pendingContext=n,t=ti(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ki(s,t,i),e!==null&&(Zs(e,s,i,o),yf(e,s,i)),i}function fh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function L4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Jx(e,t){L4(e,t),(e=e.alternate)&&L4(e,t)}function QL(){return null}var TC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zx(e){this._internalRoot=e}Jh.prototype.render=Zx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pe(409));Xh(e,t,null,null)};Jh.prototype.unmount=Zx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ga(function(){Xh(null,e,null,null)}),t[si]=null}};function Jh(e){this._internalRoot=e}Jh.prototype.unstable_scheduleHydration=function(e){if(e){var t=ZE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pi.length&&t!==0&&t<Pi[n].priority;n++);Pi.splice(n,0,e),n===0&&t8(e)}};function e2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function D4(){}function XL(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var f=fh(i);o.call(f)}}var i=wC(t,r,e,0,null,!1,!1,"",D4);return e._reactRootContainer=i,e[si]=i.current,$u(e.nodeType===8?e.parentNode:e),Ga(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var f=fh(u);l.call(f)}}var u=Xx(e,0,!1,null,null,!1,!1,"",D4);return e._reactRootContainer=u,e[si]=u.current,$u(e.nodeType===8?e.parentNode:e),Ga(function(){Xh(t,u,n,r)}),u}function em(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var u=fh(i);l.call(u)}}Xh(t,i,e,s)}else i=XL(n,t,e,s,r);return fh(i)}XE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=cu(t.pendingLanes);n!==0&&(vx(t,n|1),Hr(t,Cn()),!(Bt&6)&&(oc=Cn()+500,ia()))}break;case 13:Ga(function(){var r=oi(e,1);if(r!==null){var s=_r();Zs(r,e,1,s)}}),Jx(e,1)}};bx=function(e){if(e.tag===13){var t=oi(e,134217728);if(t!==null){var n=_r();Zs(t,e,134217728,n)}Jx(e,134217728)}};JE=function(e){if(e.tag===13){var t=Vi(e),n=oi(e,t);if(n!==null){var r=_r();Zs(n,e,t,r)}Jx(e,t)}};ZE=function(){return Kt};e8=function(e,t){var n=Kt;try{return Kt=e,t()}finally{Kt=n}};Hg=function(e,t,n){switch(t){case"input":if(Dg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Wh(r);if(!s)throw Error(Pe(90));RE(r),Dg(r,s)}}}break;case"textarea":jE(e,n);break;case"select":t=n.value,t!=null&&Hl(e,!!n.multiple,t,!1)}};zE=Yx;UE=Ga;var JL={usingClientEntryPoint:!1,Events:[x1,Il,Wh,FE,BE,Yx]},qc={findFiberByHostInstance:ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZL={bundleType:qc.bundleType,version:qc.version,rendererPackageName:qc.rendererPackageName,rendererConfig:qc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:li.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=WE(e),e===null?null:e.stateNode},findFiberByHostInstance:qc.findFiberByHostInstance||QL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fd.isDisabled&&Fd.supportsFiber)try{zh=Fd.inject(ZL),Eo=Fd}catch{}}ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JL;ls.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e2(t))throw Error(Pe(200));return qL(e,t,null,n)};ls.createRoot=function(e,t){if(!e2(e))throw Error(Pe(299));var n=!1,r="",s=TC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Xx(e,1,!1,null,null,n,!1,r,s),e[si]=t.current,$u(e.nodeType===8?e.parentNode:e),new Zx(t)};ls.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pe(188)):(e=Object.keys(e).join(","),Error(Pe(268,e)));return e=WE(t),e=e===null?null:e.stateNode,e};ls.flushSync=function(e){return Ga(e)};ls.hydrate=function(e,t,n){if(!Zh(t))throw Error(Pe(200));return em(null,e,t,!0,n)};ls.hydrateRoot=function(e,t,n){if(!e2(e))throw Error(Pe(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=TC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=wC(t,null,e,1,n??null,s,!1,o,i),e[si]=t.current,$u(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Jh(t)};ls.render=function(e,t,n){if(!Zh(t))throw Error(Pe(200));return em(null,e,t,!1,n)};ls.unmountComponentAtNode=function(e){if(!Zh(e))throw Error(Pe(40));return e._reactRootContainer?(Ga(function(){em(null,null,e,!1,function(){e._reactRootContainer=null,e[si]=null})}),!0):!1};ls.unstable_batchedUpdates=Yx;ls.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zh(n))throw Error(Pe(200));if(e==null||e._reactInternals===void 0)throw Error(Pe(38));return em(e,t,n,!1,r)};ls.version="18.3.1-next-f1338f8080-20240426";function EC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EC)}catch(e){console.error(e)}}EC(),EE.exports=ls;var Fr=EE.exports,M4=Fr;kg.createRoot=M4.createRoot,kg.hydrateRoot=M4.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ju(){return Ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ju.apply(this,arguments)}var Ui;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ui||(Ui={}));const P4="popstate";function eD(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:i,hash:l}=r.location;return wy("",{pathname:o,search:i,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:hh(s)}return nD(t,n,null,e)}function _n(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function CC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tD(){return Math.random().toString(36).substr(2,8)}function F4(e,t){return{usr:e.state,key:e.key,idx:t}}function wy(e,t,n,r){return n===void 0&&(n=null),Ju({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?hc(t):t,{state:n,key:t&&t.key||r||tD()})}function hh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function hc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function nD(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,l=Ui.Pop,u=null,f=m();f==null&&(f=0,i.replaceState(Ju({},i.state,{idx:f}),""));function m(){return(i.state||{idx:null}).idx}function h(){l=Ui.Pop;let T=m(),y=T==null?null:T-f;f=T,u&&u({action:l,location:v.location,delta:y})}function g(T,y){l=Ui.Push;let E=wy(v.location,T,y);n&&n(E,T),f=m()+1;let w=F4(E,f),I=v.createHref(E);try{i.pushState(w,"",I)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(I)}o&&u&&u({action:l,location:v.location,delta:1})}function p(T,y){l=Ui.Replace;let E=wy(v.location,T,y);n&&n(E,T),f=m();let w=F4(E,f),I=v.createHref(E);i.replaceState(w,"",I),o&&u&&u({action:l,location:v.location,delta:0})}function b(T){let y=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof T=="string"?T:hh(T);return E=E.replace(/ $/,"%20"),_n(y,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,y)}let v={get action(){return l},get location(){return e(s,i)},listen(T){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(P4,h),u=T,()=>{s.removeEventListener(P4,h),u=null}},createHref(T){return t(s,T)},createURL:b,encodeLocation(T){let y=b(T);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:p,go(T){return i.go(T)}};return v}var B4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(B4||(B4={}));function rD(e,t,n){return n===void 0&&(n="/"),sD(e,t,n,!1)}function sD(e,t,n,r){let s=typeof t=="string"?hc(t):t,o=t2(s.pathname||"/",n);if(o==null)return null;let i=_C(e);oD(i);let l=null;for(let u=0;l==null&&u<i.length;++u){let f=gD(o);l=mD(i[u],f,r)}return l}function _C(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};u.relativePath.startsWith("/")&&(_n(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let f=Qi([r,u.relativePath]),m=n.concat(u);o.children&&o.children.length>0&&(_n(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),_C(o.children,t,m,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:fD(f,o.index),routesMeta:m})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,i);else for(let u of NC(o.path))s(o,i,u)}),t}function NC(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=NC(r.join("/")),l=[];return l.push(...i.map(u=>u===""?o:[o,u].join("/"))),s&&l.push(...i),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function oD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:hD(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iD=/^:[\w-]+$/,aD=3,lD=2,cD=1,uD=10,dD=-2,z4=e=>e==="*";function fD(e,t){let n=e.split("/"),r=n.length;return n.some(z4)&&(r+=dD),t&&(r+=lD),n.filter(s=>!z4(s)).reduce((s,o)=>s+(iD.test(o)?aD:o===""?cD:uD),r)}function hD(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function mD(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,s={},o="/",i=[];for(let l=0;l<r.length;++l){let u=r[l],f=l===r.length-1,m=o==="/"?t:t.slice(o.length)||"/",h=U4({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},m),g=u.route;if(!h&&f&&n&&!r[r.length-1].route.index&&(h=U4({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:Qi([o,h.pathname]),pathnameBase:bD(Qi([o,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(o=Qi([o,h.pathnameBase]))}return i}function U4(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=pD(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((f,m,h)=>{let{paramName:g,isOptional:p}=m;if(g==="*"){let v=l[h]||"";i=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const b=l[h];return p&&!b?f[g]=void 0:f[g]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:i,pattern:e}}function pD(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),CC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function gD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return CC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function t2(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function yD(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?hc(e):e;return{pathname:n?n.startsWith("/")?n:xD(n,t):t,search:wD(r),hash:TD(s)}}function xD(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Sp(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vD(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function n2(e,t){let n=vD(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function r2(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=hc(e):(s=Ju({},e),_n(!s.pathname||!s.pathname.includes("?"),Sp("?","pathname","search",s)),_n(!s.pathname||!s.pathname.includes("#"),Sp("#","pathname","hash",s)),_n(!s.search||!s.search.includes("#"),Sp("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,l;if(i==null)l=n;else{let h=t.length-1;if(!r&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),h-=1;s.pathname=g.join("/")}l=h>=0?t[h]:"/"}let u=yD(s,l),f=i&&i!=="/"&&i.endsWith("/"),m=(o||i===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||m)&&(u.pathname+="/"),u}const Qi=e=>e.join("/").replace(/\/\/+/g,"/"),bD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,TD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ED(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const SC=["post","put","patch","delete"];new Set(SC);const CD=["get",...SC];new Set(CD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zu(){return Zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zu.apply(this,arguments)}const s2=N.createContext(null),_D=N.createContext(null),aa=N.createContext(null),tm=N.createContext(null),ci=N.createContext({outlet:null,matches:[],isDataRoute:!1}),kC=N.createContext(null);function ND(e,t){let{relative:n}=t===void 0?{}:t;mc()||_n(!1);let{basename:r,navigator:s}=N.useContext(aa),{hash:o,pathname:i,search:l}=OC(e,{relative:n}),u=i;return r!=="/"&&(u=i==="/"?r:Qi([r,i])),s.createHref({pathname:u,search:l,hash:o})}function mc(){return N.useContext(tm)!=null}function la(){return mc()||_n(!1),N.useContext(tm).location}function AC(e){N.useContext(aa).static||N.useLayoutEffect(e)}function js(){let{isDataRoute:e}=N.useContext(ci);return e?BD():SD()}function SD(){mc()||_n(!1);let e=N.useContext(s2),{basename:t,future:n,navigator:r}=N.useContext(aa),{matches:s}=N.useContext(ci),{pathname:o}=la(),i=JSON.stringify(n2(s,n.v7_relativeSplatPath)),l=N.useRef(!1);return AC(()=>{l.current=!0}),N.useCallback(function(f,m){if(m===void 0&&(m={}),!l.current)return;if(typeof f=="number"){r.go(f);return}let h=r2(f,JSON.parse(i),o,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Qi([t,h.pathname])),(m.replace?r.replace:r.push)(h,m.state,m)},[t,r,i,o,e])}function o2(){let{matches:e}=N.useContext(ci),t=e[e.length-1];return t?t.params:{}}function OC(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(aa),{matches:s}=N.useContext(ci),{pathname:o}=la(),i=JSON.stringify(n2(s,r.v7_relativeSplatPath));return N.useMemo(()=>r2(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function kD(e,t){return AD(e,t)}function AD(e,t,n,r){mc()||_n(!1);let{navigator:s}=N.useContext(aa),{matches:o}=N.useContext(ci),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let u=i?i.pathnameBase:"/";i&&i.route;let f=la(),m;if(t){var h;let T=typeof t=="string"?hc(t):t;u==="/"||(h=T.pathname)!=null&&h.startsWith(u)||_n(!1),m=T}else m=f;let g=m.pathname||"/",p=g;if(u!=="/"){let T=u.replace(/^\//,"").split("/");p="/"+g.replace(/^\//,"").split("/").slice(T.length).join("/")}let b=rD(e,{pathname:p}),v=LD(b&&b.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:Qi([u,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?u:Qi([u,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,n,r);return t&&v?N.createElement(tm.Provider,{value:{location:Zu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Ui.Pop}},v):v}function OD(){let e=FD(),t=ED(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:s},n):null,o)}const RD=N.createElement(OD,null);class ID extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(ci.Provider,{value:this.props.routeContext},N.createElement(kC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jD(e){let{routeContext:t,match:n,children:r}=e,s=N.useContext(s2);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(ci.Provider,{value:t},r)}function LD(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let m=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);m>=0||_n(!1),i=i.slice(0,Math.min(i.length,m+1))}let u=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<i.length;m++){let h=i[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(f=m),h.route.id){let{loaderData:g,errors:p}=n,b=h.route.loader&&g[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||b){u=!0,f>=0?i=i.slice(0,f+1):i=[i[0]];break}}}return i.reduceRight((m,h,g)=>{let p,b=!1,v=null,T=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||RD,u&&(f<0&&g===0?(zD("route-fallback",!1),b=!0,T=null):f===g&&(b=!0,T=h.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,g+1)),E=()=>{let w;return p?w=v:b?w=T:h.route.Component?w=N.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=m,N.createElement(jD,{match:h,routeContext:{outlet:m,matches:y,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?N.createElement(ID,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:E(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):E()},null)}var RC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(RC||{}),mh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mh||{});function DD(e){let t=N.useContext(s2);return t||_n(!1),t}function MD(e){let t=N.useContext(_D);return t||_n(!1),t}function PD(e){let t=N.useContext(ci);return t||_n(!1),t}function IC(e){let t=PD(),n=t.matches[t.matches.length-1];return n.route.id||_n(!1),n.route.id}function FD(){var e;let t=N.useContext(kC),n=MD(mh.UseRouteError),r=IC(mh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function BD(){let{router:e}=DD(RC.UseNavigateStable),t=IC(mh.UseNavigateStable),n=N.useRef(!1);return AC(()=>{n.current=!0}),N.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Zu({fromRouteId:t},o)))},[e,t])}const H4={};function zD(e,t,n){!t&&!H4[e]&&(H4[e]=!0)}function UD(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function $4(e){let{to:t,replace:n,state:r,relative:s}=e;mc()||_n(!1);let{future:o,static:i}=N.useContext(aa),{matches:l}=N.useContext(ci),{pathname:u}=la(),f=js(),m=r2(t,n2(l,o.v7_relativeSplatPath),u,s==="path"),h=JSON.stringify(m);return N.useEffect(()=>f(JSON.parse(h),{replace:n,state:r,relative:s}),[f,h,s,n,r]),null}function Kn(e){_n(!1)}function HD(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Ui.Pop,navigator:o,static:i=!1,future:l}=e;mc()&&_n(!1);let u=t.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:u,navigator:o,static:i,future:Zu({v7_relativeSplatPath:!1},l)}),[u,l,o,i]);typeof r=="string"&&(r=hc(r));let{pathname:m="/",search:h="",hash:g="",state:p=null,key:b="default"}=r,v=N.useMemo(()=>{let T=t2(m,u);return T==null?null:{location:{pathname:T,search:h,hash:g,state:p,key:b},navigationType:s}},[u,m,h,g,p,b,s]);return v==null?null:N.createElement(aa.Provider,{value:f},N.createElement(tm.Provider,{children:n,value:v}))}function $D(e){let{children:t,location:n}=e;return kD(Ty(t),n)}new Promise(()=>{});function Ty(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,s)=>{if(!N.isValidElement(r))return;let o=[...t,s];if(r.type===N.Fragment){n.push.apply(n,Ty(r.props.children,o));return}r.type!==Kn&&_n(!1),!r.props.index||!r.props.children||_n(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Ty(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ey(){return Ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ey.apply(this,arguments)}function WD(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function GD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function KD(e,t){return e.button===0&&(!t||t==="_self")&&!GD(e)}const YD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VD="6";try{window.__reactRouterVersion=VD}catch{}const qD="startTransition",W4=$I[qD];function QD(e){let{basename:t,children:n,future:r,window:s}=e,o=N.useRef();o.current==null&&(o.current=eD({window:s,v5Compat:!0}));let i=o.current,[l,u]=N.useState({action:i.action,location:i.location}),{v7_startTransition:f}=r||{},m=N.useCallback(h=>{f&&W4?W4(()=>u(h)):u(h)},[u,f]);return N.useLayoutEffect(()=>i.listen(m),[i,m]),N.useEffect(()=>UD(r),[r]),N.createElement(HD,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,future:r})}const XD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cy=N.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:i,state:l,target:u,to:f,preventScrollReset:m,viewTransition:h}=t,g=WD(t,YD),{basename:p}=N.useContext(aa),b,v=!1;if(typeof f=="string"&&JD.test(f)&&(b=f,XD))try{let w=new URL(window.location.href),I=f.startsWith("//")?new URL(w.protocol+f):new URL(f),j=t2(I.pathname,p);I.origin===w.origin&&j!=null?f=j+I.search+I.hash:v=!0}catch{}let T=ND(f,{relative:s}),y=ZD(f,{replace:i,state:l,target:u,preventScrollReset:m,relative:s,viewTransition:h});function E(w){r&&r(w),w.defaultPrevented||y(w)}return N.createElement("a",Ey({},g,{href:b||T,onClick:v||o?r:E,ref:n,target:u}))});var G4;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(G4||(G4={}));var K4;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(K4||(K4={}));function ZD(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,u=js(),f=la(),m=OC(e,{relative:i});return N.useCallback(h=>{if(KD(h,n)){h.preventDefault();let g=r!==void 0?r:hh(f)===hh(m);u(e,{replace:g,state:s,preventScrollReset:o,relative:i,viewTransition:l})}},[f,u,m,r,s,n,e,o,i,l])}const _y={default:{id:"default",name:"深度质感",icon:"🎨",description:"深度质感，层次分明的专业主题",dark:{bg:"#141415",surface:"#1a1a1b",elevated:"#1f1f1f",text:"#f1f5f9",textSecondary:"#cbd5e1",textMuted:"#94a3b8",border:"#475569",primary:"#3b82f6",primaryHover:"#2563eb",secondary:"#3b82f6",secondaryHover:"#2563eb",accent:"#8b5cf6",success:"#10b981",warning:"#f59e0b",error:"#ef4444",info:"#06b6d4"},light:{bg:"#f8fafc",surface:"#e2e8f0",elevated:"#f1f5f9",text:"#0f172a",textSecondary:"#334155",textMuted:"#64748b",border:"#cbd5e1",primary:"#3b82f6",primaryHover:"#2563eb",secondary:"#3b82f6",secondaryHover:"#2563eb",accent:"#8b5cf6",success:"#10b981",warning:"#f59e0b",error:"#ef4444",info:"#06b6d4"}}},eM=(e="default",t=!1)=>{const n=_y[e];return n?n[t?"dark":"light"]:(console.warn(`主题 "${e}" 不存在，使用默认主题`),_y.default[t?"dark":"light"])},tM=e=>{const t=document.documentElement;t.style.setProperty("--theme-bg",e.bg),t.style.setProperty("--theme-surface",e.surface),t.style.setProperty("--theme-elevated",e.elevated),t.style.setProperty("--theme-text",e.text),t.style.setProperty("--theme-text-secondary",e.textSecondary),t.style.setProperty("--theme-text-muted",e.textMuted),t.style.setProperty("--theme-border",e.border),t.style.setProperty("--theme-primary",e.primary),t.style.setProperty("--theme-primary-hover",e.primaryHover),t.style.setProperty("--theme-secondary",e.secondary),t.style.setProperty("--theme-secondary-hover",e.secondaryHover),t.style.setProperty("--theme-accent",e.accent),t.style.setProperty("--theme-success",e.success),t.style.setProperty("--theme-warning",e.warning),t.style.setProperty("--theme-error",e.error),t.style.setProperty("--theme-info",e.info),document.body.style.color=e.text,document.body.style.background=e.bg},jC=N.createContext(),Y4=Object.values(_y),nM=({children:e})=>{const[t,n]=N.useState(!1),[r,s]=N.useState(!1),[o,i]=N.useState("default");N.useEffect(()=>{try{const m=localStorage.getItem("darkMode"),h=localStorage.getItem("selectedTheme"),g=document.documentElement.classList.contains("dark");let p;m!==null?p=JSON.parse(m):p=g||window.matchMedia("(prefers-color-scheme: dark)").matches;const b=h||"default";console.log("🎨 [ThemeContext] 初始化主题:",{savedMode:m,hasDarkClass:g,initialDarkMode:p,initialTheme:b}),s(p),i(b),n(!0)}catch(m){console.error("主题初始化失败:",m),s(!1),i("default"),n(!0)}},[]),N.useEffect(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");const m=eM(o,r);tM(m),t&&(localStorage.setItem("darkMode",JSON.stringify(r)),localStorage.setItem("selectedTheme",o))},[r,o,t]);const f={darkMode:r,toggleDarkMode:()=>{console.log("🔄 切换主题模式，当前:",r?"深色":"浅色"),s(m=>{const h=!m;return console.log("🔄 切换到:",h?"深色":"浅色"),h})},currentTheme:o,changeTheme:m=>{const h=Y4.find(g=>g.id===m);h&&(i(m),console.log("🔄 切换主题到:",h.name))},themeOptions:Y4,isInitialized:t};return c.jsx(jC.Provider,{value:f,children:e})},LC=N.createContext(),DC=()=>{const e=N.useContext(LC);if(!e)throw new Error("useEdit must be used within an EditProvider");return e},rM=({children:e})=>{const[t,n]=N.useState(null),i={editingNoteId:t,startEditing:l=>{n(l)},stopEditing:()=>{n(null)},isEditing:l=>t===l};return c.jsx(LC.Provider,{value:i,children:e})};function MC(e,t){return function(){return e.apply(t,arguments)}}const{toString:sM}=Object.prototype,{getPrototypeOf:i2}=Object,{iterator:nm,toStringTag:PC}=Symbol,rm=(e=>t=>{const n=sM.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),oo=e=>(e=e.toLowerCase(),t=>rm(t)===e),sm=e=>t=>typeof t===e,{isArray:pc}=Array,e1=sm("undefined");function b1(e){return e!==null&&!e1(e)&&e.constructor!==null&&!e1(e.constructor)&&$r(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const FC=oo("ArrayBuffer");function oM(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&FC(e.buffer),t}const iM=sm("string"),$r=sm("function"),BC=sm("number"),w1=e=>e!==null&&typeof e=="object",aM=e=>e===!0||e===!1,Cf=e=>{if(rm(e)!=="object")return!1;const t=i2(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(PC in e)&&!(nm in e)},lM=e=>{if(!w1(e)||b1(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},cM=oo("Date"),uM=oo("File"),dM=oo("Blob"),fM=oo("FileList"),hM=e=>w1(e)&&$r(e.pipe),mM=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||$r(e.append)&&((t=rm(e))==="formdata"||t==="object"&&$r(e.toString)&&e.toString()==="[object FormData]"))},pM=oo("URLSearchParams"),[gM,yM,xM,vM]=["ReadableStream","Request","Response","Headers"].map(oo),bM=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function T1(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),pc(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(b1(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let l;for(r=0;r<i;r++)l=o[r],t.call(null,e[l],l,e)}}function zC(e,t){if(b1(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const Ma=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),UC=e=>!e1(e)&&e!==Ma;function Ny(){const{caseless:e}=UC(this)&&this||{},t={},n=(r,s)=>{const o=e&&zC(t,s)||s;Cf(t[o])&&Cf(r)?t[o]=Ny(t[o],r):Cf(r)?t[o]=Ny({},r):pc(r)?t[o]=r.slice():t[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&T1(arguments[r],n);return t}const wM=(e,t,n,{allOwnKeys:r}={})=>(T1(t,(s,o)=>{n&&$r(s)?e[o]=MC(s,n):e[o]=s},{allOwnKeys:r}),e),TM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),EM=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},CM=(e,t,n,r)=>{let s,o,i;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)i=s[o],(!r||r(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=n!==!1&&i2(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},_M=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},NM=e=>{if(!e)return null;if(pc(e))return e;let t=e.length;if(!BC(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},SM=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&i2(Uint8Array)),kM=(e,t)=>{const r=(e&&e[nm]).call(e);let s;for(;(s=r.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},AM=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},OM=oo("HTMLFormElement"),RM=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),V4=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),IM=oo("RegExp"),HC=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};T1(n,(s,o)=>{let i;(i=t(s,o,e))!==!1&&(r[o]=i||s)}),Object.defineProperties(e,r)},jM=e=>{HC(e,(t,n)=>{if($r(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if($r(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},LM=(e,t)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return pc(e)?r(e):r(String(e).split(t)),n},DM=()=>{},MM=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function PM(e){return!!(e&&$r(e.append)&&e[PC]==="FormData"&&e[nm])}const FM=e=>{const t=new Array(10),n=(r,s)=>{if(w1(r)){if(t.indexOf(r)>=0)return;if(b1(r))return r;if(!("toJSON"in r)){t[s]=r;const o=pc(r)?[]:{};return T1(r,(i,l)=>{const u=n(i,s+1);!e1(u)&&(o[l]=u)}),t[s]=void 0,o}}return r};return n(e,0)},BM=oo("AsyncFunction"),zM=e=>e&&(w1(e)||$r(e))&&$r(e.then)&&$r(e.catch),$C=((e,t)=>e?setImmediate:t?((n,r)=>(Ma.addEventListener("message",({source:s,data:o})=>{s===Ma&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Ma.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",$r(Ma.postMessage)),UM=typeof queueMicrotask<"u"?queueMicrotask.bind(Ma):typeof process<"u"&&process.nextTick||$C,HM=e=>e!=null&&$r(e[nm]),Te={isArray:pc,isArrayBuffer:FC,isBuffer:b1,isFormData:mM,isArrayBufferView:oM,isString:iM,isNumber:BC,isBoolean:aM,isObject:w1,isPlainObject:Cf,isEmptyObject:lM,isReadableStream:gM,isRequest:yM,isResponse:xM,isHeaders:vM,isUndefined:e1,isDate:cM,isFile:uM,isBlob:dM,isRegExp:IM,isFunction:$r,isStream:hM,isURLSearchParams:pM,isTypedArray:SM,isFileList:fM,forEach:T1,merge:Ny,extend:wM,trim:bM,stripBOM:TM,inherits:EM,toFlatObject:CM,kindOf:rm,kindOfTest:oo,endsWith:_M,toArray:NM,forEachEntry:kM,matchAll:AM,isHTMLForm:OM,hasOwnProperty:V4,hasOwnProp:V4,reduceDescriptors:HC,freezeMethods:jM,toObjectSet:LM,toCamelCase:RM,noop:DM,toFiniteNumber:MM,findKey:zC,global:Ma,isContextDefined:UC,isSpecCompliantForm:PM,toJSONObject:FM,isAsyncFn:BM,isThenable:zM,setImmediate:$C,asap:UM,isIterable:HM};function xt(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Te.inherits(xt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const WC=xt.prototype,GC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{GC[e]={value:e}});Object.defineProperties(xt,GC);Object.defineProperty(WC,"isAxiosError",{value:!0});xt.from=(e,t,n,r,s,o)=>{const i=Object.create(WC);return Te.toFlatObject(e,i,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),xt.call(i,e.message,t,n,r,s),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const $M=null;function Sy(e){return Te.isPlainObject(e)||Te.isArray(e)}function KC(e){return Te.endsWith(e,"[]")?e.slice(0,-2):e}function q4(e,t,n){return e?e.concat(t).map(function(s,o){return s=KC(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function WM(e){return Te.isArray(e)&&!e.some(Sy)}const GM=Te.toFlatObject(Te,{},null,function(t){return/^is[A-Z]/.test(t)});function om(e,t,n){if(!Te.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,T){return!Te.isUndefined(T[v])});const r=n.metaTokens,s=n.visitor||m,o=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(t);if(!Te.isFunction(s))throw new TypeError("visitor must be a function");function f(b){if(b===null)return"";if(Te.isDate(b))return b.toISOString();if(Te.isBoolean(b))return b.toString();if(!u&&Te.isBlob(b))throw new xt("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(b)||Te.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function m(b,v,T){let y=b;if(b&&!T&&typeof b=="object"){if(Te.endsWith(v,"{}"))v=r?v:v.slice(0,-2),b=JSON.stringify(b);else if(Te.isArray(b)&&WM(b)||(Te.isFileList(b)||Te.endsWith(v,"[]"))&&(y=Te.toArray(b)))return v=KC(v),y.forEach(function(w,I){!(Te.isUndefined(w)||w===null)&&t.append(i===!0?q4([v],I,o):i===null?v:v+"[]",f(w))}),!1}return Sy(b)?!0:(t.append(q4(T,v,o),f(b)),!1)}const h=[],g=Object.assign(GM,{defaultVisitor:m,convertValue:f,isVisitable:Sy});function p(b,v){if(!Te.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(b),Te.forEach(b,function(y,E){(!(Te.isUndefined(y)||y===null)&&s.call(t,y,Te.isString(E)?E.trim():E,v,g))===!0&&p(y,v?v.concat(E):[E])}),h.pop()}}if(!Te.isObject(e))throw new TypeError("data must be an object");return p(e),t}function Q4(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function a2(e,t){this._pairs=[],e&&om(e,this,t)}const YC=a2.prototype;YC.append=function(t,n){this._pairs.push([t,n])};YC.toString=function(t){const n=t?function(r){return t.call(this,r,Q4)}:Q4;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function KM(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function VC(e,t,n){if(!t)return e;const r=n&&n.encode||KM;Te.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(t,n):o=Te.isURLSearchParams(t)?t.toString():new a2(t,n).toString(r),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class YM{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Te.forEach(this.handlers,function(r){r!==null&&t(r)})}}const X4=YM,qC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},VM=typeof URLSearchParams<"u"?URLSearchParams:a2,qM=typeof FormData<"u"?FormData:null,QM=typeof Blob<"u"?Blob:null,XM={isBrowser:!0,classes:{URLSearchParams:VM,FormData:qM,Blob:QM},protocols:["http","https","file","blob","url","data"]},l2=typeof window<"u"&&typeof document<"u",ky=typeof navigator=="object"&&navigator||void 0,JM=l2&&(!ky||["ReactNative","NativeScript","NS"].indexOf(ky.product)<0),ZM=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),eP=l2&&window.location.href||"http://localhost",tP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:l2,hasStandardBrowserEnv:JM,hasStandardBrowserWebWorkerEnv:ZM,navigator:ky,origin:eP},Symbol.toStringTag,{value:"Module"})),fr={...tP,...XM};function nP(e,t){return om(e,new fr.classes.URLSearchParams,{visitor:function(n,r,s,o){return fr.isNode&&Te.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function rP(e){return Te.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function sP(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}function QC(e){function t(n,r,s,o){let i=n[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),u=o>=n.length;return i=!i&&Te.isArray(s)?s.length:i,u?(Te.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!l):((!s[i]||!Te.isObject(s[i]))&&(s[i]=[]),t(n,r,s[i],o)&&Te.isArray(s[i])&&(s[i]=sP(s[i])),!l)}if(Te.isFormData(e)&&Te.isFunction(e.entries)){const n={};return Te.forEachEntry(e,(r,s)=>{t(rP(r),s,n,0)}),n}return null}function oP(e,t,n){if(Te.isString(e))try{return(t||JSON.parse)(e),Te.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const c2={transitional:qC,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=Te.isObject(t);if(o&&Te.isHTMLForm(t)&&(t=new FormData(t)),Te.isFormData(t))return s?JSON.stringify(QC(t)):t;if(Te.isArrayBuffer(t)||Te.isBuffer(t)||Te.isStream(t)||Te.isFile(t)||Te.isBlob(t)||Te.isReadableStream(t))return t;if(Te.isArrayBufferView(t))return t.buffer;if(Te.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return nP(t,this.formSerializer).toString();if((l=Te.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return om(l?{"files[]":t}:t,u&&new u,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),oP(t)):t}],transformResponse:[function(t){const n=this.transitional||c2.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Te.isResponse(t)||Te.isReadableStream(t))return t;if(t&&Te.isString(t)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(i)throw l.name==="SyntaxError"?xt.from(l,xt.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fr.classes.FormData,Blob:fr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],e=>{c2.headers[e]={}});const u2=c2,iP=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),aP=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||t[n]&&iP[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},J4=Symbol("internals");function Qc(e){return e&&String(e).trim().toLowerCase()}function _f(e){return e===!1||e==null?e:Te.isArray(e)?e.map(_f):String(e)}function lP(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const cP=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function kp(e,t,n,r,s){if(Te.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!Te.isString(t)){if(Te.isString(r))return t.indexOf(r)!==-1;if(Te.isRegExp(r))return r.test(t)}}function uP(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function dP(e,t){const n=Te.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,o,i){return this[r].call(this,t,s,o,i)},configurable:!0})})}class im{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function o(l,u,f){const m=Qc(u);if(!m)throw new Error("header name must be a non-empty string");const h=Te.findKey(s,m);(!h||s[h]===void 0||f===!0||f===void 0&&s[h]!==!1)&&(s[h||u]=_f(l))}const i=(l,u)=>Te.forEach(l,(f,m)=>o(f,m,u));if(Te.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(Te.isString(t)&&(t=t.trim())&&!cP(t))i(aP(t),n);else if(Te.isObject(t)&&Te.isIterable(t)){let l={},u,f;for(const m of t){if(!Te.isArray(m))throw TypeError("Object iterator must return a key-value pair");l[f=m[0]]=(u=l[f])?Te.isArray(u)?[...u,m[1]]:[u,m[1]]:m[1]}i(l,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=Qc(t),t){const r=Te.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return lP(s);if(Te.isFunction(n))return n.call(this,s,r);if(Te.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Qc(t),t){const r=Te.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||kp(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function o(i){if(i=Qc(i),i){const l=Te.findKey(r,i);l&&(!n||kp(r,r[l],l,n))&&(delete r[l],s=!0)}}return Te.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!t||kp(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,r={};return Te.forEach(this,(s,o)=>{const i=Te.findKey(r,o);if(i){n[i]=_f(s),delete n[o];return}const l=t?uP(o):String(o).trim();l!==o&&delete n[o],n[l]=_f(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Te.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&Te.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[J4]=this[J4]={accessors:{}}).accessors,s=this.prototype;function o(i){const l=Qc(i);r[l]||(dP(s,i),r[l]=!0)}return Te.isArray(t)?t.forEach(o):o(t),this}}im.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(im.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Te.freezeMethods(im);const eo=im;function Ap(e,t){const n=this||u2,r=t||n,s=eo.from(r.headers);let o=r.data;return Te.forEach(e,function(l){o=l.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function XC(e){return!!(e&&e.__CANCEL__)}function gc(e,t,n){xt.call(this,e??"canceled",xt.ERR_CANCELED,t,n),this.name="CanceledError"}Te.inherits(gc,xt,{__CANCEL__:!0});function JC(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new xt("Request failed with status code "+n.status,[xt.ERR_BAD_REQUEST,xt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function fP(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function hP(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,o=0,i;return t=t!==void 0?t:1e3,function(u){const f=Date.now(),m=r[o];i||(i=f),n[s]=u,r[s]=f;let h=o,g=0;for(;h!==s;)g+=n[h++],h=h%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),f-i<t)return;const p=m&&f-m;return p?Math.round(g*1e3/p):void 0}}function mP(e,t){let n=0,r=1e3/t,s,o;const i=(f,m=Date.now())=>{n=m,s=null,o&&(clearTimeout(o),o=null),e(...f)};return[(...f)=>{const m=Date.now(),h=m-n;h>=r?i(f,m):(s=f,o||(o=setTimeout(()=>{o=null,i(s)},r-h)))},()=>s&&i(s)]}const ph=(e,t,n=3)=>{let r=0;const s=hP(50,250);return mP(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,u=i-r,f=s(u),m=i<=l;r=i;const h={loaded:i,total:l,progress:l?i/l:void 0,bytes:u,rate:f||void 0,estimated:f&&l&&m?(l-i)/f:void 0,event:o,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},n)},Z4=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},eb=e=>(...t)=>Te.asap(()=>e(...t)),pP=fr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,fr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(fr.origin),fr.navigator&&/(msie|trident)/i.test(fr.navigator.userAgent)):()=>!0,gP=fr.hasStandardBrowserEnv?{write(e,t,n,r,s,o){const i=[e+"="+encodeURIComponent(t)];Te.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Te.isString(r)&&i.push("path="+r),Te.isString(s)&&i.push("domain="+s),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yP(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function xP(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ZC(e,t,n){let r=!yP(t);return e&&(r||n==!1)?xP(e,t):t}const tb=e=>e instanceof eo?{...e}:e;function Ka(e,t){t=t||{};const n={};function r(f,m,h,g){return Te.isPlainObject(f)&&Te.isPlainObject(m)?Te.merge.call({caseless:g},f,m):Te.isPlainObject(m)?Te.merge({},m):Te.isArray(m)?m.slice():m}function s(f,m,h,g){if(Te.isUndefined(m)){if(!Te.isUndefined(f))return r(void 0,f,h,g)}else return r(f,m,h,g)}function o(f,m){if(!Te.isUndefined(m))return r(void 0,m)}function i(f,m){if(Te.isUndefined(m)){if(!Te.isUndefined(f))return r(void 0,f)}else return r(void 0,m)}function l(f,m,h){if(h in t)return r(f,m);if(h in e)return r(void 0,f)}const u={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(f,m,h)=>s(tb(f),tb(m),h,!0)};return Te.forEach(Object.keys({...e,...t}),function(m){const h=u[m]||s,g=h(e[m],t[m],m);Te.isUndefined(g)&&h!==l||(n[m]=g)}),n}const e_=e=>{const t=Ka({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:l}=t;t.headers=i=eo.from(i),t.url=VC(ZC(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(Te.isFormData(n)){if(fr.hasStandardBrowserEnv||fr.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((u=i.getContentType())!==!1){const[f,...m]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];i.setContentType([f||"multipart/form-data",...m].join("; "))}}if(fr.hasStandardBrowserEnv&&(r&&Te.isFunction(r)&&(r=r(t)),r||r!==!1&&pP(t.url))){const f=s&&o&&gP.read(o);f&&i.set(s,f)}return t},vP=typeof XMLHttpRequest<"u",bP=vP&&function(e){return new Promise(function(n,r){const s=e_(e);let o=s.data;const i=eo.from(s.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:f}=s,m,h,g,p,b;function v(){p&&p(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let T=new XMLHttpRequest;T.open(s.method.toUpperCase(),s.url,!0),T.timeout=s.timeout;function y(){if(!T)return;const w=eo.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),j={data:!l||l==="text"||l==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:w,config:e,request:T};JC(function(C){n(C),v()},function(C){r(C),v()},j),T=null}"onloadend"in T?T.onloadend=y:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(y)},T.onabort=function(){T&&(r(new xt("Request aborted",xt.ECONNABORTED,e,T)),T=null)},T.onerror=function(){r(new xt("Network Error",xt.ERR_NETWORK,e,T)),T=null},T.ontimeout=function(){let I=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const j=s.transitional||qC;s.timeoutErrorMessage&&(I=s.timeoutErrorMessage),r(new xt(I,j.clarifyTimeoutError?xt.ETIMEDOUT:xt.ECONNABORTED,e,T)),T=null},o===void 0&&i.setContentType(null),"setRequestHeader"in T&&Te.forEach(i.toJSON(),function(I,j){T.setRequestHeader(j,I)}),Te.isUndefined(s.withCredentials)||(T.withCredentials=!!s.withCredentials),l&&l!=="json"&&(T.responseType=s.responseType),f&&([g,b]=ph(f,!0),T.addEventListener("progress",g)),u&&T.upload&&([h,p]=ph(u),T.upload.addEventListener("progress",h),T.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(m=w=>{T&&(r(!w||w.type?new gc(null,e,T):w),T.abort(),T=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const E=fP(s.url);if(E&&fr.protocols.indexOf(E)===-1){r(new xt("Unsupported protocol "+E+":",xt.ERR_BAD_REQUEST,e));return}T.send(o||null)})},wP=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const o=function(f){if(!s){s=!0,l();const m=f instanceof Error?f:this.reason;r.abort(m instanceof xt?m:new gc(m instanceof Error?m.message:m))}};let i=t&&setTimeout(()=>{i=null,o(new xt(`timeout ${t} of ms exceeded`,xt.ETIMEDOUT))},t);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),e=null)};e.forEach(f=>f.addEventListener("abort",o));const{signal:u}=r;return u.unsubscribe=()=>Te.asap(l),u}},TP=wP,EP=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},CP=async function*(e,t){for await(const n of _P(e))yield*EP(n,t)},_P=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},nb=(e,t,n,r)=>{const s=CP(e,t);let o=0,i,l=u=>{i||(i=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:m}=await s.next();if(f){l(),u.close();return}let h=m.byteLength;if(n){let g=o+=h;n(g)}u.enqueue(new Uint8Array(m))}catch(f){throw l(f),f}},cancel(u){return l(u),s.return()}},{highWaterMark:2})},am=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",t_=am&&typeof ReadableStream=="function",NP=am&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),n_=(e,...t)=>{try{return!!e(...t)}catch{return!1}},SP=t_&&n_(()=>{let e=!1;const t=new Request(fr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),rb=64*1024,Ay=t_&&n_(()=>Te.isReadableStream(new Response("").body)),gh={stream:Ay&&(e=>e.body)};am&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!gh[t]&&(gh[t]=Te.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new xt(`Response type '${t}' is not supported`,xt.ERR_NOT_SUPPORT,r)})})})(new Response);const kP=async e=>{if(e==null)return 0;if(Te.isBlob(e))return e.size;if(Te.isSpecCompliantForm(e))return(await new Request(fr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(e)||Te.isArrayBuffer(e))return e.byteLength;if(Te.isURLSearchParams(e)&&(e=e+""),Te.isString(e))return(await NP(e)).byteLength},AP=async(e,t)=>{const n=Te.toFiniteNumber(e.getContentLength());return n??kP(t)},OP=am&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:o,timeout:i,onDownloadProgress:l,onUploadProgress:u,responseType:f,headers:m,withCredentials:h="same-origin",fetchOptions:g}=e_(e);f=f?(f+"").toLowerCase():"text";let p=TP([s,o&&o.toAbortSignal()],i),b;const v=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let T;try{if(u&&SP&&n!=="get"&&n!=="head"&&(T=await AP(m,r))!==0){let j=new Request(t,{method:"POST",body:r,duplex:"half"}),_;if(Te.isFormData(r)&&(_=j.headers.get("content-type"))&&m.setContentType(_),j.body){const[C,k]=Z4(T,ph(eb(u)));r=nb(j.body,rb,C,k)}}Te.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;b=new Request(t,{...g,signal:p,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:y?h:void 0});let E=await fetch(b,g);const w=Ay&&(f==="stream"||f==="response");if(Ay&&(l||w&&v)){const j={};["status","statusText","headers"].forEach(R=>{j[R]=E[R]});const _=Te.toFiniteNumber(E.headers.get("content-length")),[C,k]=l&&Z4(_,ph(eb(l),!0))||[];E=new Response(nb(E.body,rb,C,()=>{k&&k(),v&&v()}),j)}f=f||"text";let I=await gh[Te.findKey(gh,f)||"text"](E,e);return!w&&v&&v(),await new Promise((j,_)=>{JC(j,_,{data:I,headers:eo.from(E.headers),status:E.status,statusText:E.statusText,config:e,request:b})})}catch(y){throw v&&v(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new xt("Network Error",xt.ERR_NETWORK,e,b),{cause:y.cause||y}):xt.from(y,y&&y.code,e,b)}}),Oy={http:$M,xhr:bP,fetch:OP};Te.forEach(Oy,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const sb=e=>`- ${e}`,RP=e=>Te.isFunction(e)||e===null||e===!1,r_={getAdapter:e=>{e=Te.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let o=0;o<t;o++){n=e[o];let i;if(r=n,!RP(n)&&(r=Oy[(i=String(n)).toLowerCase()],r===void 0))throw new xt(`Unknown adapter '${i}'`);if(r)break;s[i||"#"+o]=r}if(!r){const o=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=t?o.length>1?`since :
`+o.map(sb).join(`
`):" "+sb(o[0]):"as no adapter specified";throw new xt("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Oy};function Op(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new gc(null,e)}function ob(e){return Op(e),e.headers=eo.from(e.headers),e.data=Ap.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),r_.getAdapter(e.adapter||u2.adapter)(e).then(function(r){return Op(e),r.data=Ap.call(e,e.transformResponse,r),r.headers=eo.from(r.headers),r},function(r){return XC(r)||(Op(e),r&&r.response&&(r.response.data=Ap.call(e,e.transformResponse,r.response),r.response.headers=eo.from(r.response.headers))),Promise.reject(r)})}const s_="1.11.0",lm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{lm[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const ib={};lm.transitional=function(t,n,r){function s(o,i){return"[Axios v"+s_+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,l)=>{if(t===!1)throw new xt(s(i," has been removed"+(n?" in "+n:"")),xt.ERR_DEPRECATED);return n&&!ib[i]&&(ib[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,l):!0}};lm.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function IP(e,t,n){if(typeof e!="object")throw new xt("options must be an object",xt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],i=t[o];if(i){const l=e[o],u=l===void 0||i(l,o,e);if(u!==!0)throw new xt("option "+o+" must be "+u,xt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xt("Unknown option "+o,xt.ERR_BAD_OPTION)}}const Nf={assertOptions:IP,validators:lm},mo=Nf.validators;class yh{constructor(t){this.defaults=t||{},this.interceptors={request:new X4,response:new X4}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ka(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Nf.assertOptions(r,{silentJSONParsing:mo.transitional(mo.boolean),forcedJSONParsing:mo.transitional(mo.boolean),clarifyTimeoutError:mo.transitional(mo.boolean)},!1),s!=null&&(Te.isFunction(s)?n.paramsSerializer={serialize:s}:Nf.assertOptions(s,{encode:mo.function,serialize:mo.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Nf.assertOptions(n,{baseUrl:mo.spelling("baseURL"),withXsrfToken:mo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&Te.merge(o.common,o[n.method]);o&&Te.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),n.headers=eo.concat(i,o);const l=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(u=u&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const f=[];this.interceptors.response.forEach(function(v){f.push(v.fulfilled,v.rejected)});let m,h=0,g;if(!u){const b=[ob.bind(this),void 0];for(b.unshift(...l),b.push(...f),g=b.length,m=Promise.resolve(n);h<g;)m=m.then(b[h++],b[h++]);return m}g=l.length;let p=n;for(h=0;h<g;){const b=l[h++],v=l[h++];try{p=b(p)}catch(T){v.call(this,T);break}}try{m=ob.call(this,p)}catch(b){return Promise.reject(b)}for(h=0,g=f.length;h<g;)m=m.then(f[h++],f[h++]);return m}getUri(t){t=Ka(this.defaults,t);const n=ZC(t.baseURL,t.url,t.allowAbsoluteUrls);return VC(n,t.params,t.paramsSerializer)}}Te.forEach(["delete","get","head","options"],function(t){yh.prototype[t]=function(n,r){return this.request(Ka(r||{},{method:t,url:n,data:(r||{}).data}))}});Te.forEach(["post","put","patch"],function(t){function n(r){return function(o,i,l){return this.request(Ka(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}yh.prototype[t]=n(),yh.prototype[t+"Form"]=n(!0)});const Sf=yh;class d2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(l=>{r.subscribe(l),o=l}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},t(function(o,i,l){r.reason||(r.reason=new gc(o,i,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new d2(function(s){t=s}),cancel:t}}}const jP=d2;function LP(e){return function(n){return e.apply(null,n)}}function DP(e){return Te.isObject(e)&&e.isAxiosError===!0}const Ry={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ry).forEach(([e,t])=>{Ry[t]=e});const MP=Ry;function o_(e){const t=new Sf(e),n=MC(Sf.prototype.request,t);return Te.extend(n,Sf.prototype,t,{allOwnKeys:!0}),Te.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return o_(Ka(e,s))},n}const In=o_(u2);In.Axios=Sf;In.CanceledError=gc;In.CancelToken=jP;In.isCancel=XC;In.VERSION=s_;In.toFormData=om;In.AxiosError=xt;In.Cancel=In.CanceledError;In.all=function(t){return Promise.all(t)};In.spread=LP;In.isAxiosError=DP;In.mergeConfig=Ka;In.AxiosHeaders=eo;In.formToJSON=e=>QC(Te.isHTMLForm(e)?new FormData(e):e);In.getAdapter=r_.getAdapter;In.HttpStatusCode=MP;In.default=In;const Bl=In,PP=!1,FP=!0,i_=()=>window.Capacitor!==void 0;let zn;const ab=typeof window<"u"?localStorage.getItem("API_BASE_URL"):null;ab?zn=ab:i_()?zn="http://192.168.5.5:30002/api":zn="/api";console.log("当前环境:",{isDevelopment:PP,isProduction:FP,isCapacitor:i_(),API_BASE_URL:zn});const a_=Bl.create({baseURL:zn,withCredentials:!0,headers:{"Content-Type":"application/json"}}),BP=async()=>{try{return await a_.get("/config")}catch(e){throw console.error("获取配置失败:",e),e}},zP=async e=>{try{return await a_.post("/config",e)}catch(t){throw console.error("保存配置失败:",t),t}},zo={TAGS:"memeos_tags",TAG_COLORS:"memeos_tag_colors",USER_PREFERENCES:"memeos_user_preferences"},Uo={tags:[],tagColors:{},userPreferences:{expandAllTags:!1}},Ta=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Li=e=>{if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array)return e.map(t=>Li(t));if(typeof e=="object"){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=Li(e[n]));return t}};class UP{constructor(){this.config=Li(Uo),this.listeners=new Map,this.isOnline=!1,this.syncInProgress=!1,this.init()}async init(){try{if(await this.loadFromDatabase(),!this.config.tags.length&&!Object.keys(this.config.tagColors).length){const t=localStorage.getItem(zo.TAGS),n=localStorage.getItem(zo.TAG_COLORS),r=localStorage.getItem(zo.USER_PREFERENCES);this.config={tags:t?JSON.parse(t):Uo.tags,tagColors:n?JSON.parse(n):Uo.tagColors,userPreferences:r?JSON.parse(r):Uo.userPreferences}}this.saveToLocalStorage()}catch(t){console.error("初始化配置失败:",t),this.config=Li(Uo),this.saveToLocalStorage()}}async loadFromDatabase(){try{const t=await BP();t.data&&(this.config={tags:t.data.tags||Uo.tags,tagColors:t.data.tagColors||Uo.tagColors,userPreferences:t.data.userPreferences||Uo.userPreferences},this.isOnline=!0,console.log("从数据库加载配置成功"),this.notifyListeners("tagsChanged",this.config.tags),this.notifyListeners("tagColorsChanged",this.config.tagColors),this.notifyListeners("userPreferencesChanged",this.config.userPreferences))}catch(t){console.warn("从数据库加载配置失败，使用本地存储:",t),this.isOnline=!1}}async saveToDatabase(){if(!this.syncInProgress)try{this.syncInProgress=!0;const t={tags:this.config.tags,tagColors:this.config.tagColors,userPreferences:this.config.userPreferences};await zP(t),this.isOnline=!0,console.log("配置保存到数据库成功")}catch(t){throw console.error("保存配置到数据库失败:",t),this.isOnline=!1,t}finally{this.syncInProgress=!1}}initializeDefaultTags(){const t=[{id:Ta(),name:"工作",isPinned:!0,children:[]},{id:Ta(),name:"学习",isPinned:!1,children:[]},{id:Ta(),name:"项目A",isPinned:!1,children:[]},{id:Ta(),name:"项目B",isPinned:!1,children:[]},{id:Ta(),name:"编程",isPinned:!1,children:[]},{id:Ta(),name:"设计",isPinned:!1,children:[]}];this.config.tags=t,this.saveToLocalStorage()}saveToLocalStorage(){try{localStorage.setItem(zo.TAGS,JSON.stringify(this.config.tags)),localStorage.setItem(zo.TAG_COLORS,JSON.stringify(this.config.tagColors)),localStorage.setItem(zo.USER_PREFERENCES,JSON.stringify(this.config.userPreferences))}catch(t){console.error("保存到本地存储失败:",t)}}async syncConfig(){this.saveToLocalStorage();try{await this.saveToDatabase()}catch(t){console.warn("数据库同步失败，配置已保存到本地存储:",t)}}getTags(){return Li(this.config.tags)}getTagColors(){return Li(this.config.tagColors)}getUserPreferences(){return Li(this.config.userPreferences)}async setUserPreferences(t){this.config.userPreferences={...this.config.userPreferences,...t},await this.syncConfig(),this.notifyListeners("userPreferencesChanged",this.config.userPreferences)}async addTag(t,n=null){const r={id:Ta(),name:t.name,isPinned:t.isPinned||!1,children:[]};return this.config.tags.push(r),await this.syncConfig(),this.notifyListeners("tagsChanged",this.config.tags),r}async updateTag(t,n){const r=this.findTagById(t);return r?(Object.assign(r,n),await this.syncConfig(),this.notifyListeners("tagsChanged",this.config.tags),r):null}async deleteTag(t){const n=this.config.tags.findIndex(r=>r.id===t);return n!==-1?(this.config.tags.splice(n,1),await this.syncConfig(),this.notifyListeners("tagsChanged",this.config.tags),!0):!1}async setTagColor(t,n){if(!t||!n)throw new Error("标签名和颜色不能为空");this.config.tagColors[t]=n,await this.syncConfig(),this.notifyListeners("tagColorsChanged",this.config.tagColors)}async moveTag(t,n,r=null){const s=this.findAndRemoveTagById(t);return s?(r!==null&&r>=0&&r<=this.config.tags.length?this.config.tags.splice(r,0,s):this.config.tags.push(s),await this.syncConfig(),this.notifyListeners("tagsChanged",this.config.tags),!0):!1}findTagById(t){return this.config.tags.find(n=>n.id===t)}findAndRemoveTagById(t){for(let n=0;n<this.config.tags.length;n++)if(this.config.tags[n].id===t)return this.config.tags.splice(n,1)[0];return null}addListener(t,n){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(n)}removeListener(t,n){this.listeners.has(t)&&this.listeners.get(t).delete(n)}notifyListeners(t,n){this.listeners.has(t)&&this.listeners.get(t).forEach(r=>{try{r(n)}catch(s){console.error(`事件监听器执行失败 (${t}):`,s)}})}exportConfig(){return{tags:this.config.tags,tagColors:this.config.tagColors,userPreferences:this.config.userPreferences,exportDate:new Date().toISOString()}}async importConfig(t){try{return t.tags&&(this.config.tags=t.tags),t.tagColors&&(this.config.tagColors=t.tagColors),t.userPreferences&&(this.config.userPreferences={...this.config.userPreferences,...t.userPreferences}),await this.syncConfig(),this.notifyListeners("tagsChanged",this.config.tags),this.notifyListeners("tagColorsChanged",this.config.tagColors),this.notifyListeners("userPreferencesChanged",this.config.userPreferences),!0}catch(n){return console.error("导入配置失败:",n),!1}}async clearAllData(){try{localStorage.removeItem(zo.TAGS),localStorage.removeItem(zo.TAG_COLORS),localStorage.removeItem(zo.USER_PREFERENCES),this.config=Li(Uo);try{await this.saveToDatabase()}catch(t){console.warn("清除数据库配置失败:",t)}return this.notifyListeners("configCleared",this.config),!0}catch(t){return console.error("清除数据失败:",t),!1}}isOnlineMode(){return this.isOnline}async forceSync(){return await this.syncConfig()}async reloadFromDatabase(){return await this.loadFromDatabase()}}const et=new UP,HP=et.init().catch(e=>{console.error("LocalConfigManager初始化失败:",e)}),$P=()=>HP,WP="modulepreload",GP=function(e){return"/"+e},lb={},ic=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=GP(o),o in lb)return;lb[o]=!0;const i=o.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!r)for(let m=s.length-1;m>=0;m--){const h=s[m];if(h.href===o&&(!i||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const f=document.createElement("link");if(f.rel=i?"stylesheet":WP,i||(f.as="script",f.crossOrigin=""),f.href=o,document.head.appendChild(f),i)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};var l_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cb=St.createContext&&St.createContext(l_),Xi=globalThis&&globalThis.__assign||function(){return Xi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Xi.apply(this,arguments)},KP=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function c_(e){return e&&e.map(function(t,n){return St.createElement(t.tag,Xi({key:n},t.attr),c_(t.child))})}function st(e){return function(t){return St.createElement(YP,Xi({attr:Xi({},e.attr)},t),c_(e.child))}}function YP(e){var t=function(n){var r=e.attr,s=e.size,o=e.title,i=KP(e,["attr","size","title"]),l=s||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),St.createElement("svg",Xi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:u,style:Xi(Xi({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&St.createElement("title",null,o),e.children)};return cb!==void 0?St.createElement(cb.Consumer,null,function(n){return t(n)}):t(l_)}function f2(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"}}]})(e)}function VP(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"17",y1:"10",x2:"3",y2:"10"}},{tag:"line",attr:{x1:"21",y1:"6",x2:"3",y2:"6"}},{tag:"line",attr:{x1:"21",y1:"14",x2:"3",y2:"14"}},{tag:"line",attr:{x1:"17",y1:"18",x2:"3",y2:"18"}}]})(e)}function Vl(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"}},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"}},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"}}]})(e)}function qP(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"}},{tag:"polyline",attr:{points:"17 7 17 17 7 17"}}]})(e)}function E1(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}function QP(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}},{tag:"polyline",attr:{points:"12 5 19 12 12 19"}}]})(e)}function XP(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"17",y1:"17",x2:"7",y2:"7"}},{tag:"polyline",attr:{points:"7 17 7 7 17 7"}}]})(e)}function JP(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"}},{tag:"polyline",attr:{points:"5 12 12 5 19 12"}}]})(e)}function ZP(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}},{tag:"path",attr:{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}}]})(e)}function ub(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"}}]})(e)}function tr(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"}}]})(e)}function cm(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"}},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}}]})(e)}function Br(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(e)}function Rp(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(e)}function h2(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"}}]})(e)}function t1(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"}}]})(e)}function ns(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(e)}function u_(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"}}]})(e)}function eF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 18 22 12 16 6"}},{tag:"polyline",attr:{points:"8 6 2 12 8 18"}}]})(e)}function tF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}}]})(e)}function nF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 14 4 9 9 4"}},{tag:"path",attr:{d:"M20 20v-7a4 4 0 0 0-4-4H4"}}]})(e)}function n1(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}}]})(e)}function d_(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"}},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}}]})(e)}function rF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}},{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"}}]})(e)}function sF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}}]})(e)}function oF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(e)}function xh(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}},{tag:"polyline",attr:{points:"14 2 14 8 20 8"}},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"}},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"}},{tag:"polyline",attr:{points:"10 9 9 9 8 9"}}]})(e)}function f_(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(e)}function Ip(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",y1:"9",x2:"20",y2:"9"}},{tag:"line",attr:{x1:"4",y1:"15",x2:"20",y2:"15"}},{tag:"line",attr:{x1:"10",y1:"3",x2:"8",y2:"21"}},{tag:"line",attr:{x1:"16",y1:"3",x2:"14",y2:"21"}}]})(e)}function h_(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}}]})(e)}function m_(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"}},{tag:"polyline",attr:{points:"21 15 16 10 5 21"}}]})(e)}function jp(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 16 12 14 15 10 15 8 12 2 12"}},{tag:"path",attr:{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"}}]})(e)}function iF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(e)}function aF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"4",x2:"10",y2:"4"}},{tag:"line",attr:{x1:"14",y1:"20",x2:"5",y2:"20"}},{tag:"line",attr:{x1:"15",y1:"4",x2:"9",y2:"20"}}]})(e)}function m2(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}}]})(e)}function lF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"}}]})(e)}function cF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(e)}function p2(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"}},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"}}]})(e)}function uF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"}},{tag:"polyline",attr:{points:"9 5 12 2 15 5"}},{tag:"polyline",attr:{points:"15 19 12 22 9 19"}},{tag:"polyline",attr:{points:"19 9 22 12 19 15"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"}}]})(e)}function za(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function g2(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(e)}function Iy(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"1 4 1 10 7 10"}},{tag:"path",attr:{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"}}]})(e)}function dF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(e)}function um(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function p_(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(e)}function ac(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(e)}function fF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(e)}function hF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 3 21 3 21 8"}},{tag:"line",attr:{x1:"4",y1:"20",x2:"21",y2:"3"}},{tag:"polyline",attr:{points:"21 16 21 21 16 21"}},{tag:"line",attr:{x1:"15",y1:"15",x2:"21",y2:"21"}},{tag:"line",attr:{x1:"4",y1:"4",x2:"9",y2:"9"}}]})(e)}function mF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"path",attr:{d:"M8 14s1.5 2 4 2 4-2 4-2"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"9.01",y2:"9"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"15.01",y2:"9"}}]})(e)}function pF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}]})(e)}function _o(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(e)}function db(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(e)}function lc(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"}}]})(e)}function As(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function gF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"}},{tag:"line",attr:{x1:"4",y1:"21",x2:"20",y2:"21"}}]})(e)}function yF(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function wn(e){return st({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}const ca=()=>{const e=N.useContext(jC);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Aa=[{name:"石板色",class:"bg-slate-200 dark:bg-slate-600 text-slate-900 dark:text-slate-100",value:"slate",hexColor:"#64748B"},{name:"翠绿色",class:"bg-green-200 dark:bg-green-600 text-green-900 dark:text-green-100",value:"green",hexColor:"#10B981"},{name:"玫瑰红",class:"bg-red-200 dark:bg-red-600 text-red-900 dark:text-red-100",value:"red",hexColor:"#EF4444"},{name:"金黄色",class:"bg-yellow-200 dark:bg-yellow-600 text-yellow-900 dark:text-yellow-100",value:"yellow",hexColor:"#F59E0B"},{name:"紫罗兰",class:"bg-purple-200 dark:bg-purple-600 text-purple-900 dark:text-purple-100",value:"purple",hexColor:"#8B5CF6"},{name:"樱花粉",class:"bg-pink-200 dark:bg-pink-600 text-pink-900 dark:text-pink-100",value:"pink",hexColor:"#EC4899"},{name:"橙橘色",class:"bg-orange-200 dark:bg-orange-600 text-orange-900 dark:text-orange-100",value:"orange",hexColor:"#F97316"},{name:"青绿色",class:"bg-teal-200 dark:bg-teal-600 text-teal-900 dark:text-teal-100",value:"teal",hexColor:"#14B8A6"},{name:"靛青色",class:"bg-indigo-200 dark:bg-indigo-600 text-indigo-900 dark:text-indigo-100",value:"indigo",hexColor:"#6366F1"},{name:"薰衣草",class:"bg-violet-200 dark:bg-violet-600 text-violet-900 dark:text-violet-100",value:"violet",hexColor:"#7C3AED"}],g_=async()=>{var e,t;try{if(!localStorage.getItem("token")){const i=JSON.parse(localStorage.getItem("customTagColors")||"[]"),l=JSON.parse(localStorage.getItem("deletedTagColors")||"[]"),u=Aa.filter(m=>!l.includes(m.value)),f=i.filter(m=>!Aa.some(h=>h.value===m.value||h.hexColor===m.hexColor));return[...u,...f]}const{fetchCustomColors:r}=await ic(()=>Promise.resolve().then(()=>s1),void 0),o=(await r()).filter(i=>!Aa.some(l=>l.value===i.value||l.hexColor===i.hexColor));return[...Aa,...o]}catch(n){((e=n.response)==null?void 0:e.status)!==401&&((t=n.response)==null?void 0:t.status)!==403&&console.error("从服务器获取自定义颜色失败，使用本地存储:",n);const r=JSON.parse(localStorage.getItem("customTagColors")||"[]"),s=JSON.parse(localStorage.getItem("deletedTagColors")||"[]"),o=Aa.filter(l=>!s.includes(l.value)),i=r.filter(l=>!Aa.some(u=>u.value===l.value||u.hexColor===l.hexColor));return[...o,...i]}},fb=e=>{const t=JSON.parse(localStorage.getItem("tagColors")||"{}"),n=typeof e=="string"?e:e&&e.name,r=t[n]||"slate",s=typeof r=="string"?r:r&&r.value||"blue";if(s&&typeof s=="string"&&s.startsWith("#"))return"text-white";const o=Aa.find(i=>i.value===s);return o?o.class:"bg-slate-100 dark:bg-slate-900/30 text-slate-800 dark:text-slate-300"},hb=e=>{const t=JSON.parse(localStorage.getItem("tagColors")||"{}"),n=typeof e=="string"?e:e&&e.name,r=t[n]||"slate",s=typeof r=="string"?r:r&&r.value||"blue";return s&&typeof s=="string"&&s.startsWith("#")?{backgroundColor:s,color:"white",fontWeight:"500"}:{}},xF=({onSearch:e,searchQuery:t="",selectedTag:n,onTagChange:r,onOpenRecycleBin:s})=>{ca();const[o,i]=N.useState(!1),[l,u]=N.useState(!1),[f,m]=N.useState(t||""),[h,g]=N.useState([]),[p,b]=N.useState({}),v=N.useRef(null),T=js(),y=la(),E=y.pathname!=="/",I=(()=>{const _=y.pathname;return _==="/recycle-bin"?`回收站 (${window.recycleBinCount||0})`:_==="/task/dashboard"||_.startsWith("/task/")?"任务":_==="/enhanced-backup-manager"?"备份":_==="/font-optimization"?"统计":_==="/settings"?"设置":_==="/edit"?"创建笔记":""})(),j=()=>{T("/")};return N.useEffect(()=>{(async()=>{try{const C=await g_();g(C);const{fetchTagColors:k}=await ic(()=>Promise.resolve().then(()=>s1),void 0),R=await k();Object.keys(R).length>0&&localStorage.setItem("tagColors",JSON.stringify(R)),b(R)}catch(C){console.error("加载颜色数据失败:",C);const k=JSON.parse(localStorage.getItem("tagColors")||"{}");b(k)}})()},[]),N.useEffect(()=>{const _=async C=>{try{const{fetchTagColors:k}=await ic(()=>Promise.resolve().then(()=>s1),void 0),R=await k();b(R),localStorage.setItem("tagColors",JSON.stringify(R))}catch(k){console.error("同步标签颜色失败:",k);const{tagName:R,color:P}=C.detail||{};R&&P&&b(Y=>({...Y,[R]:P}))}};return window.addEventListener("tagColorsUpdated",_),()=>{window.removeEventListener("tagColorsUpdated",_)}},[]),N.useEffect(()=>{m(t)},[t]),N.useEffect(()=>{l&&v.current&&v.current.focus()},[l]),N.useEffect(()=>{const _=C=>{o&&!C.target.closest(".user-dropdown")&&i(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[o]),c.jsx("header",{className:"shadow-sm sticky top-0 z-10",style:{backgroundColor:"var(--theme-surface)"},children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center h-16",children:[E&&c.jsx("button",{onClick:j,className:"p-4 rounded-md text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-theme-elevated transition-colors min-w-btn-lg min-h-btn-lg flex items-center justify-center mr-4","aria-label":"返回首页",title:"返回首页",children:c.jsx(E1,{className:"h-5 w-5"})}),E&&I&&c.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:I})]})})},y_=({children:e,className:t="",type:n="bg"})=>{const s=(()=>{switch(n){case"bg":return{backgroundColor:"var(--theme-bg)"};case"surface":return{backgroundColor:"var(--theme-surface)"};case"elevated":return{backgroundColor:"var(--theme-elevated)"};default:return{backgroundColor:"var(--theme-bg)"}}})();return c.jsx("div",{className:t,style:s,children:e})},vF=({message:e,type:t="success",duration:n=3e3,position:r="top-right",onClose:s,showClose:o=!0})=>{const[i,l]=N.useState(!0),[u,f]=N.useState(!1);N.useEffect(()=>{const b=setTimeout(()=>{m()},n);return()=>clearTimeout(b)},[n]);const m=()=>{f(!0),setTimeout(()=>{l(!1),s&&s()},300)};if(!i)return null;const h=()=>{switch(t){case"success":return c.jsx(Br,{className:"text-green-500",size:20});case"error":return c.jsx(wn,{className:"text-red-500",size:20});case"warning":return c.jsx(f2,{className:"text-yellow-500",size:20});case"info":return c.jsx(iF,{className:"text-blue-500",size:20});default:return c.jsx(Br,{className:"text-green-500",size:20})}},g=()=>{switch(t){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-green-50 border-green-200"}},p=()=>{switch(r){case"top-right":return"top-4 right-4";case"top-left":return"top-4 left-4";case"bottom-right":return"bottom-4 right-4";case"bottom-left":return"bottom-4 left-4";case"top-center":return"top-4 left-1/2 transform -translate-x-1/2";case"bottom-center":return"bottom-4 left-1/2 transform -translate-x-1/2";default:return"top-4 right-4"}};return Fr.createPortal(c.jsx("div",{className:`fixed z-[9999] ${p()} transition-all duration-300 ${u?"opacity-0 translate-y-[-10px]":"opacity-100 translate-y-0"}`,children:c.jsxs("div",{className:`${g()} border rounded-lg shadow-lg p-4 min-w-[300px] max-w-[400px] flex items-center space-x-3`,children:[c.jsx("div",{className:"flex-shrink-0",children:h()}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e})}),o&&c.jsx("button",{onClick:m,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx(wn,{size:16})})]})}),document.body)},bF=()=>{const[e,t]=N.useState([]),n=s=>{const o=Date.now();t(i=>[...i,{...s,id:o}])},r=s=>{t(o=>o.filter(i=>i.id!==s))};return N.useEffect(()=>(window.showToast=(s,o="success",i={})=>{n({message:s,type:o,duration:i.duration||3e3,position:i.position||"top-right",showClose:i.showClose!==!1})},()=>{delete window.showToast}),[]),c.jsx(c.Fragment,{children:e.map(s=>c.jsx(vF,{message:s.message,type:s.type,duration:s.duration,position:s.position,showClose:s.showClose,onClose:()=>r(s.id)},s.id))})},wF=(e,t={})=>{const{offsetX:n=-20,offsetY:r=-20,position:s="bottom-right"}=t,[o,i]=N.useState({x:0,y:0,width:0,height:0,isVisible:!1}),l=N.useRef(null),u=N.useRef(null),f=N.useCallback(h=>{let g=0,p=0;switch(s){case"bottom-right":g=h.right+n,p=h.bottom+r;break;case"bottom-left":g=h.left+n,p=h.bottom+r;break;case"top-right":g=h.right+n,p=h.top+r;break;case"top-left":g=h.left+n,p=h.top+r;break;default:g=h.right+n,p=h.bottom+r}return g=Math.max(10,Math.min(window.innerWidth-60,g)),p=Math.max(10,Math.min(window.innerHeight-60,p)),{x:g,y:p}},[n,r,s]),m=N.useCallback(()=>{const h=document.querySelector(e);if(!h){i(v=>({...v,isVisible:!1}));return}const g=h.getBoundingClientRect(),{x:p,y:b}=f(g);i({x:p,y:b,width:g.width,height:g.height,isVisible:!0})},[e,f]);return N.useEffect(()=>{m(),l.current=new IntersectionObserver(p=>{p.forEach(b=>{b.isIntersecting&&m()})},{threshold:.1,rootMargin:"50px"}),u.current=new ResizeObserver(p=>{p.forEach(b=>{b.target&&m()})});const h=document.querySelector(e);h&&(l.current.observe(h),u.current.observe(h)),window.addEventListener("resize",m),window.addEventListener("scroll",m,{passive:!0});const g=setInterval(m,1e3);return()=>{l.current&&l.current.disconnect(),u.current&&u.current.disconnect(),window.removeEventListener("resize",m),window.removeEventListener("scroll",m),clearInterval(g)}},[e,m]),{position:o,updatePosition:m,isVisible:o.isVisible}},TF=(e,t={})=>{const{defaultPosition:n="bottom-right",mobilePosition:r="bottom-right",desktopPosition:s="bottom-right",breakpoint:o=1024}=t,[i,l]=N.useState(n),[u,f]=N.useState(window.innerWidth<o);N.useEffect(()=>{const p=()=>{const b=window.innerWidth<o;f(b),l(b?r:s)};return window.addEventListener("resize",p),p(),()=>window.removeEventListener("resize",p)},[o,r,s]);const{position:m,isVisible:h}=wF(e,{position:i,offsetX:u?-16:-20,offsetY:u?-16:-20});return{style:(()=>{if(!h)return{position:"fixed",bottom:"2rem",right:"1rem",zIndex:99999};const p=isNaN(m.x)?0:m.x,b=isNaN(m.y)?0:m.y;return{position:"fixed",left:`${p}px`,top:`${b}px`,zIndex:99999,transform:"translate(-50%, -50%)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}})(),position:m,isVisible:h,isMobile:u,currentPosition:i}},mt=Bl.create({baseURL:zn,withCredentials:!0,headers:{"Content-Type":"application/json"}}),y2=async(e="")=>{try{const t=e?`?search=${encodeURIComponent(e)}`:"";return(await mt.get(`/notes${t}`)).data}catch(t){throw console.error("获取我的笔记失败:",t),t}},x_=async(e="",t=1,n=10)=>{try{const r=new URLSearchParams;return e&&r.append("search",e),r.append("page",t.toString()),r.append("limit",n.toString()),(await mt.get(`/notes/my?${r.toString()}`)).data}catch(r){throw console.error("获取我的笔记失败:",r),r}},v_=async e=>{try{return(await mt.post("/notes",e)).data}catch(t){throw console.error("创建笔记失败:",t),t}},C1=async(e,t)=>{try{const n=await mt.put(`/notes/${e}`,t);return console.log("[updateNote] 笔记更新成功，后端已自动处理引用关系"),n.data}catch(n){throw console.error("更新笔记失败:",n),n}},dm=async e=>{var t,n;try{const r=localStorage.getItem("token");console.log("[deleteNote] 开始删除笔记，ID:",e),console.log("[deleteNote] Token存在:",!!r),console.log("[deleteNote] Token前缀:",r?r.substring(0,20)+"...":"null");const s=await mt.delete(`/notes/${e}`);return console.log("[deleteNote] 删除成功，响应:",s.data),s.data}catch(r){throw console.error("[deleteNote] 删除笔记失败:",r),console.error("[deleteNote] 错误状态码:",(t=r.response)==null?void 0:t.status),console.error("[deleteNote] 错误数据:",(n=r.response)==null?void 0:n.data),r}},fm=async e=>{try{return(await mt.patch(`/notes/${e}/pin`)).data}catch(t){throw console.error("切换置顶状态失败:",t),t}},EF=async e=>{try{return(await mt.patch(`/notes/${e}/favorite`)).data}catch(t){throw console.error("切换收藏状态失败:",t),t}},jy=async()=>{try{return(await mt.get("/notes/tags/all")).data}catch(e){throw console.error("获取标签失败:",e),e}},b_=async(e="")=>{try{const t=e?`?search=${encodeURIComponent(e)}`:"";return(await mt.get(`/notes/recycle-bin${t}`)).data}catch(t){throw console.error("获取回收站列表失败:",t),t}},CF=async e=>{try{return(await mt.post(`/notes/recycle-bin/${e}/restore`)).data}catch(t){throw console.error("恢复笔记失败:",t),t}},_F=async e=>{try{return(await mt.delete(`/notes/recycle-bin/${e}`)).data}catch(t){throw console.error("永久删除笔记失败:",t),t}},w_=async e=>{var t,n;try{console.log("批量恢复笔记 - 传入的ids:",e),console.log("批量恢复笔记 - ids类型:",typeof e),console.log("批量恢复笔记 - 是否为数组:",Array.isArray(e));const r=await mt.post("/notes/recycle-bin/bulk-restore",{ids:e});return console.log("批量恢复笔记 - API响应:",r.data),r.data}catch(r){throw console.error("批量恢复笔记失败:",r),console.error("批量恢复笔记 - 错误状态码:",(t=r.response)==null?void 0:t.status),console.error("批量恢复笔记 - 错误数据:",(n=r.response)==null?void 0:n.data),r}},T_=async e=>{try{return(await mt.delete("/notes/recycle-bin/batch-delete",{data:{ids:e}})).data}catch(t){throw console.error("批量永久删除笔记失败:",t),t}},E_=async()=>{try{return(await mt.post("/notes/recycle-bin/clean-expired")).data}catch(e){throw console.error("清理过期笔记失败:",e),e}},NF=async()=>{try{return(await mt.get("/notes/recycle-bin/stats")).data}catch(e){throw console.error("获取回收站统计信息失败:",e),e}},SF=async(e,t="blue")=>{var n,r;try{console.log("createTag API调用开始，参数:",{tagName:e,color:t});const s=await mt.post("/notes/tags",{tagName:e,color:t});return console.log("createTag API调用成功，响应:",s.data),s.data}catch(s){throw((n=s.response)==null?void 0:n.status)===409?console.log("标签已存在，将由上层组件处理颜色更新"):(console.error("创建标签失败:",s),console.error("错误详情:",((r=s.response)==null?void 0:r.data)||s.message)),s}},kF=async e=>{try{let t=e;return typeof e=="object"&&e!==null&&(t=e.name),(await mt.delete(`/notes/tags/${encodeURIComponent(t)}`)).data}catch(t){throw console.error("删除标签失败:",t),t}},C_=async()=>{try{return(await mt.get("/notes/tags")).data}catch(e){throw console.error("同步标签数据失败:",e),e}},AF=async e=>{var t,n;try{const r=[];for(const o of e)try{const i=await mt.post("/notes/tags",{tagName:o.name,color:o.color||"blue"});r.push({success:!0,localTag:o,serverResponse:i.data})}catch(i){r.push({success:!1,localTag:o,error:((n=(t=i.response)==null?void 0:t.data)==null?void 0:n.error)||i.message})}const s=await C_();return{success:!0,message:"批量同步完成",syncResults:r,finalTags:s}}catch(r){throw console.error("批量同步标签数据失败:",r),r}},__=async e=>{try{return(await mt.get(`/notes/tag/${encodeURIComponent(e)}`)).data}catch(t){throw console.error("根据标签获取笔记失败:",t),t}},Ly=async e=>{try{return(await mt.delete(`/notes/tags/${encodeURIComponent(e)}/remove-from-notes`)).data}catch(t){throw console.error("从笔记中移除标签并删除标签失败:",t),t}},Dy=async e=>{try{return(await mt.delete(`/notes/tags/${encodeURIComponent(e)}/with-notes`)).data}catch(t){throw console.error("删除标签和笔记失败:",t),t}},N_=async(e,t)=>{try{return(await mt.patch(`/notes/tags/${encodeURIComponent(e)}/rename`,{newTagName:t})).data}catch(n){throw console.error("重命名标签失败:",n),n}},OF=async e=>{try{return(await mt.get(`/notes/my/tag/${encodeURIComponent(e)}`)).data}catch(t){throw console.error("根据标签获取我的笔记失败:",t),t}},RF=async(e,t=1,n=10)=>{try{const r=new URLSearchParams;return r.append("page",t.toString()),r.append("limit",n.toString()),r.append("tag",e),(await mt.get(`/notes/my?${r.toString()}`)).data}catch(r){throw console.error("根据标签获取我的笔记失败:",r),r}},S_=async(e=null,t=null)=>{try{if(!e||!t){const r=new Date,s=new Date(r.getFullYear()-1,r.getMonth(),r.getDate()),o=new Date(r.getFullYear()+1,r.getMonth(),r.getDate());e=s.toISOString().split("T")[0],t=o.toISOString().split("T")[0]}return(await mt.get(`/notes/dates?start=${e}&end=${t}`)).data}catch(n){throw console.error("获取笔记日期失败:",n),n}},k_=async e=>{try{return(await mt.get(`/notes/date/${e}`)).data}catch(t){throw console.error("根据日期获取笔记失败:",t),t}},A_=async e=>{try{return(await mt.get(`/notes/date/${e}`)).data}catch(t){throw console.error("根据精确日期获取笔记失败:",t),t}},O_=async e=>{try{const t=new FormData;return t.append("file",e),(await mt.post("/upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("上传文件失败:",t),t}},vh=O_,r1=async()=>{try{return(await mt.get("/notes/tag-colors/all")).data}catch(e){throw console.error("获取标签颜色失败:",e),e}},IF=async()=>{try{return(await mt.get("/notes/tag-colors/custom")).data}catch(e){throw console.error("获取自定义颜色失败:",e),e}},jF=async(e,t,n="preset")=>{var r;console.log("🌐 saveTagColorApi被调用，参数:",{tagName:e,colorValue:t,colorType:n});try{console.log("🌐 即将发送POST请求到 /notes/tag-colors");const s=await mt.post("/notes/tag-colors",{tagName:e,colorValue:t,colorType:n});return console.log("🌐 POST请求成功，响应:",s.data),s.data}catch(s){throw console.error("🌐 POST请求失败:",s),console.error("🌐 错误详情:",((r=s.response)==null?void 0:r.data)||s.message),s}},LF=async e=>{try{return(await mt.delete(`/notes/tag-colors/${encodeURIComponent(e)}`)).data}catch(t){throw console.error("删除标签颜色失败:",t),t}},DF=async e=>{try{return(await mt.delete(`/notes/tag-colors/custom/${encodeURIComponent(e)}`)).data}catch(t){throw console.error("删除自定义颜色失败:",t),t}},du=async(e="light")=>(await mt.get("/notes/card-settings/global",{params:{theme_mode:e}})).data,My=async(e,t="light")=>{var n,r;console.log("🌐 saveGlobalCardSettings API调用开始"),console.log("🌐 设置参数:",e),console.log("🌐 主题模式:",t);try{const s=await mt.post("/notes/card-settings/global",{settings:e,theme_mode:t});return console.log("🌐 saveGlobalCardSettings API调用成功:",s.data),s.data}catch(s){throw console.error("🌐 saveGlobalCardSettings API调用失败:",s),console.error("🌐 错误状态码:",(n=s.response)==null?void 0:n.status),console.error("🌐 错误数据:",(r=s.response)==null?void 0:r.data),s}},kf=async(e,t="light")=>(await mt.get(`/notes/card-settings/note/${e}`,{params:{theme_mode:t}})).data,R_=async(e,t,n="light")=>{var r,s;console.log("🌐 saveNoteCardSettings API调用开始"),console.log("🌐 笔记ID:",e),console.log("🌐 设置参数:",t),console.log("🌐 主题模式:",n);try{const o=await mt.post(`/notes/card-settings/note/${e}`,{settings:t,theme_mode:n});return console.log("🌐 saveNoteCardSettings API调用成功:",o.data),o.data}catch(o){throw console.error("🌐 saveNoteCardSettings API调用失败:",o),console.error("🌐 错误状态码:",(r=o.response)==null?void 0:r.status),console.error("🌐 错误数据:",(s=o.response)==null?void 0:s.data),o}},I_=async(e,t="light")=>(await mt.delete(`/notes/card-settings/note/${e}`,{params:{theme_mode:t}})).data,Py=async(e="light")=>{var t,n;console.log("🌐 deleteAllNoteCardSettings API调用开始"),console.log("🌐 主题模式:",e);try{const r=await mt.delete("/notes/card-settings/all-notes",{params:{theme_mode:e}});return console.log("🌐 deleteAllNoteCardSettings API调用成功:",r.data),r.data}catch(r){throw console.error("🌐 deleteAllNoteCardSettings API调用失败:",r),console.error("🌐 错误状态码:",(t=r.response)==null?void 0:t.status),console.error("🌐 错误数据:",(n=r.response)==null?void 0:n.data),r}},j_=async e=>{try{return(await mt.get(`/notes/${e}/history`)).data}catch(t){throw console.error("获取笔记历史记录失败:",t),t}},L_=async(e,t)=>{try{return(await mt.post("/notes/bidirectional-links",{noteId:e,content:t})).data}catch(n){throw console.error("处理双向链接失败:",n),n}},x2=async e=>{try{return(await mt.get(`/notes/references/${e}`)).data}catch(t){throw console.error("获取笔记引用关系失败:",t),t}},s1=Object.freeze(Object.defineProperty({__proto__:null,batchPermanentDeleteNotes:T_,batchRestoreNotes:w_,bulkSyncTags:AF,cleanExpiredNotes:E_,createNote:v_,createTag:SF,default:mt,deleteAllNoteCardSettings:Py,deleteCustomColorApi:DF,deleteNote:dm,deleteNoteCardSettings:I_,deleteTag:kF,deleteTagAndNotes:Dy,deleteTagColorApi:LF,fetchAllTags:jy,fetchCustomColors:IF,fetchGlobalCardSettings:du,fetchMyNotes:y2,fetchMyNotesByTag:OF,fetchMyNotesByTagWithPagination:RF,fetchMyNotesWithPagination:x_,fetchNoteCardSettings:kf,fetchNoteDates:S_,fetchNoteHistory:j_,fetchNoteReferences:x2,fetchNotesByDate:k_,fetchNotesByDateExact:A_,fetchNotesByTag:__,fetchRecycleBin:b_,fetchTagColors:r1,getRecycleBinStats:NF,permanentDeleteNote:_F,processBidirectionalLinks:L_,removeTagFromNotes:Ly,renameTag:N_,restoreNote:CF,saveGlobalCardSettings:My,saveNoteCardSettings:R_,saveTagColorApi:jF,syncTags:C_,toggleFavoriteNote:EF,togglePinNote:fm,updateNote:C1,uploadFile:O_,uploadImage:vh},Symbol.toStringTag,{value:"Module"})),rs=[{name:"天蓝色",value:"blue",hexColor:"#3B82F6"},{name:"翠绿色",value:"green",hexColor:"#10B981"},{name:"紫罗兰",value:"purple",hexColor:"#8B5CF6"},{name:"橙黄色",value:"orange",hexColor:"#F59E0B"},{name:"玫瑰红",value:"rose",hexColor:"#F43F5E"},{name:"青色",value:"cyan",hexColor:"#06B6D4"},{name:"粉色",value:"pink",hexColor:"#EC4899"},{name:"灰色",value:"gray",hexColor:"#6B7280"},{name:"琥珀色",value:"amber",hexColor:"#FBBF24"},{name:"靛蓝色",value:"indigo",hexColor:"#6366F1"},{name:"石灰色",value:"lime",hexColor:"#84CC16"}],mb=()=>rs[0].hexColor,MF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},PF=(e,t,n)=>{let r;const s=MF[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ql(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const FF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},BF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},UF={date:ql({formats:FF,defaultWidth:"full"}),time:ql({formats:BF,defaultWidth:"full"}),dateTime:ql({formats:zF,defaultWidth:"full"})},HF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$F=(e,t,n,r)=>HF[e];function bo(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):i;s=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const WF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},GF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},KF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},YF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},VF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},QF=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},XF={ordinalNumber:QF,era:bo({values:WF,defaultWidth:"wide"}),quarter:bo({values:GF,defaultWidth:"wide",argumentCallback:e=>e-1}),month:bo({values:KF,defaultWidth:"wide"}),day:bo({values:YF,defaultWidth:"wide"}),dayPeriod:bo({values:VF,defaultWidth:"wide",formattingValues:qF,defaultFormattingWidth:"wide"})};function wo(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?ZF(l,h=>h.test(i)):JF(l,h=>h.test(i));let f;f=e.valueCallback?e.valueCallback(u):u,f=n.valueCallback?n.valueCallback(f):f;const m=t.slice(i.length);return{value:f,rest:m}}}function JF(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function ZF(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function D_(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const l=t.slice(s.length);return{value:i,rest:l}}}const eB=/^(\d+)(th|st|nd|rd)?/i,tB=/\d+/i,nB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rB={any:[/^b/i,/^(a|c)/i]},sB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oB={any:[/1/i,/2/i,/3/i,/4/i]},iB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},aB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cB={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},uB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dB={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fB={ordinalNumber:D_({matchPattern:eB,parsePattern:tB,valueCallback:e=>parseInt(e,10)}),era:wo({matchPatterns:nB,defaultMatchWidth:"wide",parsePatterns:rB,defaultParseWidth:"any"}),quarter:wo({matchPatterns:sB,defaultMatchWidth:"wide",parsePatterns:oB,defaultParseWidth:"any",valueCallback:e=>e+1}),month:wo({matchPatterns:iB,defaultMatchWidth:"wide",parsePatterns:aB,defaultParseWidth:"any"}),day:wo({matchPatterns:lB,defaultMatchWidth:"wide",parsePatterns:cB,defaultParseWidth:"any"}),dayPeriod:wo({matchPatterns:uB,defaultMatchWidth:"any",parsePatterns:dB,defaultParseWidth:"any"})},M_={code:"en-US",formatDistance:PF,formatLong:UF,formatRelative:$F,localize:XF,match:fB,options:{weekStartsOn:0,firstWeekContainsDate:1}};let hB={};function Qa(){return hB}const P_=6048e5,mB=864e5,F_=6e4,B_=36e5,Bd=43200,pb=1440;function bt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function o1(e){const t=bt(e);return t.setHours(0,0,0,0),t}function bh(e){const t=bt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function pB(e,t){const n=o1(e),r=o1(t),s=+n-bh(n),o=+r-bh(r);return Math.round((s-o)/mB)}function ro(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function gB(e){const t=bt(e),n=ro(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function yB(e){const t=bt(e);return pB(t,gB(t))+1}function ta(e,t){var l,u,f,m;const n=Qa(),r=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,s=bt(e),o=s.getDay(),i=(o<r?7:0)+o-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function wh(e){return ta(e,{weekStartsOn:1})}function z_(e){const t=bt(e),n=t.getFullYear(),r=ro(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=wh(r),o=ro(e,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=wh(o);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function xB(e){const t=z_(e),n=ro(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),wh(n)}function vB(e){const t=bt(e),n=+wh(t)-+xB(t);return Math.round(n/P_)+1}function U_(e,t){var m,h,g,p;const n=bt(e),r=n.getFullYear(),s=Qa(),o=(t==null?void 0:t.firstWeekContainsDate)??((h=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(g=s.locale)==null?void 0:g.options)==null?void 0:p.firstWeekContainsDate)??1,i=ro(e,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const l=ta(i,t),u=ro(e,0);u.setFullYear(r,0,o),u.setHours(0,0,0,0);const f=ta(u,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function bB(e,t){var l,u,f,m;const n=Qa(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,s=U_(e,t),o=ro(e,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),ta(o,t)}function wB(e,t){const n=bt(e),r=+ta(n,t)-+bB(n,t);return Math.round(r/P_)+1}function Gt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ei={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Gt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Gt(n+1,2)},d(e,t){return Gt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Gt(e.getHours()%12||12,t.length)},H(e,t){return Gt(e.getHours(),t.length)},m(e,t){return Gt(e.getMinutes(),t.length)},s(e,t){return Gt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Gt(s,t.length)}},pl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gb={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ei.y(e,t)},Y:function(e,t,n,r){const s=U_(e,r),o=s>0?s:1-s;if(t==="YY"){const i=o%100;return Gt(i,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):Gt(o,t.length)},R:function(e,t){const n=z_(e);return Gt(n,t.length)},u:function(e,t){const n=e.getFullYear();return Gt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Gt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Gt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ei.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Gt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=wB(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Gt(s,t.length)},I:function(e,t,n){const r=vB(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Gt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ei.d(e,t)},D:function(e,t,n){const r=yB(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Gt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Gt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Gt(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Gt(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=pl.noon:r===0?s=pl.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=pl.evening:r>=12?s=pl.afternoon:r>=4?s=pl.morning:s=pl.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ei.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ei.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Gt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Gt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ei.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ei.s(e,t)},S:function(e,t){return Ei.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return xb(r);case"XXXX":case"XX":return Oa(r);case"XXXXX":case"XXX":default:return Oa(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return xb(r);case"xxxx":case"xx":return Oa(r);case"xxxxx":case"xxx":default:return Oa(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+yb(r,":");case"OOOO":default:return"GMT"+Oa(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+yb(r,":");case"zzzz":default:return"GMT"+Oa(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Gt(r,t.length)},T:function(e,t,n){const r=e.getTime();return Gt(r,t.length)}};function yb(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+t+Gt(o,2)}function xb(e,t){return e%60===0?(e>0?"-":"+")+Gt(Math.abs(e)/60,2):Oa(e,t)}function Oa(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Gt(Math.trunc(r/60),2),o=Gt(r%60,2);return n+s+t+o}const vb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},H_=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},TB=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return vb(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",vb(r,t)).replace("{{time}}",H_(s,t))},EB={p:H_,P:TB},CB=/^D+$/,_B=/^Y+$/,NB=["D","DD","YY","YYYY"];function SB(e){return CB.test(e)}function kB(e){return _B.test(e)}function AB(e,t,n){const r=OB(e,t,n);if(console.warn(r),NB.includes(e))throw new RangeError(r)}function OB(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function RB(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function IB(e){if(!RB(e)&&typeof e!="number")return!1;const t=bt(e);return!isNaN(Number(t))}const jB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DB=/^'([^]*?)'?$/,MB=/''/g,PB=/[a-zA-Z]/;function Tt(e,t,n){var m,h,g,p,b,v,T,y;const r=Qa(),s=(n==null?void 0:n.locale)??r.locale??M_,o=(n==null?void 0:n.firstWeekContainsDate)??((h=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(g=r.locale)==null?void 0:g.options)==null?void 0:p.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((v=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((y=(T=r.locale)==null?void 0:T.options)==null?void 0:y.weekStartsOn)??0,l=bt(e);if(!IB(l))throw new RangeError("Invalid time value");let u=t.match(LB).map(E=>{const w=E[0];if(w==="p"||w==="P"){const I=EB[w];return I(E,s.formatLong)}return E}).join("").match(jB).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const w=E[0];if(w==="'")return{isToken:!1,value:FB(E)};if(gb[w])return{isToken:!0,value:E};if(w.match(PB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:E}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const f={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return u.map(E=>{if(!E.isToken)return E.value;const w=E.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&kB(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&SB(w))&&AB(w,t,String(e));const I=gb[w[0]];return I(l,w,s.localize,f)}).join("")}function FB(e){const t=e.match(DB);return t?t[1].replace(MB,"'"):e}function nn(e,t){const n=bt(e);return isNaN(t)?ro(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function hm(e,t){const n=bt(e);if(isNaN(t))return ro(e,NaN);if(!t)return n;const r=n.getDate(),s=ro(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const o=s.getDate();return r>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}function Af(e,t){const n=bt(e),r=bt(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function $_(e){return ro(e,Date.now())}function _1(e,t){const n=o1(e),r=o1(t);return+n==+r}function BB(e,t){const n=bt(e),r=bt(t),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function zB(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function UB(e,t){return+bt(e)-+bt(t)}function W_(e){const t=bt(e);return t.setHours(23,59,59,999),t}function i1(e){const t=bt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function HB(e){const t=bt(e);return+W_(t)==+i1(t)}function $B(e,t){const n=bt(e),r=bt(t),s=Af(n,r),o=Math.abs(BB(n,r));let i;if(o<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*o);let l=Af(n,r)===-s;HB(bt(e))&&o===1&&Af(e,r)===1&&(l=!1),i=s*(o-Number(l))}return i===0?0:i}function WB(e,t,n){const r=UB(e,t)/1e3;return zB(n==null?void 0:n.roundingMethod)(r)}function GB(e,t){const n=bt(e.start),r=bt(e.end);let s=+n>+r;const o=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0);let l=(t==null?void 0:t.step)??1;if(!l)return[];l<0&&(l=-l,s=!s);const u=[];for(;+i<=o;)u.push(bt(i)),i.setDate(i.getDate()+l),i.setHours(0,0,0,0);return s?u.reverse():u}function Th(e){const t=bt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function KB(e,t){var l,u,f,m;const n=Qa(),r=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,s=bt(e),o=s.getDay(),i=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function YB(){return W_(Date.now())}function VB(e,t,n){const r=Qa(),s=(n==null?void 0:n.locale)??r.locale??M_,o=2520,i=Af(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:i});let u,f;i>0?(u=bt(t),f=bt(e)):(u=bt(e),f=bt(t));const m=WB(f,u),h=(bh(f)-bh(u))/1e3,g=Math.round((m-h)/60);let p;if(g<2)return n!=null&&n.includeSeconds?m<5?s.formatDistance("lessThanXSeconds",5,l):m<10?s.formatDistance("lessThanXSeconds",10,l):m<20?s.formatDistance("lessThanXSeconds",20,l):m<40?s.formatDistance("halfAMinute",0,l):m<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):g===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",g,l);if(g<45)return s.formatDistance("xMinutes",g,l);if(g<90)return s.formatDistance("aboutXHours",1,l);if(g<pb){const b=Math.round(g/60);return s.formatDistance("aboutXHours",b,l)}else{if(g<o)return s.formatDistance("xDays",1,l);if(g<Bd){const b=Math.round(g/pb);return s.formatDistance("xDays",b,l)}else if(g<Bd*2)return p=Math.round(g/Bd),s.formatDistance("aboutXMonths",p,l)}if(p=$B(f,u),p<12){const b=Math.round(g/Bd);return s.formatDistance("xMonths",b,l)}else{const b=p%12,v=Math.trunc(p/12);return b<3?s.formatDistance("aboutXYears",v,l):b<9?s.formatDistance("overXYears",v,l):s.formatDistance("almostXYears",v+1,l)}}function qB(e){return bt(e).getDay()}function QB(){return Object.assign({},Qa())}function XB(e){return+bt(e)<Date.now()}function JB(e,t,n){const r=ta(e,n),s=ta(t,n);return+r==+s}function fu(e,t){const n=bt(e),r=bt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function ni(e){return _1(e,$_(e))}function ZB(e){return _1(e,nn($_(e),1))}function zd(e,t){const n=+bt(e),[r,s]=[+bt(t.start),+bt(t.end)].sort((o,i)=>o-i);return n>=r&&n<=s}function a1(e,t){const n=(t==null?void 0:t.additionalDigits)??2,r=rz(e);let s;if(r.date){const u=sz(r.date,n);s=oz(u.restDateString,u.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const o=s.getTime();let i=0,l;if(r.time&&(i=iz(r.time),isNaN(i)))return new Date(NaN);if(r.timezone){if(l=az(r.timezone),isNaN(l))return new Date(NaN)}else{const u=new Date(o+i),f=new Date(0);return f.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),f.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),f}return new Date(o+i+l)}const Ud={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ez=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,tz=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,nz=/^([+-])(\d{2})(?::?(\d{2}))?$/;function rz(e){const t={},n=e.split(Ud.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Ud.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Ud.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const s=Ud.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function sz(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?s:o*100,restDateString:e.slice((r[1]||r[2]).length)}}function oz(e,t){if(t===null)return new Date(NaN);const n=e.match(ez);if(!n)return new Date(NaN);const r=!!n[4],s=Xc(n[1]),o=Xc(n[2])-1,i=Xc(n[3]),l=Xc(n[4]),u=Xc(n[5])-1;if(r)return fz(t,l,u)?lz(t,l,u):new Date(NaN);{const f=new Date(0);return!uz(t,o,i)||!dz(t,s)?new Date(NaN):(f.setUTCFullYear(t,o,Math.max(s,i)),f)}}function Xc(e){return e?parseInt(e):1}function iz(e){const t=e.match(tz);if(!t)return NaN;const n=Lp(t[1]),r=Lp(t[2]),s=Lp(t[3]);return hz(n,r,s)?n*B_+r*F_+s*1e3:NaN}function Lp(e){return e&&parseFloat(e.replace(",","."))||0}function az(e){if(e==="Z")return 0;const t=e.match(nz);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return mz(r,s)?n*(r*B_+s*F_):NaN}function lz(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,o=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+o),r}const cz=[31,null,31,30,31,30,31,31,30,31,30,31];function G_(e){return e%400===0||e%4===0&&e%100!==0}function uz(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(cz[t]||(G_(e)?29:28))}function dz(e,t){return t>=1&&t<=(G_(e)?366:365)}function fz(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function hz(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function mz(e,t){return t>=0&&t<=59}function pz(){return o1(Date.now())}function v2(e,t){return hm(e,-t)}function bb(e,t,n){const r=QB(),s=xz(e,n.timeZone,n.locale??r.locale);return"formatToParts"in s?gz(s,t):yz(s,t)}function gz(e,t){const n=e.formatToParts(t);for(let r=n.length-1;r>=0;--r)if(n[r].type==="timeZoneName")return n[r].value}function yz(e,t){const n=e.format(t).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(n);return r?r[0].substr(1):""}function xz(e,t,n){return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}function vz(e,t){const n=Cz(t);return"formatToParts"in n?wz(n,e):Tz(n,e)}const bz={year:0,month:1,day:2,hour:3,minute:4,second:5};function wz(e,t){try{const n=e.formatToParts(t),r=[];for(let s=0;s<n.length;s++){const o=bz[n[s].type];o!==void 0&&(r[o]=parseInt(n[s].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function Tz(e,t){const n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const Dp={},wb=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Ez=wb==="06/25/2014, 00:00:00"||wb==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function Cz(e){return Dp[e]||(Dp[e]=Ez?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),Dp[e]}function K_(e,t,n,r,s,o,i){const l=new Date(0);return l.setUTCFullYear(e,t,n),l.setUTCHours(r,s,o,i),l}const Tb=36e5,_z=6e4,Mp={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function b2(e,t,n){if(!e)return 0;let r=Mp.timezoneZ.exec(e);if(r)return 0;let s,o;if(r=Mp.timezoneHH.exec(e),r)return s=parseInt(r[1],10),Eb(s)?-(s*Tb):NaN;if(r=Mp.timezoneHHMM.exec(e),r){s=parseInt(r[2],10);const i=parseInt(r[3],10);return Eb(s,i)?(o=Math.abs(s)*Tb+i*_z,r[1]==="+"?-o:o):NaN}if(kz(e)){t=new Date(t||Date.now());const i=n?t:Nz(t),l=Fy(i,e);return-(n?l:Sz(t,l,e))}return NaN}function Nz(e){return K_(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Fy(e,t){const n=vz(e,t),r=K_(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let s=e.getTime();const o=s%1e3;return s-=o>=0?o:1e3+o,r-s}function Sz(e,t,n){let s=e.getTime()-t;const o=Fy(new Date(s),n);if(t===o)return t;s-=o-t;const i=Fy(new Date(s),n);return o===i?o:Math.max(o,i)}function Eb(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const Cb={};function kz(e){if(Cb[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Cb[e]=!0,!0}catch{return!1}}const Az=60*1e3,Oz={X:function(e,t,n){const r=Pp(n.timeZone,e);if(r===0)return"Z";switch(t){case"X":return _b(r);case"XXXX":case"XX":return Tl(r);case"XXXXX":case"XXX":default:return Tl(r,":")}},x:function(e,t,n){const r=Pp(n.timeZone,e);switch(t){case"x":return _b(r);case"xxxx":case"xx":return Tl(r);case"xxxxx":case"xxx":default:return Tl(r,":")}},O:function(e,t,n){const r=Pp(n.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+Rz(r,":");case"OOOO":default:return"GMT"+Tl(r,":")}},z:function(e,t,n){switch(t){case"z":case"zz":case"zzz":return bb("short",e,n);case"zzzz":default:return bb("long",e,n)}}};function Pp(e,t){const n=e?b2(e,t,!0)/Az:(t==null?void 0:t.getTimezoneOffset())??0;if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+e);return n}function Eh(e,t){const n=e<0?"-":"";let r=Math.abs(e).toString();for(;r.length<t;)r="0"+r;return n+r}function Tl(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Eh(Math.floor(r/60),2),o=Eh(Math.floor(r%60),2);return n+s+t+o}function _b(e,t){return e%60===0?(e>0?"-":"+")+Eh(Math.abs(e)/60,2):Tl(e,t)}function Rz(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),o=r%60;return o===0?n+String(s):n+String(s)+t+Eh(o,2)}function Nb(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const Iz=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Fp=36e5,Sb=6e4,jz=2,Er={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Iz};function Y_(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const n=t.additionalDigits==null?jz:Number(t.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const r=Lz(e),{year:s,restDateString:o}=Dz(r.date,n),i=Mz(o,s);if(i===null||isNaN(i.getTime()))return new Date(NaN);if(i){const l=i.getTime();let u=0,f;if(r.time&&(u=Pz(r.time),u===null||isNaN(u)))return new Date(NaN);if(r.timeZone||t.timeZone){if(f=b2(r.timeZone||t.timeZone,new Date(l+u)),isNaN(f))return new Date(NaN)}else f=Nb(new Date(l+u)),f=Nb(new Date(l+u+f));return new Date(l+u+f)}else return new Date(NaN)}function Lz(e){const t={};let n=Er.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=Er.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){const s=Er.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function Dz(e,t){if(e){const n=Er.YYY[t],r=Er.YYYYY[t];let s=Er.YYYY.exec(e)||r.exec(e);if(s){const o=s[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(s=Er.YY.exec(e)||n.exec(e),s){const o=s[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}}return{year:null}}function Mz(e,t){if(t===null)return null;let n,r,s;if(!e||!e.length)return n=new Date(0),n.setUTCFullYear(t),n;let o=Er.MM.exec(e);if(o)return n=new Date(0),r=parseInt(o[1],10)-1,Ab(t,r)?(n.setUTCFullYear(t,r),n):new Date(NaN);if(o=Er.DDD.exec(e),o){n=new Date(0);const i=parseInt(o[1],10);return zz(t,i)?(n.setUTCFullYear(t,0,i),n):new Date(NaN)}if(o=Er.MMDD.exec(e),o){n=new Date(0),r=parseInt(o[1],10)-1;const i=parseInt(o[2],10);return Ab(t,r,i)?(n.setUTCFullYear(t,r,i),n):new Date(NaN)}if(o=Er.Www.exec(e),o)return s=parseInt(o[1],10)-1,Ob(s)?kb(t,s):new Date(NaN);if(o=Er.WwwD.exec(e),o){s=parseInt(o[1],10)-1;const i=parseInt(o[2],10)-1;return Ob(s,i)?kb(t,s,i):new Date(NaN)}return null}function Pz(e){let t,n,r=Er.HH.exec(e);if(r)return t=parseFloat(r[1].replace(",",".")),Bp(t)?t%24*Fp:NaN;if(r=Er.HHMM.exec(e),r)return t=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),Bp(t,n)?t%24*Fp+n*Sb:NaN;if(r=Er.HHMMSS.exec(e),r){t=parseInt(r[1],10),n=parseInt(r[2],10);const s=parseFloat(r[3].replace(",","."));return Bp(t,n,s)?t%24*Fp+n*Sb+s*1e3:NaN}return null}function kb(e,t,n){t=t||0,n=n||0;const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,o=t*7+n+1-s;return r.setUTCDate(r.getUTCDate()+o),r}const Fz=[31,28,31,30,31,30,31,31,30,31,30,31],Bz=[31,29,31,30,31,30,31,31,30,31,30,31];function V_(e){return e%400===0||e%4===0&&e%100!==0}function Ab(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;const r=V_(e);if(r&&n>Bz[t]||!r&&n>Fz[t])return!1}return!0}function zz(e,t){if(t<1)return!1;const n=V_(e);return!(n&&t>366||!n&&t>365)}function Ob(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function Bp(e,t,n){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}const Uz=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function Ch(e,t,n={}){t=String(t);const r=t.match(Uz);if(r){const s=Y_(n.originalDate||e,n);t=r.reduce(function(o,i){if(i[0]==="'")return o;const l=o.indexOf(i),u=o[l-1]==="'",f=o.replace(i,"'"+Oz[i[0]](s,i,n)+"'");return u?f.substring(0,l-1)+f.substring(l+1):f},t)}return Tt(e,t,n)}function No(e,t,n){e=Y_(e,n);const r=b2(t,e,!0),s=new Date(e.getTime()-r),o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}const Hz={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},$z=(e,t,n)=>{let r;const s=Hz[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?r+"内":r+"前":r},Wz={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},Gz={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Kz={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Yz={date:ql({formats:Wz,defaultWidth:"full"}),time:ql({formats:Gz,defaultWidth:"full"}),dateTime:ql({formats:Kz,defaultWidth:"full"})};function Rb(e,t,n){const r="eeee p";return JB(e,t,n)?r:e.getTime()>t.getTime()?"'下个'"+r:"'上个'"+r}const Vz={lastWeek:Rb,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:Rb,other:"PP p"},qz=(e,t,n,r)=>{const s=Vz[e];return typeof s=="function"?s(t,n,r):s},Qz={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},Xz={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},Jz={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},Zz={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},eU={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},tU={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},nU=(e,t)=>{const n=Number(e);switch(t==null?void 0:t.unit){case"date":return n.toString()+"日";case"hour":return n.toString()+"时";case"minute":return n.toString()+"分";case"second":return n.toString()+"秒";default:return"第 "+n.toString()}},rU={ordinalNumber:nU,era:bo({values:Qz,defaultWidth:"wide"}),quarter:bo({values:Xz,defaultWidth:"wide",argumentCallback:e=>e-1}),month:bo({values:Jz,defaultWidth:"wide"}),day:bo({values:Zz,defaultWidth:"wide"}),dayPeriod:bo({values:eU,defaultWidth:"wide",formattingValues:tU,defaultFormattingWidth:"wide"})},sU=/^(第\s*)?\d+(日|时|分|秒)?/i,oU=/\d+/i,iU={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},aU={any:[/^(前)/i,/^(公元)/i]},lU={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},cU={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},uU={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},dU={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},fU={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},hU={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},mU={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},pU={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},gU={ordinalNumber:D_({matchPattern:sU,parsePattern:oU,valueCallback:e=>parseInt(e,10)}),era:wo({matchPatterns:iU,defaultMatchWidth:"wide",parsePatterns:aU,defaultParseWidth:"any"}),quarter:wo({matchPatterns:lU,defaultMatchWidth:"wide",parsePatterns:cU,defaultParseWidth:"any",valueCallback:e=>e+1}),month:wo({matchPatterns:uU,defaultMatchWidth:"wide",parsePatterns:dU,defaultParseWidth:"any"}),day:wo({matchPatterns:fU,defaultMatchWidth:"wide",parsePatterns:hU,defaultParseWidth:"any"}),dayPeriod:wo({matchPatterns:mU,defaultMatchWidth:"any",parsePatterns:pU,defaultParseWidth:"any"})},Rn={code:"zh-CN",formatDistance:$z,formatLong:Yz,formatRelative:qz,localize:rU,match:gU,options:{weekStartsOn:1,firstWeekContainsDate:4}},zp={enter:"",exit:"",duration:""},na=({children:e,isOpen:t,triggerRef:n,onClose:r,className:s="",offset:o={x:0,y:8},position:i="bottom-left",disableOutsideClick:l=!1})=>{const[u,f]=N.useState({top:0,left:0}),[m,h]=N.useState(!1),[g,p]=N.useState(!1),b=N.useRef(null);return N.useEffect(()=>{if(t&&(n!=null&&n.current)){const v=()=>{var R,P;const w=(R=n.current)==null?void 0:R.getBoundingClientRect();if(!w)return;const I=((P=b.current)==null?void 0:P.getBoundingClientRect())||{width:0,height:0};let j,_;switch(i){case"bottom-left":j=w.bottom+o.y,_=w.left+o.x;break;case"bottom-right":j=w.bottom+o.y,_=w.right-I.width+o.x;break;case"top-left":j=w.top-I.height-o.y,_=w.left+o.x;break;case"top-right":j=w.top-I.height-o.y,_=w.right-I.width+o.x;break;case"center":j=(window.innerHeight-I.height)/2,_=window.innerWidth-I.width-20;break;default:j=w.bottom+o.y,_=w.left+o.x}const C=window.innerWidth,k=window.innerHeight;_+I.width>C&&(_=C-I.width-10),_<10&&(_=10),j+I.height>k&&(j=w.top-I.height-o.y),j<10&&(j=w.bottom+o.y),f(Y=>Math.abs(Y.top-j)>1||Math.abs(Y.left-_)>1?{top:j,left:_}:Y)},T=setTimeout(v,0),y=()=>v(),E=()=>v();return window.addEventListener("resize",y),window.addEventListener("scroll",E,!0),()=>{clearTimeout(T),window.removeEventListener("resize",y),window.removeEventListener("scroll",E,!0)}}},[t,n,o.x,o.y,i]),N.useEffect(()=>{if(t)p(!0),h(!0);else{h(!1);const v=setTimeout(()=>{p(!1)},0);return()=>clearTimeout(v)}},[t]),N.useEffect(()=>{if(!t||!r||l)return;const v=y=>{b.current&&!b.current.contains(y.target)&&(n!=null&&n.current)&&!n.current.contains(y.target)&&r()},T=setTimeout(()=>{document.addEventListener("click",v)},100);return()=>{clearTimeout(T),document.removeEventListener("click",v)}},[t,r,n,l]),g?Fr.createPortal(c.jsx("div",{ref:b,"data-portal-popup":"true",className:`fixed z-[9999] ${zp.duration} ${m?zp.enter:zp.exit} ${s}`,style:{top:`${u.top}px`,left:`${u.left}px`,transformOrigin:"var(--tw-transform-origin, center)"},onClick:v=>v.stopPropagation(),children:e}),document.body):null},yU=({onEmojiSelect:e,onClose:t,isOpen:n,triggerRef:r})=>{const[s,o]=N.useState("smileys"),i={smileys:{name:"笑脸",icon:"😀",emojis:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳"]},emotions:{name:"情感",icon:"❤️",emojis:["😥","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲"]},gestures:{name:"手势",icon:"👍",emojis:["👍","👎","👌","🤌","🤏","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","🖕","👇","☝️","👋","🤚","🖐️","✋","🖖","👏","🙌","🤲","🤝","🙏","✍️","💪","🦾","🦿","🦵"]},objects:{name:"物品",icon:"🎯",emojis:["❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉️","☸️","✡️","🔯","🕎","☯️","☦️","🛐"]},nature:{name:"自然",icon:"🌿",emojis:["🌱","🌿","🍀","🍃","🌾","🌵","🌲","🌳","🌴","🌸","🌺","🌻","🌹","🥀","🌷","💐","🌼","🌙","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","⭐"]}};return c.jsx(na,{isOpen:n,triggerRef:r,className:"rounded-lg shadow-lg w-80",style:{backgroundColor:"var(--theme-surface)"},position:"bottom-left",children:c.jsxs("div",{className:"p-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"选择表情"}),c.jsx("button",{onClick:l=>{l.stopPropagation(),t()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:"×"})]}),c.jsx("div",{className:"flex gap-1 mb-3 overflow-x-auto",children:Object.entries(i).map(([l,u])=>c.jsxs("button",{onClick:f=>{f.stopPropagation(),o(l)},className:`flex items-center gap-1 px-2 py-1 text-xs rounded whitespace-nowrap transition-all duration-200 ${s===l?"bg-blue-500 text-white shadow-md":"bg-theme-elevated text-gray-600 dark:text-gray-300 hover:bg-theme-border"}`,title:u.name,children:[c.jsx("span",{className:"emoji-button text-sm",style:{fontFamily:"Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, EmojiSymbols, EmojiOne Mozilla, Twemoji Mozilla, Segoe UI Symbol, Noto Emoji",fontVariantEmoji:"emoji",textRendering:"optimizeQuality"},children:u.icon}),c.jsx("span",{className:"hidden sm:inline",children:u.name})]},l))}),c.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-48 overflow-y-auto scrollbar-hide smooth-scroll-container scrollbar-smooth rounded-lg p-2",style:{backgroundColor:"var(--theme-surface)"},children:i[s].emojis.map((l,u)=>c.jsx("button",{onClick:f=>{f.stopPropagation(),e(l)},className:"p-2 text-lg hover:bg-theme-elevated rounded transition-colors emoji-button",title:l,style:{fontFamily:"Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, EmojiSymbols, EmojiOne Mozilla, Twemoji Mozilla, Segoe UI Symbol, Noto Emoji",fontVariantEmoji:"emoji",textRendering:"optimizeQuality"},children:l},u))})]})})},ei={allMoods:[{emoji:"😊",name:"开心",description:"心情愉悦"},{emoji:"😢",name:"难过",description:"感到悲伤"},{emoji:"😡",name:"生气",description:"愤怒不满"},{emoji:"😴",name:"困倦",description:"想要睡觉"},{emoji:"🤔",name:"思考",description:"深度思考"},{emoji:"😍",name:"喜爱",description:"非常喜欢"},{emoji:"😎",name:"酷",description:"感觉很酷"},{emoji:"🤗",name:"拥抱",description:"想要拥抱"},{emoji:"😅",name:"尴尬",description:"感到尴尬"},{emoji:"😭",name:"大哭",description:"非常伤心"},{emoji:"🥳",name:"庆祝",description:"值得庆祝"},{emoji:"😌",name:"满足",description:"内心满足"}],allWeathers:[{emoji:"☀️",name:"晴天",description:"阳光明媚"},{emoji:"⛅",name:"多云",description:"云朵飘飘"},{emoji:"☁️",name:"阴天",description:"天空阴沉"},{emoji:"🌧️",name:"雨天",description:"下雨了"},{emoji:"⛈️",name:"雷雨",description:"雷电交加"},{emoji:"🌨️",name:"雪天",description:"雪花飞舞"},{emoji:"🌪️",name:"大风",description:"狂风呼啸"},{emoji:"🌈",name:"彩虹",description:"雨后彩虹"},{emoji:"🌙",name:"夜晚",description:"夜幕降临"},{emoji:"⭐",name:"星空",description:"繁星点点"},{emoji:"🌅",name:"日出",description:"朝阳初升"},{emoji:"🌄",name:"日落",description:"夕阳西下"},{emoji:"🌫️",name:"雾天",description:"雾气朦胧"},{emoji:"🌊",name:"海浪",description:"波涛汹涌"},{emoji:"❄️",name:"雪花",description:"雪花纷飞"},{emoji:"💨",name:"大风",description:"风力强劲"},{emoji:"🌀",name:"台风",description:"台风来袭"},{emoji:"🌡️",name:"高温",description:"天气炎热"},{emoji:"🧊",name:"严寒",description:"天气寒冷"},{emoji:"🌛",name:"新月",description:"新月如钩"},{emoji:"🌌",name:"星空",description:"银河璀璨"},{emoji:"🌆",name:"黄昏",description:"黄昏时分"},{emoji:"🌇",name:"日落",description:"落日余晖"},{emoji:"🌃",name:"夜晚",description:"夜色深沉"}],get moodMap(){const e={};return this.allMoods.forEach(t=>{e[t.emoji]=t}),e},get weatherMap(){const e={};return this.allWeathers.forEach(t=>{e[t.emoji]=t}),e},parseContentForMoodAndWeather(e){if(!e)return{mood:null,weather:null};let t=null,n=null;for(const r of this.allMoods){const s=`${r.emoji} ${r.name}`;if(e.includes(s)){t=r;break}}for(const r of this.allWeathers){const s=`${r.emoji} ${r.name}`;if(e.includes(s)){n=r;break}}return{mood:t,weather:n}},removeAllMoodAndWeather(e){if(!e)return"";let t=e;for(const n of this.allMoods){const r=`${n.emoji} ${n.name}`;t=t.replace(new RegExp(r,"g"),"")}for(const n of this.allWeathers){const r=`${n.emoji} ${n.name}`;t=t.replace(new RegExp(r,"g"),"")}return t.trim()},removeAllMood(e){if(!e)return"";let t=e;for(const n of this.allMoods){const r=`${n.emoji} ${n.name}`;t=t.replace(new RegExp(r,"g"),"")}return t.trim()},removeAllWeather(e){if(!e)return"";let t=e;for(const n of this.allWeathers){const r=`${n.emoji} ${n.name}`;t=t.replace(new RegExp(r,"g"),"")}return t.trim()},addMoodToContent(e,t){let n=this.removeAllMood(e);const r=`${t.emoji} ${t.name}`;let s=!1,o="";for(const i of this.allWeathers){const l=`${i.emoji} ${i.name}`;if(n.includes(l)){s=!0,o=l;break}}return s?n=n.replace(o,`${r} ${o}`):(n=n.trim(),n=n?`${r} ${n}`:r),n.trim()},addWeatherToContent(e,t){let n=this.removeAllWeather(e);const r=`${t.emoji} ${t.name}`;let s=!1,o="";for(const i of this.allMoods){const l=`${i.emoji} ${i.name}`;if(n.includes(l)){s=!0,o=l;break}}return s?n=n.replace(o,`${o} ${r}`):(n=n.trim(),n=n?`${r} ${n}`:r),n.trim()}},xU=({onMoodSelect:e,onClose:t,isOpen:n,triggerRef:r})=>c.jsx(na,{isOpen:n,onClose:t,triggerRef:r,className:"w-80",children:c.jsxs("div",{className:"mood-selector-popup rounded-lg shadow-lg border p-4",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)"},onClick:s=>s.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(h_,{size:16,style:{color:"var(--theme-primary)"}}),c.jsx("span",{className:"font-medium",style:{color:"var(--theme-text)"},children:"选择心情"})]}),c.jsx("button",{onClick:s=>{s.stopPropagation(),t()},style:{color:"var(--theme-text-secondary)"},className:"hover:opacity-70 transition-opacity",children:"×"})]}),c.jsx("div",{className:"grid grid-cols-6 gap-2",children:ei.allMoods.map((s,o)=>c.jsxs("button",{onClick:i=>{i.stopPropagation(),e(s)},className:"flex flex-col items-center p-2 rounded-lg transition-colors group",style:{":hover":{backgroundColor:"var(--theme-hover)"}},onMouseEnter:i=>{i.target.style.backgroundColor="var(--theme-hover)"},onMouseLeave:i=>{i.target.style.backgroundColor="transparent"},title:s.description,children:[c.jsx("span",{className:"text-2xl mb-1 transition-colors emoji-button",style:{fontFamily:"Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, EmojiSymbols, EmojiOne Mozilla, Twemoji Mozilla, Segoe UI Symbol, Noto Emoji",fontVariantEmoji:"emoji",textRendering:"optimizeQuality"},children:s.emoji}),c.jsx("span",{className:"text-xs text-center leading-tight",style:{color:"var(--theme-text-secondary)"},children:s.name})]},o))})]})}),vU=({onWeatherSelect:e,onClose:t,isOpen:n,triggerRef:r})=>c.jsx(na,{isOpen:n,onClose:t,triggerRef:r,className:"w-80",children:c.jsxs("div",{className:"weather-selector-popup rounded-lg shadow-lg border p-4 bg-theme-surface border-theme-border",onClick:s=>s.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(u_,{size:16,className:"text-theme-primary"}),c.jsx("span",{className:"font-medium text-theme-text",children:"选择天气"})]}),c.jsx("button",{onClick:s=>{s.stopPropagation(),t()},className:"hover:opacity-70 transition-opacity text-theme-text-secondary",children:"×"})]}),c.jsx("div",{className:"grid grid-cols-6 gap-2",children:ei.allWeathers.map((s,o)=>c.jsxs("button",{onClick:i=>{i.stopPropagation(),e(s)},className:"flex flex-col items-center p-2 rounded-lg transition-colors group hover:bg-theme-surface",title:s.description,children:[c.jsx("span",{className:"text-2xl mb-1 transition-colors emoji-button",style:{fontFamily:"Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, EmojiSymbols, EmojiOne Mozilla, Twemoji Mozilla, Segoe UI Symbol, Noto Emoji",fontVariantEmoji:"emoji",textRendering:"optimizeQuality"},children:s.emoji}),c.jsx("span",{className:"text-xs text-center leading-tight text-theme-text-secondary",children:s.name})]},o))})]})}),bU=({onFormatSelect:e,onClose:t,isOpen:n,triggerRef:r,textareaRef:s,cardSettings:o})=>{const[i,l]=N.useState(null);ca(),N.useEffect(()=>{n||l(null)},[n]);const u={borderColor:"var(--theme-border)",buttonBg:"var(--theme-hover)",buttonHoverBg:"var(--theme-hover)",selectedBg:"var(--theme-primary)",textColor:"var(--theme-text)"},f=[{icon:ZP,name:"粗体",format:"**",title:"粗体"},{icon:aF,name:"斜体",format:"_",title:"斜体"},{icon:cm,name:"任务",format:"- [ ] ",title:"任务列表",isTaskList:!0},{icon:gF,name:"下划线",format:"<u>",endFormat:"</u>",title:"下划线"},{icon:eF,name:"代码",format:"`",title:"行内代码"},{icon:Ip,name:"一级标题",format:"# ",title:"一级标题",isHeader:!0,level:1},{icon:Ip,name:"二级标题",format:"## ",title:"二级标题",isHeader:!0,level:2},{icon:Ip,name:"三级标题",format:"### ",title:"三级标题",isHeader:!0,level:3},{icon:lF,name:"列表",format:"- ",title:"无序列表"},{icon:VP,name:"引用",format:"> ",title:"引用"}],m=h=>{if(l(h.name),s&&s.current){const g=s.current,p=g.selectionStart,b=g.selectionEnd,v=g.value.substring(p,b);let T,y;if(h.isHeader){const j=g.value,_=j.lastIndexOf(`
`,p-1)+1,C=j.indexOf(`
`,p),k=j.substring(_,C===-1?j.length:C),R=k.match(/^(#{1,6})\s*/);let P=h.level;if(R){const Ne=R[1].length;Ne<6?P=Ne+1:P=1}const Y="#".repeat(P)+" ";let z=k;R&&(z=k.substring(R[0].length)),T=Y+z,y=p-(k.length-T.length);const Q=j.substring(0,_),M=C===-1?"":j.substring(C),le=Q+T+M;e(le,y),l(null);return}if(h.isTaskList){const j=`- [ ] 任务1
- [ ] 任务2`;T=j,y=p+j.length;const _=g.value.substring(0,p),C=g.value.substring(b),k=_+T+C;e(k,y),l(null);return}if(h.endFormat)T=h.format+v+h.endFormat,y=p+h.format.length+v.length+h.endFormat.length;else if(h.format.includes("-")||h.format.includes(">"))if(v)T=v.split(`
`).map(C=>C.trim()===""?C:h.format+C).join(`
`),y=p+T.length;else{const j=g.value,_=j.lastIndexOf(`
`,p-1)+1,C=j.indexOf(`
`,p),k=j.substring(_,C===-1?j.length:C);k.startsWith(h.format)?(T=k.substring(h.format.length),y=p-h.format.length):(T=h.format+k,y=p+h.format.length);const R=j.substring(0,_),P=C===-1?"":j.substring(C),Y=R+T+P;e(Y,y),l(null);return}else v?(T=h.format+v+h.format,y=p+h.format.length+v.length+h.format.length):(T=h.format+h.format,y=p+h.format.length);const E=g.value.substring(0,p),w=g.value.substring(b),I=E+T+w;e(I,y)}l(null)};return n?c.jsx("div",{className:"mt-3 pt-3 border-t",style:{borderColor:u.borderColor,backgroundColor:"var(--theme-surface)"},children:c.jsx("div",{className:"flex flex-wrap gap-2",children:f.map((h,g)=>{const p=h.icon,b=i===h.name;return c.jsx("button",{type:"button",onClick:v=>{v.preventDefault(),v.stopPropagation(),m(h)},title:h.title,className:"flex items-center justify-center w-9 h-9 rounded transition-all duration-200 hover:scale-105",style:{backgroundColor:b?u.selectedBg:u.buttonBg,color:b?"white":u.textColor,borderRadius:(o==null?void 0:o.borderRadius)||"0.5rem",borderWidth:"1px",borderStyle:"solid",borderColor:b?"transparent":u.borderColor,boxShadow:b?"0 2px 8px rgba(59, 130, 246, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)",opacity:b?1:.8},onMouseEnter:v=>{b||(v.target.style.backgroundColor=u.buttonHoverBg,v.target.style.opacity="1")},onMouseLeave:v=>{b||(v.target.style.backgroundColor=u.buttonBg,v.target.style.opacity="0.8")},children:h.isHeader?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx(p,{className:"w-3 h-3"}),c.jsx("span",{className:"text-xs ml-0.5 font-bold",children:h.level})]}):c.jsx(p,{className:"w-4 h-4"})},g)})})}):null},wU=({isOpen:e,triggerRef:t,onClose:n,selectedDate:r,onDateChange:s})=>{const[o,i]=N.useState(new Date),[l,u]=N.useState(""),[f,m]=N.useState(""),[h,g]=N.useState(new Date);N.useEffect(()=>{if(e)if(m(""),r){const y=new Date(r);u(Tt(y,"HH:mm")),i(y),g(y)}else{const y=new Date;u(Tt(y,"HH:mm")),i(y),g(y)}},[r,e]);const p=y=>{u(y.target.value),m("")},b=y=>{const[E,w]=l.split(":"),I=new Date(y);I.setHours(parseInt(E)||0,parseInt(w)||0,0,0),i(I),m("")},v=()=>{if(!o||!l){m("请选择日期和时间");return}const[y,E]=l.split(":"),w=new Date(o);w.setHours(parseInt(y)||0,parseInt(E)||0,0,0),s&&s(w),n&&n()},T=()=>{const y=Th(h),E=i1(h),w=GB({start:y,end:E}),I=qB(y),j=Array(I).fill(null),_=["日","一","二","三","四","五","六"];return c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("button",{type:"button",onClick:()=>g(v2(h,1)),className:"p-1 rounded transition-colors",style:{color:"var(--theme-text)"},onMouseEnter:C=>C.target.style.backgroundColor="var(--theme-border)",onMouseLeave:C=>C.target.style.backgroundColor="transparent",children:c.jsx(h2,{className:"h-3 w-3"})}),c.jsx("h3",{className:"text-xs font-medium",style:{color:"var(--theme-text)"},children:Tt(h,"yyyy年MM月",{locale:Rn})}),c.jsx("button",{type:"button",onClick:()=>g(hm(h,1)),className:"p-1 rounded transition-colors",style:{color:"var(--theme-text)"},onMouseEnter:C=>C.target.style.backgroundColor="var(--theme-border)",onMouseLeave:C=>C.target.style.backgroundColor="transparent",children:c.jsx(t1,{className:"h-3 w-3"})})]}),c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:_.map(C=>c.jsx("div",{className:"text-center text-xs font-medium py-1",style:{color:"var(--theme-text-muted)"},children:C},C))}),c.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[j.map((C,k)=>c.jsx("div",{className:"h-6 w-6"},`padding-${k}`)),w.map(C=>{const k=o&&_1(C,o),R=ni(C);return c.jsx("button",{type:"button",onClick:()=>b(C),className:`
                  h-6 w-6 flex items-center justify-center text-xs rounded-full transition-colors
                  ${R?"font-bold":""}
                  ${!R&&k?"font-bold":""}
                `,style:{backgroundColor:R?"var(--theme-primary)":!R&&k?"rgba(59, 130, 246, 0.1)":"transparent",color:R?"white":!R&&k?"var(--theme-primary)":"var(--theme-text)"},onMouseEnter:P=>{!R&&!k&&(P.target.style.backgroundColor="var(--theme-border)")},onMouseLeave:P=>{!R&&!k&&(P.target.style.backgroundColor="transparent")},children:Tt(C,"d")},C.toString())})]})]})};return e?c.jsx(na,{isOpen:e,triggerRef:t,onClose:()=>n&&n(),className:"rounded-lg shadow-lg border w-64",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)"},position:"bottom-right",children:c.jsxs("div",{className:"p-3",style:{backgroundColor:"var(--theme-surface)"},children:[c.jsxs("div",{className:"mb-3",children:[c.jsx("h3",{className:"text-base font-medium",style:{color:"var(--theme-text)"},children:"选择时间"}),c.jsx("p",{className:"text-xs mt-1",style:{color:"var(--theme-text-secondary)"},children:"系统时区"})]}),T(),c.jsxs("div",{className:"mb-3",children:[c.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--theme-text-secondary)"},children:"时间"}),c.jsx("input",{type:"time",value:l,onChange:p,className:"w-full px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)",color:"var(--theme-text)",focusRingColor:"var(--theme-primary)"}})]}),f&&c.jsx("div",{className:"mb-3 p-2 border rounded text-xs",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.3)",color:"var(--theme-error)"},children:f}),c.jsxs("div",{className:"flex justify-end space-x-2",children:[c.jsxs("button",{type:"button",onClick:()=>n&&n(),className:"px-3 py-1 text-xs rounded transition-colors flex items-center gap-1",style:{backgroundColor:"var(--theme-surface)",color:"var(--theme-text-secondary)",hoverBackgroundColor:"var(--theme-border)"},onMouseEnter:y=>y.target.style.backgroundColor="var(--theme-border)",onMouseLeave:y=>y.target.style.backgroundColor="var(--theme-surface)",children:[c.jsx(wn,{className:"h-3 w-3"}),"取消"]}),c.jsxs("button",{type:"button",onClick:v,className:"px-3 py-1 text-xs rounded transition-colors flex items-center gap-1",style:{backgroundColor:"var(--theme-primary)",color:"white",hoverBackgroundColor:"var(--theme-primary-hover)"},onMouseEnter:y=>y.target.style.backgroundColor="var(--theme-primary-hover)",onMouseLeave:y=>y.target.style.backgroundColor="var(--theme-primary)",children:[c.jsx(Br,{className:"h-3 w-3"}),"确认"]})]})]})}):null},gl={backdropEnter:"",backdropExit:"",dialogEnter:"",dialogExit:"",duration:""},q_=({isOpen:e,onClose:t,onConfirm:n,title:r="输入",placeholder:s="请输入...",defaultValue:o="",maxLength:i=50})=>{const[l,u]=N.useState(o||""),[f,m]=N.useState(!1),[h,g]=N.useState(!1),p=N.useRef(null);N.useEffect(()=>{if(e)g(!0),m(!0);else{m(!1);const y=setTimeout(()=>{g(!1)},0);return()=>clearTimeout(y)}},[e]),N.useEffect(()=>{e&&(u(o||""),setTimeout(()=>{p.current&&(p.current.focus(),p.current.select())},100))},[e,o]);const b=y=>{y.preventDefault();const E=l.trim();E&&(n(E),t())},v=()=>{u(""),t()},T=y=>{y.key==="Escape"&&v()};return h?Fr.createPortal(c.jsxs("div",{className:"fixed inset-0 z-[10001] flex items-center justify-center",children:[c.jsx("div",{className:`absolute inset-0 bg-black bg-opacity-50 ${gl.duration} ${f?gl.backdropEnter:gl.backdropExit}`,onClick:v}),c.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4 ${gl.duration} ${f?gl.dialogEnter:gl.dialogExit}`,style:{backgroundColor:"var(--theme-elevated)",border:"1px solid var(--theme-border)",transformOrigin:"center"},children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:"var(--theme-border)"},children:[c.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--theme-text)"},children:r}),c.jsx("button",{onClick:v,className:"p-1 rounded-md hover:bg-theme-elevated transition-colors",style:{color:"var(--theme-text-secondary)"},children:c.jsx(wn,{size:18})})]}),c.jsxs("form",{onSubmit:b,className:"p-4",children:[c.jsx("input",{ref:p,type:"text",value:l,onChange:y=>u(y.target.value),onKeyDown:T,placeholder:s,maxLength:i,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-0 dark:bg-gray-700 dark:text-white",style:{backgroundColor:"var(--theme-input-bg)",borderColor:"var(--theme-border)",color:"var(--theme-text)"}}),c.jsxs("div",{className:"text-xs mt-1 text-right",style:{color:"var(--theme-text-secondary)"},children:[l.length,"/",i]}),c.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[c.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-theme-elevated transition-colors",style:{borderColor:"var(--theme-border)",color:"var(--theme-text-secondary)"},children:"取消"}),c.jsx("button",{type:"submit",disabled:!l.trim(),className:"px-4 py-2 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"确定"})]})]})]})]}),document.body):null},TU=({isOpen:e,triggerRef:t,onNoteSelect:n,onClose:r})=>{const[s,o]=N.useState(""),[i,l]=N.useState([]),[u,f]=N.useState(!1),[m,h]=N.useState(0),g=N.useRef(null),p=N.useRef(null),b=async(w="")=>{try{f(!0);const I=await x_(w,1,20);l(I.notes||[]),h(0)}catch(I){console.error("搜索笔记失败:",I),l([])}finally{f(!1)}};N.useEffect(()=>{e&&(b(),setTimeout(()=>{p.current&&p.current.focus()},100))},[e]),N.useEffect(()=>{const w=setTimeout(()=>{b(s)},300);return()=>clearTimeout(w)},[s]);const v=w=>{if(!(!e||i.length===0))switch(w.key){case"ArrowDown":w.preventDefault(),h(I=>Math.min(I+1,i.length-1));break;case"ArrowUp":w.preventDefault(),h(I=>Math.max(I-1,0));break;case"Enter":w.preventDefault(),i[m]&&T(i[m]);break;case"Escape":w.preventDefault(),r();break}},T=w=>{n(w),r()},y=w=>{const I=w.replace(/[#*`_~\[\]()]/g,"").replace(/\n+/g," ").trim();return I.length>100?I.substring(0,100)+"...":I},E=w=>{var C;const j=(C=w.split(`
`)[0])==null?void 0:C.trim();if(j!=null&&j.startsWith("#"))return j.replace(/^#+\s*/,"");const _=j==null?void 0:j.replace(/[#*`_~\[\]()]/g,"").trim();return(_==null?void 0:_.length)>50?_.substring(0,50)+"...":_||"无标题"};return c.jsx(na,{isOpen:e,triggerRef:t,onClose:r,className:"w-note-selector",position:"bottom-left",offset:{x:0,y:8},children:c.jsxs("div",{ref:g,className:"max-h-80 rounded-lg shadow-lg border overflow-hidden",style:{backgroundColor:"var(--theme-elevated)",borderColor:"var(--theme-border)"},children:[c.jsx("div",{className:"p-3 border-b",style:{borderColor:"var(--theme-border)"},children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{ref:p,type:"text",value:s,onChange:w=>o(w.target.value),onKeyDown:v,placeholder:"搜索笔记进行引用...",className:"w-full px-3 py-2 pl-9 pr-8 text-sm rounded-md focus:outline-none focus:ring-0",style:{backgroundColor:"var(--theme-elevated)",borderColor:"var(--theme-border)",color:"var(--theme-text)",border:"1px solid"}}),c.jsx(um,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s&&c.jsx("button",{onClick:()=>o(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:c.jsx(wn,{className:"h-3 w-3 text-gray-400"})})]})}),c.jsx("div",{className:"max-h-64 overflow-y-auto scrollbar-hide smooth-scroll-container scrollbar-smooth",children:u?c.jsx("div",{className:"p-4 text-center text-gray-500",children:"搜索中..."}):i.length===0?c.jsx("div",{className:"p-4 text-center text-gray-500",children:s?"未找到匹配的笔记":"暂无笔记"}):i.map((w,I)=>c.jsx("div",{onClick:()=>T(w),className:`p-3 cursor-pointer border-b transition-colors ${I===m?"bg-primary-50 dark:bg-primary-900/20":"hover:bg-theme-elevated"}`,style:{borderColor:"var(--theme-border)"},children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(m2,{className:"h-3 w-3 text-primary-500 flex-shrink-0"}),c.jsx("h4",{className:"text-sm font-medium truncate",style:{color:"var(--theme-text)"},children:E(w.content)})]}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:y(w.content)}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx(tr,{className:"h-3 w-3 text-gray-400"}),c.jsx("span",{className:"text-xs text-gray-400",children:Tt(No(new Date(w.created_at),"Asia/Shanghai"),"MM-dd HH:mm")}),w.tags&&typeof w.tags=="string"&&c.jsxs("div",{className:"flex gap-1",children:[w.tags.split(",").slice(0,2).map((j,_)=>c.jsxs("span",{className:"inline-block px-1.5 py-0.5 text-xs rounded bg-theme-elevated text-gray-600 dark:text-gray-300",children:["#",j.trim()]},_)),w.tags.split(",").length>2&&c.jsx("span",{className:"text-xs text-gray-400",children:"..."})]})]})]})})},w.id))}),i.length>0&&c.jsx("div",{className:"p-2 border-t text-xs text-gray-500 dark:text-gray-400",style:{borderColor:"var(--theme-border)"},children:"使用 ↑↓ 键导航，Enter 键选择，Esc 键关闭"})]})})},EU=({isOpen:e,triggerRef:t,selectedTags:n=[],onTagsChange:r,onClose:s,cardSettings:o})=>{const[i,l]=N.useState([]),[u,f]=N.useState(!1),[m,h]=N.useState({}),[g,p]=N.useState([]),[b,v]=N.useState(""),[T,y]=N.useState("#3B82F6"),[E,w]=N.useState(!1);N.useRef(null);const I=N.useRef(null),j=N.useRef(null),[_,C]=N.useState(""),[k,R]=N.useState(!1),[P,Y]=N.useState(!1),[z,Q]=N.useState(!1),[M,le]=N.useState(null);N.useState(!1);const Ne=async()=>{f(!0);try{const A=et.getTags(),L=et.getTagColors();l((oe=>oe.map(ie=>ie.name))(A)||[]),h(L||{}),$()}catch(A){console.error("加载标签失败:",A),l(["工作","学习","生活","想法","计划","重要","待办"])}finally{f(!1)}},$=()=>{try{const A=window.favoriteConfigManager?window.favoriteConfigManager.getConfig():{enablePersistenceOptimization:!0,enableBatchOperations:!0,enableStateSynchronization:!0,enableLogging:!1};let L=[];if(A.enablePersistenceOptimization){const K=localStorage.getItem("memeos_favorite_tags");K&&(L=JSON.parse(K))}if(L.length>0){const K=L.filter(oe=>oe&&typeof oe=="string"&&oe.trim().length>0);K.length!==L.length&&(A.enableLogging&&console.log("加载时清理无效收藏标签:",{original:L,filtered:K,removed:L.filter(oe=>!oe||typeof oe!="string"||oe.trim().length===0)}),A.enablePersistenceOptimization&&localStorage.setItem("memeos_favorite_tags",JSON.stringify(K))),p(K)}A.enableLogging&&console.log("TagPicker: 加载收藏列表完成:",{count:L.length})}catch(A){console.error("加载收藏列表失败:",A),p([])}},G=A=>{try{const L=window.favoriteConfigManager?window.favoriteConfigManager.getConfig():{enablePersistenceOptimization:!0,enableBatchOperations:!0,enableStateSynchronization:!0,enableLogging:!1};L.enablePersistenceOptimization&&localStorage.setItem("memeos_favorite_tags",JSON.stringify(A)),p(A),L.enableStateSynchronization&&window.dispatchEvent(new CustomEvent("favoriteTagsUpdated",{detail:{favoriteTags:A}})),L.enableLogging&&console.log("TagPicker: 保存收藏列表:",A)}catch(L){console.error("保存收藏列表失败:",L)}},H=A=>{if(!g.includes(A)){const L=[...g,A];G(L)}},U=A=>{const L=g.filter(K=>K!==A);G(L)},ee=A=>({id:A,name:A,color:m[A]||"#3B82F6",isFavorite:g.includes(A),isPinned:!1,toggleFavorite:async()=>{try{return(window.favoriteConfigManager?window.favoriteConfigManager.getConfig():{enablePersistenceOptimization:!0,enableBatchOperations:!0,enableStateSynchronization:!0,enableLogging:!1}).enableLogging&&console.log("TagPicker: 切换收藏状态:",{tag:A,currentStatus:g.includes(A)}),g.includes(A)?(U(A),!1):(H(A),!0)}catch(L){throw console.error("切换收藏状态失败:",L),L}}}),te=A=>ee(A).toggleFavorite();N.useEffect(()=>(window.addEventListener("favoriteTagsUpdated",we),()=>{window.removeEventListener("favoriteTagsUpdated",we)}),[]),N.useEffect(()=>{if(e){if((()=>{const L=et.getTags(),K=et.getTagColors();l((ie=>ie.map(J=>J.name))(L)||[]),h(K||{}),$()})(),Ne(),n.length>0){const L=n[n.length-1],K=m[L];if(K)if(K.startsWith("#"))y(K);else{const oe=rs.find(ie=>ie.value===K);y(oe?oe.hexColor:"#3B82F6")}else y("#3B82F6")}et.addListener("tagsChanged",V),et.addListener("tagColorsChanged",xe)}return()=>{et.removeListener("tagsChanged",V),et.removeListener("tagColorsChanged",xe)}},[e]),N.useEffect(()=>{i.length>0&&$()},[i]);const V=A=>{l((K=>K.map(oe=>oe.name))(A)||[])},xe=A=>{h(A||{})},we=A=>{const{favoriteTags:L}=A.detail||{},K=window.favoriteConfigManager?window.favoriteConfigManager.getConfig():{enablePersistenceOptimization:!0,enableBatchOperations:!0,enableStateSynchronization:!0,enableLogging:!1};if(K.enableLogging&&console.log("TagPicker收到收藏列表更新事件:",L),L){const oe=L.filter(ie=>ie&&typeof ie=="string"&&ie.trim().length>0);if(oe.length!==L.length){K.enableLogging&&console.log("清理无效收藏标签:",{original:L,filtered:oe,removed:L.filter(ie=>!ie||typeof ie!="string"||ie.trim().length===0)});try{K.enablePersistenceOptimization&&localStorage.setItem("memeos_favorite_tags",JSON.stringify(oe)),K.enableStateSynchronization&&window.dispatchEvent(new CustomEvent("favoriteTagsUpdated",{detail:{favoriteTags:oe}}))}catch(ie){console.error("更新收藏列表失败:",ie)}}p(oe)}},Le=A=>{if(console.log("🎯 handleFavoriteTagClick 被调用:",{tag:A,selectedTags:n}),!n.includes(A)){const L=[...n,A];console.log("🎯 添加到已选标签:",{tag:A,newSelectedTags:L}),r(L),window.dispatchEvent(new CustomEvent("tagsUpdated",{detail:{action:"select",tagName:A,tags:L}}))}};N.useEffect(()=>{const A=ie=>{const{action:J}=ie.detail||{};console.log("🎯 handleTagsUpdated 被调用:",{action:J,isOpen:e}),e&&!["add_to_available","remove_from_available"].includes(J)?(console.log("🎯 执行 loadTags()"),Ne()):console.log("🎯 跳过 loadTags() - 备选区操作或组件未打开")},L=async ie=>{const{tagName:J,color:me}=ie.detail||{};J&&me&&h(be=>({...be,[J]:me}))},K=ie=>{const{favoriteTags:J}=ie.detail||{};J&&p(J)},oe=()=>{console.log("TagPicker接收到filterCleared事件，清除选中状态"),r([]),C(""),R(!1),Y(!1)};return window.addEventListener("tagsUpdated",A),window.addEventListener("tagColorsUpdated",L),window.addEventListener("favoriteTagsUpdated",K),window.addEventListener("filterCleared",oe),()=>{window.removeEventListener("tagsUpdated",A),window.removeEventListener("tagColorsUpdated",L),window.removeEventListener("favoriteTagsUpdated",K),window.removeEventListener("filterCleared",oe)}},[e]);const Ve=async()=>{const A=k?_.trim():b.trim();if(!A)return;const L=i.some(K=>(typeof K=="string"?K:K&&K.name)===A);try{if(!L&&await et.addTag({name:A,isPinned:!1,children:[]})){let me=T;if(!T.startsWith("#")){const be=rs.find(ye=>ye.value===T);me=be?be.hexColor:"#3B82F6"}await et.setTagColor(A,me),console.log("🎯 TagPicker通过localConfigManager创建标签:",A)}const K=L?i:[...i,A];l(K);let oe=T;if(!T.startsWith("#")){const J=rs.find(me=>me.value===T);oe=J?J.hexColor:"#3B82F6"}const ie={...m,[A]:oe};h(ie);try{const J=JSON.parse(localStorage.getItem("tagColors")||"{}");J[A]=oe,localStorage.setItem("tagColors",JSON.stringify(J)),console.log("🎨 TagPicker保存颜色到localStorage:",{tagName:A,color:oe})}catch(J){console.error("更新本地存储失败:",J)}if(window.dispatchEvent(new CustomEvent("tagColorsUpdated",{detail:{tagName:A,color:oe}})),window.dispatchEvent(new CustomEvent("tagsUpdated",{detail:{action:"create",tagName:A,tags:K}})),!n.includes(A)){const J=[...n,A];r(J)}k?(C(""),R(!1),Y(!1)):v("")}catch(K){console.error("创建标签失败:",K),Ne()}},Me=A=>{if(A.key==="Enter")if(A.preventDefault(),k){if(D.length===0)v(_),R(!1),C(""),Y(!1),setTimeout(()=>{Ve()},10);else if(D.length===1){const L=D[0],K=typeof L=="string"?L:L&&L.name;if(!n.includes(K)){const oe=[...n,K];r(oe),window.dispatchEvent(new CustomEvent("tagsUpdated",{detail:{action:"select",tagName:K,tags:oe}}))}C(""),R(!1),Y(!1)}}else Ve();A.key==="Escape"&&k&&(R(!1),C(""),Y(!1))},Ke=()=>{Q(!1),le(null)},De=async()=>{if(!M)return;const A=typeof M=="string"?M:M&&M.name;if(A)try{const L=i.filter(K=>(typeof K=="string"?K:K&&K.name)!==A);if(l(L),g.includes(A)&&U(A),n.includes(A)){const K=n.filter(oe=>oe!==A);r(K)}window.dispatchEvent(new CustomEvent("tagsUpdated",{detail:{action:"delete",tagName:A,tags:L}})),Ke(),await et.deleteTag(A),console.log("🎯 TagPicker通过localConfigManager删除标签:",A)}catch(L){console.error("删除标签失败:",L),Ne()}},nt=()=>({backgroundColor:"var(--theme-elevated)",textColor:"var(--theme-text)",borderColor:"var(--theme-border)"}),ut=A=>(m[A],"border border-gray-300 dark:border-gray-600"),dt=A=>{const L=m[A];if(!L)return{backgroundColor:"#3B82F6",color:"#ffffff"};if(L.startsWith("#"))return{backgroundColor:L,color:"#ffffff"};const K=rs.find(oe=>oe.value===L);return K?{backgroundColor:K.hexColor,color:"#ffffff"}:/^[0-9A-Fa-f]{6}$/.test(L)?{backgroundColor:`#${L}`,color:"#ffffff"}:{backgroundColor:"#3B82F6",color:"#ffffff"}},D=i.filter(A=>{if(!k)return!1;if(!_.trim())return i.length===0?["工作","学习","生活","想法","计划","重要","待办"].includes(A):!0;const L=_.toLowerCase().trim(),K=typeof A=="string"?A:A&&A.name;if(!K)return!1;const oe=K.toLowerCase();if(oe===L||oe.startsWith(L)||oe.includes(L))return!0;const ie={g:["工作","管理","功能","工具"],x:["学习","生活","想法","项目","系统"],s:["生活","思想","设计","实践"],j:["计划","技术","经验","记录"],d:["重要","待办","调试","开发"],y:["研究","优化","应用","测试"]};if(L.length===1&&ie[L])return ie[L].some(me=>oe.includes(me));const J=L.split(/\s+/).filter(me=>me.length>0);return J.length>1?J.every(me=>oe.includes(me)):!1}),ue=[...D].sort((A,L)=>{if(!_.trim()){const be=(typeof A=="string"?A:A&&A.name)||"",ye=(typeof L=="string"?L:L&&L.name)||"";return be.localeCompare(ye)}const K=_.toLowerCase().trim(),oe=(typeof A=="string"?A:A&&A.name)||"",ie=(typeof L=="string"?L:L&&L.name)||"",J=oe.toLowerCase(),me=ie.toLowerCase();return J===K&&me!==K?-1:me===K&&J!==K?1:J.startsWith(K)&&!me.startsWith(K)?-1:me.startsWith(K)&&!J.startsWith(K)?1:J.includes(K)&&me.includes(K)?oe.length-ie.length:0});if(N.useEffect(()=>{const A=L=>{if(P&&k){const K=document.querySelector(".absolute.top-full.left-0.right-0.mt-1"),oe=document.querySelector('input[placeholder="搜索标签..."]');K&&!K.contains(L.target)&&oe&&!oe.contains(L.target)&&!L.target.closest("button")&&Y(!1)}};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[P,k]),!e)return null;const F=nt();return c.jsxs("div",{className:"mt-3 p-3 rounded-lg tag-picker",style:{backgroundColor:"transparent",color:F.textColor,borderRadius:`${(o==null?void 0:o.borderRadius)||8}px`},children:[u?c.jsx("div",{className:"text-sm py-4 text-center",style:{color:F.textColor,opacity:.7},children:c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",style:{color:F.textColor},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"加载中..."]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"text-sm font-medium",style:{color:F.textColor},children:"收藏"}),c.jsxs("div",{className:"text-xs",style:{color:"var(--theme-text-secondary)"},children:[g.length," 项"]})]}),c.jsx("div",{className:"flex flex-wrap gap-2 max-h-48 overflow-y-auto scrollbar-hide smooth-scroll-container scrollbar-smooth",children:g.length>0?g.filter(A=>i.includes(A)).map(A=>c.jsx("div",{className:"group relative flex-shrink-0 flex items-center",children:c.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium cursor-pointer ${ut(A)}`,style:dt(A),onClick:L=>{console.log("🎯 收藏标签点击事件被触发:",{tag:A}),L.stopPropagation(),Le(A)},title:"点击添加到已选标签",children:[c.jsx("span",{className:"truncate max-w-tag-truncate",children:A}),c.jsx("span",{onClick:L=>{L.stopPropagation(),U(A);try{const oe=et.getTags().find(ie=>ie.name===A);oe&&(et.updateTag(oe.id,{isFavorite:!1}),console.log("已同步更新TagManager中的标签收藏状态:",A))}catch(K){console.error("同步更新TagManager标签收藏状态失败:",K)}},className:"ml-2 flex-shrink-0 cursor-pointer text-yellow-500",title:"从收藏中移除",children:c.jsx(_o,{size:12})})]})},A)):c.jsx("div",{className:"text-sm py-4 text-center w-full",style:{color:"var(--theme-text-secondary)"},children:"暂无收藏项，从下方搜索添加"})})]}),c.jsx("div",{className:"pt-3",style:{},children:c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("input",{ref:j,type:"text",value:k?_:b,onChange:A=>{A.stopPropagation();const L=A.target.value;L.trim().length>0?(k||(R(!0),C(""),Y(!0)),C(L),Y(!0)):k?(C(""),Y(!0)):v("")},onKeyDown:Me,placeholder:k?"搜索标签...":"新标签名称",className:`w-full pl-3 py-2 border rounded-lg text-sm focus:ring-0 ${k?"pr-24":"pr-12"}`,style:{backgroundColor:"transparent",borderColor:F.borderColor,color:F.textColor}}),k&&c.jsx("button",{onClick:A=>{A.stopPropagation(),C(""),Y(!1),R(!1),v("")},className:"absolute right-9 top-1 bottom-1 px-2 py-1 text-xs rounded text-red-500",title:"退出",children:"退出"}),!k&&c.jsx("button",{onClick:A=>{A.stopPropagation(),R(!0),C(""),Y(!0),v(""),setTimeout(()=>{const L=document.querySelector('input[placeholder="搜索标签..."]');L&&L.focus()},100)},className:"absolute right-9 top-1 bottom-1 px-2 py-1 text-xs rounded",style:{color:F.textColor,borderColor:F.borderColor},children:"搜索"}),c.jsxs("div",{className:"absolute right-1 top-1 bottom-1",children:[c.jsx("button",{ref:I,type:"button",onClick:()=>w(!E),className:"w-8 h-8 rounded-full border",style:{backgroundColor:T,borderColor:F.borderColor},title:"选择颜色"}),c.jsx(na,{isOpen:E,onClose:()=>w(!1),triggerRef:I,className:"w-72",position:"bottom-right",disableOutsideClick:!0,children:c.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--theme-elevated)"},onClick:A=>A.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(d_,{size:16,style:{color:"var(--theme-primary)"}}),c.jsx("span",{className:"font-medium text-sm",style:{color:F.textColor},children:"选择颜色"})]}),c.jsx("button",{onClick:()=>w(!1),style:{color:F.textColor},className:"",children:"×"})]}),c.jsx("div",{className:"grid grid-cols-6 gap-2 mb-3",children:rs.map(A=>c.jsx("button",{onClick:async L=>{if(L.stopPropagation(),y(A.hexColor),w(!1),n.length>0){const K=n[n.length-1];try{const oe={...m,[K]:A.hexColor};h(oe);const ie=JSON.parse(localStorage.getItem("tagColors")||"{}");ie[K]=A.hexColor,localStorage.setItem("tagColors",JSON.stringify(ie)),await et.setTagColor(K,A.hexColor),window.dispatchEvent(new CustomEvent("tagColorsUpdated",{detail:{tagName:K,color:A.hexColor}})),console.log("🎨 TagPicker更新标签颜色:",{tagName:K,color:A.hexColor})}catch(oe){console.error("更新标签颜色失败:",oe)}}},className:"w-8 h-8 rounded-full border flex items-center justify-center",style:{backgroundColor:A.hexColor,borderColor:F.borderColor},title:A.name,children:T===A.hexColor&&c.jsx(Br,{size:14,color:"white",style:{filter:"drop-shadow(0 0 2px rgba(0,0,0,0.5))"}})},A.hexColor))}),c.jsx("div",{className:"pt-3",style:{},children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"color",value:T.startsWith("#")?T:"#3B82F6",onChange:async A=>{const L=A.target.value;if(y(L),n.length>0&&L.startsWith("#")){const K=n[n.length-1];try{const oe={...m,[K]:L};h(oe);const ie=JSON.parse(localStorage.getItem("tagColors")||"{}");ie[K]=L,localStorage.setItem("tagColors",JSON.stringify(ie)),await et.setTagColor(K,L),window.dispatchEvent(new CustomEvent("tagColorsUpdated",{detail:{tagName:K,color:L}})),console.log("🎨 TagPicker更新标签颜色(自定义):",{tagName:K,color:L})}catch(oe){console.error("更新标签颜色失败:",oe)}}},className:"w-8 h-8 rounded cursor-pointer",style:{borderColor:F.borderColor}}),c.jsx("input",{type:"text",value:T,onChange:async A=>{const L=A.target.value,K=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;if((K.test(L)||L==="")&&(y(L),n.length>0&&K.test(L))){const oe=n[n.length-1];try{const ie={...m,[oe]:L};h(ie);const J=JSON.parse(localStorage.getItem("tagColors")||"{}");J[oe]=L,localStorage.setItem("tagColors",JSON.stringify(J)),await et.setTagColor(oe,L),window.dispatchEvent(new CustomEvent("tagColorsUpdated",{detail:{tagName:oe,color:L}})),console.log("🎨 TagPicker更新标签颜色(文本输入):",{tagName:oe,color:L})}catch(ie){console.error("更新标签颜色失败:",ie)}}},placeholder:"#000000",className:"flex-1 px-2 py-1 text-xs rounded",style:{backgroundColor:"transparent",borderColor:F.borderColor,color:F.textColor}})]})})]})})]}),c.jsx(na,{isOpen:P&&k,onClose:A=>{A&&A.stopPropagation&&A.stopPropagation(),Y(!1)},triggerRef:j,className:"w-80",position:"bottom",disableOutsideClick:!0,children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-h-96 overflow-y-auto",style:{backgroundColor:"var(--theme-elevated)"},children:[c.jsx("div",{className:"p-3",style:{},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-sm font-medium",style:{color:F.textColor},children:"搜索结果"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"text-xs",style:{color:"var(--theme-text-secondary)"},children:["找到 ",ue.length," 个标签"]}),c.jsx("button",{onClick:()=>{R(!1),C(""),Y(!1)},className:"text-xs px-2 py-1 rounded",style:{color:"#EF4444"},children:"退出"})]})]})}),ue.length>0?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-2",style:{},children:[c.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--theme-text-secondary)"},children:"标签分类"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:c.jsxs("div",{className:"p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",style:{backgroundColor:"var(--theme-elevated)"},onClick:A=>{A.stopPropagation();const L=document.getElementById("available-tags-section");L&&L.scrollIntoView({behavior:"smooth"})},children:[c.jsxs("div",{className:"text-xs font-medium",style:{color:F.textColor},children:["可选择 (",ue.length,")"]}),c.jsx("div",{className:"text-xs",style:{color:"var(--theme-text-secondary)"},children:"点击查看"})]})})]}),c.jsx("div",{className:"p-2",children:ue.filter(A=>!n.includes(A)).length>0&&c.jsxs("div",{id:"available-tags-section",children:[c.jsx("div",{className:"text-xs font-medium mb-2 px-2",style:{color:"var(--theme-text-secondary)"},children:"可选择的标签"}),ue.filter(A=>!n.includes(A)).map(A=>c.jsxs("div",{className:"px-3 py-2 mb-1 rounded cursor-pointer flex items-center justify-between",style:{backgroundColor:"var(--theme-elevated)"},children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 rounded-full",style:dt(A)}),c.jsx("span",{className:"text-sm",style:{color:F.textColor},children:A})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:L=>{if(L.stopPropagation(),!n.includes(A)){const K=[...n,A];r(K),window.dispatchEvent(new CustomEvent("tagsUpdated",{detail:{action:"select",tagName:A,tags:K}}))}},className:"text-xs px-2 py-1 rounded",style:{backgroundColor:"var(--theme-primary)",color:"white"},children:"点击添加"}),c.jsx("button",{onClick:L=>{L.stopPropagation(),te(A)},className:"text-xs p-1 rounded",style:{color:g.includes(A)?"var(--theme-primary)":"var(--theme-text-secondary)",border:g.includes(A)?"1px solid var(--theme-primary)":"1px solid var(--theme-border)"},title:g.includes(A)?"已收藏":"添加到收藏",children:c.jsx(_o,{size:14})})]})]},`available-${A}`))]})})]}):c.jsxs("div",{className:"px-3 py-4 text-center text-sm",style:{color:"var(--theme-text-secondary)"},children:[c.jsx("div",{children:_.trim()?"没有找到匹配的标签":"请输入搜索关键词"}),_.trim()&&c.jsxs("div",{className:"text-xs mt-1",children:['按回车键创建标签 "',_,'"']})]})]})})]}),c.jsxs("button",{onClick:A=>(A.preventDefault(),A.stopPropagation(),A.nativeEvent&&A.nativeEvent.stopImmediatePropagation&&A.nativeEvent.stopImmediatePropagation(),Ve(),Y(!1),R(!1),C(""),!1),disabled:!(k?_.trim():b.trim()),className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[c.jsx(za,{size:16}),"创建"]})]})})]}),z&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"rounded-lg p-6 max-w-sm w-full mx-4",style:{backgroundColor:"transparent"},children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:c.jsx(wn,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),c.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--theme-text)"},children:"删除标签"}),c.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--theme-text-secondary)"},children:['确定要删除标签 "',M&&(typeof M=="string"?M:M.name),'" 吗？',c.jsx("br",{}),"删除后，该标签将从所有笔记中移除。"]})]}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx("button",{onClick:Ke,className:"px-4 py-2 rounded-md",style:{backgroundColor:"transparent",color:"var(--theme-text)"},children:"取消"}),c.jsx("button",{onClick:De,className:"px-4 py-2 bg-red-500 text-white rounded-md",children:"确认删除"})]})]})})]})},Q_=e=>{const t=typeof e=="string"?e:JSON.stringify(e);let n=0;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);n=(n<<5)-n+s,n=n&n}return Math.abs(n).toString(16)},CU=(e,t)=>Q_(e)===t,Up=e=>e.replace(/(.)\[(\d+)\]/g,(t,n,r)=>n.repeat(parseInt(r)));var X_={exports:{}};const _U={},NU=Object.freeze(Object.defineProperty({__proto__:null,default:_U},Symbol.toStringTag,{value:"Module"})),Ib=SI(NU);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */(function(e){(function(){var t="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";o?r=xo:s&&(r=self);var i=!r.JS_SHA256_NO_COMMON_JS&&!0&&e.exports,l=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),f=[-2147483648,8388608,32768,128],m=[24,16,8,0],h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=["hex","array","digest","arrayBuffer"],p=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(_){return Object.prototype.toString.call(_)==="[object Array]"}),l&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(_){return typeof _=="object"&&_.buffer&&_.buffer.constructor===ArrayBuffer});var b=function(_,C){return function(k){return new w(C,!0).update(k)[_]()}},v=function(_){var C=b("hex",_);o&&(C=T(C,_)),C.create=function(){return new w(_)},C.update=function(P){return C.create().update(P)};for(var k=0;k<g.length;++k){var R=g[k];C[R]=b(R,_)}return C},T=function(_,C){var k=Ib,R=Ib.Buffer,P=C?"sha224":"sha256",Y;R.from&&!r.JS_SHA256_NO_BUFFER_FROM?Y=R.from:Y=function(Q){return new R(Q)};var z=function(Q){if(typeof Q=="string")return k.createHash(P).update(Q,"utf8").digest("hex");if(Q==null)throw new Error(t);return Q.constructor===ArrayBuffer&&(Q=new Uint8Array(Q)),Array.isArray(Q)||ArrayBuffer.isView(Q)||Q.constructor===R?k.createHash(P).update(Y(Q)).digest("hex"):_(Q)};return z},y=function(_,C){return function(k,R){return new I(k,C,!0).update(R)[_]()}},E=function(_){var C=y("hex",_);C.create=function(P){return new I(P,_)},C.update=function(P,Y){return C.create(P).update(Y)};for(var k=0;k<g.length;++k){var R=g[k];C[R]=y(R,_)}return C};function w(_,C){C?(p[0]=p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0,this.blocks=p):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=_}w.prototype.update=function(_){if(!this.finalized){var C,k=typeof _;if(k!=="string"){if(k==="object"){if(_===null)throw new Error(t);if(l&&_.constructor===ArrayBuffer)_=new Uint8Array(_);else if(!Array.isArray(_)&&(!l||!ArrayBuffer.isView(_)))throw new Error(t)}else throw new Error(t);C=!0}for(var R,P=0,Y,z=_.length,Q=this.blocks;P<z;){if(this.hashed&&(this.hashed=!1,Q[0]=this.block,this.block=Q[16]=Q[1]=Q[2]=Q[3]=Q[4]=Q[5]=Q[6]=Q[7]=Q[8]=Q[9]=Q[10]=Q[11]=Q[12]=Q[13]=Q[14]=Q[15]=0),C)for(Y=this.start;P<z&&Y<64;++P)Q[Y>>>2]|=_[P]<<m[Y++&3];else for(Y=this.start;P<z&&Y<64;++P)R=_.charCodeAt(P),R<128?Q[Y>>>2]|=R<<m[Y++&3]:R<2048?(Q[Y>>>2]|=(192|R>>>6)<<m[Y++&3],Q[Y>>>2]|=(128|R&63)<<m[Y++&3]):R<55296||R>=57344?(Q[Y>>>2]|=(224|R>>>12)<<m[Y++&3],Q[Y>>>2]|=(128|R>>>6&63)<<m[Y++&3],Q[Y>>>2]|=(128|R&63)<<m[Y++&3]):(R=65536+((R&1023)<<10|_.charCodeAt(++P)&1023),Q[Y>>>2]|=(240|R>>>18)<<m[Y++&3],Q[Y>>>2]|=(128|R>>>12&63)<<m[Y++&3],Q[Y>>>2]|=(128|R>>>6&63)<<m[Y++&3],Q[Y>>>2]|=(128|R&63)<<m[Y++&3]);this.lastByteIndex=Y,this.bytes+=Y-this.start,Y>=64?(this.block=Q[16],this.start=Y-64,this.hash(),this.hashed=!0):this.start=Y}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},w.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var _=this.blocks,C=this.lastByteIndex;_[16]=this.block,_[C>>>2]|=f[C&3],this.block=_[16],C>=56&&(this.hashed||this.hash(),_[0]=this.block,_[16]=_[1]=_[2]=_[3]=_[4]=_[5]=_[6]=_[7]=_[8]=_[9]=_[10]=_[11]=_[12]=_[13]=_[14]=_[15]=0),_[14]=this.hBytes<<3|this.bytes>>>29,_[15]=this.bytes<<3,this.hash()}},w.prototype.hash=function(){var _=this.h0,C=this.h1,k=this.h2,R=this.h3,P=this.h4,Y=this.h5,z=this.h6,Q=this.h7,M=this.blocks,le,Ne,$,G,H,U,ee,te,V,xe,we;for(le=16;le<64;++le)H=M[le-15],Ne=(H>>>7|H<<25)^(H>>>18|H<<14)^H>>>3,H=M[le-2],$=(H>>>17|H<<15)^(H>>>19|H<<13)^H>>>10,M[le]=M[le-16]+Ne+M[le-7]+$<<0;for(we=C&k,le=0;le<64;le+=4)this.first?(this.is224?(te=300032,H=M[0]-1413257819,Q=H-150054599<<0,R=H+24177077<<0):(te=704751109,H=M[0]-210244248,Q=H-1521486534<<0,R=H+143694565<<0),this.first=!1):(Ne=(_>>>2|_<<30)^(_>>>13|_<<19)^(_>>>22|_<<10),$=(P>>>6|P<<26)^(P>>>11|P<<21)^(P>>>25|P<<7),te=_&C,G=te^_&k^we,ee=P&Y^~P&z,H=Q+$+ee+h[le]+M[le],U=Ne+G,Q=R+H<<0,R=H+U<<0),Ne=(R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10),$=(Q>>>6|Q<<26)^(Q>>>11|Q<<21)^(Q>>>25|Q<<7),V=R&_,G=V^R&C^te,ee=Q&P^~Q&Y,H=z+$+ee+h[le+1]+M[le+1],U=Ne+G,z=k+H<<0,k=H+U<<0,Ne=(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10),$=(z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7),xe=k&R,G=xe^k&_^V,ee=z&Q^~z&P,H=Y+$+ee+h[le+2]+M[le+2],U=Ne+G,Y=C+H<<0,C=H+U<<0,Ne=(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10),$=(Y>>>6|Y<<26)^(Y>>>11|Y<<21)^(Y>>>25|Y<<7),we=C&k,G=we^C&R^xe,ee=Y&z^~Y&Q,H=P+$+ee+h[le+3]+M[le+3],U=Ne+G,P=_+H<<0,_=H+U<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+_<<0,this.h1=this.h1+C<<0,this.h2=this.h2+k<<0,this.h3=this.h3+R<<0,this.h4=this.h4+P<<0,this.h5=this.h5+Y<<0,this.h6=this.h6+z<<0,this.h7=this.h7+Q<<0},w.prototype.hex=function(){this.finalize();var _=this.h0,C=this.h1,k=this.h2,R=this.h3,P=this.h4,Y=this.h5,z=this.h6,Q=this.h7,M=u[_>>>28&15]+u[_>>>24&15]+u[_>>>20&15]+u[_>>>16&15]+u[_>>>12&15]+u[_>>>8&15]+u[_>>>4&15]+u[_&15]+u[C>>>28&15]+u[C>>>24&15]+u[C>>>20&15]+u[C>>>16&15]+u[C>>>12&15]+u[C>>>8&15]+u[C>>>4&15]+u[C&15]+u[k>>>28&15]+u[k>>>24&15]+u[k>>>20&15]+u[k>>>16&15]+u[k>>>12&15]+u[k>>>8&15]+u[k>>>4&15]+u[k&15]+u[R>>>28&15]+u[R>>>24&15]+u[R>>>20&15]+u[R>>>16&15]+u[R>>>12&15]+u[R>>>8&15]+u[R>>>4&15]+u[R&15]+u[P>>>28&15]+u[P>>>24&15]+u[P>>>20&15]+u[P>>>16&15]+u[P>>>12&15]+u[P>>>8&15]+u[P>>>4&15]+u[P&15]+u[Y>>>28&15]+u[Y>>>24&15]+u[Y>>>20&15]+u[Y>>>16&15]+u[Y>>>12&15]+u[Y>>>8&15]+u[Y>>>4&15]+u[Y&15]+u[z>>>28&15]+u[z>>>24&15]+u[z>>>20&15]+u[z>>>16&15]+u[z>>>12&15]+u[z>>>8&15]+u[z>>>4&15]+u[z&15];return this.is224||(M+=u[Q>>>28&15]+u[Q>>>24&15]+u[Q>>>20&15]+u[Q>>>16&15]+u[Q>>>12&15]+u[Q>>>8&15]+u[Q>>>4&15]+u[Q&15]),M},w.prototype.toString=w.prototype.hex,w.prototype.digest=function(){this.finalize();var _=this.h0,C=this.h1,k=this.h2,R=this.h3,P=this.h4,Y=this.h5,z=this.h6,Q=this.h7,M=[_>>>24&255,_>>>16&255,_>>>8&255,_&255,C>>>24&255,C>>>16&255,C>>>8&255,C&255,k>>>24&255,k>>>16&255,k>>>8&255,k&255,R>>>24&255,R>>>16&255,R>>>8&255,R&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255];return this.is224||M.push(Q>>>24&255,Q>>>16&255,Q>>>8&255,Q&255),M},w.prototype.array=w.prototype.digest,w.prototype.arrayBuffer=function(){this.finalize();var _=new ArrayBuffer(this.is224?28:32),C=new DataView(_);return C.setUint32(0,this.h0),C.setUint32(4,this.h1),C.setUint32(8,this.h2),C.setUint32(12,this.h3),C.setUint32(16,this.h4),C.setUint32(20,this.h5),C.setUint32(24,this.h6),this.is224||C.setUint32(28,this.h7),_};function I(_,C,k){var R,P=typeof _;if(P==="string"){var Y=[],z=_.length,Q=0,M;for(R=0;R<z;++R)M=_.charCodeAt(R),M<128?Y[Q++]=M:M<2048?(Y[Q++]=192|M>>>6,Y[Q++]=128|M&63):M<55296||M>=57344?(Y[Q++]=224|M>>>12,Y[Q++]=128|M>>>6&63,Y[Q++]=128|M&63):(M=65536+((M&1023)<<10|_.charCodeAt(++R)&1023),Y[Q++]=240|M>>>18,Y[Q++]=128|M>>>12&63,Y[Q++]=128|M>>>6&63,Y[Q++]=128|M&63);_=Y}else if(P==="object"){if(_===null)throw new Error(t);if(l&&_.constructor===ArrayBuffer)_=new Uint8Array(_);else if(!Array.isArray(_)&&(!l||!ArrayBuffer.isView(_)))throw new Error(t)}else throw new Error(t);_.length>64&&(_=new w(C,!0).update(_).array());var le=[],Ne=[];for(R=0;R<64;++R){var $=_[R]||0;le[R]=92^$,Ne[R]=54^$}w.call(this,C,k),this.update(Ne),this.oKeyPad=le,this.inner=!0,this.sharedMemory=k}I.prototype=new w,I.prototype.finalize=function(){if(w.prototype.finalize.call(this),this.inner){this.inner=!1;var _=this.array();w.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(_),w.prototype.finalize.call(this)}};var j=v();j.sha256=j,j.sha224=v(!0),j.sha256.hmac=E(),j.sha224.hmac=E(!0),i?e.exports=j:(r.sha256=j.sha256,r.sha224=j.sha224)})()})(X_);var SU=X_.exports;const kU="/api";class AU{constructor(){this.baseURL=kU}getAuthHeaders(){const t=localStorage.getItem("token"),n={"Content-Type":"application/json"};return t&&(n.Authorization=`Bearer ${t}`),n}async getAllNotes(){try{const t=await fetch(`${this.baseURL}/notes/my`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();return n.notes||n||[]}catch(t){throw console.error("获取笔记失败:",t),t}}async createNote(t){try{const n=await fetch(`${this.baseURL}/notes`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){throw console.error("创建笔记失败:",n),n}}async updateNote(t,n){try{const r=await fetch(`${this.baseURL}/notes/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw console.error("更新笔记失败:",r),r}}async getNoteById(t){try{const n=await fetch(`${this.baseURL}/notes/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){throw console.error("获取笔记详情失败:",n),n}}async deleteNote(t){try{const n=await fetch(`${this.baseURL}/notes/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){throw console.error("删除笔记失败:",n),n}}async getAllTags(){try{const t=await fetch(`${this.baseURL}/notes/tags/all`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){throw console.error("获取标签失败:",t),t}}async createBackup(t){try{const n={backupType:t.backupType||t.type||"manual",snapshotType:t.snapshotType||(t.type==="auto"?"incremental":"full"),description:t.description||(t.type==="auto"?"自动备份":"手动备份"),data:{notes:t.notes||[],tags:t.tags||[],mediaFiles:t.mediaFiles||[],backupTime:t.timestamp||new Date().toISOString(),version:t.version||"1.0"}},r=await fetch(`${this.baseURL}/backup/create`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(n){throw console.error("创建备份失败:",n),n}}async getBackups(t=null){try{let n=`${this.baseURL}/backup/list`;t&&(n+=`?type=${t}`);const r=await fetch(n,{headers:this.getAuthHeaders()});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();return s.success&&s.backups?{success:!0,backups:s.backups.map(i=>{var l,u;return{backup_id:i.backup_id||i.id,created_at:i.created_at||i.timestamp,backup_type:i.backup_type||i.backupType||i.type||"manual",description:i.description,data:i.data||{notes:i.notes||[],tags:i.tags||[],mediaFiles:i.mediaFiles||[],backupTime:i.timestamp||new Date().toISOString(),version:i.version||"1.0"},filename:i.filename,size:i.size,notesCount:i.notesCount||((u=(l=i.data)==null?void 0:l.notes)==null?void 0:u.length)||0}})}:s}catch(n){throw console.error("获取备份失败:",n),n}}async restoreBackup(t){try{const n=await fetch(`${this.baseURL}/backup/restore/${t}`,{method:"POST",headers:this.getAuthHeaders()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();return{success:r.success!==!1,backupId:t,message:r.message||"备份恢复成功"}}catch(n){throw console.error("恢复备份失败:",n),n}}async deleteBackup(t){try{const n=await fetch(`${this.baseURL}/backup/delete/${t}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();return{success:r.success!==!1,backupId:t,message:r.message||"备份删除成功"}}catch(n){throw console.error("删除备份失败:",n),n}}}const Ci=new AU;function Hd(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var J_={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,o){function i(f,m){if(!s[f]){if(!r[f]){var h=typeof Hd=="function"&&Hd;if(!m&&h)return h(f,!0);if(l)return l(f,!0);var g=new Error("Cannot find module '"+f+"'");throw g.code="MODULE_NOT_FOUND",g}var p=s[f]={exports:{}};r[f][0].call(p.exports,function(b){var v=r[f][1][b];return i(v||b)},p,p.exports,n,r,s,o)}return s[f].exports}for(var l=typeof Hd=="function"&&Hd,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(n,r,s){var o=n("./utils"),i=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(u){for(var f,m,h,g,p,b,v,T=[],y=0,E=u.length,w=E,I=o.getTypeOf(u)!=="string";y<u.length;)w=E-y,h=I?(f=u[y++],m=y<E?u[y++]:0,y<E?u[y++]:0):(f=u.charCodeAt(y++),m=y<E?u.charCodeAt(y++):0,y<E?u.charCodeAt(y++):0),g=f>>2,p=(3&f)<<4|m>>4,b=1<w?(15&m)<<2|h>>6:64,v=2<w?63&h:64,T.push(l.charAt(g)+l.charAt(p)+l.charAt(b)+l.charAt(v));return T.join("")},s.decode=function(u){var f,m,h,g,p,b,v=0,T=0,y="data:";if(u.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var E,w=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&w--,u.charAt(u.length-2)===l.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=i.uint8array?new Uint8Array(0|w):new Array(0|w);v<u.length;)f=l.indexOf(u.charAt(v++))<<2|(g=l.indexOf(u.charAt(v++)))>>4,m=(15&g)<<4|(p=l.indexOf(u.charAt(v++)))>>2,h=(3&p)<<6|(b=l.indexOf(u.charAt(v++))),E[T++]=f,p!==64&&(E[T++]=m),b!==64&&(E[T++]=h);return E}},{"./support":30,"./utils":32}],2:[function(n,r,s){var o=n("./external"),i=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function f(m,h,g,p,b){this.compressedSize=m,this.uncompressedSize=h,this.crc32=g,this.compression=p,this.compressedContent=b}f.prototype={getContentWorker:function(){var m=new i(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return m.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new i(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(m,h,g){return m.pipe(new l).pipe(new u("uncompressedSize")).pipe(h.compressWorker(g)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var o=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var o=n("./utils"),i=function(){for(var l,u=[],f=0;f<256;f++){l=f;for(var m=0;m<8;m++)l=1&l?3988292384^l>>>1:l>>>1;u[f]=l}return u}();r.exports=function(l,u){return l!==void 0&&l.length?o.getTypeOf(l)!=="string"?function(f,m,h,g){var p=i,b=g+h;f^=-1;for(var v=g;v<b;v++)f=f>>>8^p[255&(f^m[v])];return-1^f}(0|u,l,l.length,0):function(f,m,h,g){var p=i,b=g+h;f^=-1;for(var v=g;v<b;v++)f=f>>>8^p[255&(f^m.charCodeAt(v))];return-1^f}(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var o=null;o=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:o}},{lie:37}],7:[function(n,r,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=n("pako"),l=n("./utils"),u=n("./stream/GenericWorker"),f=o?"uint8array":"array";function m(h,g){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=g,this.meta={}}s.magic="\b\0",l.inherits(m,u),m.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(f,h.data),!1)},m.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(g){h.push({data:g,meta:h.meta})}},s.compressWorker=function(h){return new m("Deflate",h)},s.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function o(p,b){var v,T="";for(v=0;v<b;v++)T+=String.fromCharCode(255&p),p>>>=8;return T}function i(p,b,v,T,y,E){var w,I,j=p.file,_=p.compression,C=E!==f.utf8encode,k=l.transformTo("string",E(j.name)),R=l.transformTo("string",f.utf8encode(j.name)),P=j.comment,Y=l.transformTo("string",E(P)),z=l.transformTo("string",f.utf8encode(P)),Q=R.length!==j.name.length,M=z.length!==P.length,le="",Ne="",$="",G=j.dir,H=j.date,U={crc32:0,compressedSize:0,uncompressedSize:0};b&&!v||(U.crc32=p.crc32,U.compressedSize=p.compressedSize,U.uncompressedSize=p.uncompressedSize);var ee=0;b&&(ee|=8),C||!Q&&!M||(ee|=2048);var te=0,V=0;G&&(te|=16),y==="UNIX"?(V=798,te|=function(we,Le){var Ve=we;return we||(Ve=Le?16893:33204),(65535&Ve)<<16}(j.unixPermissions,G)):(V=20,te|=function(we){return 63&(we||0)}(j.dosPermissions)),w=H.getUTCHours(),w<<=6,w|=H.getUTCMinutes(),w<<=5,w|=H.getUTCSeconds()/2,I=H.getUTCFullYear()-1980,I<<=4,I|=H.getUTCMonth()+1,I<<=5,I|=H.getUTCDate(),Q&&(Ne=o(1,1)+o(m(k),4)+R,le+="up"+o(Ne.length,2)+Ne),M&&($=o(1,1)+o(m(Y),4)+z,le+="uc"+o($.length,2)+$);var xe="";return xe+=`
\0`,xe+=o(ee,2),xe+=_.magic,xe+=o(w,2),xe+=o(I,2),xe+=o(U.crc32,4),xe+=o(U.compressedSize,4),xe+=o(U.uncompressedSize,4),xe+=o(k.length,2),xe+=o(le.length,2),{fileRecord:h.LOCAL_FILE_HEADER+xe+k+le,dirRecord:h.CENTRAL_FILE_HEADER+o(V,2)+xe+o(Y.length,2)+"\0\0\0\0"+o(te,4)+o(T,4)+k+le+Y}}var l=n("../utils"),u=n("../stream/GenericWorker"),f=n("../utf8"),m=n("../crc32"),h=n("../signature");function g(p,b,v,T){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=v,this.encodeFileName=T,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(g,u),g.prototype.push=function(p){var b=p.meta.percent||0,v=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,u.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:v?(b+100*(v-T-1))/v:100}}))},g.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var b=this.streamFiles&&!p.file.dir;if(b){var v=i(p,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(p){this.accumulate=!1;var b=this.streamFiles&&!p.file.dir,v=i(p,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),b)this.push({data:function(T){return h.DATA_DESCRIPTOR+o(T.crc32,4)+o(T.compressedSize,4)+o(T.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var p=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var v=this.bytesWritten-p,T=function(y,E,w,I,j){var _=l.transformTo("string",j(I));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(y,2)+o(y,2)+o(E,4)+o(w,4)+o(_.length,2)+_}(this.dirRecords.length,v,p,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(p){this._sources.push(p);var b=this;return p.on("data",function(v){b.processChunk(v)}),p.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),p.on("error",function(v){b.error(v)}),this},g.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(p){var b=this._sources;if(!u.prototype.error.call(this,p))return!1;for(var v=0;v<b.length;v++)try{b[v].error(p)}catch{}return!0},g.prototype.lock=function(){u.prototype.lock.call(this);for(var p=this._sources,b=0;b<p.length;b++)p[b].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var o=n("../compressions"),i=n("./ZipFileWorker");s.generateWorker=function(l,u,f){var m=new i(u.streamFiles,f,u.platform,u.encodeFileName),h=0;try{l.forEach(function(g,p){h++;var b=function(E,w){var I=E||w,j=o[I];if(!j)throw new Error(I+" is not a valid compression method !");return j}(p.options.compression,u.compression),v=p.options.compressionOptions||u.compressionOptions||{},T=p.dir,y=p.date;p._compressWorker(b,v).withStreamInfo("file",{name:g,dir:T,date:y,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(m)}),m.entriesCount=h}catch(g){m.error(g)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new o;for(var l in this)typeof this[l]!="function"&&(i[l]=this[l]);return i}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(i,l){return new o().loadAsync(i,l)},o.external=n("./external"),r.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var o=n("./utils"),i=n("./external"),l=n("./utf8"),u=n("./zipEntries"),f=n("./stream/Crc32Probe"),m=n("./nodejsUtils");function h(g){return new i.Promise(function(p,b){var v=g.decompressed.getContentWorker().pipe(new f);v.on("error",function(T){b(T)}).on("end",function(){v.streamInfo.crc32!==g.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(g,p){var b=this;return p=o.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),m.isNode&&m.isStream(g)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",g,!0,p.optimizedBinaryString,p.base64).then(function(v){var T=new u(p);return T.load(v),T}).then(function(v){var T=[i.Promise.resolve(v)],y=v.files;if(p.checkCRC32)for(var E=0;E<y.length;E++)T.push(h(y[E]));return i.Promise.all(T)}).then(function(v){for(var T=v.shift(),y=T.files,E=0;E<y.length;E++){var w=y[E],I=w.fileNameStr,j=o.resolve(w.fileNameStr);b.file(j,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:p.createFolders}),w.dir||(b.file(j).unsafeOriginalName=I)}return T.zipComment.length&&(b.comment=T.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var o=n("../utils"),i=n("../stream/GenericWorker");function l(u,f){i.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(l,i),l.prototype._bindStream=function(u){var f=this;(this._stream=u).pause(),u.on("data",function(m){f.push({data:m,meta:{percent:0}})}).on("error",function(m){f.isPaused?this.generatedError=m:f.error(m)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},l.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var o=n("readable-stream").Readable;function i(l,u,f){o.call(this,u),this._helper=l;var m=this;l.on("data",function(h,g){m.push(h)||m._helper.pause(),f&&f(g)}).on("error",function(h){m.emit("error",h)}).on("end",function(){m.push(null)})}n("../utils").inherits(i,o),i.prototype._read=function(){this._helper.resume()},r.exports=i},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,i);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,i)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var i=new Buffer(o);return i.fill(0),i},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,r,s){function o(j,_,C){var k,R=l.getTypeOf(_),P=l.extend(C||{},m);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(j=y(j)),P.createFolders&&(k=T(j))&&E.call(this,k,!0);var Y=R==="string"&&P.binary===!1&&P.base64===!1;C&&C.binary!==void 0||(P.binary=!Y),(_ instanceof h&&_.uncompressedSize===0||P.dir||!_||_.length===0)&&(P.base64=!1,P.binary=!0,_="",P.compression="STORE",R="string");var z=null;z=_ instanceof h||_ instanceof u?_:b.isNode&&b.isStream(_)?new v(j,_):l.prepareContent(j,_,P.binary,P.optimizedBinaryString,P.base64);var Q=new g(j,z,P);this.files[j]=Q}var i=n("./utf8"),l=n("./utils"),u=n("./stream/GenericWorker"),f=n("./stream/StreamHelper"),m=n("./defaults"),h=n("./compressedObject"),g=n("./zipObject"),p=n("./generate"),b=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),T=function(j){j.slice(-1)==="/"&&(j=j.substring(0,j.length-1));var _=j.lastIndexOf("/");return 0<_?j.substring(0,_):""},y=function(j){return j.slice(-1)!=="/"&&(j+="/"),j},E=function(j,_){return _=_!==void 0?_:m.createFolders,j=y(j),this.files[j]||o.call(this,j,null,{dir:!0,createFolders:_}),this.files[j]};function w(j){return Object.prototype.toString.call(j)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(j){var _,C,k;for(_ in this.files)k=this.files[_],(C=_.slice(this.root.length,_.length))&&_.slice(0,this.root.length)===this.root&&j(C,k)},filter:function(j){var _=[];return this.forEach(function(C,k){j(C,k)&&_.push(k)}),_},file:function(j,_,C){if(arguments.length!==1)return j=this.root+j,o.call(this,j,_,C),this;if(w(j)){var k=j;return this.filter(function(P,Y){return!Y.dir&&k.test(P)})}var R=this.files[this.root+j];return R&&!R.dir?R:null},folder:function(j){if(!j)return this;if(w(j))return this.filter(function(R,P){return P.dir&&j.test(R)});var _=this.root+j,C=E.call(this,_),k=this.clone();return k.root=C.name,k},remove:function(j){j=this.root+j;var _=this.files[j];if(_||(j.slice(-1)!=="/"&&(j+="/"),_=this.files[j]),_&&!_.dir)delete this.files[j];else for(var C=this.filter(function(R,P){return P.name.slice(0,j.length)===j}),k=0;k<C.length;k++)delete this.files[C[k].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(j){var _,C={};try{if((C=l.extend(j||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");l.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var k=C.comment||this.comment||"";_=p.generateWorker(this,C,k)}catch(R){(_=new u("error")).error(R)}return new f(_,C.type||"string",C.mimeType)},generateAsync:function(j,_){return this.generateInternalStream(j).accumulate(_)},generateNodeStream:function(j,_){return(j=j||{}).type||(j.type="nodebuffer"),this.generateInternalStream(j).toNodejsStream(_)}};r.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var o=n("./DataReader");function i(l){o.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}n("../utils").inherits(i,o),i.prototype.byteAt=function(l){return this.data[this.zero+l]},i.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),f=l.charCodeAt(1),m=l.charCodeAt(2),h=l.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===u&&this.data[g+1]===f&&this.data[g+2]===m&&this.data[g+3]===h)return g-this.zero;return-1},i.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),f=l.charCodeAt(1),m=l.charCodeAt(2),h=l.charCodeAt(3),g=this.readData(4);return u===g[0]&&f===g[1]&&m===g[2]&&h===g[3]},i.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=i},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var o=n("../utils");function i(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,f=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)f=(f<<8)+this.byteAt(u);return this.index+=l,f},readString:function(l){return o.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=i},{"../utils":32}],19:[function(n,r,s){var o=n("./Uint8ArrayReader");function i(l){o.call(this,l)}n("../utils").inherits(i,o),i.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var o=n("./DataReader");function i(l){o.call(this,l)}n("../utils").inherits(i,o),i.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},i.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},i.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},i.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=i},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var o=n("./ArrayReader");function i(l){o.call(this,l)}n("../utils").inherits(i,o),i.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var o=n("../utils"),i=n("../support"),l=n("./ArrayReader"),u=n("./StringReader"),f=n("./NodeBufferReader"),m=n("./Uint8ArrayReader");r.exports=function(h){var g=o.getTypeOf(h);return o.checkSupport(g),g!=="string"||i.uint8array?g==="nodebuffer"?new f(h):i.uint8array?new m(o.transformTo("uint8array",h)):new l(o.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var o=n("./GenericWorker"),i=n("../utils");function l(u){o.call(this,"ConvertWorker to "+u),this.destType=u}i.inherits(l,o),l.prototype.processChunk=function(u){this.push({data:i.transformTo(this.destType,u.data),meta:u.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var o=n("./GenericWorker"),i=n("../crc32");function l(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,o),l.prototype.processChunk=function(u){this.streamInfo.crc32=i(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var o=n("../utils"),i=n("./GenericWorker");function l(u){i.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}o.inherits(l,i),l.prototype.processChunk=function(u){if(u){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+u.data.length}i.prototype.processChunk.call(this,u)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var o=n("../utils"),i=n("./GenericWorker");function l(u){i.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(m){f.dataIsReady=!0,f.data=m,f.max=m&&m.length||0,f.type=o.getTypeOf(m),f.isPaused||f._tickAndRepeat()},function(m){f.error(m)})}o.inherits(l,i),l.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,f);break;case"uint8array":u=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":u=this.data.slice(this.index,f)}return this.index=f,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function o(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,l){return this._listeners[i].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,l){if(this._listeners[i])for(var u=0;u<this._listeners[i].length;u++)this._listeners[i][u].call(this,l)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var l=this;return i.on("data",function(u){l.processChunk(u)}),i.on("end",function(){l.end()}),i.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,l){return this.extraStreamInfo[i]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},r.exports=o},{}],29:[function(n,r,s){var o=n("../utils"),i=n("./ConvertWorker"),l=n("./GenericWorker"),u=n("../base64"),f=n("../support"),m=n("../external"),h=null;if(f.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(b,v){return new m.Promise(function(T,y){var E=[],w=b._internalType,I=b._outputType,j=b._mimeType;b.on("data",function(_,C){E.push(_),v&&v(C)}).on("error",function(_){E=[],y(_)}).on("end",function(){try{var _=function(C,k,R){switch(C){case"blob":return o.newBlob(o.transformTo("arraybuffer",k),R);case"base64":return u.encode(k);default:return o.transformTo(C,k)}}(I,function(C,k){var R,P=0,Y=null,z=0;for(R=0;R<k.length;R++)z+=k[R].length;switch(C){case"string":return k.join("");case"array":return Array.prototype.concat.apply([],k);case"uint8array":for(Y=new Uint8Array(z),R=0;R<k.length;R++)Y.set(k[R],P),P+=k[R].length;return Y;case"nodebuffer":return Buffer.concat(k);default:throw new Error("concat : unsupported type '"+C+"'")}}(w,E),j);T(_)}catch(C){y(C)}E=[]}).resume()})}function p(b,v,T){var y=v;switch(v){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=v,this._mimeType=T,o.checkSupport(y),this._worker=b.pipe(new i(y)),b.lock()}catch(E){this._worker=new l("error"),this._worker.error(E)}}p.prototype={accumulate:function(b){return g(this,b)},on:function(b,v){var T=this;return b==="data"?this._worker.on(b,function(y){v.call(T,y.data,y.meta)}):this._worker.on(b,function(){o.delay(v,arguments,T)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},b)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var o=new ArrayBuffer(0);try{s.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(o),s.blob=i.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var o=n("./utils"),i=n("./support"),l=n("./nodejsUtils"),u=n("./stream/GenericWorker"),f=new Array(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;f[254]=f[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function g(){u.call(this,"utf-8 encode")}s.utf8encode=function(p){return i.nodebuffer?l.newBufferFrom(p,"utf-8"):function(b){var v,T,y,E,w,I=b.length,j=0;for(E=0;E<I;E++)(64512&(T=b.charCodeAt(E)))==55296&&E+1<I&&(64512&(y=b.charCodeAt(E+1)))==56320&&(T=65536+(T-55296<<10)+(y-56320),E++),j+=T<128?1:T<2048?2:T<65536?3:4;for(v=i.uint8array?new Uint8Array(j):new Array(j),E=w=0;w<j;E++)(64512&(T=b.charCodeAt(E)))==55296&&E+1<I&&(64512&(y=b.charCodeAt(E+1)))==56320&&(T=65536+(T-55296<<10)+(y-56320),E++),T<128?v[w++]=T:(T<2048?v[w++]=192|T>>>6:(T<65536?v[w++]=224|T>>>12:(v[w++]=240|T>>>18,v[w++]=128|T>>>12&63),v[w++]=128|T>>>6&63),v[w++]=128|63&T);return v}(p)},s.utf8decode=function(p){return i.nodebuffer?o.transformTo("nodebuffer",p).toString("utf-8"):function(b){var v,T,y,E,w=b.length,I=new Array(2*w);for(v=T=0;v<w;)if((y=b[v++])<128)I[T++]=y;else if(4<(E=f[y]))I[T++]=65533,v+=E-1;else{for(y&=E===2?31:E===3?15:7;1<E&&v<w;)y=y<<6|63&b[v++],E--;1<E?I[T++]=65533:y<65536?I[T++]=y:(y-=65536,I[T++]=55296|y>>10&1023,I[T++]=56320|1023&y)}return I.length!==T&&(I.subarray?I=I.subarray(0,T):I.length=T),o.applyFromCharCode(I)}(p=o.transformTo(i.uint8array?"uint8array":"array",p))},o.inherits(h,u),h.prototype.processChunk=function(p){var b=o.transformTo(i.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var v=b;(b=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),b.set(v,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var T=function(E,w){var I;for((w=w||E.length)>E.length&&(w=E.length),I=w-1;0<=I&&(192&E[I])==128;)I--;return I<0||I===0?w:I+f[E[I]]>w?I:w}(b),y=b;T!==b.length&&(i.uint8array?(y=b.subarray(0,T),this.leftOver=b.subarray(T,b.length)):(y=b.slice(0,T),this.leftOver=b.slice(T,b.length))),this.push({data:s.utf8decode(y),meta:p.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=h,o.inherits(g,u),g.prototype.processChunk=function(p){this.push({data:s.utf8encode(p.data),meta:p.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var o=n("./support"),i=n("./base64"),l=n("./nodejsUtils"),u=n("./external");function f(v){return v}function m(v,T){for(var y=0;y<v.length;++y)T[y]=255&v.charCodeAt(y);return T}n("setimmediate"),s.newBlob=function(v,T){s.checkSupport("blob");try{return new Blob([v],{type:T})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(v),y.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(v,T,y){var E=[],w=0,I=v.length;if(I<=y)return String.fromCharCode.apply(null,v);for(;w<I;)T==="array"||T==="nodebuffer"?E.push(String.fromCharCode.apply(null,v.slice(w,Math.min(w+y,I)))):E.push(String.fromCharCode.apply(null,v.subarray(w,Math.min(w+y,I)))),w+=y;return E.join("")},stringifyByChar:function(v){for(var T="",y=0;y<v.length;y++)T+=String.fromCharCode(v[y]);return T},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function g(v){var T=65536,y=s.getTypeOf(v),E=!0;if(y==="uint8array"?E=h.applyCanBeUsed.uint8array:y==="nodebuffer"&&(E=h.applyCanBeUsed.nodebuffer),E)for(;1<T;)try{return h.stringifyByChunk(v,y,T)}catch{T=Math.floor(T/2)}return h.stringifyByChar(v)}function p(v,T){for(var y=0;y<v.length;y++)T[y]=v[y];return T}s.applyFromCharCode=g;var b={};b.string={string:f,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return b.string.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:function(v){return m(v,l.allocBuffer(v.length))}},b.array={string:g,array:f,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(v)}},b.arraybuffer={string:function(v){return g(new Uint8Array(v))},array:function(v){return p(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:f,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(new Uint8Array(v))}},b.uint8array={string:g,array:function(v){return p(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:f,nodebuffer:function(v){return l.newBufferFrom(v)}},b.nodebuffer={string:g,array:function(v){return p(v,new Array(v.length))},arraybuffer:function(v){return b.nodebuffer.uint8array(v).buffer},uint8array:function(v){return p(v,new Uint8Array(v.length))},nodebuffer:f},s.transformTo=function(v,T){if(T=T||"",!v)return T;s.checkSupport(v);var y=s.getTypeOf(T);return b[y][v](T)},s.resolve=function(v){for(var T=v.split("/"),y=[],E=0;E<T.length;E++){var w=T[E];w==="."||w===""&&E!==0&&E!==T.length-1||(w===".."?y.pop():y.push(w))}return y.join("/")},s.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":o.nodebuffer&&l.isBuffer(v)?"nodebuffer":o.uint8array&&v instanceof Uint8Array?"uint8array":o.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(v){if(!o[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(v){var T,y,E="";for(y=0;y<(v||"").length;y++)E+="\\x"+((T=v.charCodeAt(y))<16?"0":"")+T.toString(16).toUpperCase();return E},s.delay=function(v,T,y){setImmediate(function(){v.apply(y||null,T||[])})},s.inherits=function(v,T){function y(){}y.prototype=T.prototype,v.prototype=new y},s.extend=function(){var v,T,y={};for(v=0;v<arguments.length;v++)for(T in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],T)&&y[T]===void 0&&(y[T]=arguments[v][T]);return y},s.prepareContent=function(v,T,y,E,w){return u.Promise.resolve(T).then(function(I){return o.blob&&(I instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(I))!==-1)&&typeof FileReader<"u"?new u.Promise(function(j,_){var C=new FileReader;C.onload=function(k){j(k.target.result)},C.onerror=function(k){_(k.target.error)},C.readAsArrayBuffer(I)}):I}).then(function(I){var j=s.getTypeOf(I);return j?(j==="arraybuffer"?I=s.transformTo("uint8array",I):j==="string"&&(w?I=i.decode(I):y&&E!==!0&&(I=function(_){return m(_,o.uint8array?new Uint8Array(_.length):new Array(_.length))}(I))),I):u.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var o=n("./reader/readerFor"),i=n("./utils"),l=n("./signature"),u=n("./zipEntry"),f=n("./support");function m(h){this.files=[],this.loadOptions=h}m.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(g)+", expected "+i.pretty(h)+")")}},isSignature:function(h,g){var p=this.reader.index;this.reader.setIndex(h);var b=this.reader.readString(4)===g;return this.reader.setIndex(p),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),g=f.uint8array?"uint8array":"array",p=i.transformTo(g,h);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,g,p,b=this.zip64EndOfCentralSize-44;0<b;)h=this.reader.readInt(2),g=this.reader.readInt(4),p=this.reader.readData(g),this.zip64ExtensibleData[h]={id:h,length:g,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,g;for(h=0;h<this.files.length;h++)g=this.files[h],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var g=h;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var b=g-p;if(0<b)this.isSignature(g,l.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(h){this.reader=o(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var o=n("./reader/readerFor"),i=n("./utils"),l=n("./compressedObject"),u=n("./crc32"),f=n("./utf8"),m=n("./compressions"),h=n("./support");function g(p,b){this.options=p,this.loadOptions=b}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var b,v;if(p.skip(22),this.fileNameLength=p.readInt(2),v=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(T){for(var y in m)if(Object.prototype.hasOwnProperty.call(m,y)&&m[y].magic===T)return m[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,b,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var b=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(b),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=o(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var b,v,T,y=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<y;)b=p.readInt(2),v=p.readInt(2),T=p.readData(v),this.extraFields[b]={id:b,length:v,value:T};p.setIndex(y)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var v=i.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var y=i.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var b=o(p.value);return b.readInt(1)!==1||u(this.fileName)!==b.readInt(4)?null:f.utf8decode(b.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var b=o(p.value);return b.readInt(1)!==1||u(this.fileComment)!==b.readInt(4)?null:f.utf8decode(b.readData(p.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function o(b,v,T){this.name=b,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=v,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var i=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),u=n("./utf8"),f=n("./compressedObject"),m=n("./stream/GenericWorker");o.prototype={internalStream:function(b){var v=null,T="string";try{if(!b)throw new Error("No output type specified.");var y=(T=b.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),v=this._decompressWorker();var E=!this._dataBinary;E&&!y&&(v=v.pipe(new u.Utf8EncodeWorker)),!E&&y&&(v=v.pipe(new u.Utf8DecodeWorker))}catch(w){(v=new m("error")).error(w)}return new i(v,T,"")},async:function(b,v){return this.internalStream(b).accumulate(v)},nodeStream:function(b,v){return this.internalStream(b||"nodebuffer").toNodejsStream(v)},_compressWorker:function(b,v){if(this._data instanceof f&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new u.Utf8EncodeWorker)),f.createWorkerFrom(T,b,v)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof m?this._data:new l(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<h.length;p++)o.prototype[h[p]]=g;r.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(o){var i,l,u=o.MutationObserver||o.WebKitMutationObserver;if(u){var f=0,m=new u(b),h=o.document.createTextNode("");m.observe(h,{characterData:!0}),i=function(){h.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)i="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var v=o.document.createElement("script");v.onreadystatechange=function(){b(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},o.document.documentElement.appendChild(v)}:function(){setTimeout(b,0)};else{var g=new o.MessageChannel;g.port1.onmessage=b,i=function(){g.port2.postMessage(0)}}var p=[];function b(){var v,T;l=!0;for(var y=p.length;y;){for(T=p,p=[],v=-1;++v<y;)T[v]();y=p.length}l=!1}r.exports=function(v){p.push(v)!==1||l||i()}}).call(this,typeof xo<"u"?xo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var o=n("immediate");function i(){}var l={},u=["REJECTED"],f=["FULFILLED"],m=["PENDING"];function h(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,y!==i&&v(this,y)}function g(y,E,w){this.promise=y,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function p(y,E,w){o(function(){var I;try{I=E(w)}catch(j){return l.reject(y,j)}I===y?l.reject(y,new TypeError("Cannot resolve promise with itself")):l.resolve(y,I)})}function b(y){var E=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof E=="function")return function(){E.apply(y,arguments)}}function v(y,E){var w=!1;function I(C){w||(w=!0,l.reject(y,C))}function j(C){w||(w=!0,l.resolve(y,C))}var _=T(function(){E(j,I)});_.status==="error"&&I(_.value)}function T(y,E){var w={};try{w.value=y(E),w.status="success"}catch(I){w.status="error",w.value=I}return w}(r.exports=h).prototype.finally=function(y){if(typeof y!="function")return this;var E=this.constructor;return this.then(function(w){return E.resolve(y()).then(function(){return w})},function(w){return E.resolve(y()).then(function(){throw w})})},h.prototype.catch=function(y){return this.then(null,y)},h.prototype.then=function(y,E){if(typeof y!="function"&&this.state===f||typeof E!="function"&&this.state===u)return this;var w=new this.constructor(i);return this.state!==m?p(w,this.state===f?y:E,this.outcome):this.queue.push(new g(w,y,E)),w},g.prototype.callFulfilled=function(y){l.resolve(this.promise,y)},g.prototype.otherCallFulfilled=function(y){p(this.promise,this.onFulfilled,y)},g.prototype.callRejected=function(y){l.reject(this.promise,y)},g.prototype.otherCallRejected=function(y){p(this.promise,this.onRejected,y)},l.resolve=function(y,E){var w=T(b,E);if(w.status==="error")return l.reject(y,w.value);var I=w.value;if(I)v(y,I);else{y.state=f,y.outcome=E;for(var j=-1,_=y.queue.length;++j<_;)y.queue[j].callFulfilled(E)}return y},l.reject=function(y,E){y.state=u,y.outcome=E;for(var w=-1,I=y.queue.length;++w<I;)y.queue[w].callRejected(E);return y},h.resolve=function(y){return y instanceof this?y:l.resolve(new this(i),y)},h.reject=function(y){var E=new this(i);return l.reject(E,y)},h.all=function(y){var E=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=y.length,I=!1;if(!w)return this.resolve([]);for(var j=new Array(w),_=0,C=-1,k=new this(i);++C<w;)R(y[C],C);return k;function R(P,Y){E.resolve(P).then(function(z){j[Y]=z,++_!==w||I||(I=!0,l.resolve(k,j))},function(z){I||(I=!0,l.reject(k,z))})}},h.race=function(y){var E=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=y.length,I=!1;if(!w)return this.resolve([]);for(var j=-1,_=new this(i);++j<w;)C=y[j],E.resolve(C).then(function(k){I||(I=!0,l.resolve(_,k))},function(k){I||(I=!0,l.reject(_,k))});var C;return _}},{immediate:36}],38:[function(n,r,s){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var o=n("./zlib/deflate"),i=n("./utils/common"),l=n("./utils/strings"),u=n("./zlib/messages"),f=n("./zlib/zstream"),m=Object.prototype.toString,h=0,g=-1,p=0,b=8;function v(y){if(!(this instanceof v))return new v(y);this.options=i.assign({level:g,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},y||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var w=o.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(w!==h)throw new Error(u[w]);if(E.header&&o.deflateSetHeader(this.strm,E.header),E.dictionary){var I;if(I=typeof E.dictionary=="string"?l.string2buf(E.dictionary):m.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(w=o.deflateSetDictionary(this.strm,I))!==h)throw new Error(u[w]);this._dict_set=!0}}function T(y,E){var w=new v(E);if(w.push(y,!0),w.err)throw w.msg||u[w.err];return w.result}v.prototype.push=function(y,E){var w,I,j=this.strm,_=this.options.chunkSize;if(this.ended)return!1;I=E===~~E?E:E===!0?4:0,typeof y=="string"?j.input=l.string2buf(y):m.call(y)==="[object ArrayBuffer]"?j.input=new Uint8Array(y):j.input=y,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new i.Buf8(_),j.next_out=0,j.avail_out=_),(w=o.deflate(j,I))!==1&&w!==h)return this.onEnd(w),!(this.ended=!0);j.avail_out!==0&&(j.avail_in!==0||I!==4&&I!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(i.shrinkBuf(j.output,j.next_out))):this.onData(i.shrinkBuf(j.output,j.next_out)))}while((0<j.avail_in||j.avail_out===0)&&w!==1);return I===4?(w=o.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===h):I!==2||(this.onEnd(h),!(j.avail_out=0))},v.prototype.onData=function(y){this.chunks.push(y)},v.prototype.onEnd=function(y){y===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},s.Deflate=v,s.deflate=T,s.deflateRaw=function(y,E){return(E=E||{}).raw=!0,T(y,E)},s.gzip=function(y,E){return(E=E||{}).gzip=!0,T(y,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var o=n("./zlib/inflate"),i=n("./utils/common"),l=n("./utils/strings"),u=n("./zlib/constants"),f=n("./zlib/messages"),m=n("./zlib/zstream"),h=n("./zlib/gzheader"),g=Object.prototype.toString;function p(v){if(!(this instanceof p))return new p(v);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},v||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||v&&v.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var y=o.inflateInit2(this.strm,T.windowBits);if(y!==u.Z_OK)throw new Error(f[y]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function b(v,T){var y=new p(T);if(y.push(v,!0),y.err)throw y.msg||f[y.err];return y.result}p.prototype.push=function(v,T){var y,E,w,I,j,_,C=this.strm,k=this.options.chunkSize,R=this.options.dictionary,P=!1;if(this.ended)return!1;E=T===~~T?T:T===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof v=="string"?C.input=l.binstring2buf(v):g.call(v)==="[object ArrayBuffer]"?C.input=new Uint8Array(v):C.input=v,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new i.Buf8(k),C.next_out=0,C.avail_out=k),(y=o.inflate(C,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&R&&(_=typeof R=="string"?l.string2buf(R):g.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,y=o.inflateSetDictionary(this.strm,_)),y===u.Z_BUF_ERROR&&P===!0&&(y=u.Z_OK,P=!1),y!==u.Z_STREAM_END&&y!==u.Z_OK)return this.onEnd(y),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&y!==u.Z_STREAM_END&&(C.avail_in!==0||E!==u.Z_FINISH&&E!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=l.utf8border(C.output,C.next_out),I=C.next_out-w,j=l.buf2string(C.output,w),C.next_out=I,C.avail_out=k-I,I&&i.arraySet(C.output,C.output,w,I,0),this.onData(j)):this.onData(i.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(P=!0)}while((0<C.avail_in||C.avail_out===0)&&y!==u.Z_STREAM_END);return y===u.Z_STREAM_END&&(E=u.Z_FINISH),E===u.Z_FINISH?(y=o.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===u.Z_OK):E!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(C.avail_out=0))},p.prototype.onData=function(v){this.chunks.push(v)},p.prototype.onEnd=function(v){v===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Inflate=p,s.inflate=b,s.inflateRaw=function(v,T){return(T=T||{}).raw=!0,b(v,T)},s.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(u){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var h in m)m.hasOwnProperty(h)&&(u[h]=m[h])}}return u},s.shrinkBuf=function(u,f){return u.length===f?u:u.subarray?u.subarray(0,f):(u.length=f,u)};var i={arraySet:function(u,f,m,h,g){if(f.subarray&&u.subarray)u.set(f.subarray(m,m+h),g);else for(var p=0;p<h;p++)u[g+p]=f[m+p]},flattenChunks:function(u){var f,m,h,g,p,b;for(f=h=0,m=u.length;f<m;f++)h+=u[f].length;for(b=new Uint8Array(h),f=g=0,m=u.length;f<m;f++)p=u[f],b.set(p,g),g+=p.length;return b}},l={arraySet:function(u,f,m,h,g){for(var p=0;p<h;p++)u[g+p]=f[m+p]},flattenChunks:function(u){return[].concat.apply([],u)}};s.setTyped=function(u){u?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,i)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(o)},{}],42:[function(n,r,s){var o=n("./common"),i=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new o.Buf8(256),f=0;f<256;f++)u[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function m(h,g){if(g<65537&&(h.subarray&&l||!h.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(h,g));for(var p="",b=0;b<g;b++)p+=String.fromCharCode(h[b]);return p}u[254]=u[254]=1,s.string2buf=function(h){var g,p,b,v,T,y=h.length,E=0;for(v=0;v<y;v++)(64512&(p=h.charCodeAt(v)))==55296&&v+1<y&&(64512&(b=h.charCodeAt(v+1)))==56320&&(p=65536+(p-55296<<10)+(b-56320),v++),E+=p<128?1:p<2048?2:p<65536?3:4;for(g=new o.Buf8(E),v=T=0;T<E;v++)(64512&(p=h.charCodeAt(v)))==55296&&v+1<y&&(64512&(b=h.charCodeAt(v+1)))==56320&&(p=65536+(p-55296<<10)+(b-56320),v++),p<128?g[T++]=p:(p<2048?g[T++]=192|p>>>6:(p<65536?g[T++]=224|p>>>12:(g[T++]=240|p>>>18,g[T++]=128|p>>>12&63),g[T++]=128|p>>>6&63),g[T++]=128|63&p);return g},s.buf2binstring=function(h){return m(h,h.length)},s.binstring2buf=function(h){for(var g=new o.Buf8(h.length),p=0,b=g.length;p<b;p++)g[p]=h.charCodeAt(p);return g},s.buf2string=function(h,g){var p,b,v,T,y=g||h.length,E=new Array(2*y);for(p=b=0;p<y;)if((v=h[p++])<128)E[b++]=v;else if(4<(T=u[v]))E[b++]=65533,p+=T-1;else{for(v&=T===2?31:T===3?15:7;1<T&&p<y;)v=v<<6|63&h[p++],T--;1<T?E[b++]=65533:v<65536?E[b++]=v:(v-=65536,E[b++]=55296|v>>10&1023,E[b++]=56320|1023&v)}return m(E,b)},s.utf8border=function(h,g){var p;for((g=g||h.length)>h.length&&(g=h.length),p=g-1;0<=p&&(192&h[p])==128;)p--;return p<0||p===0?g:p+u[h[p]]>g?p:g}},{"./common":41}],43:[function(n,r,s){r.exports=function(o,i,l,u){for(var f=65535&o|0,m=o>>>16&65535|0,h=0;l!==0;){for(l-=h=2e3<l?2e3:l;m=m+(f=f+i[u++]|0)|0,--h;);f%=65521,m%=65521}return f|m<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var o=function(){for(var i,l=[],u=0;u<256;u++){i=u;for(var f=0;f<8;f++)i=1&i?3988292384^i>>>1:i>>>1;l[u]=i}return l}();r.exports=function(i,l,u,f){var m=o,h=f+u;i^=-1;for(var g=f;g<h;g++)i=i>>>8^m[255&(i^l[g])];return-1^i}},{}],46:[function(n,r,s){var o,i=n("../utils/common"),l=n("./trees"),u=n("./adler32"),f=n("./crc32"),m=n("./messages"),h=0,g=4,p=0,b=-2,v=-1,T=4,y=2,E=8,w=9,I=286,j=30,_=19,C=2*I+1,k=15,R=3,P=258,Y=P+R+1,z=42,Q=113,M=1,le=2,Ne=3,$=4;function G(D,ue){return D.msg=m[ue],ue}function H(D){return(D<<1)-(4<D?9:0)}function U(D){for(var ue=D.length;0<=--ue;)D[ue]=0}function ee(D){var ue=D.state,F=ue.pending;F>D.avail_out&&(F=D.avail_out),F!==0&&(i.arraySet(D.output,ue.pending_buf,ue.pending_out,F,D.next_out),D.next_out+=F,ue.pending_out+=F,D.total_out+=F,D.avail_out-=F,ue.pending-=F,ue.pending===0&&(ue.pending_out=0))}function te(D,ue){l._tr_flush_block(D,0<=D.block_start?D.block_start:-1,D.strstart-D.block_start,ue),D.block_start=D.strstart,ee(D.strm)}function V(D,ue){D.pending_buf[D.pending++]=ue}function xe(D,ue){D.pending_buf[D.pending++]=ue>>>8&255,D.pending_buf[D.pending++]=255&ue}function we(D,ue){var F,A,L=D.max_chain_length,K=D.strstart,oe=D.prev_length,ie=D.nice_match,J=D.strstart>D.w_size-Y?D.strstart-(D.w_size-Y):0,me=D.window,be=D.w_mask,ye=D.prev,je=D.strstart+P,X=me[K+oe-1],Z=me[K+oe];D.prev_length>=D.good_match&&(L>>=2),ie>D.lookahead&&(ie=D.lookahead);do if(me[(F=ue)+oe]===Z&&me[F+oe-1]===X&&me[F]===me[K]&&me[++F]===me[K+1]){K+=2,F++;do;while(me[++K]===me[++F]&&me[++K]===me[++F]&&me[++K]===me[++F]&&me[++K]===me[++F]&&me[++K]===me[++F]&&me[++K]===me[++F]&&me[++K]===me[++F]&&me[++K]===me[++F]&&K<je);if(A=P-(je-K),K=je-P,oe<A){if(D.match_start=ue,ie<=(oe=A))break;X=me[K+oe-1],Z=me[K+oe]}}while((ue=ye[ue&be])>J&&--L!=0);return oe<=D.lookahead?oe:D.lookahead}function Le(D){var ue,F,A,L,K,oe,ie,J,me,be,ye=D.w_size;do{if(L=D.window_size-D.lookahead-D.strstart,D.strstart>=ye+(ye-Y)){for(i.arraySet(D.window,D.window,ye,ye,0),D.match_start-=ye,D.strstart-=ye,D.block_start-=ye,ue=F=D.hash_size;A=D.head[--ue],D.head[ue]=ye<=A?A-ye:0,--F;);for(ue=F=ye;A=D.prev[--ue],D.prev[ue]=ye<=A?A-ye:0,--F;);L+=ye}if(D.strm.avail_in===0)break;if(oe=D.strm,ie=D.window,J=D.strstart+D.lookahead,me=L,be=void 0,be=oe.avail_in,me<be&&(be=me),F=be===0?0:(oe.avail_in-=be,i.arraySet(ie,oe.input,oe.next_in,be,J),oe.state.wrap===1?oe.adler=u(oe.adler,ie,be,J):oe.state.wrap===2&&(oe.adler=f(oe.adler,ie,be,J)),oe.next_in+=be,oe.total_in+=be,be),D.lookahead+=F,D.lookahead+D.insert>=R)for(K=D.strstart-D.insert,D.ins_h=D.window[K],D.ins_h=(D.ins_h<<D.hash_shift^D.window[K+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[K+R-1])&D.hash_mask,D.prev[K&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=K,K++,D.insert--,!(D.lookahead+D.insert<R)););}while(D.lookahead<Y&&D.strm.avail_in!==0)}function Ve(D,ue){for(var F,A;;){if(D.lookahead<Y){if(Le(D),D.lookahead<Y&&ue===h)return M;if(D.lookahead===0)break}if(F=0,D.lookahead>=R&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+R-1])&D.hash_mask,F=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),F!==0&&D.strstart-F<=D.w_size-Y&&(D.match_length=we(D,F)),D.match_length>=R)if(A=l._tr_tally(D,D.strstart-D.match_start,D.match_length-R),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=R){for(D.match_length--;D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+R-1])&D.hash_mask,F=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart,--D.match_length!=0;);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else A=l._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(A&&(te(D,!1),D.strm.avail_out===0))return M}return D.insert=D.strstart<R-1?D.strstart:R-1,ue===g?(te(D,!0),D.strm.avail_out===0?Ne:$):D.last_lit&&(te(D,!1),D.strm.avail_out===0)?M:le}function Me(D,ue){for(var F,A,L;;){if(D.lookahead<Y){if(Le(D),D.lookahead<Y&&ue===h)return M;if(D.lookahead===0)break}if(F=0,D.lookahead>=R&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+R-1])&D.hash_mask,F=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=R-1,F!==0&&D.prev_length<D.max_lazy_match&&D.strstart-F<=D.w_size-Y&&(D.match_length=we(D,F),D.match_length<=5&&(D.strategy===1||D.match_length===R&&4096<D.strstart-D.match_start)&&(D.match_length=R-1)),D.prev_length>=R&&D.match_length<=D.prev_length){for(L=D.strstart+D.lookahead-R,A=l._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-R),D.lookahead-=D.prev_length-1,D.prev_length-=2;++D.strstart<=L&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+R-1])&D.hash_mask,F=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),--D.prev_length!=0;);if(D.match_available=0,D.match_length=R-1,D.strstart++,A&&(te(D,!1),D.strm.avail_out===0))return M}else if(D.match_available){if((A=l._tr_tally(D,0,D.window[D.strstart-1]))&&te(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return M}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(A=l._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<R-1?D.strstart:R-1,ue===g?(te(D,!0),D.strm.avail_out===0?Ne:$):D.last_lit&&(te(D,!1),D.strm.avail_out===0)?M:le}function Ke(D,ue,F,A,L){this.good_length=D,this.max_lazy=ue,this.nice_length=F,this.max_chain=A,this.func=L}function De(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*C),this.dyn_dtree=new i.Buf16(2*(2*j+1)),this.bl_tree=new i.Buf16(2*(2*_+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(k+1),this.heap=new i.Buf16(2*I+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*I+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function nt(D){var ue;return D&&D.state?(D.total_in=D.total_out=0,D.data_type=y,(ue=D.state).pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?z:Q,D.adler=ue.wrap===2?0:1,ue.last_flush=h,l._tr_init(ue),p):G(D,b)}function ut(D){var ue=nt(D);return ue===p&&function(F){F.window_size=2*F.w_size,U(F.head),F.max_lazy_match=o[F.level].max_lazy,F.good_match=o[F.level].good_length,F.nice_match=o[F.level].nice_length,F.max_chain_length=o[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=R-1,F.match_available=0,F.ins_h=0}(D.state),ue}function dt(D,ue,F,A,L,K){if(!D)return b;var oe=1;if(ue===v&&(ue=6),A<0?(oe=0,A=-A):15<A&&(oe=2,A-=16),L<1||w<L||F!==E||A<8||15<A||ue<0||9<ue||K<0||T<K)return G(D,b);A===8&&(A=9);var ie=new De;return(D.state=ie).strm=D,ie.wrap=oe,ie.gzhead=null,ie.w_bits=A,ie.w_size=1<<ie.w_bits,ie.w_mask=ie.w_size-1,ie.hash_bits=L+7,ie.hash_size=1<<ie.hash_bits,ie.hash_mask=ie.hash_size-1,ie.hash_shift=~~((ie.hash_bits+R-1)/R),ie.window=new i.Buf8(2*ie.w_size),ie.head=new i.Buf16(ie.hash_size),ie.prev=new i.Buf16(ie.w_size),ie.lit_bufsize=1<<L+6,ie.pending_buf_size=4*ie.lit_bufsize,ie.pending_buf=new i.Buf8(ie.pending_buf_size),ie.d_buf=1*ie.lit_bufsize,ie.l_buf=3*ie.lit_bufsize,ie.level=ue,ie.strategy=K,ie.method=F,ut(D)}o=[new Ke(0,0,0,0,function(D,ue){var F=65535;for(F>D.pending_buf_size-5&&(F=D.pending_buf_size-5);;){if(D.lookahead<=1){if(Le(D),D.lookahead===0&&ue===h)return M;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var A=D.block_start+F;if((D.strstart===0||D.strstart>=A)&&(D.lookahead=D.strstart-A,D.strstart=A,te(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-Y&&(te(D,!1),D.strm.avail_out===0))return M}return D.insert=0,ue===g?(te(D,!0),D.strm.avail_out===0?Ne:$):(D.strstart>D.block_start&&(te(D,!1),D.strm.avail_out),M)}),new Ke(4,4,8,4,Ve),new Ke(4,5,16,8,Ve),new Ke(4,6,32,32,Ve),new Ke(4,4,16,16,Me),new Ke(8,16,32,32,Me),new Ke(8,16,128,128,Me),new Ke(8,32,128,256,Me),new Ke(32,128,258,1024,Me),new Ke(32,258,258,4096,Me)],s.deflateInit=function(D,ue){return dt(D,ue,E,15,8,0)},s.deflateInit2=dt,s.deflateReset=ut,s.deflateResetKeep=nt,s.deflateSetHeader=function(D,ue){return D&&D.state?D.state.wrap!==2?b:(D.state.gzhead=ue,p):b},s.deflate=function(D,ue){var F,A,L,K;if(!D||!D.state||5<ue||ue<0)return D?G(D,b):b;if(A=D.state,!D.output||!D.input&&D.avail_in!==0||A.status===666&&ue!==g)return G(D,D.avail_out===0?-5:b);if(A.strm=D,F=A.last_flush,A.last_flush=ue,A.status===z)if(A.wrap===2)D.adler=0,V(A,31),V(A,139),V(A,8),A.gzhead?(V(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),V(A,255&A.gzhead.time),V(A,A.gzhead.time>>8&255),V(A,A.gzhead.time>>16&255),V(A,A.gzhead.time>>24&255),V(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),V(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(V(A,255&A.gzhead.extra.length),V(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(D.adler=f(D.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(V(A,0),V(A,0),V(A,0),V(A,0),V(A,0),V(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),V(A,3),A.status=Q);else{var oe=E+(A.w_bits-8<<4)<<8;oe|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(oe|=32),oe+=31-oe%31,A.status=Q,xe(A,oe),A.strstart!==0&&(xe(A,D.adler>>>16),xe(A,65535&D.adler)),D.adler=1}if(A.status===69)if(A.gzhead.extra){for(L=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>L&&(D.adler=f(D.adler,A.pending_buf,A.pending-L,L)),ee(D),L=A.pending,A.pending!==A.pending_buf_size));)V(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>L&&(D.adler=f(D.adler,A.pending_buf,A.pending-L,L)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){L=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>L&&(D.adler=f(D.adler,A.pending_buf,A.pending-L,L)),ee(D),L=A.pending,A.pending===A.pending_buf_size)){K=1;break}K=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,V(A,K)}while(K!==0);A.gzhead.hcrc&&A.pending>L&&(D.adler=f(D.adler,A.pending_buf,A.pending-L,L)),K===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){L=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>L&&(D.adler=f(D.adler,A.pending_buf,A.pending-L,L)),ee(D),L=A.pending,A.pending===A.pending_buf_size)){K=1;break}K=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,V(A,K)}while(K!==0);A.gzhead.hcrc&&A.pending>L&&(D.adler=f(D.adler,A.pending_buf,A.pending-L,L)),K===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&ee(D),A.pending+2<=A.pending_buf_size&&(V(A,255&D.adler),V(A,D.adler>>8&255),D.adler=0,A.status=Q)):A.status=Q),A.pending!==0){if(ee(D),D.avail_out===0)return A.last_flush=-1,p}else if(D.avail_in===0&&H(ue)<=H(F)&&ue!==g)return G(D,-5);if(A.status===666&&D.avail_in!==0)return G(D,-5);if(D.avail_in!==0||A.lookahead!==0||ue!==h&&A.status!==666){var ie=A.strategy===2?function(J,me){for(var be;;){if(J.lookahead===0&&(Le(J),J.lookahead===0)){if(me===h)return M;break}if(J.match_length=0,be=l._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,be&&(te(J,!1),J.strm.avail_out===0))return M}return J.insert=0,me===g?(te(J,!0),J.strm.avail_out===0?Ne:$):J.last_lit&&(te(J,!1),J.strm.avail_out===0)?M:le}(A,ue):A.strategy===3?function(J,me){for(var be,ye,je,X,Z=J.window;;){if(J.lookahead<=P){if(Le(J),J.lookahead<=P&&me===h)return M;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=R&&0<J.strstart&&(ye=Z[je=J.strstart-1])===Z[++je]&&ye===Z[++je]&&ye===Z[++je]){X=J.strstart+P;do;while(ye===Z[++je]&&ye===Z[++je]&&ye===Z[++je]&&ye===Z[++je]&&ye===Z[++je]&&ye===Z[++je]&&ye===Z[++je]&&ye===Z[++je]&&je<X);J.match_length=P-(X-je),J.match_length>J.lookahead&&(J.match_length=J.lookahead)}if(J.match_length>=R?(be=l._tr_tally(J,1,J.match_length-R),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0):(be=l._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++),be&&(te(J,!1),J.strm.avail_out===0))return M}return J.insert=0,me===g?(te(J,!0),J.strm.avail_out===0?Ne:$):J.last_lit&&(te(J,!1),J.strm.avail_out===0)?M:le}(A,ue):o[A.level].func(A,ue);if(ie!==Ne&&ie!==$||(A.status=666),ie===M||ie===Ne)return D.avail_out===0&&(A.last_flush=-1),p;if(ie===le&&(ue===1?l._tr_align(A):ue!==5&&(l._tr_stored_block(A,0,0,!1),ue===3&&(U(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),ee(D),D.avail_out===0))return A.last_flush=-1,p}return ue!==g?p:A.wrap<=0?1:(A.wrap===2?(V(A,255&D.adler),V(A,D.adler>>8&255),V(A,D.adler>>16&255),V(A,D.adler>>24&255),V(A,255&D.total_in),V(A,D.total_in>>8&255),V(A,D.total_in>>16&255),V(A,D.total_in>>24&255)):(xe(A,D.adler>>>16),xe(A,65535&D.adler)),ee(D),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?p:1)},s.deflateEnd=function(D){var ue;return D&&D.state?(ue=D.state.status)!==z&&ue!==69&&ue!==73&&ue!==91&&ue!==103&&ue!==Q&&ue!==666?G(D,b):(D.state=null,ue===Q?G(D,-3):p):b},s.deflateSetDictionary=function(D,ue){var F,A,L,K,oe,ie,J,me,be=ue.length;if(!D||!D.state||(K=(F=D.state).wrap)===2||K===1&&F.status!==z||F.lookahead)return b;for(K===1&&(D.adler=u(D.adler,ue,be,0)),F.wrap=0,be>=F.w_size&&(K===0&&(U(F.head),F.strstart=0,F.block_start=0,F.insert=0),me=new i.Buf8(F.w_size),i.arraySet(me,ue,be-F.w_size,F.w_size,0),ue=me,be=F.w_size),oe=D.avail_in,ie=D.next_in,J=D.input,D.avail_in=be,D.next_in=0,D.input=ue,Le(F);F.lookahead>=R;){for(A=F.strstart,L=F.lookahead-(R-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[A+R-1])&F.hash_mask,F.prev[A&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=A,A++,--L;);F.strstart=A,F.lookahead=R-1,Le(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=R-1,F.match_available=0,D.next_in=ie,D.input=J,D.avail_in=oe,F.wrap=K,p},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(o,i){var l,u,f,m,h,g,p,b,v,T,y,E,w,I,j,_,C,k,R,P,Y,z,Q,M,le;l=o.state,u=o.next_in,M=o.input,f=u+(o.avail_in-5),m=o.next_out,le=o.output,h=m-(i-o.avail_out),g=m+(o.avail_out-257),p=l.dmax,b=l.wsize,v=l.whave,T=l.wnext,y=l.window,E=l.hold,w=l.bits,I=l.lencode,j=l.distcode,_=(1<<l.lenbits)-1,C=(1<<l.distbits)-1;e:do{w<15&&(E+=M[u++]<<w,w+=8,E+=M[u++]<<w,w+=8),k=I[E&_];t:for(;;){if(E>>>=R=k>>>24,w-=R,(R=k>>>16&255)===0)le[m++]=65535&k;else{if(!(16&R)){if(!(64&R)){k=I[(65535&k)+(E&(1<<R)-1)];continue t}if(32&R){l.mode=12;break e}o.msg="invalid literal/length code",l.mode=30;break e}P=65535&k,(R&=15)&&(w<R&&(E+=M[u++]<<w,w+=8),P+=E&(1<<R)-1,E>>>=R,w-=R),w<15&&(E+=M[u++]<<w,w+=8,E+=M[u++]<<w,w+=8),k=j[E&C];n:for(;;){if(E>>>=R=k>>>24,w-=R,!(16&(R=k>>>16&255))){if(!(64&R)){k=j[(65535&k)+(E&(1<<R)-1)];continue n}o.msg="invalid distance code",l.mode=30;break e}if(Y=65535&k,w<(R&=15)&&(E+=M[u++]<<w,(w+=8)<R&&(E+=M[u++]<<w,w+=8)),p<(Y+=E&(1<<R)-1)){o.msg="invalid distance too far back",l.mode=30;break e}if(E>>>=R,w-=R,(R=m-h)<Y){if(v<(R=Y-R)&&l.sane){o.msg="invalid distance too far back",l.mode=30;break e}if(Q=y,(z=0)===T){if(z+=b-R,R<P){for(P-=R;le[m++]=y[z++],--R;);z=m-Y,Q=le}}else if(T<R){if(z+=b+T-R,(R-=T)<P){for(P-=R;le[m++]=y[z++],--R;);if(z=0,T<P){for(P-=R=T;le[m++]=y[z++],--R;);z=m-Y,Q=le}}}else if(z+=T-R,R<P){for(P-=R;le[m++]=y[z++],--R;);z=m-Y,Q=le}for(;2<P;)le[m++]=Q[z++],le[m++]=Q[z++],le[m++]=Q[z++],P-=3;P&&(le[m++]=Q[z++],1<P&&(le[m++]=Q[z++]))}else{for(z=m-Y;le[m++]=le[z++],le[m++]=le[z++],le[m++]=le[z++],2<(P-=3););P&&(le[m++]=le[z++],1<P&&(le[m++]=le[z++]))}break}}break}}while(u<f&&m<g);u-=P=w>>3,E&=(1<<(w-=P<<3))-1,o.next_in=u,o.next_out=m,o.avail_in=u<f?f-u+5:5-(u-f),o.avail_out=m<g?g-m+257:257-(m-g),l.hold=E,l.bits=w}},{}],49:[function(n,r,s){var o=n("../utils/common"),i=n("./adler32"),l=n("./crc32"),u=n("./inffast"),f=n("./inftrees"),m=1,h=2,g=0,p=-2,b=1,v=852,T=592;function y(z){return(z>>>24&255)+(z>>>8&65280)+((65280&z)<<8)+((255&z)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(z){var Q;return z&&z.state?(Q=z.state,z.total_in=z.total_out=Q.total=0,z.msg="",Q.wrap&&(z.adler=1&Q.wrap),Q.mode=b,Q.last=0,Q.havedict=0,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new o.Buf32(v),Q.distcode=Q.distdyn=new o.Buf32(T),Q.sane=1,Q.back=-1,g):p}function I(z){var Q;return z&&z.state?((Q=z.state).wsize=0,Q.whave=0,Q.wnext=0,w(z)):p}function j(z,Q){var M,le;return z&&z.state?(le=z.state,Q<0?(M=0,Q=-Q):(M=1+(Q>>4),Q<48&&(Q&=15)),Q&&(Q<8||15<Q)?p:(le.window!==null&&le.wbits!==Q&&(le.window=null),le.wrap=M,le.wbits=Q,I(z))):p}function _(z,Q){var M,le;return z?(le=new E,(z.state=le).window=null,(M=j(z,Q))!==g&&(z.state=null),M):p}var C,k,R=!0;function P(z){if(R){var Q;for(C=new o.Buf32(512),k=new o.Buf32(32),Q=0;Q<144;)z.lens[Q++]=8;for(;Q<256;)z.lens[Q++]=9;for(;Q<280;)z.lens[Q++]=7;for(;Q<288;)z.lens[Q++]=8;for(f(m,z.lens,0,288,C,0,z.work,{bits:9}),Q=0;Q<32;)z.lens[Q++]=5;f(h,z.lens,0,32,k,0,z.work,{bits:5}),R=!1}z.lencode=C,z.lenbits=9,z.distcode=k,z.distbits=5}function Y(z,Q,M,le){var Ne,$=z.state;return $.window===null&&($.wsize=1<<$.wbits,$.wnext=0,$.whave=0,$.window=new o.Buf8($.wsize)),le>=$.wsize?(o.arraySet($.window,Q,M-$.wsize,$.wsize,0),$.wnext=0,$.whave=$.wsize):(le<(Ne=$.wsize-$.wnext)&&(Ne=le),o.arraySet($.window,Q,M-le,Ne,$.wnext),(le-=Ne)?(o.arraySet($.window,Q,M-le,le,0),$.wnext=le,$.whave=$.wsize):($.wnext+=Ne,$.wnext===$.wsize&&($.wnext=0),$.whave<$.wsize&&($.whave+=Ne))),0}s.inflateReset=I,s.inflateReset2=j,s.inflateResetKeep=w,s.inflateInit=function(z){return _(z,15)},s.inflateInit2=_,s.inflate=function(z,Q){var M,le,Ne,$,G,H,U,ee,te,V,xe,we,Le,Ve,Me,Ke,De,nt,ut,dt,D,ue,F,A,L=0,K=new o.Buf8(4),oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!z||!z.state||!z.output||!z.input&&z.avail_in!==0)return p;(M=z.state).mode===12&&(M.mode=13),G=z.next_out,Ne=z.output,U=z.avail_out,$=z.next_in,le=z.input,H=z.avail_in,ee=M.hold,te=M.bits,V=H,xe=U,ue=g;e:for(;;)switch(M.mode){case b:if(M.wrap===0){M.mode=13;break}for(;te<16;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}if(2&M.wrap&&ee===35615){K[M.check=0]=255&ee,K[1]=ee>>>8&255,M.check=l(M.check,K,2,0),te=ee=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&ee)<<8)+(ee>>8))%31){z.msg="incorrect header check",M.mode=30;break}if((15&ee)!=8){z.msg="unknown compression method",M.mode=30;break}if(te-=4,D=8+(15&(ee>>>=4)),M.wbits===0)M.wbits=D;else if(D>M.wbits){z.msg="invalid window size",M.mode=30;break}M.dmax=1<<D,z.adler=M.check=1,M.mode=512&ee?10:12,te=ee=0;break;case 2:for(;te<16;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}if(M.flags=ee,(255&M.flags)!=8){z.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){z.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=ee>>8&1),512&M.flags&&(K[0]=255&ee,K[1]=ee>>>8&255,M.check=l(M.check,K,2,0)),te=ee=0,M.mode=3;case 3:for(;te<32;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}M.head&&(M.head.time=ee),512&M.flags&&(K[0]=255&ee,K[1]=ee>>>8&255,K[2]=ee>>>16&255,K[3]=ee>>>24&255,M.check=l(M.check,K,4,0)),te=ee=0,M.mode=4;case 4:for(;te<16;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}M.head&&(M.head.xflags=255&ee,M.head.os=ee>>8),512&M.flags&&(K[0]=255&ee,K[1]=ee>>>8&255,M.check=l(M.check,K,2,0)),te=ee=0,M.mode=5;case 5:if(1024&M.flags){for(;te<16;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}M.length=ee,M.head&&(M.head.extra_len=ee),512&M.flags&&(K[0]=255&ee,K[1]=ee>>>8&255,M.check=l(M.check,K,2,0)),te=ee=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(H<(we=M.length)&&(we=H),we&&(M.head&&(D=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),o.arraySet(M.head.extra,le,$,we,D)),512&M.flags&&(M.check=l(M.check,le,we,$)),H-=we,$+=we,M.length-=we),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(H===0)break e;for(we=0;D=le[$+we++],M.head&&D&&M.length<65536&&(M.head.name+=String.fromCharCode(D)),D&&we<H;);if(512&M.flags&&(M.check=l(M.check,le,we,$)),H-=we,$+=we,D)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(H===0)break e;for(we=0;D=le[$+we++],M.head&&D&&M.length<65536&&(M.head.comment+=String.fromCharCode(D)),D&&we<H;);if(512&M.flags&&(M.check=l(M.check,le,we,$)),H-=we,$+=we,D)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;te<16;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}if(ee!==(65535&M.check)){z.msg="header crc mismatch",M.mode=30;break}te=ee=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),z.adler=M.check=0,M.mode=12;break;case 10:for(;te<32;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}z.adler=M.check=y(ee),te=ee=0,M.mode=11;case 11:if(M.havedict===0)return z.next_out=G,z.avail_out=U,z.next_in=$,z.avail_in=H,M.hold=ee,M.bits=te,2;z.adler=M.check=1,M.mode=12;case 12:if(Q===5||Q===6)break e;case 13:if(M.last){ee>>>=7&te,te-=7&te,M.mode=27;break}for(;te<3;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}switch(M.last=1&ee,te-=1,3&(ee>>>=1)){case 0:M.mode=14;break;case 1:if(P(M),M.mode=20,Q!==6)break;ee>>>=2,te-=2;break e;case 2:M.mode=17;break;case 3:z.msg="invalid block type",M.mode=30}ee>>>=2,te-=2;break;case 14:for(ee>>>=7&te,te-=7&te;te<32;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}if((65535&ee)!=(ee>>>16^65535)){z.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&ee,te=ee=0,M.mode=15,Q===6)break e;case 15:M.mode=16;case 16:if(we=M.length){if(H<we&&(we=H),U<we&&(we=U),we===0)break e;o.arraySet(Ne,le,$,we,G),H-=we,$+=we,U-=we,G+=we,M.length-=we;break}M.mode=12;break;case 17:for(;te<14;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}if(M.nlen=257+(31&ee),ee>>>=5,te-=5,M.ndist=1+(31&ee),ee>>>=5,te-=5,M.ncode=4+(15&ee),ee>>>=4,te-=4,286<M.nlen||30<M.ndist){z.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;te<3;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}M.lens[oe[M.have++]]=7&ee,ee>>>=3,te-=3}for(;M.have<19;)M.lens[oe[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,F={bits:M.lenbits},ue=f(0,M.lens,0,19,M.lencode,0,M.work,F),M.lenbits=F.bits,ue){z.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;Ke=(L=M.lencode[ee&(1<<M.lenbits)-1])>>>16&255,De=65535&L,!((Me=L>>>24)<=te);){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}if(De<16)ee>>>=Me,te-=Me,M.lens[M.have++]=De;else{if(De===16){for(A=Me+2;te<A;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}if(ee>>>=Me,te-=Me,M.have===0){z.msg="invalid bit length repeat",M.mode=30;break}D=M.lens[M.have-1],we=3+(3&ee),ee>>>=2,te-=2}else if(De===17){for(A=Me+3;te<A;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}te-=Me,D=0,we=3+(7&(ee>>>=Me)),ee>>>=3,te-=3}else{for(A=Me+7;te<A;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}te-=Me,D=0,we=11+(127&(ee>>>=Me)),ee>>>=7,te-=7}if(M.have+we>M.nlen+M.ndist){z.msg="invalid bit length repeat",M.mode=30;break}for(;we--;)M.lens[M.have++]=D}}if(M.mode===30)break;if(M.lens[256]===0){z.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,F={bits:M.lenbits},ue=f(m,M.lens,0,M.nlen,M.lencode,0,M.work,F),M.lenbits=F.bits,ue){z.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,F={bits:M.distbits},ue=f(h,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,F),M.distbits=F.bits,ue){z.msg="invalid distances set",M.mode=30;break}if(M.mode=20,Q===6)break e;case 20:M.mode=21;case 21:if(6<=H&&258<=U){z.next_out=G,z.avail_out=U,z.next_in=$,z.avail_in=H,M.hold=ee,M.bits=te,u(z,xe),G=z.next_out,Ne=z.output,U=z.avail_out,$=z.next_in,le=z.input,H=z.avail_in,ee=M.hold,te=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;Ke=(L=M.lencode[ee&(1<<M.lenbits)-1])>>>16&255,De=65535&L,!((Me=L>>>24)<=te);){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}if(Ke&&!(240&Ke)){for(nt=Me,ut=Ke,dt=De;Ke=(L=M.lencode[dt+((ee&(1<<nt+ut)-1)>>nt)])>>>16&255,De=65535&L,!(nt+(Me=L>>>24)<=te);){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}ee>>>=nt,te-=nt,M.back+=nt}if(ee>>>=Me,te-=Me,M.back+=Me,M.length=De,Ke===0){M.mode=26;break}if(32&Ke){M.back=-1,M.mode=12;break}if(64&Ke){z.msg="invalid literal/length code",M.mode=30;break}M.extra=15&Ke,M.mode=22;case 22:if(M.extra){for(A=M.extra;te<A;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}M.length+=ee&(1<<M.extra)-1,ee>>>=M.extra,te-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;Ke=(L=M.distcode[ee&(1<<M.distbits)-1])>>>16&255,De=65535&L,!((Me=L>>>24)<=te);){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}if(!(240&Ke)){for(nt=Me,ut=Ke,dt=De;Ke=(L=M.distcode[dt+((ee&(1<<nt+ut)-1)>>nt)])>>>16&255,De=65535&L,!(nt+(Me=L>>>24)<=te);){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}ee>>>=nt,te-=nt,M.back+=nt}if(ee>>>=Me,te-=Me,M.back+=Me,64&Ke){z.msg="invalid distance code",M.mode=30;break}M.offset=De,M.extra=15&Ke,M.mode=24;case 24:if(M.extra){for(A=M.extra;te<A;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}M.offset+=ee&(1<<M.extra)-1,ee>>>=M.extra,te-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){z.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(U===0)break e;if(we=xe-U,M.offset>we){if((we=M.offset-we)>M.whave&&M.sane){z.msg="invalid distance too far back",M.mode=30;break}Le=we>M.wnext?(we-=M.wnext,M.wsize-we):M.wnext-we,we>M.length&&(we=M.length),Ve=M.window}else Ve=Ne,Le=G-M.offset,we=M.length;for(U<we&&(we=U),U-=we,M.length-=we;Ne[G++]=Ve[Le++],--we;);M.length===0&&(M.mode=21);break;case 26:if(U===0)break e;Ne[G++]=M.length,U--,M.mode=21;break;case 27:if(M.wrap){for(;te<32;){if(H===0)break e;H--,ee|=le[$++]<<te,te+=8}if(xe-=U,z.total_out+=xe,M.total+=xe,xe&&(z.adler=M.check=M.flags?l(M.check,Ne,xe,G-xe):i(M.check,Ne,xe,G-xe)),xe=U,(M.flags?ee:y(ee))!==M.check){z.msg="incorrect data check",M.mode=30;break}te=ee=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;te<32;){if(H===0)break e;H--,ee+=le[$++]<<te,te+=8}if(ee!==(4294967295&M.total)){z.msg="incorrect length check",M.mode=30;break}te=ee=0}M.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;case 32:default:return p}return z.next_out=G,z.avail_out=U,z.next_in=$,z.avail_in=H,M.hold=ee,M.bits=te,(M.wsize||xe!==z.avail_out&&M.mode<30&&(M.mode<27||Q!==4))&&Y(z,z.output,z.next_out,xe-z.avail_out)?(M.mode=31,-4):(V-=z.avail_in,xe-=z.avail_out,z.total_in+=V,z.total_out+=xe,M.total+=xe,M.wrap&&xe&&(z.adler=M.check=M.flags?l(M.check,Ne,xe,z.next_out-xe):i(M.check,Ne,xe,z.next_out-xe)),z.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(V==0&&xe===0||Q===4)&&ue===g&&(ue=-5),ue)},s.inflateEnd=function(z){if(!z||!z.state)return p;var Q=z.state;return Q.window&&(Q.window=null),z.state=null,g},s.inflateGetHeader=function(z,Q){var M;return z&&z.state&&2&(M=z.state).wrap?((M.head=Q).done=!1,g):p},s.inflateSetDictionary=function(z,Q){var M,le=Q.length;return z&&z.state?(M=z.state).wrap!==0&&M.mode!==11?p:M.mode===11&&i(1,Q,le,0)!==M.check?-3:Y(z,Q,le,le)?(M.mode=31,-4):(M.havedict=1,g):p},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var o=n("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(m,h,g,p,b,v,T,y){var E,w,I,j,_,C,k,R,P,Y=y.bits,z=0,Q=0,M=0,le=0,Ne=0,$=0,G=0,H=0,U=0,ee=0,te=null,V=0,xe=new o.Buf16(16),we=new o.Buf16(16),Le=null,Ve=0;for(z=0;z<=15;z++)xe[z]=0;for(Q=0;Q<p;Q++)xe[h[g+Q]]++;for(Ne=Y,le=15;1<=le&&xe[le]===0;le--);if(le<Ne&&(Ne=le),le===0)return b[v++]=20971520,b[v++]=20971520,y.bits=1,0;for(M=1;M<le&&xe[M]===0;M++);for(Ne<M&&(Ne=M),z=H=1;z<=15;z++)if(H<<=1,(H-=xe[z])<0)return-1;if(0<H&&(m===0||le!==1))return-1;for(we[1]=0,z=1;z<15;z++)we[z+1]=we[z]+xe[z];for(Q=0;Q<p;Q++)h[g+Q]!==0&&(T[we[h[g+Q]]++]=Q);if(C=m===0?(te=Le=T,19):m===1?(te=i,V-=257,Le=l,Ve-=257,256):(te=u,Le=f,-1),z=M,_=v,G=Q=ee=0,I=-1,j=(U=1<<($=Ne))-1,m===1&&852<U||m===2&&592<U)return 1;for(;;){for(k=z-G,P=T[Q]<C?(R=0,T[Q]):T[Q]>C?(R=Le[Ve+T[Q]],te[V+T[Q]]):(R=96,0),E=1<<z-G,M=w=1<<$;b[_+(ee>>G)+(w-=E)]=k<<24|R<<16|P|0,w!==0;);for(E=1<<z-1;ee&E;)E>>=1;if(E!==0?(ee&=E-1,ee+=E):ee=0,Q++,--xe[z]==0){if(z===le)break;z=h[g+T[Q]]}if(Ne<z&&(ee&j)!==I){for(G===0&&(G=Ne),_+=M,H=1<<($=z-G);$+G<le&&!((H-=xe[$+G])<=0);)$++,H<<=1;if(U+=1<<$,m===1&&852<U||m===2&&592<U)return 1;b[I=ee&j]=Ne<<24|$<<16|_-v|0}}return ee!==0&&(b[_+ee]=z-G<<24|64<<16|0),y.bits=Ne,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var o=n("../utils/common"),i=0,l=1;function u(L){for(var K=L.length;0<=--K;)L[K]=0}var f=0,m=29,h=256,g=h+1+m,p=30,b=19,v=2*g+1,T=15,y=16,E=7,w=256,I=16,j=17,_=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(g+2));u(Y);var z=new Array(2*p);u(z);var Q=new Array(512);u(Q);var M=new Array(256);u(M);var le=new Array(m);u(le);var Ne,$,G,H=new Array(p);function U(L,K,oe,ie,J){this.static_tree=L,this.extra_bits=K,this.extra_base=oe,this.elems=ie,this.max_length=J,this.has_stree=L&&L.length}function ee(L,K){this.dyn_tree=L,this.max_code=0,this.stat_desc=K}function te(L){return L<256?Q[L]:Q[256+(L>>>7)]}function V(L,K){L.pending_buf[L.pending++]=255&K,L.pending_buf[L.pending++]=K>>>8&255}function xe(L,K,oe){L.bi_valid>y-oe?(L.bi_buf|=K<<L.bi_valid&65535,V(L,L.bi_buf),L.bi_buf=K>>y-L.bi_valid,L.bi_valid+=oe-y):(L.bi_buf|=K<<L.bi_valid&65535,L.bi_valid+=oe)}function we(L,K,oe){xe(L,oe[2*K],oe[2*K+1])}function Le(L,K){for(var oe=0;oe|=1&L,L>>>=1,oe<<=1,0<--K;);return oe>>>1}function Ve(L,K,oe){var ie,J,me=new Array(T+1),be=0;for(ie=1;ie<=T;ie++)me[ie]=be=be+oe[ie-1]<<1;for(J=0;J<=K;J++){var ye=L[2*J+1];ye!==0&&(L[2*J]=Le(me[ye]++,ye))}}function Me(L){var K;for(K=0;K<g;K++)L.dyn_ltree[2*K]=0;for(K=0;K<p;K++)L.dyn_dtree[2*K]=0;for(K=0;K<b;K++)L.bl_tree[2*K]=0;L.dyn_ltree[2*w]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function Ke(L){8<L.bi_valid?V(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function De(L,K,oe,ie){var J=2*K,me=2*oe;return L[J]<L[me]||L[J]===L[me]&&ie[K]<=ie[oe]}function nt(L,K,oe){for(var ie=L.heap[oe],J=oe<<1;J<=L.heap_len&&(J<L.heap_len&&De(K,L.heap[J+1],L.heap[J],L.depth)&&J++,!De(K,ie,L.heap[J],L.depth));)L.heap[oe]=L.heap[J],oe=J,J<<=1;L.heap[oe]=ie}function ut(L,K,oe){var ie,J,me,be,ye=0;if(L.last_lit!==0)for(;ie=L.pending_buf[L.d_buf+2*ye]<<8|L.pending_buf[L.d_buf+2*ye+1],J=L.pending_buf[L.l_buf+ye],ye++,ie===0?we(L,J,K):(we(L,(me=M[J])+h+1,K),(be=C[me])!==0&&xe(L,J-=le[me],be),we(L,me=te(--ie),oe),(be=k[me])!==0&&xe(L,ie-=H[me],be)),ye<L.last_lit;);we(L,w,K)}function dt(L,K){var oe,ie,J,me=K.dyn_tree,be=K.stat_desc.static_tree,ye=K.stat_desc.has_stree,je=K.stat_desc.elems,X=-1;for(L.heap_len=0,L.heap_max=v,oe=0;oe<je;oe++)me[2*oe]!==0?(L.heap[++L.heap_len]=X=oe,L.depth[oe]=0):me[2*oe+1]=0;for(;L.heap_len<2;)me[2*(J=L.heap[++L.heap_len]=X<2?++X:0)]=1,L.depth[J]=0,L.opt_len--,ye&&(L.static_len-=be[2*J+1]);for(K.max_code=X,oe=L.heap_len>>1;1<=oe;oe--)nt(L,me,oe);for(J=je;oe=L.heap[1],L.heap[1]=L.heap[L.heap_len--],nt(L,me,1),ie=L.heap[1],L.heap[--L.heap_max]=oe,L.heap[--L.heap_max]=ie,me[2*J]=me[2*oe]+me[2*ie],L.depth[J]=(L.depth[oe]>=L.depth[ie]?L.depth[oe]:L.depth[ie])+1,me[2*oe+1]=me[2*ie+1]=J,L.heap[1]=J++,nt(L,me,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(Z,pe){var ge,Ee,He,Ye,pt,Qe,Et=pe.dyn_tree,Dt=pe.max_code,$n=pe.stat_desc.static_tree,$t=pe.stat_desc.has_stree,us=pe.stat_desc.extra_bits,Fs=pe.stat_desc.extra_base,Ut=pe.stat_desc.max_length,un=0;for(Ye=0;Ye<=T;Ye++)Z.bl_count[Ye]=0;for(Et[2*Z.heap[Z.heap_max]+1]=0,ge=Z.heap_max+1;ge<v;ge++)Ut<(Ye=Et[2*Et[2*(Ee=Z.heap[ge])+1]+1]+1)&&(Ye=Ut,un++),Et[2*Ee+1]=Ye,Dt<Ee||(Z.bl_count[Ye]++,pt=0,Fs<=Ee&&(pt=us[Ee-Fs]),Qe=Et[2*Ee],Z.opt_len+=Qe*(Ye+pt),$t&&(Z.static_len+=Qe*($n[2*Ee+1]+pt)));if(un!==0){do{for(Ye=Ut-1;Z.bl_count[Ye]===0;)Ye--;Z.bl_count[Ye]--,Z.bl_count[Ye+1]+=2,Z.bl_count[Ut]--,un-=2}while(0<un);for(Ye=Ut;Ye!==0;Ye--)for(Ee=Z.bl_count[Ye];Ee!==0;)Dt<(He=Z.heap[--ge])||(Et[2*He+1]!==Ye&&(Z.opt_len+=(Ye-Et[2*He+1])*Et[2*He],Et[2*He+1]=Ye),Ee--)}}(L,K),Ve(me,X,L.bl_count)}function D(L,K,oe){var ie,J,me=-1,be=K[1],ye=0,je=7,X=4;for(be===0&&(je=138,X=3),K[2*(oe+1)+1]=65535,ie=0;ie<=oe;ie++)J=be,be=K[2*(ie+1)+1],++ye<je&&J===be||(ye<X?L.bl_tree[2*J]+=ye:J!==0?(J!==me&&L.bl_tree[2*J]++,L.bl_tree[2*I]++):ye<=10?L.bl_tree[2*j]++:L.bl_tree[2*_]++,me=J,X=(ye=0)===be?(je=138,3):J===be?(je=6,3):(je=7,4))}function ue(L,K,oe){var ie,J,me=-1,be=K[1],ye=0,je=7,X=4;for(be===0&&(je=138,X=3),ie=0;ie<=oe;ie++)if(J=be,be=K[2*(ie+1)+1],!(++ye<je&&J===be)){if(ye<X)for(;we(L,J,L.bl_tree),--ye!=0;);else J!==0?(J!==me&&(we(L,J,L.bl_tree),ye--),we(L,I,L.bl_tree),xe(L,ye-3,2)):ye<=10?(we(L,j,L.bl_tree),xe(L,ye-3,3)):(we(L,_,L.bl_tree),xe(L,ye-11,7));me=J,X=(ye=0)===be?(je=138,3):J===be?(je=6,3):(je=7,4)}}u(H);var F=!1;function A(L,K,oe,ie){xe(L,(f<<1)+(ie?1:0),3),function(J,me,be,ye){Ke(J),ye&&(V(J,be),V(J,~be)),o.arraySet(J.pending_buf,J.window,me,be,J.pending),J.pending+=be}(L,K,oe,!0)}s._tr_init=function(L){F||(function(){var K,oe,ie,J,me,be=new Array(T+1);for(J=ie=0;J<m-1;J++)for(le[J]=ie,K=0;K<1<<C[J];K++)M[ie++]=J;for(M[ie-1]=J,J=me=0;J<16;J++)for(H[J]=me,K=0;K<1<<k[J];K++)Q[me++]=J;for(me>>=7;J<p;J++)for(H[J]=me<<7,K=0;K<1<<k[J]-7;K++)Q[256+me++]=J;for(oe=0;oe<=T;oe++)be[oe]=0;for(K=0;K<=143;)Y[2*K+1]=8,K++,be[8]++;for(;K<=255;)Y[2*K+1]=9,K++,be[9]++;for(;K<=279;)Y[2*K+1]=7,K++,be[7]++;for(;K<=287;)Y[2*K+1]=8,K++,be[8]++;for(Ve(Y,g+1,be),K=0;K<p;K++)z[2*K+1]=5,z[2*K]=Le(K,5);Ne=new U(Y,C,h+1,g,T),$=new U(z,k,0,p,T),G=new U(new Array(0),R,0,b,E)}(),F=!0),L.l_desc=new ee(L.dyn_ltree,Ne),L.d_desc=new ee(L.dyn_dtree,$),L.bl_desc=new ee(L.bl_tree,G),L.bi_buf=0,L.bi_valid=0,Me(L)},s._tr_stored_block=A,s._tr_flush_block=function(L,K,oe,ie){var J,me,be=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(ye){var je,X=4093624447;for(je=0;je<=31;je++,X>>>=1)if(1&X&&ye.dyn_ltree[2*je]!==0)return i;if(ye.dyn_ltree[18]!==0||ye.dyn_ltree[20]!==0||ye.dyn_ltree[26]!==0)return l;for(je=32;je<h;je++)if(ye.dyn_ltree[2*je]!==0)return l;return i}(L)),dt(L,L.l_desc),dt(L,L.d_desc),be=function(ye){var je;for(D(ye,ye.dyn_ltree,ye.l_desc.max_code),D(ye,ye.dyn_dtree,ye.d_desc.max_code),dt(ye,ye.bl_desc),je=b-1;3<=je&&ye.bl_tree[2*P[je]+1]===0;je--);return ye.opt_len+=3*(je+1)+5+5+4,je}(L),J=L.opt_len+3+7>>>3,(me=L.static_len+3+7>>>3)<=J&&(J=me)):J=me=oe+5,oe+4<=J&&K!==-1?A(L,K,oe,ie):L.strategy===4||me===J?(xe(L,2+(ie?1:0),3),ut(L,Y,z)):(xe(L,4+(ie?1:0),3),function(ye,je,X,Z){var pe;for(xe(ye,je-257,5),xe(ye,X-1,5),xe(ye,Z-4,4),pe=0;pe<Z;pe++)xe(ye,ye.bl_tree[2*P[pe]+1],3);ue(ye,ye.dyn_ltree,je-1),ue(ye,ye.dyn_dtree,X-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,be+1),ut(L,L.dyn_ltree,L.dyn_dtree)),Me(L),ie&&Ke(L)},s._tr_tally=function(L,K,oe){return L.pending_buf[L.d_buf+2*L.last_lit]=K>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&K,L.pending_buf[L.l_buf+L.last_lit]=255&oe,L.last_lit++,K===0?L.dyn_ltree[2*oe]++:(L.matches++,K--,L.dyn_ltree[2*(M[oe]+h+1)]++,L.dyn_dtree[2*te(K)]++),L.last_lit===L.lit_bufsize-1},s._tr_align=function(L){xe(L,2,3),we(L,w,Y),function(K){K.bi_valid===16?(V(K,K.bi_buf),K.bi_buf=0,K.bi_valid=0):8<=K.bi_valid&&(K.pending_buf[K.pending++]=255&K.bi_buf,K.bi_buf>>=8,K.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(o){(function(i,l){if(!i.setImmediate){var u,f,m,h,g=1,p={},b=!1,v=i.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(i);T=T&&T.setTimeout?T:i,u={}.toString.call(i.process)==="[object process]"?function(I){process.nextTick(function(){E(I)})}:function(){if(i.postMessage&&!i.importScripts){var I=!0,j=i.onmessage;return i.onmessage=function(){I=!1},i.postMessage("","*"),i.onmessage=j,I}}()?(h="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",w,!1):i.attachEvent("onmessage",w),function(I){i.postMessage(h+I,"*")}):i.MessageChannel?((m=new MessageChannel).port1.onmessage=function(I){E(I.data)},function(I){m.port2.postMessage(I)}):v&&"onreadystatechange"in v.createElement("script")?(f=v.documentElement,function(I){var j=v.createElement("script");j.onreadystatechange=function(){E(I),j.onreadystatechange=null,f.removeChild(j),j=null},f.appendChild(j)}):function(I){setTimeout(E,0,I)},T.setImmediate=function(I){typeof I!="function"&&(I=new Function(""+I));for(var j=new Array(arguments.length-1),_=0;_<j.length;_++)j[_]=arguments[_+1];var C={callback:I,args:j};return p[g]=C,u(g),g++},T.clearImmediate=y}function y(I){delete p[I]}function E(I){if(b)setTimeout(E,0,I);else{var j=p[I];if(j){b=!0;try{(function(_){var C=_.callback,k=_.args;switch(k.length){case 0:C();break;case 1:C(k[0]);break;case 2:C(k[0],k[1]);break;case 3:C(k[0],k[1],k[2]);break;default:C.apply(l,k)}})(j)}finally{y(I),b=!1}}}}function w(I){I.source===i&&typeof I.data=="string"&&I.data.indexOf(h)===0&&E(+I.data.slice(h.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof xo<"u"?xo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(J_);var OU=J_.exports;const jb=ra(OU);class w2{constructor(){this.backupKey="memeos-enhanced-backups",this.historyKey="memeos-note-history",this.settingsKey="memeos-backup-settings",this.defaultPassword="memeos-secure-backup-2024"}async getSettings(){try{try{const r=await(await fetch("/api/backup/settings")).json();if(r.success&&r.settings)return localStorage.setItem(this.settingsKey,JSON.stringify(r.settings)),r.settings}catch(n){console.warn("从数据库获取设置失败:",n)}const t=JSON.parse(localStorage.getItem(this.settingsKey)||"{}");return{autoBackup:t.autoBackup??!0,backupInterval:t.backupInterval??10,compressionEnabled:t.compressionEnabled??!0}}catch(t){return console.error("获取备份设置失败:",t),this.getDefaultSettings()}}async saveSettings(t){try{localStorage.setItem(this.settingsKey,JSON.stringify(t));try{const r=await(await fetch("/api/backup/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();r.success||console.warn("保存设置到数据库失败:",r.error)}catch(n){console.warn("保存设置到数据库失败:",n)}return await this.createHistoryRecord([],"settings","manual"),!0}catch(n){return console.error("保存备份设置失败:",n),!1}}getDefaultSettings(){return{autoBackup:!0,backupInterval:10,compressionEnabled:!0}}async getAllNotes(){try{return await Ci.getAllNotes()}catch(t){console.error("从数据库获取笔记失败:",t);try{return JSON.parse(localStorage.getItem("notes")||"[]")}catch(n){return console.error("本地存储也失败:",n),[]}}}async extractAndDownloadMediaFiles(t){const n=[],r=new Set;console.log("开始提取媒体文件，笔记数量:",t.length);for(const s of t){if(!s.content){console.log(`笔记 ${s.id} 没有内容，跳过`);continue}console.log(`处理笔记 ${s.id}，内容长度:`,s.content.length);const o=/!\[.*?\]\(([^)]+)\)/g;let i;for(;(i=o.exec(s.content))!==null;){const l=i[1];console.log("发现图片链接:",l);let u=!1,f=l,m="";if(l.startsWith("/uploads/"))u=!0,m=`d:\\memeos\\server${l.replace(/\//g,"\\")}`;else if(l.startsWith("uploads/"))u=!0,f="/"+l,m=`d:\\memeos\\server\\uploads\\${l.split("/").pop()}`;else if(l.includes("/uploads/")){u=!0;try{m=`d:\\memeos\\server${new URL(l).pathname.replace(/\//g,"\\")}`}catch{console.warn("无法解析URL:",l)}}else l.match(/\.(jpg|jpeg|png|gif|webp|bmp|svg|mp4|mp3|wav|avi|mov|pdf|doc|docx|xls|xlsx|ppt|pptx)$/i)&&(u=!0,!l.startsWith("http")&&!l.startsWith("/")&&(f="/uploads/"+l,m=`d:\\memeos\\server\\uploads\\${l}`));if(u&&!r.has(l)){r.add(l),console.log("处理媒体文件:",f),console.log("本地文件路径:",m);try{console.log("尝试通过服务器API获取文件:",f);const g=`${zn.replace("/api","")}${f}`;console.log("服务器API URL:",g);const p=await fetch(g);if(p.ok){const b=await p.arrayBuffer(),v=btoa(new Uint8Array(b).reduce((E,w)=>E+String.fromCharCode(w),""));let T;f.startsWith("http")?T=new URL(f).pathname.split("/").pop():T=f.split("/").pop();const y=p.headers.get("content-type")||this.getContentType(T);n.push({filename:T,url:f,content:v,contentType:y,size:b.byteLength}),console.log(`已下载媒体文件: ${T}, 大小: ${b.byteLength} bytes, 类型: ${y}`)}else console.error(`下载媒体文件失败，HTTP状态: ${p.status}, URL: ${g}`)}catch(h){console.error(`下载媒体文件失败 ${f}:`,h)}}else console.log("跳过链接:",l,"原因:",u?"已处理":"不符合处理条件")}}return console.log("媒体文件提取完成，共找到",n.length,"个媒体文件"),n}async createBackup(t=null,n="manual"){try{const r=await this.getSettings(),s=await this.getAllNotes();let o=t?s.filter(h=>h.id===t):s;if(o.length===0)throw new Error("没有找到需要备份的笔记");console.log("开始提取媒体文件，笔记数量:",o.length);const i=await this.extractAndDownloadMediaFiles(o);console.log("媒体文件提取完成，数量:",i.length),i.length>0?(console.log("媒体文件详情:"),i.forEach((h,g)=>{console.log(`${g+1}. ${h.filename} (${h.contentType}, ${h.size} bytes)`)})):console.log("未找到任何媒体文件");const l={id:Date.now().toString(),timestamp:new Date().toISOString(),type:n,version:"2.0",notes:o.map(h=>({id:h.id,title:h.title||"",content:h.content,tags:h.tags||[],created_at:h.created_at,updated_at:h.updated_at,is_pinned:h.is_pinned||!1,mood:h.mood,weather:h.weather,content_hash:this.generateContentHash(h)})),mediaFiles:i};console.log("备份数据创建完成，包含",l.notes.length,"个笔记和",l.mediaFiles.length,"个媒体文件"),l.hash=Q_(l.notes);let u=l,f=l.id,m=!1;try{const h=await Ci.createBackup(u);h.success&&h.backupId?(f=h.backupId,u.id=h.backupId,m=!0,console.log("备份已成功保存到服务器，ID:",f)):console.warn("服务器返回失败响应:",h)}catch(h){console.warn("同步备份到服务器失败:",h)}if(!m){console.warn("服务器不可用，使用本地存储作为后备");const h=await this.getAllBackups(),g=h.findIndex(b=>b.id===f);g!==-1?h[g]=u:h.unshift(u);const p=r.maxBackupsPerNote*(t?1:s.length);h.length>p&&h.splice(p),console.log("保存备份到本地存储:",h),localStorage.setItem(this.backupKey,JSON.stringify(h))}return await this.createHistoryRecord(o,n,n),{success:!0,backupId:l.id,notesCount:o.length}}catch(r){return console.error("创建备份失败:",r),{success:!1,error:r.message}}}async getAllBackups(){try{try{const n=await Ci.getBackups();if(n.success&&n.backups){console.log("服务器备份数据:",n.backups);const r=n.backups.map(s=>{var o,i,l,u,f,m;return{...s,id:s.backup_id||s.id,timestamp:s.createdAt||s.timestamp||s.created_at,type:s.backupType||s.backup_type||s.type||"manual",notes:((o=s.data)==null?void 0:o.notes)||s.notes||[],tags:((i=s.data)==null?void 0:i.tags)||s.tags||[],content:((f=(u=(l=s.data)==null?void 0:l.notes)==null?void 0:u[0])==null?void 0:f.content)||s.content||"",mediaFiles:((m=s.data)==null?void 0:m.mediaFiles)||s.mediaFiles||s.media_files||[],created_at:s.createdAt||s.created_at||s.timestamp,backup_type:s.backupType||s.backup_type||s.type||"manual"}});return r.sort((s,o)=>new Date(o.created_at||o.timestamp)-new Date(s.created_at||s.timestamp)),console.log("标准化后的服务器备份数据:",r),r}}catch(n){console.warn("从服务器获取备份失败:",n)}console.warn("服务器不可用，使用本地缓存作为后备");const t=JSON.parse(localStorage.getItem(this.backupKey)||"[]");return console.log("本地缓存备份数据:",t),t}catch(t){return console.error("获取备份失败:",t),[]}}async restoreBackup(t){var n;try{const r=await this.getSettings(),o=(await this.getAllBackups()).find(f=>f.id===t);if(!o)throw new Error("备份不存在");let i={...o};if(i.compressed&&typeof i.notes=="string")try{i.notes=JSON.parse(Up(i.notes))}catch(f){console.warn("解压备份数据失败，可能已经是解压状态:",f)}else Array.isArray(i.notes)||(i.notes=((n=i.data)==null?void 0:n.notes)||[]);if(i.hash&&!CU(i.notes,i.hash))throw new Error("备份数据完整性验证失败");i.mediaFiles&&i.mediaFiles.length>0&&await this.restoreMediaFiles(i.mediaFiles);const l=[],u=await this.getAllNotes();for(const f of i.notes)try{const m=this.generateContentHash(f);if(u.some(g=>this.generateContentHash(g)===m)){console.log(`笔记内容已存在（哈希: ${m.substring(0,8)}...），跳过恢复`),l.push({id:f.id,action:"skipped",success:!0,reason:"duplicate_content"});continue}await Ci.createNote(f),l.push({id:f.id,action:"created",success:!0})}catch(m){console.error(`恢复笔记 ${f.id} 失败:`,m),l.push({id:f.id,action:"failed",success:!1,error:m.message})}try{const f=await this.getAllNotes();i.notes.forEach(m=>{const h=this.generateContentHash(m);f.some(p=>this.generateContentHash(p)===h)||f.push(m)}),localStorage.setItem("notes",JSON.stringify(f))}catch(f){console.warn("更新本地缓存失败:",f)}try{await Ci.restoreBackup(t)}catch(f){console.warn("从服务器恢复备份失败，仅本地恢复:",f)}return await this.createHistoryRecord(i.notes,"restore","manual"),{success:!0,backupId:t,results:l,totalNotes:i.notes.length,successCount:l.filter(f=>f.success).length,failureCount:l.filter(f=>!f.success).length}}catch(r){return console.error("恢复备份失败:",r),{success:!1,error:r.message}}}async syncWithServer(){try{const t=JSON.parse(localStorage.getItem(this.backupKey)||"[]");try{const n=await Ci.getBackups();if(n.success&&n.backups){const r=new Set(n.backups.map(o=>o.id)),s=t.filter(o=>o.id.includes("backup_")&&!o.id.startsWith(Date.now().toString())&&!r.has(o.id));if(s.length>0){console.log("同步清理孤立的本地备份:",s.map(i=>i.id));const o=t.filter(i=>!(i.id.includes("backup_")&&!i.id.startsWith(Date.now().toString()))||r.has(i.id));return localStorage.setItem(this.backupKey,JSON.stringify(o)),console.log("清理完成，保留备份数量:",o.length),{success:!0,cleanedCount:s.length,remainingCount:o.length,message:`已清理 ${s.length} 个孤立的本地备份`}}else return console.log("没有发现孤立的本地备份"),{success:!0,cleanedCount:0,remainingCount:t.length,message:"没有发现孤立的本地备份"}}}catch(n){return console.warn("从服务器获取备份失败，无法同步清理:",n),{success:!1,error:"无法连接到服务器"}}}catch(t){return console.error("同步服务器备份失败:",t),{success:!1,error:t.message}}}async deleteBackup(t){try{const n=await this.getAllBackups(),r=n.find(o=>o.id===t);if(!r)throw new Error("备份不存在");let s=!1;try{const o=await Ci.deleteBackup(t);o.success?(s=!0,console.log("备份已从服务器成功删除，ID:",t)):console.warn("服务器删除备份失败:",o.message||"未知错误")}catch(o){console.warn("服务器删除备份失败:",o)}if(!s){console.warn("服务器不可用，删除本地存储中的备份");const o=n.filter(i=>i.id!==t);localStorage.setItem(this.backupKey,JSON.stringify(o))}return await this.createHistoryRecord(r.notes||[],"delete","manual"),{success:!0}}catch(n){return console.error("删除备份失败:",n),{success:!1,error:n.message}}}async exportBackup(t=null){var n;try{const r=await this.getSettings();let s;if(t){const v=(await this.getAllBackups()).find(T=>T.id===t);if(!v)throw new Error("备份不存在");s=[v]}else{const b=await this.getAllBackups(),v=[],T=[],y=new Set;for(const w of b){if(w.notes&&w.notes.length>0)for(const I of w.notes)v.find(j=>j.id===I.id)||v.push(I);if(w.mediaFiles&&w.mediaFiles.length>0)for(const I of w.mediaFiles)y.has(I.url)||(y.add(I.url),T.push(I))}s=[{id:`full_backup_${Date.now()}`,timestamp:new Date().toISOString(),type:"full_export",version:"2.0",notes:v,mediaFiles:T,description:"全量备份导出",backupTime:new Date().toISOString(),notesCount:v.length}],console.log(`创建全量备份，包含 ${v.length} 个笔记和 ${T.length} 个媒体文件`)}const o=s.map(b=>{let v={...b};return v.compressed&&(v.notes=JSON.parse(Up(v.notes))),v}),i={},l=Ch(No(new Date,"Asia/Shanghai"),"yyyy-MM-dd-HH-mm-ss"),u=`media_files_${l}/`;let f=0;const m={};console.log("开始处理媒体文件，备份数量:",o.length);for(const b of o)if(console.log(`处理备份 ${b.id}，媒体文件数量:`,((n=b.mediaFiles)==null?void 0:n.length)||0),b.mediaFiles&&b.mediaFiles.length>0)for(const v of b.mediaFiles){console.log(`处理媒体文件: ${v.filename}, 有content字段: ${!!v.content}`);try{if(!v.content){console.warn(`媒体文件 ${v.filename} 没有content字段，跳过`);continue}if(typeof v.content!="string"||v.content.length===0){console.warn(`媒体文件 ${v.filename} 的content字段无效，跳过`);continue}console.log(`媒体文件 ${v.filename} content长度: ${v.content.length}`);const T=atob(v.content),y=new Uint8Array(T.length);for(let I=0;I<T.length;I++)y[I]=T.charCodeAt(I);console.log(`媒体文件 ${v.filename} 转换为二进制数据，大小: ${y.length} bytes`);const E=new Blob([y],{type:v.contentType}),w=u+v.filename;i[w]=E,f++,m[v.filename]={originalUrl:v.url,contentType:v.contentType,size:v.size,filePath:w},console.log(`已添加媒体文件到导出: ${v.filename} (${w})`)}catch(T){console.error(`处理媒体文件失败 ${v.filename}:`,T)}}console.log("媒体文件处理完成，总共添加:",f,"个文件"),f>0&&(i[u+"file_list.json"]=JSON.stringify(m,null,2));const h=o.map(b=>{let v={...b};return v.mediaFiles&&v.mediaFiles.length>0&&(v.mediaFiles=v.mediaFiles.map(T=>{const{content:y,...E}=T;return E})),v});i[`灰灰笔记备份_${l}.json`]=JSON.stringify(h,null,2),i["README.txt"]=`灰灰笔记备份导出
========================================

导出时间: ${Ch(No(new Date,"Asia/Shanghai"),"yyyy年MM月dd日 HH:mm:ss",{locale:Rn})}
备份数量: ${o.length}
媒体文件数量: ${f}
包含格式: JSON

${f>0?`媒体文件目录: ${u}
----------------------------------------
`:""}
使用说明:
========================================

1. 主要文件:
   - 灰灰笔记备份_${l}.json: 包含所有笔记数据的JSON文件
${f>0?`   - ${u}: 媒体文件文件夹，包含所有图片等附件
   - ${u}file_list.json: 媒体文件清单，包含文件信息映射
`:""}

2. 恢复步骤:
   a. 使用JSON文件进行笔记数据恢复
${f>0?`   b. 媒体文件会自动从 ${u} 目录中恢复
   c. 恢复时会跳过已存在的笔记，只恢复新的笔记
`:""}

3. 媒体文件结构:
${f>0?`   - 所有媒体文件都存储在 ${u} 文件夹中
   - 文件保持原始格式和名称
   - file_list.json 包含文件映射信息
   - 支持的格式: 图片、音频、视频等媒体文件
`:`   - 本次备份不包含媒体文件
`}

4. 注意事项:
   - 备份文件采用ZIP格式压缩
   - 恢复时需要网络连接以重新上传媒体文件
   - 相同的笔记在恢复时会被跳过，避免重复
   - 媒体文件以原始二进制格式存储，不包含在JSON中

此备份由增强备份管理器生成
生成时间: ${new Date().toLocaleString("zh-CN")}
`,await this.createAndDownloadZip(i,`灰灰笔记备份_${l}.zip`);const g=o.flatMap(b=>b.notes||[]),p=t?"export_single":"export_all";return await this.createHistoryRecord(g,p,"manual"),{success:!0}}catch(r){return console.error("导出备份失败:",r),{success:!1,error:r.message}}}async createAndDownloadZip(t,n){try{const r=new jb;for(const[l,u]of Object.entries(t))r.file(l,u);const s=await r.generateAsync({type:"blob"}),o=URL.createObjectURL(s),i=document.createElement("a");return i.href=o,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o),{success:!0}}catch(r){return console.error("创建ZIP文件失败:",r),{success:!1,error:r.message}}}async importZipBackup(t){try{console.log("开始导入ZIP备份文件:",t.name);const r=await new jb().loadAsync(t),s=Object.keys(r.files).filter(b=>b.endsWith(".json")&&!b.includes("file_list.json"));if(s.length===0)throw new Error("ZIP文件中未找到有效的JSON备份文件");console.log("找到JSON文件:",s);const o=s[0],i=await r.file(o).async("text");let l;try{l=JSON.parse(i)}catch(b){throw new Error("JSON解析失败: "+b.message)}const u=[],f=Object.keys(r.files).filter(b=>b.includes("media_files_")&&b.endsWith("/"));if(console.log("找到媒体文件目录:",f),f.length>0){const b=f[0],v=Object.keys(r.files).filter(y=>y.startsWith(b)&&!y.endsWith("/")&&!y.endsWith("file_list.json"));console.log("找到媒体文件:",v);let T={};try{const y=b+"file_list.json";if(r.files[y]){const E=await r.file(y).async("text");T=JSON.parse(E)}}catch(y){console.warn("读取媒体文件清单失败:",y)}for(const y of v)try{const E=await r.file(y).async("arraybuffer"),w=btoa(new Uint8Array(E).reduce((_,C)=>_+String.fromCharCode(C),"")),I=y.split("/").pop(),j=T[I]||{};u.push({filename:I,url:j.originalUrl||`/uploads/${I}`,content:w,contentType:j.contentType||this.getContentType(I),size:E.byteLength}),console.log(`已处理媒体文件: ${I}, 大小: ${E.byteLength} bytes`)}catch(E){console.error(`处理媒体文件失败 ${y}:`,E)}}const m=Array.isArray(l)?l:[l];for(const b of m)u.length>0&&(b.mediaFiles=u);console.log(`ZIP导入处理完成，包含 ${m.length} 个备份和 ${u.length} 个媒体文件`);const h=await this.processImportData(m);let g=0,p=0;return h.forEach(b=>{if(b.results){const v=b.results.filter(y=>y.success&&y.action==="created").length,T=b.results.filter(y=>y.success&&y.action==="skipped").length;g+=v,p+=T}}),{success:!0,importedNotesCount:g,skippedCount:p,details:h}}catch(n){return console.error("导入ZIP备份失败:",n),{success:!1,error:n.message}}}getContentType(t){const n=t.split(".").pop().toLowerCase();return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp",webp:"image/webp",svg:"image/svg+xml",mp4:"video/mp4",webm:"video/webm",mov:"video/quicktime",avi:"video/x-msvideo",mp3:"audio/mpeg",wav:"audio/wav",ogg:"audio/ogg",pdf:"application/pdf",txt:"text/plain",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}[n]||"application/octet-stream"}async createNoteEditHistory(t,n,r,s="edit"){try{const o=`note_history_${t}`,i=JSON.parse(localStorage.getItem(o)||"[]"),l={id:Date.now().toString(),timestamp:new Date().toISOString(),action:s,content:n,tags:r||[]};i.unshift(l);const u=new Date;u.setDate(u.getDate()-30);const f=i.filter(m=>new Date(m.timestamp)>u);return localStorage.setItem(o,JSON.stringify(f)),{success:!0}}catch(o){return console.error("创建笔记编辑历史记录失败:",o),{success:!1,error:o.message}}}getNoteHistory(t){try{const n=`note_history_${t}`;return JSON.parse(localStorage.getItem(n)||"[]")}catch(n){return console.error("获取笔记历史记录失败:",n),[]}}async createHistoryRecord(t,n,r=null){try{const s=await this.getSettings(),o=JSON.parse(localStorage.getItem(this.historyKey)||"[]");let i="";switch(n){case"backup":i=`创建完整备份，备份了 ${t.length} 条笔记`;break;case"restore":i=`恢复备份，恢复了 ${t.length} 条笔记`;break;case"delete":i=`删除备份，删除了 ${t.length} 条笔记的备份数据`;break;case"settings":i="保存备份设置";break;case"reset_settings":i="重置设置到默认值";break;case"clear_history":i="清除所有历史记录";break;case"export_single":i=`导出单个备份，包含 ${t.length} 条笔记`;break;case"export_all":i=`导出所有备份，包含 ${t.length} 条笔记`;break;case"enable_auto_backup":i="启用自动备份功能";break;default:i=`${n} 操作，涉及 ${t.length} 条笔记`}r==="auto"?i+="（自动备份）":r==="manual"&&(i+="（手动操作）");const l={id:Date.now().toString(),timestamp:new Date().toISOString(),action:n,type:r,description:i,notesCount:t.length,notes:t.map(m=>({id:m.id,title:m.content?m.content.substring(0,50)+(m.content.length>50?"...":""):"无标题",tags:m.tags||[],created_at:m.created_at,updated_at:m.updated_at}))};o.unshift(l);const u=new Date;u.setDate(u.getDate()-s.historyRetentionDays);const f=o.filter(m=>new Date(m.timestamp)>u);return localStorage.setItem(this.historyKey,JSON.stringify(f)),{success:!0}}catch(s){return console.error("创建历史记录失败:",s),{success:!1,error:s.message}}}async restoreMediaFiles(t){const n=[];for(const r of t)try{console.log(`处理媒体文件: ${r.filename}`);const s=await fetch(`${zn}/upload/check?filename=${encodeURIComponent(r.filename)}`);if(s.ok){const f=await s.json();if(f.exists){console.log(`文件 ${r.filename} 已存在，跳过上传`),n.push({filename:r.filename,originalUrl:r.url,newUrl:f.url,success:!0,skipped:!0});continue}}const o=atob(r.content),i=new Uint8Array(o.length);for(let f=0;f<o.length;f++)i[f]=o.charCodeAt(f);const l=new File([i],r.filename,{type:r.contentType});console.log(`上传文件: ${r.filename} (${r.contentType}, ${i.length} bytes)`);const u=await fetch(`${zn}/upload`,{method:"POST",body:this.createFormData(l)});if(u.ok){const f=await u.json();n.push({filename:r.filename,originalUrl:r.url,newUrl:f.url,success:!0,skipped:!1}),console.log(`媒体文件恢复成功: ${r.filename} -> ${f.url}`)}else throw new Error(`上传失败: ${u.status}`)}catch(s){console.error(`恢复媒体文件失败 ${r.filename}:`,s),n.push({filename:r.filename,success:!1,error:s.message})}return n}createFormData(t){const n=new FormData;return n.append("file",t),n}updateImagePathsInContent(t,n){let r=t;const s=/!\[([^\]]*)\]\(([^)]+)\)/g;r=r.replace(s,(l,u,f)=>n[f]?`![${u}](${n[f]})`:l);const o=/\[([^\]]*)\]\(([^)]+)\)/g;r=r.replace(o,(l,u,f)=>n[f]&&!l.startsWith("![")?`[${u}](${n[f]})`:l);const i=/(https?:\/\/[^\s\)]+)/g;return r=r.replace(i,(l,u)=>n[u]?n[u]:l),r}async createSystemHistoryRecord(t,n){try{const r=await this.getSettings(),s=JSON.parse(localStorage.getItem(this.historyKey)||"[]"),o={id:Date.now().toString(),timestamp:new Date().toISOString(),action:n,notes:t.map(u=>({id:u.id,title:u.content.substring(0,50)+(u.content.length>50?"...":""),tags:u.tags||[]}))};s.unshift(o);const i=new Date;i.setDate(i.getDate()-r.historyRetentionDays);const l=s.filter(u=>new Date(u.timestamp)>i);return localStorage.setItem(this.historyKey,JSON.stringify(l)),{success:!0}}catch(r){return console.error("创建系统历史记录失败:",r),{success:!1,error:r.message}}}getHistory(t=null){try{const n=JSON.parse(localStorage.getItem(this.historyKey)||"[]");return t?n.filter(r=>r.notes.some(s=>s.id===t)):n}catch(n){return console.error("获取历史记录失败:",n),[]}}getSystemHistory(){try{return JSON.parse(localStorage.getItem(this.historyKey)||"[]")}catch(t){return console.error("获取系统历史记录失败:",t),[]}}async getAllNotesHistorySummary(){try{const t=await this.getAllNotes(),n={};for(const r of t){const s=this.getNoteHistory(r.id);n[r.id]={noteId:r.id,noteTitle:r.content.substring(0,50)+(r.content.length>50?"...":""),historyCount:s.length,latestEdit:s.length>0?s[0].timestamp:r.updated_at,history:s.slice(0,10)}}return n}catch(t){return console.error("获取所有笔记历史记录摘要失败:",t),{}}}async checkAutoBackup(){try{const t=await this.getSettings();if(!t.autoBackup)return{success:!0,message:"自动备份已禁用"};const n=localStorage.getItem("lastBackupTime"),r=new Date;if(n){const o=new Date(n),i=r-o,l=t.backupInterval*60*1e3;if(i<l)return{success:!0,message:"还未到下次备份时间"}}const s=await this.createBackup(null,"auto");return s.success?(localStorage.setItem("lastBackupTime",r.toISOString()),await this.createHistoryRecord([],"enable_auto_backup","auto"),{success:!0,message:`自动备份完成，备份了 ${s.notesCount} 条笔记`}):{success:!1,message:`自动备份失败: ${s.error}`}}catch(t){return console.error("自动备份检查失败:",t),{success:!1,error:t.message}}}async getBackupStats(){try{const t=await this.getAllBackups(),n=this.getHistory();let r=new Set;return t.forEach(o=>{if(o.notes){let i=o.notes;if(o.compressed&&typeof i=="string")try{i=JSON.parse(Up(i))}catch(l){console.warn("解压缩备份数据失败:",l);return}Array.isArray(i)&&i.forEach(l=>{l.id&&r.add(l.id)})}}),{success:!0,stats:{totalBackups:t.length,totalHistory:n.length,totalNotes:r.size,lastBackupTime:t.length>0?t[0].timestamp:null,backupTypes:{manual:t.filter(o=>o.type==="manual").length,auto:t.filter(o=>o.type==="auto").length,restore:n.filter(o=>o.action==="restore").length},storageSize:new Blob([JSON.stringify(t)]).size}}}catch(t){return console.error("获取统计信息失败:",t),{success:!1,error:t.message}}}async clearHistory(){try{return localStorage.removeItem(this.historyKey),await this.createHistoryRecord([],"clear_history","manual"),{success:!0,message:"历史记录已清除"}}catch(t){return console.error("清除历史记录失败:",t),{success:!1,error:t.message}}}async resetSettings(){try{const t=this.getDefaultSettings();return localStorage.setItem(this.settingsKey,JSON.stringify(t)),await this.createHistoryRecord([],"reset_settings","manual"),{success:!0,message:"设置已重置"}}catch(t){return console.error("重置设置失败:",t),{success:!1,error:t.message}}}async importBackups(t){try{let n;if(t instanceof File)n=[t];else if(Array.isArray(t))n=t;else throw new Error("请选择有效的备份文件");if(n.length===0)throw new Error("请选择有效的备份文件");const r=[];let s=0,o=0;for(const u of n){if(!(u instanceof File)){console.warn("跳过无效文件:",u);continue}const f=u.name.toLowerCase();if(!f.endsWith(".json")&&!f.endsWith(".zip")){console.warn("跳过不支持的文件格式:",f);continue}try{if(f.endsWith(".zip")){const b=await this.importZipBackup(u);b.success&&(r.push(...b.details||[]),s+=b.importedNotesCount||0,o+=b.skippedCount||0);continue}console.log("开始读取文件:",u.name,"文件大小:",u.size,"字节");let m;try{m=await this.readFileAsText(u),console.log("文件读取成功，内容长度:",m.length,"字符"),console.log("文件内容前100个字符:",m.substring(0,100))}catch(b){console.error("读取文件失败:",u.name,b);continue}if(!this.isValidJSON(m)){console.error("JSON格式不正确:",u.name);continue}console.log("开始解析JSON数据...");let h;try{h=JSON.parse(m),console.log("JSON解析成功，数据类型:",typeof h,"是否为数组:",Array.isArray(h)),Array.isArray(h)?console.log("数组长度:",h.length):h&&h.notes&&console.log("笔记数量:",h.notes.length)}catch(b){console.error("JSON解析失败:",u.name,b);continue}console.log("开始验证备份数据结构...");const g=this.validateBackupData(h);if(console.log("验证结果:",g),!g.valid){console.error("数据结构验证失败:",u.name,g.error);continue}console.log("数据结构验证通过");const p=await this.processImportData(h);r.push(...p),p.forEach(b=>{if(console.log("处理导入结果:",b),console.log("结果详情:",{backupId:b.backupId,success:b.success,hasResults:!!b.results,resultsLength:b.results?b.results.length:0,results:b.results}),b.results){const v=b.results.filter(E=>E.success&&E.action==="created").length,T=b.results.filter(E=>E.success&&E.action==="skipped").length,y=b.results.filter(E=>!E.success).length;console.log(`创建笔记数: ${v}, 跳过笔记数: ${T}, 失败笔记数: ${y}`),console.log("所有结果详情:",b.results),s+=v,o+=T}else console.log("结果中没有results字段")}),console.log(`当前总计 - 导入: ${s}, 跳过: ${o}`)}catch(m){console.error("处理文件失败:",u.name,m)}}if(console.log(`最终统计 - 导入: ${s}, 跳过: ${o}`),r.length===0)throw console.log("没有成功处理任何备份文件"),new Error("备份文件格式不正确或数据验证失败，请检查备份文件是否完整");const i=r.filter(u=>!u.success);if(i.length===r.length){const u=i.map(f=>f.error).join("; ");throw new Error(`导入失败: ${u}`)}s===0&&(o>0?console.log("所有笔记都已存在，跳过了重复笔记"):console.log("没有导入任何笔记，但备份文件处理成功"));const l=r.flatMap(u=>u.notes||[]);return await this.createHistoryRecord(l,"import","manual"),{success:!0,message:`成功导入 ${r.length} 个备份`,importedNotesCount:s,skippedCount:o,details:r}}catch(n){return console.error("导入备份失败:",n),{success:!1,error:n.message}}}async readFileAsText(t){return new Promise((n,r)=>{const s=new FileReader;s.onload=o=>n(o.target.result),s.onerror=o=>r(new Error("文件读取失败")),s.readAsText(t,"UTF-8")})}isValidJSON(t){try{return JSON.parse(t),!0}catch{return!1}}validateBackupData(t){if(Array.isArray(t)){if(t.length===0)return{valid:!1,error:"备份数据为空"};for(let n=0;n<t.length;n++){const r=t[n],s=this.validateSingleBackup(r);if(!s.valid)return{valid:!1,error:`第 ${n+1} 个备份验证失败: ${s.error}`}}return{valid:!0}}else return typeof t=="object"&&t!==null?this.validateSingleBackup(t):{valid:!1,error:"数据格式不正确，应该是对象或数组"}}validateSingleBackup(t){const n=["id","timestamp","notes"];for(const r of n)if(!t[r])return{valid:!1,error:`缺少必需字段: ${r}`};if(!Array.isArray(t.notes))return{valid:!1,error:"notes字段必须是数组"};for(let r=0;r<t.notes.length;r++){const s=t.notes[r];if(!s.id||!s.content)return{valid:!1,error:`第 ${r+1} 个笔记缺少id或content字段`}}try{new Date(t.timestamp)}catch{return{valid:!1,error:"timestamp格式不正确"}}return typeof t.id!="string"||t.id.trim()===""?{valid:!1,error:"id必须是有效的字符串"}:{valid:!0}}async processImportData(t){const n=[],r=Array.isArray(t)?t:[t];console.log("开始处理导入数据，备份数量:",r.length);let s=[],o=new Set;try{s=await this.getAllNotes(),o=new Set(s.map(i=>i.id)),console.log("获取现有笔记成功，数量:",s.length)}catch(i){console.error("获取现有笔记失败:",i),s=[],o=new Set}for(const i of r)try{const l=await this.importSingleBackup(i,o);n.push(l)}catch(l){console.error("导入单个备份失败:",l),n.push({backupId:i.id,success:!1,error:l.message,notes:[],results:[]})}return n}async calculateFileHash(t){return new Promise((n,r)=>{const s=new FileReader;s.onload=async o=>{try{const i=o.target.result,l=await crypto.subtle.digest("SHA-256",i),f=Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("");n(f)}catch(i){r(i)}},s.onerror=()=>r(new Error("文件读取失败")),s.readAsArrayBuffer(t)})}checkHashExists(t,n){return n.some(r=>r.fileHash===t)}async importBackupToList(t){try{let n;if(t instanceof File)n=[t];else if(Array.isArray(t))n=t;else throw new Error("请选择有效的备份文件");if(n.length===0)throw new Error("请选择有效的备份文件");const r=[],s=this.getStoredBackups(),o=[];for(const i of n){if(!(i instanceof File)){console.warn("跳过无效文件:",i);continue}const l=i.name.toLowerCase();if(!l.endsWith(".json")&&!l.endsWith(".zip")){console.warn("跳过不支持的文件格式:",l);continue}try{console.log("计算文件哈希值:",i.name);let u;try{u=await this.calculateFileHash(i),console.log("文件哈希值:",u)}catch(p){console.error("计算哈希值失败:",i.name,p);continue}if(this.checkHashExists(u,s)){console.warn("文件已存在，跳过:",i.name),o.push({fileName:i.name,reason:"文件内容已存在"});continue}if(l.endsWith(".zip")){const p={id:this.generateBackupId(),name:i.name.replace(".zip",""),timestamp:new Date().toISOString(),fileName:i.name,fileSize:i.size,format:"zip",notesCount:0,isImported:!0,importedAt:new Date().toISOString(),fileHash:u};r.push(p);continue}console.log("开始读取文件:",i.name,"文件大小:",i.size,"字节");let f;try{f=await this.readFileAsText(i),console.log("文件读取成功，内容长度:",f.length,"字符")}catch(p){console.error("读取文件失败:",i.name,p);continue}if(!this.isValidJSON(f)){console.error("JSON格式不正确:",i.name);continue}console.log("开始解析JSON数据...");let m;try{m=JSON.parse(f),console.log("JSON解析成功，数据类型:",typeof m)}catch(p){console.error("JSON解析失败:",i.name,p);continue}console.log("开始验证备份数据结构...");const h=this.validateBackupDataBasic(m);if(console.log("验证结果:",h),!h.valid){console.error("数据结构验证失败:",i.name,h.error);continue}console.log("数据结构验证通过");const g=Array.isArray(m)?m:[m];for(const p of g){const b={id:p.id||this.generateBackupId(),name:p.name||`备份_${new Date().toLocaleDateString()}`,timestamp:p.timestamp||new Date().toISOString(),fileName:i.name,fileSize:i.size,format:"json",notesCount:p.notes?p.notes.length:0,isImported:!0,importedAt:new Date().toISOString(),description:p.description||"",tags:p.tags||[],fileHash:u};r.push(b)}}catch(u){console.error("处理文件失败:",i.name,u)}}if(r.length===0)throw o.length>0?new Error(`所有文件都已存在，跳过了 ${o.length} 个重复文件`):new Error("没有成功导入任何备份文件，请检查文件格式");try{const i=[...s,...r];this.saveStoredBackups(i),console.log("备份信息已保存到本地存储")}catch(i){throw console.error("保存备份信息失败:",i),new Error("保存备份信息失败: "+i.message)}return{success:!0,message:`成功导入 ${r.length} 个备份到列表${o.length>0?`，跳过了 ${o.length} 个重复文件`:""}`,importedBackupsCount:r.length,duplicateFilesCount:o.length,notesCount:r.reduce((i,l)=>i+l.notesCount,0),details:r,duplicates:o}}catch(n){return console.error("导入备份到列表失败:",n),{success:!1,error:n.message}}}validateBackupDataBasic(t){return Array.isArray(t)?t.length===0?{valid:!1,error:"备份数据为空"}:{valid:!0}:typeof t=="object"&&t!==null?t.id||t.timestamp||t.notes?{valid:!0}:{valid:!1,error:"数据格式不正确，缺少基本备份信息"}:{valid:!1,error:"数据格式不正确，应该是对象或数组"}}getStoredBackups(){try{const t=localStorage.getItem("backup_list");return t?JSON.parse(t):[]}catch(t){return console.error("获取存储的备份列表失败:",t),[]}}saveStoredBackups(t){try{localStorage.setItem("backup_list",JSON.stringify(t))}catch(n){throw console.error("保存备份列表失败:",n),n}}generateBackupId(){return"backup_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}async deleteImportedBackup(t){try{const n=this.getStoredBackups(),r=n.findIndex(o=>o.id===t);return r===-1?{success:!1,error:"未找到指定的备份"}:n[r].isImported?(n.splice(r,1),this.saveStoredBackups(n),console.log("成功删除导入的备份:",t),{success:!0,message:"备份删除成功",deletedBackupId:t}):{success:!1,error:"只能删除导入的备份"}}catch(n){return console.error("删除导入的备份失败:",n),{success:!1,error:n.message}}}async importSingleBackup(t,n){var l,u;const r=[],s=[];let o={};if(t.mediaFiles&&t.mediaFiles.length>0)try{(await this.restoreMediaFiles(t.mediaFiles)).forEach(m=>{m.success&&m.originalUrl&&m.newUrl&&(o[m.originalUrl]=m.newUrl)})}catch(f){console.warn("恢复媒体文件失败:",f)}const i=new Set;try{const f=await this.getAllNotes();console.log(`[重复检测] 获取到 ${f.length} 个现有笔记`),f.forEach((m,h)=>{if(m.content){const g=this.generateContentHash(m);i.add(g),h<3&&(console.log(`[重复检测] 现有笔记[${h}] ID: ${m.id}, 哈希: ${g}`),console.log(`[重复检测] 现有笔记[${h}] 内容预览: ${m.content.substring(0,50)}...`))}}),console.log(`[重复检测] 最终获取到 ${i.size} 个现有笔记的内容哈希值`)}catch(f){console.warn("[重复检测] 获取现有笔记哈希值失败:",f)}for(const f of t.notes)try{const m=f.content_hash||this.generateContentHash(f);if(console.log(`[重复检测] 笔记ID: ${f.id}`),console.log(`[重复检测] 笔记内容长度: ${f.content?f.content.length:0}`),console.log(`[重复检测] 生成哈希值: ${m}`),console.log(`[重复检测] 备份中存储的哈希值: ${f.content_hash}`),console.log(`[重复检测] 现有哈希集合大小: ${i.size}`),console.log(`[重复检测] 哈希值是否已存在: ${i.has(m)}`),!i.has(m)&&i.size>0&&(console.log("[重复检测] 前5个现有哈希值:"),Array.from(i).slice(0,5).forEach((g,p)=>{console.log(`[重复检测]   ${p+1}: ${g}`)})),i.has(m)){console.log(`[重复检测] 笔记内容已存在（哈希: ${m.substring(0,8)}...），跳过导入`),r.push({id:f.id,action:"skipped",success:!0,reason:"duplicate_content",hash:m});continue}n.has(f.id)&&(console.log(`笔记ID ${f.id} 已存在，生成新ID`),f.id=this.generateNoteId());let h={...f};Object.keys(o).length>0&&(h.content=this.updateImagePathsInContent(f.content,o)),console.log(`正在创建笔记 ${h.id}, 内容长度: ${h.content.length}`);try{await Ci.createNote(h),console.log(`笔记 ${h.id} 创建成功`),s.push(h),r.push({id:f.id,action:"created",success:!0}),n.add(f.id);const g=this.generateContentHash(h);i.add(g),console.log(`新笔记哈希值 ${g.substring(0,8)}... 已添加到重复检查集合`)}catch(g){console.error(`导入笔记 ${f.id} 失败:`,g),console.error("错误详情:",g.message,"状态码:",(l=g.response)==null?void 0:l.status),r.push({id:f.id,action:"failed",success:!1,error:g.message})}}catch(m){console.error(`导入笔记 ${f.id} 失败:`,m),console.error("错误详情:",m.message,"状态码:",(u=m.response)==null?void 0:u.status),r.push({id:f.id,action:"failed",success:!1,error:m.message})}return{backupId:t.id,success:!0,notes:s,results:r,totalNotes:t.notes.length,successCount:r.filter(f=>f.success).length,failureCount:r.filter(f=>!f.success).length,skippedCount:r.filter(f=>f.action==="skipped").length}}generateContentHash(t){const n={content:t.content,tags:t.tags||[],created_at:t.created_at},r=JSON.stringify(n),s=SU.sha256(r);return console.log("[哈希生成] 输入数据:",{contentLength:t.content?t.content.length:0,tagsCount:(t.tags||[]).length,hasCreatedAt:!!t.created_at}),console.log(`[哈希生成] JSON字符串长度: ${r.length}`),console.log(`[哈希生成] 生成哈希值: ${s}`),s}generateNoteId(){const t=Date.now().toString(36),n=Math.random().toString(36).substring(2,8);return`note_${t}_${n}`}}const wr=new w2,RU=async e=>{var t;try{const n=new w2;if((await n.getSettings()).autoBackup===!1)return;const i=(await n.getAllBackups()).filter(l=>l.noteId===e.id)[0];(!i||((t=i.notes[0])==null?void 0:t.content)!==e.content)&&(await n.createBackup(e.id,"auto")).success&&await n.createHistoryRecord(e.id,{title:e.title||"无标题",content:e.content,action:"edit",timestamp:new Date().toISOString()})}catch(n){console.error("自动备份失败:",n)}},Z_=({initialContent:e="",initialTags:t=[],initialDate:n=null,note:r=null,onSubmit:s,onCancel:o,submitText:i="发布",showCancel:l=!1,isEditMode:u=!1,onNoteClick:f=null,autoFocus:m=!1,cardStyle:h=null,cardSettings:g=null,overrideWidth:p=null})=>{const b=()=>r?r.content||"":e||"",v=()=>{if(r&&Array.isArray(r.tags)&&r.tags.length>0){if(typeof r.tags[0]=="string")return r.tags;if(r.tags[0]&&r.tags[0].name)return r.tags.map(Ce=>Ce.name)}return t||[]},T=()=>r&&r.created_at?new Date(r.created_at):n||new Date,[y,E]=N.useState(b()),[w,I]=N.useState(v()),[j,_]=N.useState(T()),[C,k]=N.useState(new Date),[R,P]=N.useState(!0),[Y,z]=N.useState(!1),[Q,M]=N.useState(""),[le,Ne]=N.useState(null),$=[...rs],[G,H]=N.useState({}),[U,ee]=N.useState(!1),te=N.useRef(null),V=N.useRef(null),xe=N.useRef(null),[we,Le]=N.useState(!1),[Ve,Me]=N.useState(!1),[Ke,De]=N.useState(!1),[nt,ut]=N.useState(!1),[dt,D]=N.useState(!1),[ue,F]=N.useState(!1),[A,L]=N.useState(null),[K,oe]=N.useState(null),ie=N.useRef(null),J=N.useRef(null),[me,be]=N.useState(!1),[ye,je]=N.useState({title:"",placeholder:"",onConfirm:null}),[X,Z]=N.useState(!1),pe=N.useRef(null),ge=N.useRef(null),Ee=N.useRef(null),He=N.useRef(null),Ye=N.useRef(null),pt=N.useRef(null),Qe=async()=>{try{try{const Ce=et.getTagColors();if(Object.keys(Ce).length>0)H(Ce);else{const $e=JSON.parse(localStorage.getItem("tagColors")||"{}");Object.keys($e).length>0&&H($e)}}catch(Ce){console.error("从localConfigManager加载颜色失败，回退到localStorage:",Ce);try{const $e=JSON.parse(localStorage.getItem("tagColors")||"{}");Object.keys($e).length>0&&H($e)}catch($e){console.error("从本地存储加载颜色也失败:",$e)}}try{const Ce=await r1();H($e=>{const Ge={...Ce,...$e};if(Object.keys(Ce).length>0){localStorage.setItem("tagColors",JSON.stringify(Ge));try{Object.entries(Ce).forEach(([rt,Ue])=>{et.setTagColor(rt,Ue)})}catch(rt){console.error("更新localConfigManager失败:",rt)}}return Ge})}catch(Ce){console.log("从服务器获取标签颜色失败，使用本地数据:",Ce)}ee(!0)}catch(Ce){console.error("加载颜色数据失败:",Ce),ee(!0)}};N.useEffect(()=>{Qe()},[]),N.useEffect(()=>{const Ce=setInterval(()=>{k(new Date)},1e3);return()=>{clearInterval(Ce)}},[]),N.useEffect(()=>()=>{xe.current&&clearTimeout(xe.current)},[]);const Et=Ce=>ei.parseContentForMoodAndWeather(Ce);N.useEffect(()=>{if(r){const Ce=r.content||"";E(Ce);const{mood:$e,weather:Ge}=Et(Ce);L($e),oe(Ge),Array.isArray(r.tags)&&r.tags.length>0?typeof r.tags[0]=="string"?I(r.tags):r.tags[0]&&r.tags[0].name?I(r.tags.map(rt=>rt.name)):I([]):I([]),r.created_at&&_(new Date(r.created_at))}},[r]),N.useEffect(()=>{const Ce=async $e=>{const{tagName:Ge,color:rt}=$e.detail||{};if(Ge&&rt){console.log("🎨 NoteEditor收到颜色更新事件:",{tagName:Ge,color:rt}),H(Ue=>{const ne={...Ue,[Ge]:rt};try{localStorage.setItem("tagColors",JSON.stringify(ne)),console.log("🎨 NoteEditor更新本地存储颜色:",{tagName:Ge,color:rt})}catch(fe){console.error("更新本地存储失败:",fe)}try{et.setTagColor(Ge,rt),console.log("🎨 NoteEditor更新localConfigManager颜色:",{tagName:Ge,color:rt})}catch(fe){console.error("更新localConfigManager失败:",fe)}return ne});try{const{fetchTagColors:Ue}=await ic(()=>Promise.resolve().then(()=>s1),void 0),ne=await Ue();H(fe=>{const Se={...ne,...fe};return localStorage.setItem("tagColors",JSON.stringify(Se)),Se})}catch(Ue){console.log("服务器同步失败，使用本地数据:",Ue)}}else try{const Ue=JSON.parse(localStorage.getItem("tagColors")||"{}");H(Ue),console.log("🎨 NoteEditor从本地存储重新加载颜色数据")}catch(Ue){console.error("从本地存储加载颜色失败:",Ue)}};return window.addEventListener("tagColorsUpdated",Ce),()=>{window.removeEventListener("tagColorsUpdated",Ce)}},[]),N.useEffect(()=>{U&&Array.isArray(w)&&w.length>0&&(console.log("🎨 NoteEditor颜色数据和标签都已加载，检查标签颜色:"),w.forEach(Ce=>{const $e=G[Ce];console.log(`🎨 标签 ${Ce} 的颜色值:`,$e)}))},[U,w,G]),N.useEffect(()=>{const Ce=$e=>{const{action:Ge,tagName:rt}=$e.detail||{};Ge==="delete"&&rt&&I(Ue=>Array.isArray(Ue)?Ue.filter(fe=>(typeof fe=="string"?fe:fe.name)!==rt):[])};return window.addEventListener("tagsUpdated",Ce),()=>{window.removeEventListener("tagsUpdated",Ce)}},[]),N.useEffect(()=>{const Ce=$e=>{const{tagName:Ge}=$e.detail||{};Ge&&(Ut(Ge),console.log("已从当前笔记中移除标签:",Ge))};return window.addEventListener("removeTagFromNote",Ce),()=>{window.removeEventListener("removeTagFromNote",Ce)}},[]),N.useEffect(()=>{const{mood:Ce,weather:$e}=Et(y);L(Ce),oe($e)},[y]),N.useEffect(()=>{m&&ie.current&&setTimeout(()=>{var $e,Ge,rt,Ue;($e=ie.current)==null||$e.focus();const Ce=((rt=(Ge=ie.current)==null?void 0:Ge.value)==null?void 0:rt.length)||0;(Ue=ie.current)==null||Ue.setSelectionRange(Ce,Ce)},100)},[m]);const Dt=Ce=>(G[Ce],"text-white border border-theme-border"),$n=Ce=>{const $e=G[Ce];if(!$e)return{backgroundColor:"#3B82F6",color:"#ffffff"};if($e.startsWith("#"))return{backgroundColor:$e,color:"#ffffff"};const Ge=$.find(rt=>rt.value===$e);return Ge?{backgroundColor:Ge.hexColor,color:"#ffffff"}:{backgroundColor:"#3B82F6",color:"#ffffff"}},$t=Ce=>{const $e=ei.addMoodToContent(y,Ce);E($e),L(Ce),Me(!1)},us=Ce=>{const $e=ei.addWeatherToContent(y,Ce);E($e),oe(Ce),De(!1)},Fs=async Ce=>{if(Ce.preventDefault(),console.log("[NoteEditor] handleSubmit 被调用，内容:",y),!y.trim())return;const $e=Array.isArray(w)?w:[];try{const Ge=await s({content:y,tags:$e,created_at:j.toISOString()});if(Ge&&Ge.id)try{console.log("[双向链接] 开始处理双向链接，笔记ID:",Ge.id),console.log("[双向链接] 笔记内容:",y);const rt=await L_(Ge.id,y);if(console.log("[双向链接] 双向链接处理完成:",rt),rt.success&&rt.affectedNoteIds){console.log("[双向链接] 触发受影响笔记的引用数据更新:",rt.affectedNoteIds);const{default:Ue,GLOBAL_EVENTS:ne}=await ic(()=>Promise.resolve().then(()=>cX),void 0);rt.affectedNoteIds.forEach(fe=>{console.log(`[双向链接] 触发笔记${fe}的引用关系更新事件`),Ue.emit(ne.NOTE_REFERENCES_UPDATED,{noteId:fe})})}}catch(rt){console.warn("[双向链接] 处理双向链接失败:",rt)}if(u&&Ge&&Ge.id)try{await RU({id:Ge.id,content:y,tags:$e,created_at:j.toISOString()})}catch(rt){console.warn("自动备份失败:",rt)}return u||(E(""),I([]),_(new Date),P(!1)),Ge}catch(Ge){throw console.error("提交失败:",Ge),Ge}},Ut=Ce=>{I(Array.isArray(w)?w.filter($e=>$e!==Ce):[])},un=()=>{const Ce=`
- [ ] 新任务
`;E($e=>$e+Ce)};N.useState(new Set);const Nn=Ce=>{E(Ce)},kr=async Ce=>{console.log("🔗 选择的笔记:",Ce),console.log("🔗 笔记内容:",Ce.content);const $e=Wn(Ce.content);console.log("🔗 提取的标题:",$e);const Ge=window.location.hostname||"localhost",rt=window.location.port||"3000",Ue=window.location.protocol||"http:";let ne=`> [${$e}](${Ue}//${Ge}:${rt}/note/${Ce.id})`;console.log("🔗 HTTP引用文本:",ne);const fe=ie.current;if(fe){const Se=fe.selectionStart,Ie=fe.selectionEnd,We=y.substring(0,Se),Vt=y.substring(Ie),Sn=We.length>0&&!We.endsWith(`
`),gr=Vt.length>0&&!Vt.startsWith(`
`);Sn&&(ne=`
`+ne,console.log("🔗 添加前置回车后的引用文本:",ne)),gr&&(ne=ne+`
`,console.log("🔗 添加后置回车后的引用文本:",ne));const Dn=y.substring(0,Se)+ne+y.substring(Ie);E(Dn),setTimeout(()=>{fe.focus(),fe.setSelectionRange(Se+ne.length,Se+ne.length)},0)}else E(Se=>Se+`
`+ne+`
`);Z(!1)},Wn=Ce=>{var Ue;const Ge=(Ue=Ce.split(`
`)[0])==null?void 0:Ue.trim();if(Ge!=null&&Ge.startsWith("#"))return Ge.replace(/^#+\s*/,"");if(Ge!=null&&Ge.match(/^[-*+]\s+/)){const ne=Ge.replace(/^[-*+]\s+/,"").trim();return(ne==null?void 0:ne.length)>50?ne.substring(0,50)+"...":ne||"无标题"}const rt=Ge==null?void 0:Ge.replace(/[#*`_~\[\]()]/g,"").trim();return(rt==null?void 0:rt.length)>50?rt.substring(0,50)+"...":rt||"无标题"},Zt=()=>{N.startTransition(()=>{F(!1),Le(!1),Me(!1),De(!1),ut(!1),D(!1),Z(!1)})},or=Ce=>{const $e=ie.current;if($e){const Ge=$e.selectionStart,rt=$e.selectionEnd,Ue=y.substring(0,Ge)+Ce+y.substring(rt);E(Ue),setTimeout(()=>{$e.focus(),$e.setSelectionRange(Ge+Ce.length,Ge+Ce.length)},0)}Le(!1)},Kr=Ce=>Ce.map($e=>$e.name),sn=async Ce=>{console.log("📝 NoteEditor接收到标签选择:",Ce);const $e=Ce.map(Ge=>typeof Ge=="string"?Ge:Ge.name);if(console.log("📝 NoteEditor标准化后的标签:",$e),I($e),u&&r)try{console.log("💾 NoteEditor自动保存标签更改..."),await new Promise(Ge=>setTimeout(Ge,300));try{const Ge=await et.getTags(),rt=Kr(Ge),Ue=$e.filter(ne=>!rt.some(fe=>fe.name===ne));Ue.length>0&&(console.warn("⚠️ 发现缺失的标签:",Ue),await new Promise(ne=>setTimeout(ne,500)))}catch(Ge){console.warn("验证标签存在性失败:",Ge)}await s({content:y,tags:$e,created_at:j.toISOString(),isTagChange:!0}),console.log("✅ NoteEditor标签更改已保存")}catch(Ge){console.error("❌ NoteEditor保存标签更改失败:",Ge)}},ir=(Ce,$e)=>{E(Ce),setTimeout(()=>{ie.current&&(ie.current.focus(),ie.current.setSelectionRange($e,$e))},0)},hn=(Ce,$e)=>{switch($e&&($e.stopPropagation(),$e.preventDefault()),Ce){case"tag":ue?F(!1):(Zt(),F(!0));break;case"edit":nt?ut(!1):(Zt(),ut(!0));break;case"emoji":Zt(),Le(!0);break;case"mood":Zt(),Me(!0);break;case"weather":Zt(),De(!0);break;case"time":Zt(),D(!0);break;case"reference":Zt(),Z(!0);break}},jn=async(Ce,$e=!1,Ge=null)=>{const rt=$e?[Ge]:Ce.target.files;if(!rt||rt.length===0)return;const Ue=rt[0];if(!["image/jpeg","image/png","image/gif","image/webp"].includes(Ue.type)){M("请选择有效的图片格式 (JPEG, PNG, GIF, WebP)");return}try{z(!0),M(""),Ne(null);const fe=await vh(Ue),Se=`![${Ue.name}](${fe.url})
`;E(Ie=>Ie+Se)}catch(fe){console.error("图片上传失败:",fe),M("图片上传失败"),Ne(Ue)}finally{z(!1)}},lo=()=>{le&&jn(null,!0,le)},ds=Ce=>{const $e=document.createElement("div");$e.innerHTML=Ce;const Ge=Ue=>{if(Ue.nodeType===Node.TEXT_NODE)return Ue.textContent;if(Ue.nodeType===Node.ELEMENT_NODE){const ne=Ue.tagName.toLowerCase(),fe=Array.from(Ue.childNodes).map(Ge).join("");switch(ne){case"h1":return`# ${fe}

`;case"h2":return`## ${fe}

`;case"h3":return`### ${fe}

`;case"h4":return`#### ${fe}

`;case"h5":return`##### ${fe}

`;case"h6":return`###### ${fe}

`;case"p":return`${fe}

`;case"br":return`
`;case"strong":case"b":return`**${fe}**`;case"em":case"i":return`*${fe}*`;case"u":return`<u>${fe}</u>`;case"s":case"strike":case"del":return`~~${fe}~~`;case"code":return`\`${fe}\``;case"pre":return`\`\`\`
${fe}
\`\`\`

`;case"blockquote":return`> ${fe}

`;case"ul":return`${fe}
`;case"ol":return`${fe}
`;case"li":const Se=Ue.parentElement;return`${Se&&Se.tagName.toLowerCase()==="ol"?"1. ":"- "}${fe}
`;case"a":const Vt=Ue.getAttribute("href");return Vt?`[${fe}](${Vt})`:fe;case"img":const Sn=Ue.getAttribute("src"),gr=Ue.getAttribute("alt")||"图片";return Sn?`![${gr}](${Sn})`:"";case"table":return`${fe}
`;case"tr":return`${fe}
`;case"td":case"th":return`| ${fe} `;case"div":case"span":return fe;default:return fe}}return""};let rt=Ge($e);return rt=rt.replace(/\n{3,}/g,`

`),rt=rt.trim(),rt},Ln=async Ce=>{const $e=Ce.clipboardData;if(!$e)return;const Ge=$e.items;let rt=!1,Ue=!1;for(let ne=0;ne<Ge.length;ne++){const fe=Ge[ne];if(fe.type.startsWith("image/")){rt=!0;break}fe.type==="text/html"&&(Ue=!0)}if(rt)for(let ne=0;ne<Ge.length;ne++){const fe=Ge[ne];if(fe.type.startsWith("image/")){Ce.preventDefault();const Se=fe.getAsFile();if(Se){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(Se.type)){M("不支持的图片格式。请使用 JPEG、PNG、GIF 或 WebP 格式。");return}try{z(!0),M("");const We=await vh(Se),Vt=Ce.target,Sn=Vt.selectionStart,gr=Vt.selectionEnd,Dn=`![图片](${We.url})`,yr=y.substring(0,Sn)+Dn+y.substring(gr);E(yr),setTimeout(()=>{Vt.focus(),Vt.setSelectionRange(Sn+Dn.length,Sn+Dn.length)},0)}catch(We){console.error("图片上传失败:",We),M("图片上传失败，请重试")}finally{z(!1)}}return}}if(Ue){Ce.preventDefault();try{const ne=$e.getData("text/html");if(ne){const fe=ds(ne),Se=Ce.target,Ie=Se.selectionStart,We=Se.selectionEnd,Vt=y.substring(0,Ie)+fe+y.substring(We);E(Vt),setTimeout(()=>{Se.focus(),Se.setSelectionRange(Ie+fe.length,Ie+fe.length)},0);return}}catch(ne){console.error("富文本粘贴失败:",ne)}}},Bs=()=>g!=null&&g.backgroundColor?g.backgroundColor:fa?"#1F2937":"#e2e8f0";getComputedStyle(document.documentElement).getPropertyValue("--theme-border").trim();const Nc=()=>h&&g?{...h,backgroundColor:Bs()+" !important",borderColor:"var(--theme-border)",padding:"1rem"}:{backgroundColor:Bs()+" !important",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--theme-border)",borderRadius:`${(g==null?void 0:g.borderRadius)||8}px`,boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",padding:"1rem"},D1=()=>{if(p)return p;try{switch(et.getUserPreferences().cardWidth||"70%"){case"50%":return"w-1/2";case"60%":return"w-3/5";case"70%":return"w-[70%]";case"80%":return"w-4/5";case"90%":return"w-[90%]";case"100%":return"w-full";default:return"w-[70%]"}}catch(Ce){return console.error("获取编辑器宽度设置失败:",Ce),"w-[70%]"}},Yr=()=>({color:fa?"#e2e8f0":"#1F2937",opacity:.8}),{darkMode:fa}=ca();return c.jsxs("form",{ref:J,onSubmit:Fs,className:`${D1()} max-w-full mx-auto min-h-card p-6 card-optimized smooth-transition hover:-translate-y-1 hover:shadow-lg note-card`,style:{...Nc()},children:[c.jsx("div",{className:"mb-3",children:c.jsx("textarea",{ref:ie,value:y,onChange:Ce=>Nn(Ce.target.value),onFocus:()=>{},onPaste:Ln,placeholder:"写点什么...",className:"w-full p-3 focus:ring-0 focus:border-primary-500 note-editor-custom-bg note-editor-custom-text show-scrollbar",style:{borderWidth:"1px",borderStyle:"solid",borderColor:"var(--theme-border)",borderRadius:`${(g==null?void 0:g.borderRadius)||8}px`,resize:"none",outline:"none"},rows:R?12:8,required:!0})}),c.jsx("div",{className:"mb-3",children:Array.isArray(w)&&w.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:w.map(Ce=>(console.log("🏷️ 渲染标签:",{tagName:Ce,selectedTags:w}),c.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-sm note-tag-custom ${Dt(Ce)}`,style:$n(Ce),children:["#",Ce,c.jsx("button",{type:"button",onClick:$e=>{$e.stopPropagation(),$e.preventDefault(),Ut(Ce)},className:"ml-1 hover:text-red-500 transition-colors",title:"移除标签",children:c.jsx(wn,{size:14})})]},Ce)))})}),c.jsxs("div",{className:"mb-4 p-3 note-toolbar-custom-bg",style:{borderRadius:`${(g==null?void 0:g.borderRadius)||8}px`,border:"1px solid var(--theme-border)",opacity:.95},children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[c.jsx("div",{className:"relative",children:c.jsxs("button",{ref:pt,type:"button",onClick:Ce=>hn("tag",Ce),className:"flex items-center justify-center gap-1 px-2 py-2 rounded text-sm transition-colors hover:opacity-100 min-w-[3.5rem]",style:Yr(),title:"标签",children:[c.jsx(lc,{size:18}),c.jsx("span",{className:"text-sm font-medium",children:"标签"})]})}),c.jsxs("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),un()},className:"flex items-center justify-center gap-1 px-2 py-2 rounded text-sm transition-colors hover:opacity-100 min-w-[3.5rem]",style:Yr(),title:"任务列表",children:[c.jsx(cm,{size:18}),c.jsx("span",{className:"text-sm font-medium",children:"任务"})]}),c.jsxs("button",{type:"button",onClick:Ce=>{var $e;Ce.stopPropagation(),($e=te.current)==null||$e.click()},className:"flex items-center justify-center gap-1 px-2 py-2 rounded text-sm transition-colors hover:opacity-100 min-w-[3.5rem]",style:Yr(),title:"上传图片",children:[c.jsx(m_,{size:18}),c.jsx("span",{className:"text-sm font-medium",children:"图片"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{ref:V,type:"button",onClick:Ce=>hn("reference",Ce),className:"flex items-center justify-center gap-1 px-2 py-2 rounded text-sm transition-colors hover:opacity-100 min-w-[3.5rem]",style:Yr(),title:"引用笔记",children:[c.jsx(m2,{size:18}),c.jsx("span",{className:"text-sm font-medium",children:"引用"})]}),c.jsx(TU,{isOpen:X,triggerRef:V,onNoteSelect:kr,onClose:()=>Z(!1)})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{ref:pe,type:"button",onClick:Ce=>hn("emoji",Ce),className:"flex items-center justify-center gap-1 px-2 py-2 rounded text-sm transition-colors hover:opacity-100 min-w-[3.5rem]",style:Yr(),title:"表情包",children:[c.jsx(mF,{size:18}),c.jsx("span",{className:"text-sm font-medium",children:"表情"})]}),c.jsx(yU,{isOpen:we,triggerRef:pe,onEmojiSelect:or,onClose:()=>Le(!1)})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{ref:ge,type:"button",onClick:Ce=>hn("mood",Ce),className:"flex items-center justify-center gap-1 px-2 py-2 rounded text-sm transition-colors hover:opacity-100 min-w-[3.5rem]",style:Yr(),title:"心情",children:[c.jsx(h_,{size:18}),c.jsx("span",{className:"text-sm font-medium",children:"心情"})]}),c.jsx(xU,{isOpen:Ve,triggerRef:ge,onMoodSelect:$t,onClose:()=>Me(!1)})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{ref:Ee,type:"button",onClick:Ce=>hn("weather",Ce),className:"flex items-center justify-center gap-1 px-2 py-2 rounded text-sm transition-colors hover:opacity-100 min-w-[3.5rem]",style:Yr(),title:"天气",children:[c.jsx(u_,{size:18}),c.jsx("span",{className:"text-sm font-medium",children:"天气"})]}),c.jsx(vU,{isOpen:Ke,triggerRef:Ee,onWeatherSelect:us,onClose:()=>De(!1)})]}),c.jsxs("button",{ref:He,type:"button",onClick:Ce=>hn("edit",Ce),className:"flex items-center justify-center gap-1 px-2 py-2 rounded text-sm transition-colors hover:opacity-100 min-w-[3.5rem]",style:Yr(),title:"文本格式",children:[c.jsx(d_,{size:18}),c.jsx("span",{className:"text-sm font-medium",children:"格式"})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"h-4 w-px",style:{backgroundColor:"var(--theme-border)",opacity:.5}}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{ref:Ye,type:"button",onClick:Ce=>hn("time",Ce),className:"flex items-center justify-center px-3 py-2 rounded text-sm transition-colors hover:opacity-100 min-w-btn-action",style:Yr(),title:u?"修改时间":"选择日期",children:[c.jsx(tr,{size:18,className:"mr-1"}),c.jsx("span",{className:"text-sm font-medium",children:Ch(C,"HH:mm")})]}),c.jsx(wU,{isOpen:dt,triggerRef:Ye,selectedDate:j,onDateChange:_,onClose:()=>D(!1)})]})]})]}),c.jsx(EU,{isOpen:ue,triggerRef:pt,selectedTags:w,onTagsChange:sn,onClose:()=>F(!1),cardSettings:g,disableOutsideClick:!0}),c.jsx(bU,{isOpen:nt,triggerRef:He,onFormatSelect:ir,onClose:()=>ut(!1),textareaRef:ie,cardSettings:g})]}),c.jsx("input",{type:"file",ref:te,onChange:jn,accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden"}),Y&&c.jsxs("div",{className:"text-slate-500 text-xs mb-3 flex items-center",children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-3 w-3 text-slate-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"正在上传图片..."]}),Q&&c.jsxs("div",{className:"text-red-500 text-xs mb-3 flex items-center gap-2",children:[c.jsx("span",{children:Q}),le&&c.jsx("button",{type:"button",onClick:lo,className:"text-blue-500 hover:text-blue-700 underline text-xs",disabled:Y,children:"重试"})]}),c.jsxs("div",{className:"flex justify-end items-center gap-2 mt-4 pr-1",children:[c.jsx("div",{className:"h-4 w-px mr-2",style:{backgroundColor:"var(--theme-border)",opacity:.5}}),c.jsxs("button",{type:"button",onClick:Ce=>{Ce.stopPropagation(),o&&o()},className:"flex items-center text-sm px-3 py-1.5 font-medium transition-colors duration-200 hover:opacity-80",style:{backgroundColor:"rgba(107, 114, 128, 0.8)",color:"white",borderRadius:(g==null?void 0:g.borderRadius)||"0.375rem"},children:[c.jsx(wn,{className:"mr-1 h-4 w-4"}),"取消"]}),c.jsxs("button",{type:"submit","data-note-editor-submit":!0,onClick:Ce=>{Ce.stopPropagation()},className:"flex items-center text-sm px-3 py-1.5 font-medium transition-colors duration-200 hover:opacity-80",style:{backgroundColor:"rgba(59, 130, 246, 0.8)",color:"white",borderRadius:(g==null?void 0:g.borderRadius)||"0.375rem"},disabled:!y.trim(),children:[c.jsx(p_,{className:"mr-1 h-4 w-4"}),i]})]}),c.jsx(q_,{isOpen:me,onClose:()=>be(!1),onConfirm:ye.onConfirm,title:ye.title,placeholder:ye.placeholder,maxLength:100})]})},Lb=["http","https","mailto","tel"];function IU(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let s=-1;for(;++s<Lb.length;){const o=Lb[s];if(r===o.length&&t.slice(0,o.length).toLowerCase()===o)return t}return s=t.indexOf("?"),s!==-1&&r>s||(s=t.indexOf("#"),s!==-1&&r>s)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var jU=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const e3=ra(jU);function Cu(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Db(e.position):"start"in e||"end"in e?Db(e):"line"in e||"column"in e?By(e):""}function By(e){return Mb(e&&e.line)+":"+Mb(e&&e.column)}function Db(e){return By(e&&e.start)+"-"+By(e&&e.end)}function Mb(e){return e&&typeof e=="number"?e:1}class Ls extends Error{constructor(t,n,r){const s=[null,null];let o={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const i=r.indexOf(":");i===-1?s[1]=r:(s[0]=r.slice(0,i),s[1]=r.slice(i+1))}n&&("type"in n||"position"in n?n.position&&(o=n.position):"start"in n||"end"in n?o=n:("line"in n||"column"in n)&&(o.start=n)),this.name=Cu(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=o.start.line,this.column=o.start.column,this.position=o,this.source=s[0],this.ruleId=s[1],this.file,this.actual,this.expected,this.url,this.note}}Ls.prototype.file="";Ls.prototype.name="";Ls.prototype.reason="";Ls.prototype.message="";Ls.prototype.stack="";Ls.prototype.fatal=null;Ls.prototype.column=null;Ls.prototype.line=null;Ls.prototype.source=null;Ls.prototype.ruleId=null;Ls.prototype.position=null;const yo={basename:LU,dirname:DU,extname:MU,join:PU,sep:"/"};function LU(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');N1(e);let n=0,r=-1,s=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.charCodeAt(s)===47){if(o){n=s+1;break}}else r<0&&(o=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let i=-1,l=t.length-1;for(;s--;)if(e.charCodeAt(s)===47){if(o){n=s+1;break}}else i<0&&(o=!0,i=s+1),l>-1&&(e.charCodeAt(s)===t.charCodeAt(l--)?l<0&&(r=s):(l=-1,r=i));return n===r?r=i:r<0&&(r=e.length),e.slice(n,r)}function DU(e){if(N1(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function MU(e){N1(e);let t=e.length,n=-1,r=0,s=-1,o=0,i;for(;t--;){const l=e.charCodeAt(t);if(l===47){if(i){r=t+1;break}continue}n<0&&(i=!0,n=t+1),l===46?s<0?s=t:o!==1&&(o=1):s>-1&&(o=-1)}return s<0||n<0||o===0||o===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function PU(...e){let t=-1,n;for(;++t<e.length;)N1(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":FU(n)}function FU(e){N1(e);const t=e.charCodeAt(0)===47;let n=BU(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function BU(e,t){let n="",r=0,s=-1,o=0,i=-1,l,u;for(;++i<=e.length;){if(i<e.length)l=e.charCodeAt(i);else{if(l===47)break;l=47}if(l===47){if(!(s===i-1||o===1))if(s!==i-1&&o===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),s=i,o=0;continue}}else if(n.length>0){n="",r=0,s=i,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,i):n=e.slice(s+1,i),r=i-s-1;s=i,o=0}else l===46&&o>-1?o++:o=-1}return n}function N1(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const zU={cwd:UU};function UU(){return"/"}function zy(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function HU(e){if(typeof e=="string")e=new URL(e);else if(!zy(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return $U(e)}function $U(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Hp=["history","path","basename","stem","extname","dirname"];class t3{constructor(t){let n;t?typeof t=="string"||WU(t)?n={value:t}:zy(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=zU.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<Hp.length;){const o=Hp[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let s;for(s in n)Hp.includes(s)||(this[s]=n[s])}get path(){return this.history[this.history.length-1]}set path(t){zy(t)&&(t=HU(t)),Wp(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?yo.dirname(this.path):void 0}set dirname(t){Pb(this.basename,"dirname"),this.path=yo.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?yo.basename(this.path):void 0}set basename(t){Wp(t,"basename"),$p(t,"basename"),this.path=yo.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?yo.extname(this.path):void 0}set extname(t){if($p(t,"extname"),Pb(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=yo.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?yo.basename(this.path,this.extname):void 0}set stem(t){Wp(t,"stem"),$p(t,"stem"),this.path=yo.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,n,r){const s=new Ls(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=null,s}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}}function $p(e,t){if(e&&e.includes(yo.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+yo.sep+"`")}function Wp(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Pb(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function WU(e){return e3(e)}function Fb(e){if(e)throw e}var Of=Object.prototype.hasOwnProperty,n3=Object.prototype.toString,Bb=Object.defineProperty,zb=Object.getOwnPropertyDescriptor,Ub=function(t){return typeof Array.isArray=="function"?Array.isArray(t):n3.call(t)==="[object Array]"},Hb=function(t){if(!t||n3.call(t)!=="[object Object]")return!1;var n=Of.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Of.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||Of.call(t,s)},$b=function(t,n){Bb&&n.name==="__proto__"?Bb(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Wb=function(t,n){if(n==="__proto__")if(Of.call(t,n)){if(zb)return zb(t,n).value}else return;return t[n]},GU=function e(){var t,n,r,s,o,i,l=arguments[0],u=1,f=arguments.length,m=!1;for(typeof l=="boolean"&&(m=l,l=arguments[1]||{},u=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});u<f;++u)if(t=arguments[u],t!=null)for(n in t)r=Wb(l,n),s=Wb(t,n),l!==s&&(m&&s&&(Hb(s)||(o=Ub(s)))?(o?(o=!1,i=r&&Ub(r)?r:[]):i=r&&Hb(r)?r:{},$b(l,{name:n,newValue:e(m,i,s)})):typeof s<"u"&&$b(l,{name:n,newValue:s}));return l};const Gb=ra(GU);function Uy(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function KU(){const e=[],t={run:n,use:r};return t;function n(...s){let o=-1;const i=s.pop();if(typeof i!="function")throw new TypeError("Expected function as last argument, not "+i);l(null,...s);function l(u,...f){const m=e[++o];let h=-1;if(u){i(u);return}for(;++h<s.length;)(f[h]===null||f[h]===void 0)&&(f[h]=s[h]);s=f,m?YU(m,l)(...f):i(null,...f)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function YU(e,t){let n;return r;function r(...i){const l=e.length>i.length;let u;l&&i.push(s);try{u=e.apply(this,i)}catch(f){const m=f;if(l&&n)throw m;return s(m)}l||(u&&u.then&&typeof u.then=="function"?u.then(o,s):u instanceof Error?s(u):o(u))}function s(i,...l){n||(n=!0,t(i,...l))}function o(i){s(null,i)}}const VU=s3().freeze(),r3={}.hasOwnProperty;function s3(){const e=KU(),t=[];let n={},r,s=-1;return o.data=i,o.Parser=void 0,o.Compiler=void 0,o.freeze=l,o.attachers=t,o.use=u,o.parse=f,o.stringify=m,o.run=h,o.runSync=g,o.process=p,o.processSync=b,o;function o(){const v=s3();let T=-1;for(;++T<t.length;)v.use(...t[T]);return v.data(Gb(!0,{},n)),v}function i(v,T){return typeof v=="string"?arguments.length===2?(Yp("data",r),n[v]=T,o):r3.call(n,v)&&n[v]||null:v?(Yp("data",r),n=v,o):n}function l(){if(r)return o;for(;++s<t.length;){const[v,...T]=t[s];if(T[0]===!1)continue;T[0]===!0&&(T[0]=void 0);const y=v.call(o,...T);typeof y=="function"&&e.use(y)}return r=!0,s=Number.POSITIVE_INFINITY,o}function u(v,...T){let y;if(Yp("use",r),v!=null)if(typeof v=="function")j(v,...T);else if(typeof v=="object")Array.isArray(v)?I(v):w(v);else throw new TypeError("Expected usable value, not `"+v+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),o;function E(_){if(typeof _=="function")j(_);else if(typeof _=="object")if(Array.isArray(_)){const[C,...k]=_;j(C,...k)}else w(_);else throw new TypeError("Expected usable value, not `"+_+"`")}function w(_){I(_.plugins),_.settings&&(y=Object.assign(y||{},_.settings))}function I(_){let C=-1;if(_!=null)if(Array.isArray(_))for(;++C<_.length;){const k=_[C];E(k)}else throw new TypeError("Expected a list of plugins, not `"+_+"`")}function j(_,C){let k=-1,R;for(;++k<t.length;)if(t[k][0]===_){R=t[k];break}R?(Uy(R[1])&&Uy(C)&&(C=Gb(!0,R[1],C)),R[1]=C):t.push([...arguments])}}function f(v){o.freeze();const T=Jc(v),y=o.Parser;return Gp("parse",y),Kb(y,"parse")?new y(String(T),T).parse():y(String(T),T)}function m(v,T){o.freeze();const y=Jc(T),E=o.Compiler;return Kp("stringify",E),Yb(v),Kb(E,"compile")?new E(v,y).compile():E(v,y)}function h(v,T,y){if(Yb(v),o.freeze(),!y&&typeof T=="function"&&(y=T,T=void 0),!y)return new Promise(E);E(null,y);function E(w,I){e.run(v,Jc(T),j);function j(_,C,k){C=C||v,_?I(_):w?w(C):y(null,C,k)}}}function g(v,T){let y,E;return o.run(v,T,w),Vb("runSync","run",E),y;function w(I,j){Fb(I),y=j,E=!0}}function p(v,T){if(o.freeze(),Gp("process",o.Parser),Kp("process",o.Compiler),!T)return new Promise(y);y(null,T);function y(E,w){const I=Jc(v);o.run(o.parse(I),I,(_,C,k)=>{if(_||!C||!k)j(_);else{const R=o.stringify(C,k);R==null||(XU(R)?k.value=R:k.result=R),j(_,k)}});function j(_,C){_||!C?w(_):E?E(C):T(null,C)}}}function b(v){let T;o.freeze(),Gp("processSync",o.Parser),Kp("processSync",o.Compiler);const y=Jc(v);return o.process(y,E),Vb("processSync","process",T),y;function E(w){T=!0,Fb(w)}}}function Kb(e,t){return typeof e=="function"&&e.prototype&&(qU(e.prototype)||t in e.prototype)}function qU(e){let t;for(t in e)if(r3.call(e,t))return!0;return!1}function Gp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function Kp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Yp(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Yb(e){if(!Uy(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Vb(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Jc(e){return QU(e)?e:new t3(e)}function QU(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function XU(e){return typeof e=="string"||e3(e)}const JU={};function ZU(e,t){const n=t||JU,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return o3(e,r,s)}function o3(e,t,n){if(eH(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return qb(e.children,t,n)}return Array.isArray(e)?qb(e,t,n):""}function qb(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=o3(e[s],t,n);return r.join("")}function eH(e){return!!(e&&typeof e=="object")}function is(e,t,n,r){const s=e.length;let o=0,i;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);o<r.length;)i=r.slice(o,o+1e4),i.unshift(t,0),e.splice(...i),o+=1e4,t+=1e4}function _s(e,t){return e.length>0?(is(e,e.length,0,t),e):t}const Qb={}.hasOwnProperty;function i3(e){const t={};let n=-1;for(;++n<e.length;)tH(t,e[n]);return t}function tH(e,t){let n;for(n in t){const s=(Qb.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let i;if(o)for(i in o){Qb.call(s,i)||(s[i]=[]);const l=o[i];nH(s[i],Array.isArray(l)?l:l?[l]:[])}}}function nH(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);is(e,0,0,r)}const rH=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Cr=ua(/[A-Za-z]/),mr=ua(/[\dA-Za-z]/),sH=ua(/[#-'*+\--9=?A-Z^-~]/);function _h(e){return e!==null&&(e<32||e===127)}const Hy=ua(/\d/),oH=ua(/[\dA-Fa-f]/),iH=ua(/[!-/:-@[-`{-~]/);function it(e){return e!==null&&e<-2}function Jt(e){return e!==null&&(e<0||e===32)}function kt(e){return e===-2||e===-1||e===32}const mm=ua(rH),Ya=ua(/\s/);function ua(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Mt(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let o=0;return i;function i(u){return kt(u)?(e.enter(n),l(u)):t(u)}function l(u){return kt(u)&&o++<s?(e.consume(u),l):(e.exit(n),t(u))}}const aH={tokenize:lH};function lH(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Mt(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),o(l)}function o(l){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,i(l)}function i(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return it(l)?(e.consume(l),e.exit("chunkText"),o):(e.consume(l),i)}}const cH={tokenize:uH},Xb={tokenize:dH};function uH(e){const t=this,n=[];let r=0,s,o,i;return l;function l(w){if(r<n.length){const I=n[r];return t.containerState=I[1],e.attempt(I[0].continuation,u,f)(w)}return f(w)}function u(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&E();const I=t.events.length;let j=I,_;for(;j--;)if(t.events[j][0]==="exit"&&t.events[j][1].type==="chunkFlow"){_=t.events[j][1].end;break}y(r);let C=I;for(;C<t.events.length;)t.events[C][1].end=Object.assign({},_),C++;return is(t.events,j+1,0,t.events.slice(I)),t.events.length=C,f(w)}return l(w)}function f(w){if(r===n.length){if(!s)return g(w);if(s.currentConstruct&&s.currentConstruct.concrete)return b(w);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Xb,m,h)(w)}function m(w){return s&&E(),y(r),g(w)}function h(w){return t.parser.lazy[t.now().line]=r!==n.length,i=t.now().offset,b(w)}function g(w){return t.containerState={},e.attempt(Xb,p,b)(w)}function p(w){return r++,n.push([t.currentConstruct,t.containerState]),g(w)}function b(w){if(w===null){s&&E(),y(0),e.consume(w);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:s}),v(w)}function v(w){if(w===null){T(e.exit("chunkFlow"),!0),y(0),e.consume(w);return}return it(w)?(e.consume(w),T(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(w),v)}function T(w,I){const j=t.sliceStream(w);if(I&&j.push(null),w.previous=o,o&&(o.next=w),o=w,s.defineSkip(w.start),s.write(j),t.parser.lazy[w.start.line]){let _=s.events.length;for(;_--;)if(s.events[_][1].start.offset<i&&(!s.events[_][1].end||s.events[_][1].end.offset>i))return;const C=t.events.length;let k=C,R,P;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){if(R){P=t.events[k][1].end;break}R=!0}for(y(r),_=C;_<t.events.length;)t.events[_][1].end=Object.assign({},P),_++;is(t.events,k+1,0,t.events.slice(C)),t.events.length=_}}function y(w){let I=n.length;for(;I-- >w;){const j=n[I];t.containerState=j[1],j[0].exit.call(t,e)}n.length=w}function E(){s.write([null]),o=void 0,s=void 0,t.containerState._closeFlow=void 0}}function dH(e,t,n){return Mt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Nh(e){if(e===null||Jt(e)||Ya(e))return 1;if(mm(e))return 2}function pm(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const o=e[s].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const $y={name:"attention",tokenize:hH,resolveAll:fH};function fH(e,t){let n=-1,r,s,o,i,l,u,f,m;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h=Object.assign({},e[r][1].end),g=Object.assign({},e[n][1].start);Jb(h,-u),Jb(g,u),i={type:u>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},e[r][1].end)},l={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:g},o={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},s={type:u>1?"strong":"emphasis",start:Object.assign({},i.start),end:Object.assign({},l.end)},e[r][1].end=Object.assign({},i.start),e[n][1].start=Object.assign({},l.end),f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=_s(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=_s(f,[["enter",s,t],["enter",i,t],["exit",i,t],["enter",o,t]]),f=_s(f,pm(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=_s(f,[["exit",o,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(m=2,f=_s(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):m=0,is(e,r-1,n-r+3,f),n=r+f.length-m-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function hH(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Nh(r);let o;return i;function i(u){return o=u,e.enter("attentionSequence"),l(u)}function l(u){if(u===o)return e.consume(u),l;const f=e.exit("attentionSequence"),m=Nh(u),h=!m||m===2&&s||n.includes(u),g=!s||s===2&&m||n.includes(r);return f._open=!!(o===42?h:h&&(s||!g)),f._close=!!(o===42?g:g&&(m||!h)),t(u)}}function Jb(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const mH={name:"autolink",tokenize:pH};function pH(e,t,n){let r=0;return s;function s(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(p){return Cr(p)?(e.consume(p),i):f(p)}function i(p){return p===43||p===45||p===46||mr(p)?(r=1,l(p)):f(p)}function l(p){return p===58?(e.consume(p),r=0,u):(p===43||p===45||p===46||mr(p))&&r++<32?(e.consume(p),l):(r=0,f(p))}function u(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||_h(p)?n(p):(e.consume(p),u)}function f(p){return p===64?(e.consume(p),m):sH(p)?(e.consume(p),f):n(p)}function m(p){return mr(p)?h(p):n(p)}function h(p){return p===46?(e.consume(p),r=0,m):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):g(p)}function g(p){if((p===45||mr(p))&&r++<63){const b=p===45?g:h;return e.consume(p),b}return n(p)}}const S1={tokenize:gH,partial:!0};function gH(e,t,n){return r;function r(o){return kt(o)?Mt(e,s,"linePrefix")(o):s(o)}function s(o){return o===null||it(o)?t(o):n(o)}}const a3={name:"blockQuote",tokenize:yH,continuation:{tokenize:xH},exit:vH};function yH(e,t,n){const r=this;return s;function s(i){if(i===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(i),e.exit("blockQuoteMarker"),o}return n(i)}function o(i){return kt(i)?(e.enter("blockQuotePrefixWhitespace"),e.consume(i),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(i))}}function xH(e,t,n){const r=this;return s;function s(i){return kt(i)?Mt(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i):o(i)}function o(i){return e.attempt(a3,t,n)(i)}}function vH(e){e.exit("blockQuote")}const l3={name:"characterEscape",tokenize:bH};function bH(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),s}function s(o){return iH(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Zb=document.createElement("i");function T2(e){const t="&"+e+";";Zb.innerHTML=t;const n=Zb.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const c3={name:"characterReference",tokenize:wH};function wH(e,t,n){const r=this;let s=0,o,i;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),u}function u(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,i=mr,m(h))}function f(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,i=oH,m):(e.enter("characterReferenceValue"),o=7,i=Hy,m(h))}function m(h){if(h===59&&s){const g=e.exit("characterReferenceValue");return i===mr&&!T2(r.sliceSerialize(g))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return i(h)&&s++<o?(e.consume(h),m):n(h)}}const ew={tokenize:EH,partial:!0},tw={name:"codeFenced",tokenize:TH,concrete:!0};function TH(e,t,n){const r=this,s={tokenize:j,partial:!0};let o=0,i=0,l;return u;function u(_){return f(_)}function f(_){const C=r.events[r.events.length-1];return o=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,l=_,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(_)}function m(_){return _===l?(i++,e.consume(_),m):i<3?n(_):(e.exit("codeFencedFenceSequence"),kt(_)?Mt(e,h,"whitespace")(_):h(_))}function h(_){return _===null||it(_)?(e.exit("codeFencedFence"),r.interrupt?t(_):e.check(ew,v,I)(_)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(_))}function g(_){return _===null||it(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(_)):kt(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Mt(e,p,"whitespace")(_)):_===96&&_===l?n(_):(e.consume(_),g)}function p(_){return _===null||it(_)?h(_):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),b(_))}function b(_){return _===null||it(_)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(_)):_===96&&_===l?n(_):(e.consume(_),b)}function v(_){return e.attempt(s,I,T)(_)}function T(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),y}function y(_){return o>0&&kt(_)?Mt(e,E,"linePrefix",o+1)(_):E(_)}function E(_){return _===null||it(_)?e.check(ew,v,I)(_):(e.enter("codeFlowValue"),w(_))}function w(_){return _===null||it(_)?(e.exit("codeFlowValue"),E(_)):(e.consume(_),w)}function I(_){return e.exit("codeFenced"),t(_)}function j(_,C,k){let R=0;return P;function P(le){return _.enter("lineEnding"),_.consume(le),_.exit("lineEnding"),Y}function Y(le){return _.enter("codeFencedFence"),kt(le)?Mt(_,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(le):z(le)}function z(le){return le===l?(_.enter("codeFencedFenceSequence"),Q(le)):k(le)}function Q(le){return le===l?(R++,_.consume(le),Q):R>=i?(_.exit("codeFencedFenceSequence"),kt(le)?Mt(_,M,"whitespace")(le):M(le)):k(le)}function M(le){return le===null||it(le)?(_.exit("codeFencedFence"),C(le)):k(le)}}}function EH(e,t,n){const r=this;return s;function s(i){return i===null?n(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),o)}function o(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}const Vp={name:"codeIndented",tokenize:_H},CH={tokenize:NH,partial:!0};function _H(e,t,n){const r=this;return s;function s(f){return e.enter("codeIndented"),Mt(e,o,"linePrefix",4+1)(f)}function o(f){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?i(f):n(f)}function i(f){return f===null?u(f):it(f)?e.attempt(CH,i,u)(f):(e.enter("codeFlowValue"),l(f))}function l(f){return f===null||it(f)?(e.exit("codeFlowValue"),i(f)):(e.consume(f),l)}function u(f){return e.exit("codeIndented"),t(f)}}function NH(e,t,n){const r=this;return s;function s(i){return r.parser.lazy[r.now().line]?n(i):it(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s):Mt(e,o,"linePrefix",4+1)(i)}function o(i){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(i):it(i)?s(i):n(i)}}const SH={name:"codeText",tokenize:OH,resolve:kH,previous:AH};function kH(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function AH(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function OH(e,t,n){let r=0,s,o;return i;function i(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),u(h))}function u(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),u):h===96?(o=e.enter("codeTextSequence"),s=0,m(h)):it(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u):(e.enter("codeTextData"),f(h))}function f(h){return h===null||h===32||h===96||it(h)?(e.exit("codeTextData"),u(h)):(e.consume(h),f)}function m(h){return h===96?(e.consume(h),s++,m):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(o.type="codeTextData",f(h))}}function u3(e){const t={};let n=-1,r,s,o,i,l,u,f;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,o=0,o<u.length&&u[o][1].type==="lineEndingBlank"&&(o+=2),o<u.length&&u[o][1].type==="content"))for(;++o<u.length&&u[o][1].type!=="content";)u[o][1].type==="chunkText"&&(u[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,RH(e,n)),n=t[n],f=!0);else if(r[1]._container){for(o=n,s=void 0;o--&&(i=e[o],i[1].type==="lineEnding"||i[1].type==="lineEndingBlank");)i[0]==="enter"&&(s&&(e[s][1].type="lineEndingBlank"),i[1].type="lineEnding",s=o);s&&(r[1].end=Object.assign({},e[s][1].start),l=e.slice(s,n),l.unshift(r),is(e,s,n-s+1,l))}}return!f}function RH(e,t){const n=e[t][1],r=e[t][2];let s=t-1;const o=[],i=n._tokenizer||r.parser[n.contentType](n.start),l=i.events,u=[],f={};let m,h,g=-1,p=n,b=0,v=0;const T=[v];for(;p;){for(;e[++s][1]!==p;);o.push(s),p._tokenizer||(m=r.sliceStream(p),p.next||m.push(null),h&&i.defineSkip(p.start),p._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(m),p._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(v=g+1,T.push(v),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(i.events=[],p?(p._tokenizer=void 0,p.previous=void 0):T.pop(),g=T.length;g--;){const y=l.slice(T[g],T[g+1]),E=o.pop();u.unshift([E,E+y.length-1]),is(e,E,2,y)}for(g=-1;++g<u.length;)f[b+u[g][0]]=b+u[g][1],b+=u[g][1]-u[g][0]-1;return f}const IH={tokenize:DH,resolve:LH},jH={tokenize:MH,partial:!0};function LH(e){return u3(e),e}function DH(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?o(l):it(l)?e.check(jH,i,o)(l):(e.consume(l),s)}function o(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function i(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function MH(e,t,n){const r=this;return s;function s(i){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Mt(e,o,"linePrefix")}function o(i){if(i===null||it(i))return n(i);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}function d3(e,t,n,r,s,o,i,l,u){const f=u||Number.POSITIVE_INFINITY;let m=0;return h;function h(y){return y===60?(e.enter(r),e.enter(s),e.enter(o),e.consume(y),e.exit(o),g):y===null||y===32||y===41||_h(y)?n(y):(e.enter(r),e.enter(i),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function g(y){return y===62?(e.enter(o),e.consume(y),e.exit(o),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===62?(e.exit("chunkString"),e.exit(l),g(y)):y===null||y===60||it(y)?n(y):(e.consume(y),y===92?b:p)}function b(y){return y===60||y===62||y===92?(e.consume(y),p):p(y)}function v(y){return!m&&(y===null||y===41||Jt(y))?(e.exit("chunkString"),e.exit(l),e.exit(i),e.exit(r),t(y)):m<f&&y===40?(e.consume(y),m++,v):y===41?(e.consume(y),m--,v):y===null||y===32||y===40||_h(y)?n(y):(e.consume(y),y===92?T:v)}function T(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function f3(e,t,n,r,s,o){const i=this;let l=0,u;return f;function f(p){return e.enter(r),e.enter(s),e.consume(p),e.exit(s),e.enter(o),m}function m(p){return l>999||p===null||p===91||p===93&&!u||p===94&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(p):p===93?(e.exit(o),e.enter(s),e.consume(p),e.exit(s),e.exit(r),t):it(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||it(p)||l++>999?(e.exit("chunkString"),m(p)):(e.consume(p),u||(u=!kt(p)),p===92?g:h)}function g(p){return p===91||p===92||p===93?(e.consume(p),l++,h):h(p)}}function h3(e,t,n,r,s,o){let i;return l;function l(g){return g===34||g===39||g===40?(e.enter(r),e.enter(s),e.consume(g),e.exit(s),i=g===40?41:g,u):n(g)}function u(g){return g===i?(e.enter(s),e.consume(g),e.exit(s),e.exit(r),t):(e.enter(o),f(g))}function f(g){return g===i?(e.exit(o),u(i)):g===null?n(g):it(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),Mt(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===i||g===null||it(g)?(e.exit("chunkString"),f(g)):(e.consume(g),g===92?h:m)}function h(g){return g===i||g===92?(e.consume(g),m):m(g)}}function _u(e,t){let n;return r;function r(s){return it(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):kt(s)?Mt(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}function to(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const PH={name:"definition",tokenize:BH},FH={tokenize:zH,partial:!0};function BH(e,t,n){const r=this;let s;return o;function o(p){return e.enter("definition"),i(p)}function i(p){return f3.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return s=to(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),u):n(p)}function u(p){return Jt(p)?_u(e,f)(p):f(p)}function f(p){return d3(e,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function m(p){return e.attempt(FH,h,h)(p)}function h(p){return kt(p)?Mt(e,g,"whitespace")(p):g(p)}function g(p){return p===null||it(p)?(e.exit("definition"),r.parser.defined.push(s),t(p)):n(p)}}function zH(e,t,n){return r;function r(l){return Jt(l)?_u(e,s)(l):n(l)}function s(l){return h3(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function o(l){return kt(l)?Mt(e,i,"whitespace")(l):i(l)}function i(l){return l===null||it(l)?t(l):n(l)}}const UH={name:"hardBreakEscape",tokenize:HH};function HH(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),s}function s(o){return it(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const $H={name:"headingAtx",tokenize:GH,resolve:WH};function WH(e,t){let n=e.length-2,r=3,s,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},is(e,r,n-r+1,[["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t]])),e}function GH(e,t,n){let r=0;return s;function s(m){return e.enter("atxHeading"),o(m)}function o(m){return e.enter("atxHeadingSequence"),i(m)}function i(m){return m===35&&r++<6?(e.consume(m),i):m===null||Jt(m)?(e.exit("atxHeadingSequence"),l(m)):n(m)}function l(m){return m===35?(e.enter("atxHeadingSequence"),u(m)):m===null||it(m)?(e.exit("atxHeading"),t(m)):kt(m)?Mt(e,l,"whitespace")(m):(e.enter("atxHeadingText"),f(m))}function u(m){return m===35?(e.consume(m),u):(e.exit("atxHeadingSequence"),l(m))}function f(m){return m===null||m===35||Jt(m)?(e.exit("atxHeadingText"),l(m)):(e.consume(m),f)}}const KH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],nw=["pre","script","style","textarea"],YH={name:"htmlFlow",tokenize:XH,resolveTo:QH,concrete:!0},VH={tokenize:ZH,partial:!0},qH={tokenize:JH,partial:!0};function QH(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function XH(e,t,n){const r=this;let s,o,i,l,u;return f;function f(V){return m(V)}function m(V){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(V),h}function h(V){return V===33?(e.consume(V),g):V===47?(e.consume(V),o=!0,v):V===63?(e.consume(V),s=3,r.interrupt?t:U):Cr(V)?(e.consume(V),i=String.fromCharCode(V),T):n(V)}function g(V){return V===45?(e.consume(V),s=2,p):V===91?(e.consume(V),s=5,l=0,b):Cr(V)?(e.consume(V),s=4,r.interrupt?t:U):n(V)}function p(V){return V===45?(e.consume(V),r.interrupt?t:U):n(V)}function b(V){const xe="CDATA[";return V===xe.charCodeAt(l++)?(e.consume(V),l===xe.length?r.interrupt?t:z:b):n(V)}function v(V){return Cr(V)?(e.consume(V),i=String.fromCharCode(V),T):n(V)}function T(V){if(V===null||V===47||V===62||Jt(V)){const xe=V===47,we=i.toLowerCase();return!xe&&!o&&nw.includes(we)?(s=1,r.interrupt?t(V):z(V)):KH.includes(i.toLowerCase())?(s=6,xe?(e.consume(V),y):r.interrupt?t(V):z(V)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(V):o?E(V):w(V))}return V===45||mr(V)?(e.consume(V),i+=String.fromCharCode(V),T):n(V)}function y(V){return V===62?(e.consume(V),r.interrupt?t:z):n(V)}function E(V){return kt(V)?(e.consume(V),E):P(V)}function w(V){return V===47?(e.consume(V),P):V===58||V===95||Cr(V)?(e.consume(V),I):kt(V)?(e.consume(V),w):P(V)}function I(V){return V===45||V===46||V===58||V===95||mr(V)?(e.consume(V),I):j(V)}function j(V){return V===61?(e.consume(V),_):kt(V)?(e.consume(V),j):w(V)}function _(V){return V===null||V===60||V===61||V===62||V===96?n(V):V===34||V===39?(e.consume(V),u=V,C):kt(V)?(e.consume(V),_):k(V)}function C(V){return V===u?(e.consume(V),u=null,R):V===null||it(V)?n(V):(e.consume(V),C)}function k(V){return V===null||V===34||V===39||V===47||V===60||V===61||V===62||V===96||Jt(V)?j(V):(e.consume(V),k)}function R(V){return V===47||V===62||kt(V)?w(V):n(V)}function P(V){return V===62?(e.consume(V),Y):n(V)}function Y(V){return V===null||it(V)?z(V):kt(V)?(e.consume(V),Y):n(V)}function z(V){return V===45&&s===2?(e.consume(V),Ne):V===60&&s===1?(e.consume(V),$):V===62&&s===4?(e.consume(V),ee):V===63&&s===3?(e.consume(V),U):V===93&&s===5?(e.consume(V),H):it(V)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(VH,te,Q)(V)):V===null||it(V)?(e.exit("htmlFlowData"),Q(V)):(e.consume(V),z)}function Q(V){return e.check(qH,M,te)(V)}function M(V){return e.enter("lineEnding"),e.consume(V),e.exit("lineEnding"),le}function le(V){return V===null||it(V)?Q(V):(e.enter("htmlFlowData"),z(V))}function Ne(V){return V===45?(e.consume(V),U):z(V)}function $(V){return V===47?(e.consume(V),i="",G):z(V)}function G(V){if(V===62){const xe=i.toLowerCase();return nw.includes(xe)?(e.consume(V),ee):z(V)}return Cr(V)&&i.length<8?(e.consume(V),i+=String.fromCharCode(V),G):z(V)}function H(V){return V===93?(e.consume(V),U):z(V)}function U(V){return V===62?(e.consume(V),ee):V===45&&s===2?(e.consume(V),U):z(V)}function ee(V){return V===null||it(V)?(e.exit("htmlFlowData"),te(V)):(e.consume(V),ee)}function te(V){return e.exit("htmlFlow"),t(V)}}function JH(e,t,n){const r=this;return s;function s(i){return it(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),o):n(i)}function o(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function ZH(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(S1,t,n)}}const e$={name:"htmlText",tokenize:t$};function t$(e,t,n){const r=this;let s,o,i;return l;function l(U){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(U),u}function u(U){return U===33?(e.consume(U),f):U===47?(e.consume(U),j):U===63?(e.consume(U),w):Cr(U)?(e.consume(U),k):n(U)}function f(U){return U===45?(e.consume(U),m):U===91?(e.consume(U),o=0,b):Cr(U)?(e.consume(U),E):n(U)}function m(U){return U===45?(e.consume(U),p):n(U)}function h(U){return U===null?n(U):U===45?(e.consume(U),g):it(U)?(i=h,$(U)):(e.consume(U),h)}function g(U){return U===45?(e.consume(U),p):h(U)}function p(U){return U===62?Ne(U):U===45?g(U):h(U)}function b(U){const ee="CDATA[";return U===ee.charCodeAt(o++)?(e.consume(U),o===ee.length?v:b):n(U)}function v(U){return U===null?n(U):U===93?(e.consume(U),T):it(U)?(i=v,$(U)):(e.consume(U),v)}function T(U){return U===93?(e.consume(U),y):v(U)}function y(U){return U===62?Ne(U):U===93?(e.consume(U),y):v(U)}function E(U){return U===null||U===62?Ne(U):it(U)?(i=E,$(U)):(e.consume(U),E)}function w(U){return U===null?n(U):U===63?(e.consume(U),I):it(U)?(i=w,$(U)):(e.consume(U),w)}function I(U){return U===62?Ne(U):w(U)}function j(U){return Cr(U)?(e.consume(U),_):n(U)}function _(U){return U===45||mr(U)?(e.consume(U),_):C(U)}function C(U){return it(U)?(i=C,$(U)):kt(U)?(e.consume(U),C):Ne(U)}function k(U){return U===45||mr(U)?(e.consume(U),k):U===47||U===62||Jt(U)?R(U):n(U)}function R(U){return U===47?(e.consume(U),Ne):U===58||U===95||Cr(U)?(e.consume(U),P):it(U)?(i=R,$(U)):kt(U)?(e.consume(U),R):Ne(U)}function P(U){return U===45||U===46||U===58||U===95||mr(U)?(e.consume(U),P):Y(U)}function Y(U){return U===61?(e.consume(U),z):it(U)?(i=Y,$(U)):kt(U)?(e.consume(U),Y):R(U)}function z(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(e.consume(U),s=U,Q):it(U)?(i=z,$(U)):kt(U)?(e.consume(U),z):(e.consume(U),M)}function Q(U){return U===s?(e.consume(U),s=void 0,le):U===null?n(U):it(U)?(i=Q,$(U)):(e.consume(U),Q)}function M(U){return U===null||U===34||U===39||U===60||U===61||U===96?n(U):U===47||U===62||Jt(U)?R(U):(e.consume(U),M)}function le(U){return U===47||U===62||Jt(U)?R(U):n(U)}function Ne(U){return U===62?(e.consume(U),e.exit("htmlTextData"),e.exit("htmlText"),t):n(U)}function $(U){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),G}function G(U){return kt(U)?Mt(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):H(U)}function H(U){return e.enter("htmlTextData"),i(U)}}const E2={name:"labelEnd",tokenize:a$,resolveTo:i$,resolveAll:o$},n$={tokenize:l$},r$={tokenize:c$},s$={tokenize:u$};function o$(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function i$(e,t){let n=e.length,r=0,s,o,i,l;for(;n--;)if(s=e[n][1],o){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(i){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(o=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(i=n);const u={type:e[o][1].type==="labelLink"?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},f={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[i][1].end)},m={type:"labelText",start:Object.assign({},e[o+r+2][1].end),end:Object.assign({},e[i-2][1].start)};return l=[["enter",u,t],["enter",f,t]],l=_s(l,e.slice(o+1,o+r+3)),l=_s(l,[["enter",m,t]]),l=_s(l,pm(t.parser.constructs.insideSpan.null,e.slice(o+r+4,i-3),t)),l=_s(l,[["exit",m,t],e[i-2],e[i-1],["exit",f,t]]),l=_s(l,e.slice(i+1)),l=_s(l,[["exit",u,t]]),is(e,o,e.length,l),e}function a$(e,t,n){const r=this;let s=r.events.length,o,i;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){o=r.events[s][1];break}return l;function l(g){return o?o._inactive?h(g):(i=r.parser.defined.includes(to(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),u):n(g)}function u(g){return g===40?e.attempt(n$,m,i?m:h)(g):g===91?e.attempt(r$,m,i?f:h)(g):i?m(g):h(g)}function f(g){return e.attempt(s$,m,h)(g)}function m(g){return t(g)}function h(g){return o._balanced=!0,n(g)}}function l$(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return Jt(h)?_u(e,o)(h):o(h)}function o(h){return h===41?m(h):d3(e,i,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function i(h){return Jt(h)?_u(e,u)(h):m(h)}function l(h){return n(h)}function u(h){return h===34||h===39||h===40?h3(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):m(h)}function f(h){return Jt(h)?_u(e,m)(h):m(h)}function m(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function c$(e,t,n){const r=this;return s;function s(l){return f3.call(r,e,o,i,"reference","referenceMarker","referenceString")(l)}function o(l){return r.parser.defined.includes(to(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function i(l){return n(l)}}function u$(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),s}function s(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const d$={name:"labelStartImage",tokenize:f$,resolveAll:E2.resolveAll};function f$(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),o}function o(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),i):n(l)}function i(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const h$={name:"labelStartLink",tokenize:m$,resolveAll:E2.resolveAll};function m$(e,t,n){const r=this;return s;function s(i){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(i),e.exit("labelMarker"),e.exit("labelLink"),o}function o(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):t(i)}}const qp={name:"lineEnding",tokenize:p$};function p$(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Mt(e,t,"linePrefix")}}const Rf={name:"thematicBreak",tokenize:g$};function g$(e,t,n){let r=0,s;return o;function o(f){return e.enter("thematicBreak"),i(f)}function i(f){return s=f,l(f)}function l(f){return f===s?(e.enter("thematicBreakSequence"),u(f)):r>=3&&(f===null||it(f))?(e.exit("thematicBreak"),t(f)):n(f)}function u(f){return f===s?(e.consume(f),r++,u):(e.exit("thematicBreakSequence"),kt(f)?Mt(e,l,"whitespace")(f):l(f))}}const jr={name:"list",tokenize:v$,continuation:{tokenize:b$},exit:T$},y$={tokenize:E$,partial:!0},x$={tokenize:w$,partial:!0};function v$(e,t,n){const r=this,s=r.events[r.events.length-1];let o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,i=0;return l;function l(p){const b=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Hy(p)){if(r.containerState.type||(r.containerState.type=b,e.enter(b,{_container:!0})),b==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(Rf,n,f)(p):f(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(p)}return n(p)}function u(p){return Hy(p)&&++i<10?(e.consume(p),u):(!r.interrupt||i<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),f(p)):n(p)}function f(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(S1,r.interrupt?n:m,e.attempt(y$,g,h))}function m(p){return r.containerState.initialBlankLine=!0,o++,g(p)}function h(p){return kt(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),g):n(p)}function g(p){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function b$(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(S1,s,o);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Mt(e,t,"listItemIndent",r.containerState.size+1)(l)}function o(l){return r.containerState.furtherBlankLines||!kt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(x$,t,i)(l))}function i(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Mt(e,e.attempt(jr,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function w$(e,t,n){const r=this;return Mt(e,s,"listItemIndent",r.containerState.size+1);function s(o){const i=r.events[r.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(o):n(o)}}function T$(e){e.exit(this.containerState.type)}function E$(e,t,n){const r=this;return Mt(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function s(o){const i=r.events[r.events.length-1];return!kt(o)&&i&&i[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const rw={name:"setextUnderline",tokenize:_$,resolveTo:C$};function C$(e,t){let n=e.length,r,s,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const i={type:"setextHeading",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[s][1].type="setextHeadingText",o?(e.splice(s,0,["enter",i,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[o][1].end)):e[r][1]=i,e.push(["exit",i,t]),e}function _$(e,t,n){const r=this;let s;return o;function o(f){let m=r.events.length,h;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){h=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),s=f,i(f)):n(f)}function i(f){return e.enter("setextHeadingLineSequence"),l(f)}function l(f){return f===s?(e.consume(f),l):(e.exit("setextHeadingLineSequence"),kt(f)?Mt(e,u,"lineSuffix")(f):u(f))}function u(f){return f===null||it(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const N$={tokenize:S$};function S$(e){const t=this,n=e.attempt(S1,r,e.attempt(this.parser.constructs.flowInitial,s,Mt(e,e.attempt(this.parser.constructs.flow,s,e.attempt(IH,s)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const k$={resolveAll:p3()},A$=m3("string"),O$=m3("text");function m3(e){return{tokenize:t,resolveAll:p3(e==="text"?R$:void 0)};function t(n){const r=this,s=this.parser.constructs[e],o=n.attempt(s,i,l);return i;function i(m){return f(m)?o(m):l(m)}function l(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),u}function u(m){return f(m)?(n.exit("data"),o(m)):(n.consume(m),u)}function f(m){if(m===null)return!0;const h=s[m];let g=-1;if(h)for(;++g<h.length;){const p=h[g];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function p3(e){return t;function t(n,r){let s=-1,o;for(;++s<=n.length;)o===void 0?n[s]&&n[s][1].type==="data"&&(o=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==o+2&&(n[o][1].end=n[s-1][1].end,n.splice(o+2,s-o-2),s=o+2),o=void 0);return e?e(n,r):n}}function R$(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let o=s.length,i=-1,l=0,u;for(;o--;){const f=s[o];if(typeof f=="string"){for(i=f.length;f.charCodeAt(i-1)===32;)l++,i--;if(i)break;i=-1}else if(f===-2)u=!0,l++;else if(f!==-1){o++;break}}if(l){const f={type:n===e.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+o,_bufferIndex:o?i:r.start._bufferIndex+i},end:Object.assign({},r.end)};r.end=Object.assign({},f.start),r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}function I$(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},o=[];let i=[],l=[];const u={consume:E,enter:w,exit:I,attempt:C(j),check:C(_),interrupt:C(_,{interrupt:!0})},f={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:p,sliceSerialize:g,now:b,defineSkip:v,write:h};let m=t.tokenize.call(f,u);return t.resolveAll&&o.push(t),f;function h(Y){return i=_s(i,Y),T(),i[i.length-1]!==null?[]:(k(t,0),f.events=pm(o,f.events,f),f.events)}function g(Y,z){return L$(p(Y),z)}function p(Y){return j$(i,Y)}function b(){const{line:Y,column:z,offset:Q,_index:M,_bufferIndex:le}=r;return{line:Y,column:z,offset:Q,_index:M,_bufferIndex:le}}function v(Y){s[Y.line]=Y.column,P()}function T(){let Y;for(;r._index<i.length;){const z=i[r._index];if(typeof z=="string")for(Y=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===Y&&r._bufferIndex<z.length;)y(z.charCodeAt(r._bufferIndex));else y(z)}}function y(Y){m=m(Y)}function E(Y){it(Y)?(r.line++,r.column=1,r.offset+=Y===-3?2:1,P()):Y!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=Y}function w(Y,z){const Q=z||{};return Q.type=Y,Q.start=b(),f.events.push(["enter",Q,f]),l.push(Q),Q}function I(Y){const z=l.pop();return z.end=b(),f.events.push(["exit",z,f]),z}function j(Y,z){k(Y,z.from)}function _(Y,z){z.restore()}function C(Y,z){return Q;function Q(M,le,Ne){let $,G,H,U;return Array.isArray(M)?te(M):"tokenize"in M?te([M]):ee(M);function ee(Le){return Ve;function Ve(Me){const Ke=Me!==null&&Le[Me],De=Me!==null&&Le.null,nt=[...Array.isArray(Ke)?Ke:Ke?[Ke]:[],...Array.isArray(De)?De:De?[De]:[]];return te(nt)(Me)}}function te(Le){return $=Le,G=0,Le.length===0?Ne:V(Le[G])}function V(Le){return Ve;function Ve(Me){return U=R(),H=Le,Le.partial||(f.currentConstruct=Le),Le.name&&f.parser.constructs.disable.null.includes(Le.name)?we():Le.tokenize.call(z?Object.assign(Object.create(f),z):f,u,xe,we)(Me)}}function xe(Le){return Y(H,U),le}function we(Le){return U.restore(),++G<$.length?V($[G]):Ne}}}function k(Y,z){Y.resolveAll&&!o.includes(Y)&&o.push(Y),Y.resolve&&is(f.events,z,f.events.length-z,Y.resolve(f.events.slice(z),f)),Y.resolveTo&&(f.events=Y.resolveTo(f.events,f))}function R(){const Y=b(),z=f.previous,Q=f.currentConstruct,M=f.events.length,le=Array.from(l);return{restore:Ne,from:M};function Ne(){r=Y,f.previous=z,f.currentConstruct=Q,f.events.length=M,l=le,P()}}function P(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function j$(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,o=t.end._bufferIndex;let i;if(n===s)i=[e[n].slice(r,o)];else{if(i=e.slice(n,s),r>-1){const l=i[0];typeof l=="string"?i[0]=l.slice(r):i.shift()}o>0&&i.push(e[s].slice(0,o))}return i}function L$(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const o=e[n];let i;if(typeof o=="string")i=o;else switch(o){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=t?" ":"	";break}case-1:{if(!t&&s)continue;i=" ";break}default:i=String.fromCharCode(o)}s=o===-2,r.push(i)}return r.join("")}const D$={42:jr,43:jr,45:jr,48:jr,49:jr,50:jr,51:jr,52:jr,53:jr,54:jr,55:jr,56:jr,57:jr,62:a3},M$={91:PH},P$={[-2]:Vp,[-1]:Vp,32:Vp},F$={35:$H,42:Rf,45:[rw,Rf],60:YH,61:rw,95:Rf,96:tw,126:tw},B$={38:c3,92:l3},z$={[-5]:qp,[-4]:qp,[-3]:qp,33:d$,38:c3,42:$y,60:[mH,e$],91:h$,92:[UH,l3],93:E2,95:$y,96:SH},U$={null:[$y,k$]},H$={null:[42,95]},$$={null:[]},W$=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:H$,contentInitial:M$,disable:$$,document:D$,flow:F$,flowInitial:P$,insideSpan:U$,string:B$,text:z$},Symbol.toStringTag,{value:"Module"}));function G$(e){const n=i3([W$,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:s(aH),document:s(cH),flow:s(N$),string:s(A$),text:s(O$)};return r;function s(o){return i;function i(l){return I$(r,o,l)}}}const sw=/[\0\t\n\r]/g;function K$(){let e=1,t="",n=!0,r;return s;function s(o,i,l){const u=[];let f,m,h,g,p;for(o=t+o.toString(i),h=0,t="",n&&(o.charCodeAt(0)===65279&&h++,n=void 0);h<o.length;){if(sw.lastIndex=h,f=sw.exec(o),g=f&&f.index!==void 0?f.index:o.length,p=o.charCodeAt(g),!f){t=o.slice(h);break}if(p===10&&h===g&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),h<g&&(u.push(o.slice(h,g)),e+=g-h),p){case 0:{u.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,u.push(-2);e++<m;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}h=g+1}return l&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function Y$(e){for(;!u3(e););return e}function g3(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCharCode(n)}const V$=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function y3(e){return e.replace(V$,q$)}function q$(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),o=s===120||s===88;return g3(n.slice(o?2:1),o?16:10)}return T2(n)||e}const x3={}.hasOwnProperty,Q$=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),X$(n)(Y$(G$(n).document().write(K$()(e,t,!0))))};function X$(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(oe),autolinkProtocol:Y,autolinkEmail:Y,atxHeading:l(F),blockQuote:l(nt),characterEscape:Y,characterReference:Y,codeFenced:l(ut),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:l(ut,u),codeText:l(dt,u),codeTextData:Y,data:Y,codeFlowValue:Y,definition:l(D),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:l(ue),hardBreakEscape:l(A),hardBreakTrailing:l(A),htmlFlow:l(L,u),htmlFlowData:Y,htmlText:l(L,u),htmlTextData:Y,image:l(K),label:u,link:l(oe),listItem:l(J),listItemValue:b,listOrdered:l(ie,p),listUnordered:l(ie),paragraph:l(me),reference:we,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:l(F),strong:l(be),thematicBreak:l(je)},exit:{atxHeading:m(),atxHeadingSequence:C,autolink:m(),autolinkEmail:De,autolinkProtocol:Ke,blockQuote:m(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:Ve,characterReferenceMarkerNumeric:Ve,characterReferenceValue:Me,codeFenced:m(E),codeFencedFence:y,codeFencedFenceInfo:v,codeFencedFenceMeta:T,codeFlowValue:z,codeIndented:m(w),codeText:m($),codeTextData:z,data:z,definition:m(),definitionDestinationString:_,definitionLabelString:I,definitionTitleString:j,emphasis:m(),hardBreakEscape:m(M),hardBreakTrailing:m(M),htmlFlow:m(le),htmlFlowData:z,htmlText:m(Ne),htmlTextData:z,image:m(H),label:ee,labelText:U,lineEnding:Q,link:m(G),listItem:m(),listOrdered:m(),listUnordered:m(),paragraph:m(),referenceString:Le,resourceDestinationString:te,resourceTitleString:V,resource:xe,setextHeading:m(P),setextHeadingLineSequence:R,setextHeadingText:k,strong:m(),thematicBreak:m()}};v3(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(X){let Z={type:"root",children:[]};const pe={stack:[Z],tokenStack:[],config:t,enter:f,exit:h,buffer:u,resume:g,setData:o,getData:i},ge=[];let Ee=-1;for(;++Ee<X.length;)if(X[Ee][1].type==="listOrdered"||X[Ee][1].type==="listUnordered")if(X[Ee][0]==="enter")ge.push(Ee);else{const He=ge.pop();Ee=s(X,He,Ee)}for(Ee=-1;++Ee<X.length;){const He=t[X[Ee][0]];x3.call(He,X[Ee][1].type)&&He[X[Ee][1].type].call(Object.assign({sliceSerialize:X[Ee][2].sliceSerialize},pe),X[Ee][1])}if(pe.tokenStack.length>0){const He=pe.tokenStack[pe.tokenStack.length-1];(He[1]||ow).call(pe,void 0,He[0])}for(Z.position={start:_i(X.length>0?X[0][1].start:{line:1,column:1,offset:0}),end:_i(X.length>0?X[X.length-2][1].end:{line:1,column:1,offset:0})},Ee=-1;++Ee<t.transforms.length;)Z=t.transforms[Ee](Z)||Z;return Z}function s(X,Z,pe){let ge=Z-1,Ee=-1,He=!1,Ye,pt,Qe,Et;for(;++ge<=pe;){const Dt=X[ge];if(Dt[1].type==="listUnordered"||Dt[1].type==="listOrdered"||Dt[1].type==="blockQuote"?(Dt[0]==="enter"?Ee++:Ee--,Et=void 0):Dt[1].type==="lineEndingBlank"?Dt[0]==="enter"&&(Ye&&!Et&&!Ee&&!Qe&&(Qe=ge),Et=void 0):Dt[1].type==="linePrefix"||Dt[1].type==="listItemValue"||Dt[1].type==="listItemMarker"||Dt[1].type==="listItemPrefix"||Dt[1].type==="listItemPrefixWhitespace"||(Et=void 0),!Ee&&Dt[0]==="enter"&&Dt[1].type==="listItemPrefix"||Ee===-1&&Dt[0]==="exit"&&(Dt[1].type==="listUnordered"||Dt[1].type==="listOrdered")){if(Ye){let $n=ge;for(pt=void 0;$n--;){const $t=X[$n];if($t[1].type==="lineEnding"||$t[1].type==="lineEndingBlank"){if($t[0]==="exit")continue;pt&&(X[pt][1].type="lineEndingBlank",He=!0),$t[1].type="lineEnding",pt=$n}else if(!($t[1].type==="linePrefix"||$t[1].type==="blockQuotePrefix"||$t[1].type==="blockQuotePrefixWhitespace"||$t[1].type==="blockQuoteMarker"||$t[1].type==="listItemIndent"))break}Qe&&(!pt||Qe<pt)&&(Ye._spread=!0),Ye.end=Object.assign({},pt?X[pt][1].start:Dt[1].end),X.splice(pt||ge,0,["exit",Ye,Dt[2]]),ge++,pe++}Dt[1].type==="listItemPrefix"&&(Ye={type:"listItem",_spread:!1,start:Object.assign({},Dt[1].start),end:void 0},X.splice(ge,0,["enter",Ye,Dt[2]]),ge++,pe++,Qe=void 0,Et=!0)}}return X[Z][1]._spread=He,pe}function o(X,Z){n[X]=Z}function i(X){return n[X]}function l(X,Z){return pe;function pe(ge){f.call(this,X(ge),ge),Z&&Z.call(this,ge)}}function u(){this.stack.push({type:"fragment",children:[]})}function f(X,Z,pe){return this.stack[this.stack.length-1].children.push(X),this.stack.push(X),this.tokenStack.push([Z,pe]),X.position={start:_i(Z.start)},X}function m(X){return Z;function Z(pe){X&&X.call(this,pe),h.call(this,pe)}}function h(X,Z){const pe=this.stack.pop(),ge=this.tokenStack.pop();if(ge)ge[0].type!==X.type&&(Z?Z.call(this,X,ge[0]):(ge[1]||ow).call(this,X,ge[0]));else throw new Error("Cannot close `"+X.type+"` ("+Cu({start:X.start,end:X.end})+"): it’s not open");return pe.position.end=_i(X.end),pe}function g(){return ZU(this.stack.pop())}function p(){o("expectingFirstListItemValue",!0)}function b(X){if(i("expectingFirstListItemValue")){const Z=this.stack[this.stack.length-2];Z.start=Number.parseInt(this.sliceSerialize(X),10),o("expectingFirstListItemValue")}}function v(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.lang=X}function T(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.meta=X}function y(){i("flowCodeInside")||(this.buffer(),o("flowCodeInside",!0))}function E(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.value=X.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),o("flowCodeInside")}function w(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.value=X.replace(/(\r?\n|\r)$/g,"")}function I(X){const Z=this.resume(),pe=this.stack[this.stack.length-1];pe.label=Z,pe.identifier=to(this.sliceSerialize(X)).toLowerCase()}function j(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.title=X}function _(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.url=X}function C(X){const Z=this.stack[this.stack.length-1];if(!Z.depth){const pe=this.sliceSerialize(X).length;Z.depth=pe}}function k(){o("setextHeadingSlurpLineEnding",!0)}function R(X){const Z=this.stack[this.stack.length-1];Z.depth=this.sliceSerialize(X).charCodeAt(0)===61?1:2}function P(){o("setextHeadingSlurpLineEnding")}function Y(X){const Z=this.stack[this.stack.length-1];let pe=Z.children[Z.children.length-1];(!pe||pe.type!=="text")&&(pe=ye(),pe.position={start:_i(X.start)},Z.children.push(pe)),this.stack.push(pe)}function z(X){const Z=this.stack.pop();Z.value+=this.sliceSerialize(X),Z.position.end=_i(X.end)}function Q(X){const Z=this.stack[this.stack.length-1];if(i("atHardBreak")){const pe=Z.children[Z.children.length-1];pe.position.end=_i(X.end),o("atHardBreak");return}!i("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Z.type)&&(Y.call(this,X),z.call(this,X))}function M(){o("atHardBreak",!0)}function le(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.value=X}function Ne(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.value=X}function $(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.value=X}function G(){const X=this.stack[this.stack.length-1];if(i("inReference")){const Z=i("referenceType")||"shortcut";X.type+="Reference",X.referenceType=Z,delete X.url,delete X.title}else delete X.identifier,delete X.label;o("referenceType")}function H(){const X=this.stack[this.stack.length-1];if(i("inReference")){const Z=i("referenceType")||"shortcut";X.type+="Reference",X.referenceType=Z,delete X.url,delete X.title}else delete X.identifier,delete X.label;o("referenceType")}function U(X){const Z=this.sliceSerialize(X),pe=this.stack[this.stack.length-2];pe.label=y3(Z),pe.identifier=to(Z).toLowerCase()}function ee(){const X=this.stack[this.stack.length-1],Z=this.resume(),pe=this.stack[this.stack.length-1];if(o("inReference",!0),pe.type==="link"){const ge=X.children;pe.children=ge}else pe.alt=Z}function te(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.url=X}function V(){const X=this.resume(),Z=this.stack[this.stack.length-1];Z.title=X}function xe(){o("inReference")}function we(){o("referenceType","collapsed")}function Le(X){const Z=this.resume(),pe=this.stack[this.stack.length-1];pe.label=Z,pe.identifier=to(this.sliceSerialize(X)).toLowerCase(),o("referenceType","full")}function Ve(X){o("characterReferenceType",X.type)}function Me(X){const Z=this.sliceSerialize(X),pe=i("characterReferenceType");let ge;pe?(ge=g3(Z,pe==="characterReferenceMarkerNumeric"?10:16),o("characterReferenceType")):ge=T2(Z);const Ee=this.stack.pop();Ee.value+=ge,Ee.position.end=_i(X.end)}function Ke(X){z.call(this,X);const Z=this.stack[this.stack.length-1];Z.url=this.sliceSerialize(X)}function De(X){z.call(this,X);const Z=this.stack[this.stack.length-1];Z.url="mailto:"+this.sliceSerialize(X)}function nt(){return{type:"blockquote",children:[]}}function ut(){return{type:"code",lang:null,meta:null,value:""}}function dt(){return{type:"inlineCode",value:""}}function D(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ue(){return{type:"emphasis",children:[]}}function F(){return{type:"heading",depth:void 0,children:[]}}function A(){return{type:"break"}}function L(){return{type:"html",value:""}}function K(){return{type:"image",title:null,url:"",alt:null}}function oe(){return{type:"link",title:null,url:"",children:[]}}function ie(X){return{type:"list",ordered:X.type==="listOrdered",start:null,spread:X._spread,children:[]}}function J(X){return{type:"listItem",spread:X._spread,checked:null,children:[]}}function me(){return{type:"paragraph",children:[]}}function be(){return{type:"strong",children:[]}}function ye(){return{type:"text",value:""}}function je(){return{type:"thematicBreak"}}}function _i(e){return{line:e.line,column:e.column,offset:e.offset}}function v3(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?v3(e,r):J$(e,r)}}function J$(e,t){let n;for(n in t)if(x3.call(t,n)){if(n==="canContainEols"){const r=t[n];r&&e[n].push(...r)}else if(n==="transforms"){const r=t[n];r&&e[n].push(...r)}else if(n==="enter"||n==="exit"){const r=t[n];r&&Object.assign(e[n],r)}}}function ow(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Cu({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Cu({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Cu({start:t.start,end:t.end})+") is still open")}function Z$(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return Q$(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function eW(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function tW(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function nW(e,t){const n=t.value?t.value+`
`:"",r=t.lang?t.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,s={};r&&(s.className=["language-"+r]);let o={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function rW(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function sW(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yc(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const o=e.charCodeAt(n);let i="";if(o===37&&mr(e.charCodeAt(n+1))&&mr(e.charCodeAt(n+2)))s=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(i=String.fromCharCode(o));else if(o>55295&&o<57344){const l=e.charCodeAt(n+1);o<56320&&l>56319&&l<57344?(i=String.fromCharCode(o,l),s=1):i="�"}else i=String.fromCharCode(o);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+s+1,i=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function b3(e,t){const n=String(t.identifier).toUpperCase(),r=yc(n.toLowerCase()),s=e.footnoteOrder.indexOf(n);let o;s===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,o=e.footnoteOrder.length):(e.footnoteCounts[n]++,o=s+1);const i=e.footnoteCounts[n],l={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(i>1?"-"+i:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function oW(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const s=String(r);return n[s]={type:"footnoteDefinition",identifier:s,children:[{type:"paragraph",children:t.children}],position:t.position},b3(e,{type:"footnoteReference",identifier:s,position:t.position})}function iW(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function aW(e,t){if(e.dangerous){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}return null}function w3(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return{type:"text",value:"!["+t.alt+r};const s=e.all(t),o=s[0];o&&o.type==="text"?o.value="["+o.value:s.unshift({type:"text",value:"["});const i=s[s.length-1];return i&&i.type==="text"?i.value+=r:s.push({type:"text",value:r}),s}function lW(e,t){const n=e.definition(t.identifier);if(!n)return w3(e,t);const r={src:yc(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(r.title=n.title);const s={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,s),e.applyData(t,s)}function cW(e,t){const n={src:yc(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function uW(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function dW(e,t){const n=e.definition(t.identifier);if(!n)return w3(e,t);const r={href:yc(n.url||"")};n.title!==null&&n.title!==void 0&&(r.title=n.title);const s={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function fW(e,t){const n={href:yc(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function hW(e,t,n){const r=e.all(t),s=n?mW(n):T3(t),o={},i=[];if(typeof t.checked=="boolean"){const m=r[0];let h;m&&m.type==="element"&&m.tagName==="p"?h=m:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const m=r[l];(s||l!==0||m.type!=="element"||m.tagName!=="p")&&i.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?i.push(...m.children):i.push(m)}const u=r[r.length-1];u&&(s||u.type!=="element"||u.tagName!=="p")&&i.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:i};return e.patch(t,f),e.applyData(t,f)}function mW(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=T3(n[r])}return t}function T3(e){const t=e.spread;return t??e.children.length>1}function pW(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const i=r[s];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function gW(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yW(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function xW(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const k1=E3("start"),gm=E3("end");function vW(e){return{start:k1(e),end:gm(e)}}function E3(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function bW(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const i={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],i),s.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=k1(t.children[1]),u=gm(t.children[t.children.length-1]);l.line&&u.line&&(i.position={start:l,end:u}),s.push(i)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,o),e.applyData(t,o)}function wW(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",i=n&&n.type==="table"?n.align:void 0,l=i?i.length:t.children.length;let u=-1;const f=[];for(;++u<l;){const h=t.children[u],g={},p=i?i[u]:void 0;p&&(g.align=p);let b={type:"element",tagName:o,properties:g,children:[]};h&&(b.children=e.all(h),e.patch(h,b),b=e.applyData(t,b)),f.push(b)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,m),e.applyData(t,m)}function TW(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const iw=9,aw=32;function EW(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const o=[];for(;r;)o.push(lw(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return o.push(lw(t.slice(s),s>0,!1)),o.join("")}function lw(e,t,n){let r=0,s=e.length;if(t){let o=e.codePointAt(r);for(;o===iw||o===aw;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(s-1);for(;o===iw||o===aw;)s--,o=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function CW(e,t){const n={type:"text",value:EW(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function _W(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const NW={blockquote:eW,break:tW,code:nW,delete:rW,emphasis:sW,footnoteReference:b3,footnote:oW,heading:iW,html:aW,imageReference:lW,image:cW,inlineCode:uW,linkReference:dW,link:fW,listItem:hW,list:pW,paragraph:gW,root:yW,strong:xW,table:bW,tableCell:TW,tableRow:wW,text:CW,thematicBreak:_W,toml:$d,yaml:$d,definition:$d,footnoteDefinition:$d};function $d(){return null}const C2=function(e){if(e==null)return OW;if(typeof e=="string")return AW(e);if(typeof e=="object")return Array.isArray(e)?SW(e):kW(e);if(typeof e=="function")return ym(e);throw new Error("Expected function, string, or object as test")};function SW(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=C2(e[n]);return ym(r);function r(...s){let o=-1;for(;++o<t.length;)if(t[o].call(this,...s))return!0;return!1}}function kW(e){return ym(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function AW(e){return ym(t);function t(n){return n&&n.type===e}}function ym(e){return t;function t(n,...r){return!!(n&&typeof n=="object"&&"type"in n&&e.call(this,n,...r))}}function OW(){return!0}const RW=!0,cw=!1,IW="skip",C3=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const s=C2(t),o=r?-1:1;i(e,void 0,[])();function i(l,u,f){const m=l&&typeof l=="object"?l:{};if(typeof m.type=="string"){const g=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return h;function h(){let g=[],p,b,v;if((!t||s(l,u,f[f.length-1]||null))&&(g=jW(n(l,f)),g[0]===cw))return g;if(l.children&&g[0]!==IW)for(b=(r?l.children.length:-1)+o,v=f.concat(l);b>-1&&b<l.children.length;){if(p=i(l.children[b],b,v)(),p[0]===cw)return p;b=typeof p[1]=="number"?p[1]:b+o}return g}}};function jW(e){return Array.isArray(e)?e:typeof e=="number"?[RW,e]:[e]}const xm=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),C3(e,t,s,r);function s(o,i){const l=i[i.length-1];return n(o,l?l.children.indexOf(o):null,l)}};function LW(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const uw={}.hasOwnProperty;function DW(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return xm(e,"definition",r=>{const s=dw(r.identifier);s&&!uw.call(t,s)&&(t[s]=r)}),n;function n(r){const s=dw(r);return s&&uw.call(t,s)?t[s]:null}}function dw(e){return String(e||"").toUpperCase()}const Sh={}.hasOwnProperty;function MW(e,t){const n=t||{},r=n.allowDangerousHtml||!1,s={};return i.dangerous=r,i.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,i.footnoteLabel=n.footnoteLabel||"Footnotes",i.footnoteLabelTagName=n.footnoteLabelTagName||"h2",i.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},i.footnoteBackLabel=n.footnoteBackLabel||"Back to content",i.unknownHandler=n.unknownHandler,i.passThrough=n.passThrough,i.handlers={...NW,...n.handlers},i.definition=DW(e),i.footnoteById=s,i.footnoteOrder=[],i.footnoteCounts={},i.patch=PW,i.applyData=FW,i.one=l,i.all=u,i.wrap=zW,i.augment=o,xm(e,"footnoteDefinition",f=>{const m=String(f.identifier).toUpperCase();Sh.call(s,m)||(s[m]=f)}),i;function o(f,m){if(f&&"data"in f&&f.data){const h=f.data;h.hName&&(m.type!=="element"&&(m={type:"element",tagName:"",properties:{},children:[]}),m.tagName=h.hName),m.type==="element"&&h.hProperties&&(m.properties={...m.properties,...h.hProperties}),"children"in m&&m.children&&h.hChildren&&(m.children=h.hChildren)}if(f){const h="type"in f?f:{position:f};LW(h)||(m.position={start:k1(h),end:gm(h)})}return m}function i(f,m,h,g){return Array.isArray(h)&&(g=h,h={}),o(f,{type:"element",tagName:m,properties:h||{},children:g||[]})}function l(f,m){return _3(i,f,m)}function u(f){return _2(i,f)}}function PW(e,t){e.position&&(t.position=vW(e))}function FW(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,o=e.data.hProperties;typeof r=="string"&&(n.type==="element"?n.tagName=r:n={type:"element",tagName:r,properties:{},children:[]}),n.type==="element"&&o&&(n.properties={...n.properties,...o}),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function _3(e,t,n){const r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");return Sh.call(e.handlers,r)?e.handlers[r](e,t,n):e.passThrough&&e.passThrough.includes(r)?"children"in t?{...t,children:_2(e,t)}:t:e.unknownHandler?e.unknownHandler(e,t,n):BW(e,t)}function _2(e,t){const n=[];if("children"in t){const r=t.children;let s=-1;for(;++s<r.length;){const o=_3(e,r[s],t);if(o){if(s&&r[s-1].type==="break"&&(!Array.isArray(o)&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,"")),!Array.isArray(o)&&o.type==="element")){const i=o.children[0];i&&i.type==="text"&&(i.value=i.value.replace(/^\s+/,""))}Array.isArray(o)?n.push(...o):n.push(o)}}}return n}function BW(e,t){const n=t.data||{},r="value"in t&&!(Sh.call(n,"hProperties")||Sh.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:_2(e,t)};return e.patch(t,r),e.applyData(t,r)}function zW(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function UW(e){const t=[];let n=-1;for(;++n<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[n]];if(!r)continue;const s=e.all(r),o=String(r.identifier).toUpperCase(),i=yc(o.toLowerCase());let l=0;const u=[];for(;++l<=e.footnoteCounts[o];){const h={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"↩"}]};l>1&&h.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(l)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(h)}const f=s[s.length-1];if(f&&f.type==="element"&&f.tagName==="p"){const h=f.children[f.children.length-1];h&&h.type==="text"?h.value+=" ":f.children.push({type:"text",value:" "}),f.children.push(...u)}else s.push(...u);const m={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+i},children:e.wrap(s,!0)};e.patch(r,m),t.push(m)}if(t.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(t,!0)},{type:"text",value:`
`}]}}function N3(e,t){const n=MW(e,t),r=n.one(e,null),s=UW(n);return s&&r.children.push({type:"text",value:`
`},s),Array.isArray(r)?{type:"root",children:r}:r}const HW=function(e,t){return e&&"run"in e?WW(e,t):GW(e||t)},$W=HW;function WW(e,t){return(n,r,s)=>{e.run(N3(n,t),r,o=>{s(o)})}}function GW(e){return t=>N3(t,e)}var S3={exports:{}},KW="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",YW=KW,VW=YW;function k3(){}function A3(){}A3.resetWarningCache=k3;var qW=function(){function e(r,s,o,i,l,u){if(u!==VW){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:A3,resetWarningCache:k3};return n.PropTypes=n,n};S3.exports=qW();var QW=S3.exports;const ht=ra(QW);class A1{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}A1.prototype.property={};A1.prototype.normal={};A1.prototype.space=null;function O3(e,t){const n={},r={};let s=-1;for(;++s<e.length;)Object.assign(n,e[s].property),Object.assign(r,e[s].normal);return new A1(n,r,t)}function l1(e){return e.toLowerCase()}class Ds{constructor(t,n){this.property=t,this.attribute=n}}Ds.prototype.space=null;Ds.prototype.boolean=!1;Ds.prototype.booleanish=!1;Ds.prototype.overloadedBoolean=!1;Ds.prototype.number=!1;Ds.prototype.commaSeparated=!1;Ds.prototype.spaceSeparated=!1;Ds.prototype.commaOrSpaceSeparated=!1;Ds.prototype.mustUseProperty=!1;Ds.prototype.defined=!1;let XW=0;const yt=Xa(),kn=Xa(),R3=Xa(),Fe=Xa(),tn=Xa(),Ql=Xa(),es=Xa();function Xa(){return 2**++XW}const Wy=Object.freeze(Object.defineProperty({__proto__:null,boolean:yt,booleanish:kn,commaOrSpaceSeparated:es,commaSeparated:Ql,number:Fe,overloadedBoolean:R3,spaceSeparated:tn},Symbol.toStringTag,{value:"Module"})),Qp=Object.keys(Wy);class N2 extends Ds{constructor(t,n,r,s){let o=-1;if(super(t,n),fw(this,"space",s),typeof r=="number")for(;++o<Qp.length;){const i=Qp[o];fw(this,Qp[o],(r&Wy[i])===Wy[i])}}}N2.prototype.defined=!0;function fw(e,t,n){n&&(e[t]=n)}const JW={}.hasOwnProperty;function xc(e){const t={},n={};let r;for(r in e.properties)if(JW.call(e.properties,r)){const s=e.properties[r],o=new N2(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[l1(r)]=r,n[l1(o.attribute)]=r}return new A1(t,n,e.space)}const I3=xc({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),j3=xc({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function L3(e,t){return t in e?e[t]:t}function D3(e,t){return L3(e,t.toLowerCase())}const M3=xc({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:D3,properties:{xmlns:null,xmlnsXLink:null}}),P3=xc({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:kn,ariaAutoComplete:null,ariaBusy:kn,ariaChecked:kn,ariaColCount:Fe,ariaColIndex:Fe,ariaColSpan:Fe,ariaControls:tn,ariaCurrent:null,ariaDescribedBy:tn,ariaDetails:null,ariaDisabled:kn,ariaDropEffect:tn,ariaErrorMessage:null,ariaExpanded:kn,ariaFlowTo:tn,ariaGrabbed:kn,ariaHasPopup:null,ariaHidden:kn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:tn,ariaLevel:Fe,ariaLive:null,ariaModal:kn,ariaMultiLine:kn,ariaMultiSelectable:kn,ariaOrientation:null,ariaOwns:tn,ariaPlaceholder:null,ariaPosInSet:Fe,ariaPressed:kn,ariaReadOnly:kn,ariaRelevant:null,ariaRequired:kn,ariaRoleDescription:tn,ariaRowCount:Fe,ariaRowIndex:Fe,ariaRowSpan:Fe,ariaSelected:kn,ariaSetSize:Fe,ariaSort:null,ariaValueMax:Fe,ariaValueMin:Fe,ariaValueNow:Fe,ariaValueText:null,role:null}}),ZW=xc({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:D3,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ql,acceptCharset:tn,accessKey:tn,action:null,allow:null,allowFullScreen:yt,allowPaymentRequest:yt,allowUserMedia:yt,alt:null,as:null,async:yt,autoCapitalize:null,autoComplete:tn,autoFocus:yt,autoPlay:yt,blocking:tn,capture:null,charSet:null,checked:yt,cite:null,className:tn,cols:Fe,colSpan:null,content:null,contentEditable:kn,controls:yt,controlsList:tn,coords:Fe|Ql,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yt,defer:yt,dir:null,dirName:null,disabled:yt,download:R3,draggable:kn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yt,formTarget:null,headers:tn,height:Fe,hidden:yt,high:Fe,href:null,hrefLang:null,htmlFor:tn,httpEquiv:tn,id:null,imageSizes:null,imageSrcSet:null,inert:yt,inputMode:null,integrity:null,is:null,isMap:yt,itemId:null,itemProp:tn,itemRef:tn,itemScope:yt,itemType:tn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yt,low:Fe,manifest:null,max:null,maxLength:Fe,media:null,method:null,min:null,minLength:Fe,multiple:yt,muted:yt,name:null,nonce:null,noModule:yt,noValidate:yt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yt,optimum:Fe,pattern:null,ping:tn,placeholder:null,playsInline:yt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yt,referrerPolicy:null,rel:tn,required:yt,reversed:yt,rows:Fe,rowSpan:Fe,sandbox:tn,scope:null,scoped:yt,seamless:yt,selected:yt,shadowRootClonable:yt,shadowRootDelegatesFocus:yt,shadowRootMode:null,shape:null,size:Fe,sizes:null,slot:null,span:Fe,spellCheck:kn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Fe,step:null,style:null,tabIndex:Fe,target:null,title:null,translate:null,type:null,typeMustMatch:yt,useMap:null,value:kn,width:Fe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:tn,axis:null,background:null,bgColor:null,border:Fe,borderColor:null,bottomMargin:Fe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yt,declare:yt,event:null,face:null,frame:null,frameBorder:null,hSpace:Fe,leftMargin:Fe,link:null,longDesc:null,lowSrc:null,marginHeight:Fe,marginWidth:Fe,noResize:yt,noHref:yt,noShade:yt,noWrap:yt,object:null,profile:null,prompt:null,rev:null,rightMargin:Fe,rules:null,scheme:null,scrolling:kn,standby:null,summary:null,text:null,topMargin:Fe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Fe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yt,disableRemotePlayback:yt,prefix:null,property:null,results:Fe,security:null,unselectable:null}}),eG=xc({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:L3,properties:{about:es,accentHeight:Fe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Fe,amplitude:Fe,arabicForm:null,ascent:Fe,attributeName:null,attributeType:null,azimuth:Fe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Fe,by:null,calcMode:null,capHeight:Fe,className:tn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Fe,diffuseConstant:Fe,direction:null,display:null,dur:null,divisor:Fe,dominantBaseline:null,download:yt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Fe,enableBackground:null,end:null,event:null,exponent:Fe,externalResourcesRequired:null,fill:null,fillOpacity:Fe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ql,g2:Ql,glyphName:Ql,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Fe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Fe,horizOriginX:Fe,horizOriginY:Fe,id:null,ideographic:Fe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Fe,k:Fe,k1:Fe,k2:Fe,k3:Fe,k4:Fe,kernelMatrix:es,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Fe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Fe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Fe,overlineThickness:Fe,paintOrder:null,panose1:null,path:null,pathLength:Fe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:tn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Fe,pointsAtY:Fe,pointsAtZ:Fe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:es,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:es,rev:es,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:es,requiredFeatures:es,requiredFonts:es,requiredFormats:es,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Fe,specularExponent:Fe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Fe,strikethroughThickness:Fe,string:null,stroke:null,strokeDashArray:es,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Fe,strokeOpacity:Fe,strokeWidth:null,style:null,surfaceScale:Fe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:es,tabIndex:Fe,tableValues:null,target:null,targetX:Fe,targetY:Fe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:es,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Fe,underlineThickness:Fe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Fe,values:null,vAlphabetic:Fe,vMathematical:Fe,vectorEffect:null,vHanging:Fe,vIdeographic:Fe,version:null,vertAdvY:Fe,vertOriginX:Fe,vertOriginY:Fe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Fe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),tG=/^data[-\w.:]+$/i,hw=/-[a-z]/g,nG=/[A-Z]/g;function vm(e,t){const n=l1(t);let r=t,s=Ds;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&tG.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(hw,sG);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!hw.test(o)){let i=o.replace(nG,rG);i.charAt(0)!=="-"&&(i="-"+i),t="data"+i}}s=N2}return new s(r,t)}function rG(e){return"-"+e.toLowerCase()}function sG(e){return e.charAt(1).toUpperCase()}const mw={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},O1=O3([j3,I3,M3,P3,ZW],"html"),vc=O3([j3,I3,M3,P3,eG],"svg");function oG(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{xm(t,"element",(n,r,s)=>{const o=s;let i;if(e.allowedElements?i=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(i=e.disallowedElements.includes(n.tagName)),!i&&e.allowElement&&typeof r=="number"&&(i=!e.allowElement(n,r,o)),i&&typeof r=="number")return e.unwrapDisallowed&&n.children?o.children.splice(r,1,...n.children):o.children.splice(r,1),r})}}var F3={exports:{}},Yt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2=Symbol.for("react.element"),k2=Symbol.for("react.portal"),bm=Symbol.for("react.fragment"),wm=Symbol.for("react.strict_mode"),Tm=Symbol.for("react.profiler"),Em=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),iG=Symbol.for("react.server_context"),_m=Symbol.for("react.forward_ref"),Nm=Symbol.for("react.suspense"),Sm=Symbol.for("react.suspense_list"),km=Symbol.for("react.memo"),Am=Symbol.for("react.lazy"),aG=Symbol.for("react.offscreen"),B3;B3=Symbol.for("react.module.reference");function Ms(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case S2:switch(e=e.type,e){case bm:case Tm:case wm:case Nm:case Sm:return e;default:switch(e=e&&e.$$typeof,e){case iG:case Cm:case _m:case Am:case km:case Em:return e;default:return t}}case k2:return t}}}Yt.ContextConsumer=Cm;Yt.ContextProvider=Em;Yt.Element=S2;Yt.ForwardRef=_m;Yt.Fragment=bm;Yt.Lazy=Am;Yt.Memo=km;Yt.Portal=k2;Yt.Profiler=Tm;Yt.StrictMode=wm;Yt.Suspense=Nm;Yt.SuspenseList=Sm;Yt.isAsyncMode=function(){return!1};Yt.isConcurrentMode=function(){return!1};Yt.isContextConsumer=function(e){return Ms(e)===Cm};Yt.isContextProvider=function(e){return Ms(e)===Em};Yt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===S2};Yt.isForwardRef=function(e){return Ms(e)===_m};Yt.isFragment=function(e){return Ms(e)===bm};Yt.isLazy=function(e){return Ms(e)===Am};Yt.isMemo=function(e){return Ms(e)===km};Yt.isPortal=function(e){return Ms(e)===k2};Yt.isProfiler=function(e){return Ms(e)===Tm};Yt.isStrictMode=function(e){return Ms(e)===wm};Yt.isSuspense=function(e){return Ms(e)===Nm};Yt.isSuspenseList=function(e){return Ms(e)===Sm};Yt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===bm||e===Tm||e===wm||e===Nm||e===Sm||e===aG||typeof e=="object"&&e!==null&&(e.$$typeof===Am||e.$$typeof===km||e.$$typeof===Em||e.$$typeof===Cm||e.$$typeof===_m||e.$$typeof===B3||e.getModuleId!==void 0)};Yt.typeOf=Ms;F3.exports=Yt;var lG=F3.exports;const cG=ra(lG);function uG(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function pw(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function z3(e){return e.join(" ").trim()}function gw(e){const t=[],n=String(e||"");let r=n.indexOf(","),s=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const i=n.slice(s,r).trim();(i||!o)&&t.push(i),s=r+1,r=n.indexOf(",",s)}return t}function U3(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var A2={exports:{}},yw=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,dG=/\n/g,fG=/^\s*/,hG=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,mG=/^:\s*/,pG=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,gG=/^[;\s]*/,yG=/^\s+|\s+$/g,xG=`
`,xw="/",vw="*",Ia="",vG="comment",bG="declaration",wG=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(b){var v=b.match(dG);v&&(n+=v.length);var T=b.lastIndexOf(xG);r=~T?b.length-T:r+b.length}function o(){var b={line:n,column:r};return function(v){return v.position=new i(b),f(),v}}function i(b){this.start=b,this.end={line:n,column:r},this.source=t.source}i.prototype.content=e;function l(b){var v=new Error(t.source+":"+n+":"+r+": "+b);if(v.reason=b,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function u(b){var v=b.exec(e);if(v){var T=v[0];return s(T),e=e.slice(T.length),v}}function f(){u(fG)}function m(b){var v;for(b=b||[];v=h();)v!==!1&&b.push(v);return b}function h(){var b=o();if(!(xw!=e.charAt(0)||vw!=e.charAt(1))){for(var v=2;Ia!=e.charAt(v)&&(vw!=e.charAt(v)||xw!=e.charAt(v+1));)++v;if(v+=2,Ia===e.charAt(v-1))return l("End of comment missing");var T=e.slice(2,v-2);return r+=2,s(T),e=e.slice(v),r+=2,b({type:vG,comment:T})}}function g(){var b=o(),v=u(hG);if(v){if(h(),!u(mG))return l("property missing ':'");var T=u(pG),y=b({type:bG,property:bw(v[0].replace(yw,Ia)),value:T?bw(T[0].replace(yw,Ia)):Ia});return u(gG),y}}function p(){var b=[];m(b);for(var v;v=g();)v!==!1&&(b.push(v),m(b));return b}return f(),p()};function bw(e){return e?e.replace(yG,Ia):Ia}var TG=wG;function H3(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,s=TG(e),o=typeof t=="function",i,l,u=0,f=s.length;u<f;u++)r=s[u],i=r.property,l=r.value,o?t(i,l,r):l&&(n||(n={}),n[i]=l);return n}A2.exports=H3;A2.exports.default=H3;var EG=A2.exports;const CG=ra(EG),Gy={}.hasOwnProperty,_G=new Set(["table","thead","tbody","tfoot","tr"]);function $3(e,t){const n=[];let r=-1,s;for(;++r<t.children.length;)s=t.children[r],s.type==="element"?n.push(NG(e,s,r,t)):s.type==="text"?(t.type!=="element"||!_G.has(t.tagName)||!uG(s))&&n.push(s.value):s.type==="raw"&&!e.options.skipHtml&&n.push(s.value);return n}function NG(e,t,n,r){const s=e.options,o=s.transformLinkUri===void 0?IU:s.transformLinkUri,i=e.schema,l=t.tagName,u={};let f=i,m;if(i.space==="html"&&l==="svg"&&(f=vc,e.schema=f),t.properties)for(m in t.properties)Gy.call(t.properties,m)&&kG(u,m,t.properties[m],e);(l==="ol"||l==="ul")&&e.listDepth++;const h=$3(e,t);(l==="ol"||l==="ul")&&e.listDepth--,e.schema=i;const g=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},p=s.components&&Gy.call(s.components,l)?s.components[l]:l,b=typeof p=="string"||p===St.Fragment;if(!cG.isValidElementType(p))throw new TypeError(`Component for name \`${l}\` not defined or is not renderable`);if(u.key=n,l==="a"&&s.linkTarget&&(u.target=typeof s.linkTarget=="function"?s.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):s.linkTarget),l==="a"&&o&&(u.href=o(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!b&&l==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!b&&(l==="h1"||l==="h2"||l==="h3"||l==="h4"||l==="h5"||l==="h6")&&(u.level=Number.parseInt(l.charAt(1),10)),l==="img"&&s.transformImageUri&&(u.src=s.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!b&&l==="li"&&r.type==="element"){const v=SG(t);u.checked=v&&v.properties?!!v.properties.checked:null,u.index=Xp(r,t),u.ordered=r.tagName==="ol"}return!b&&(l==="ol"||l==="ul")&&(u.ordered=l==="ol",u.depth=e.listDepth),(l==="td"||l==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),b||(u.isHeader=l==="th")),!b&&l==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),s.sourcePos&&(u["data-sourcepos"]=RG(g)),!b&&s.rawSourcePos&&(u.sourcePosition=t.position),!b&&s.includeElementIndex&&(u.index=Xp(r,t),u.siblingCount=Xp(r)),b||(u.node=t),h.length>0?St.createElement(p,u,h):St.createElement(p,u)}function SG(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function Xp(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function kG(e,t,n,r){const s=vm(r.schema,t);let o=n;o==null||o!==o||(Array.isArray(o)&&(o=s.commaSeparated?U3(o):z3(o)),s.property==="style"&&typeof o=="string"&&(o=AG(o)),s.space&&s.property?e[Gy.call(mw,s.property)?mw[s.property]:s.property]=o:s.attribute&&(e[s.attribute]=o))}function AG(e){const t={};try{CG(e,n)}catch{}return t;function n(r,s){const o=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[o.replace(/-([a-z])/g,OG)]=s}}function OG(e,t){return t.toUpperCase()}function RG(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const ww={}.hasOwnProperty,IG="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Wd={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function If(e){for(const o in Wd)if(ww.call(Wd,o)&&ww.call(e,o)){const i=Wd[o];console.warn(`[react-markdown] Warning: please ${i.to?`use \`${i.to}\` instead of`:"remove"} \`${o}\` (see <${IG}#${i.id}> for more info)`),delete Wd[o]}const t=VU().use(Z$).use(e.remarkPlugins||[]).use($W,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(oG,e),n=new t3;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let s=St.createElement(St.Fragment,{},$3({options:e,schema:O1,listDepth:0},r));return e.className&&(s=St.createElement("div",{className:e.className},s)),s}If.propTypes={children:ht.string,className:ht.string,allowElement:ht.func,allowedElements:ht.arrayOf(ht.string),disallowedElements:ht.arrayOf(ht.string),unwrapDisallowed:ht.bool,remarkPlugins:ht.arrayOf(ht.oneOfType([ht.object,ht.func,ht.arrayOf(ht.oneOfType([ht.bool,ht.string,ht.object,ht.func,ht.arrayOf(ht.any)]))])),rehypePlugins:ht.arrayOf(ht.oneOfType([ht.object,ht.func,ht.arrayOf(ht.oneOfType([ht.bool,ht.string,ht.object,ht.func,ht.arrayOf(ht.any)]))])),sourcePos:ht.bool,rawSourcePos:ht.bool,skipHtml:ht.bool,includeElementIndex:ht.bool,transformLinkUri:ht.oneOfType([ht.func,ht.bool]),linkTarget:ht.oneOfType([ht.func,ht.string]),transformImageUri:ht.func,components:ht.object};const jG={tokenize:BG,partial:!0},W3={tokenize:zG,partial:!0},G3={tokenize:UG,partial:!0},K3={tokenize:HG,partial:!0},LG={tokenize:$G,partial:!0},Y3={tokenize:PG,previous:q3},V3={tokenize:FG,previous:Q3},ui={tokenize:MG,previous:X3},Oo={},DG={text:Oo};let Ea=48;for(;Ea<123;)Oo[Ea]=ui,Ea++,Ea===58?Ea=65:Ea===91&&(Ea=97);Oo[43]=ui;Oo[45]=ui;Oo[46]=ui;Oo[95]=ui;Oo[72]=[ui,V3];Oo[104]=[ui,V3];Oo[87]=[ui,Y3];Oo[119]=[ui,Y3];function MG(e,t,n){const r=this;let s,o;return i;function i(h){return!Ky(h)||!X3.call(r,r.previous)||O2(r.events)?n(h):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(h))}function l(h){return Ky(h)?(e.consume(h),l):h===64?(e.consume(h),u):n(h)}function u(h){return h===46?e.check(LG,m,f)(h):h===45||h===95||mr(h)?(o=!0,e.consume(h),u):m(h)}function f(h){return e.consume(h),s=!0,u}function m(h){return o&&s&&Cr(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(h)):n(h)}}function PG(e,t,n){const r=this;return s;function s(i){return i!==87&&i!==119||!q3.call(r,r.previous)||O2(r.events)?n(i):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(jG,e.attempt(W3,e.attempt(G3,o),n),n)(i))}function o(i){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(i)}}function FG(e,t,n){const r=this;let s="",o=!1;return i;function i(h){return(h===72||h===104)&&Q3.call(r,r.previous)&&!O2(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(h),e.consume(h),l):n(h)}function l(h){if(Cr(h)&&s.length<5)return s+=String.fromCodePoint(h),e.consume(h),l;if(h===58){const g=s.toLowerCase();if(g==="http"||g==="https")return e.consume(h),u}return n(h)}function u(h){return h===47?(e.consume(h),o?f:(o=!0,u)):n(h)}function f(h){return h===null||_h(h)||Jt(h)||Ya(h)||mm(h)?n(h):e.attempt(W3,e.attempt(G3,m),n)(h)}function m(h){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(h)}}function BG(e,t,n){let r=0;return s;function s(i){return(i===87||i===119)&&r<3?(r++,e.consume(i),s):i===46&&r===3?(e.consume(i),o):n(i)}function o(i){return i===null?n(i):t(i)}}function zG(e,t,n){let r,s,o;return i;function i(f){return f===46||f===95?e.check(K3,u,l)(f):f===null||Jt(f)||Ya(f)||f!==45&&mm(f)?u(f):(o=!0,e.consume(f),i)}function l(f){return f===95?r=!0:(s=r,r=void 0),e.consume(f),i}function u(f){return s||r||!o?n(f):t(f)}}function UG(e,t){let n=0,r=0;return s;function s(i){return i===40?(n++,e.consume(i),s):i===41&&r<n?o(i):i===33||i===34||i===38||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===60||i===63||i===93||i===95||i===126?e.check(K3,t,o)(i):i===null||Jt(i)||Ya(i)?t(i):(e.consume(i),s)}function o(i){return i===41&&r++,e.consume(i),s}}function HG(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),o):l===93?(e.consume(l),s):l===60||l===null||Jt(l)||Ya(l)?t(l):n(l)}function s(l){return l===null||l===40||l===91||Jt(l)||Ya(l)?t(l):r(l)}function o(l){return Cr(l)?i(l):n(l)}function i(l){return l===59?(e.consume(l),r):Cr(l)?(e.consume(l),i):n(l)}}function $G(e,t,n){return r;function r(o){return e.consume(o),s}function s(o){return mr(o)?n(o):t(o)}}function q3(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Jt(e)}function Q3(e){return!Cr(e)}function X3(e){return!(e===47||Ky(e))}function Ky(e){return e===43||e===45||e===46||e===95||mr(e)}function O2(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const WG={tokenize:JG,partial:!0};function GG(){return{document:{91:{tokenize:qG,continuation:{tokenize:QG},exit:XG}},text:{91:{tokenize:VG},93:{add:"after",tokenize:KG,resolveTo:YG}}}}function KG(e,t,n){const r=this;let s=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;s--;){const u=r.events[s][1];if(u.type==="labelImage"){i=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!i||!i._balanced)return n(u);const f=to(r.sliceSerialize({start:i.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function YG(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",o,t],["enter",i,t],["exit",i,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function VG(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,i;return l;function l(h){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),u}function u(h){return h!==94?n(h):(e.enter("gfmFootnoteCallMarker"),e.consume(h),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(h){if(o>999||h===93&&!i||h===null||h===91||Jt(h))return n(h);if(h===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return s.includes(to(r.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(h)}return Jt(h)||(i=!0),o++,e.consume(h),h===92?m:f}function m(h){return h===91||h===92||h===93?(e.consume(h),o++,f):f(h)}}function qG(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,i=0,l;return u;function u(b){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(b){return b===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):n(b)}function m(b){if(i>999||b===93&&!l||b===null||b===91||Jt(b))return n(b);if(b===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return o=to(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return Jt(b)||(l=!0),i++,e.consume(b),b===92?h:m}function h(b){return b===91||b===92||b===93?(e.consume(b),i++,m):m(b)}function g(b){return b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),s.includes(o)||s.push(o),Mt(e,p,"gfmFootnoteDefinitionWhitespace")):n(b)}function p(b){return t(b)}}function QG(e,t,n){return e.check(S1,t,e.attempt(WG,t,n))}function XG(e){e.exit("gfmFootnoteDefinition")}function JG(e,t,n){const r=this;return Mt(e,s,"gfmFootnoteDefinitionIndent",4+1);function s(o){const i=r.events[r.events.length-1];return i&&i[1].type==="gfmFootnoteDefinitionIndent"&&i[2].sliceSerialize(i[1],!0).length===4?t(o):n(o)}}function ZG(e){let n=(e||{}).singleTilde;const r={tokenize:o,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(i,l){let u=-1;for(;++u<i.length;)if(i[u][0]==="enter"&&i[u][1].type==="strikethroughSequenceTemporary"&&i[u][1]._close){let f=u;for(;f--;)if(i[f][0]==="exit"&&i[f][1].type==="strikethroughSequenceTemporary"&&i[f][1]._open&&i[u][1].end.offset-i[u][1].start.offset===i[f][1].end.offset-i[f][1].start.offset){i[u][1].type="strikethroughSequence",i[f][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},i[f][1].start),end:Object.assign({},i[u][1].end)},h={type:"strikethroughText",start:Object.assign({},i[f][1].end),end:Object.assign({},i[u][1].start)},g=[["enter",m,l],["enter",i[f][1],l],["exit",i[f][1],l],["enter",h,l]],p=l.parser.constructs.insideSpan.null;p&&is(g,g.length,0,pm(p,i.slice(f+1,u),l)),is(g,g.length,0,[["exit",h,l],["enter",i[u][1],l],["exit",i[u][1],l],["exit",m,l]]),is(i,f-1,u-f+3,g),u=f+g.length-2;break}}for(u=-1;++u<i.length;)i[u][1].type==="strikethroughSequenceTemporary"&&(i[u][1].type="data");return i}function o(i,l,u){const f=this.previous,m=this.events;let h=0;return g;function g(b){return f===126&&m[m.length-1][1].type!=="characterEscape"?u(b):(i.enter("strikethroughSequenceTemporary"),p(b))}function p(b){const v=Nh(f);if(b===126)return h>1?u(b):(i.consume(b),h++,p);if(h<2&&!n)return u(b);const T=i.exit("strikethroughSequenceTemporary"),y=Nh(b);return T._open=!y||y===2&&!!v,T._close=!v||v===2&&!!y,l(b)}}}class eK{constructor(){this.map=[]}add(t,n,r){tK(this,t,n,r)}consume(t){if(this.map.sort((o,i)=>o[0]-i[0]),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1])),r.push(this.map[n][2]),t.length=this.map[n][0];r.push([...t]),t.length=0;let s=r.pop();for(;s;)t.push(...s),s=r.pop();this.map.length=0}}function tK(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function nK(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}const rK={flow:{null:{tokenize:sK,resolveAll:oK}}};function sK(e,t,n){const r=this;let s=0,o=0,i;return l;function l(P){let Y=r.events.length-1;for(;Y>-1;){const M=r.events[Y][1].type;if(M==="lineEnding"||M==="linePrefix")Y--;else break}const z=Y>-1?r.events[Y][1].type:null,Q=z==="tableHead"||z==="tableRow"?_:u;return Q===_&&r.parser.lazy[r.now().line]?n(P):Q(P)}function u(P){return e.enter("tableHead"),e.enter("tableRow"),f(P)}function f(P){return P===124||(i=!0,o+=1),m(P)}function m(P){return P===null?n(P):it(P)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),p):n(P):kt(P)?Mt(e,m,"whitespace")(P):(o+=1,i&&(i=!1,s+=1),P===124?(e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),i=!0,m):(e.enter("data"),h(P)))}function h(P){return P===null||P===124||Jt(P)?(e.exit("data"),m(P)):(e.consume(P),P===92?g:h)}function g(P){return P===92||P===124?(e.consume(P),h):h(P)}function p(P){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(P):(e.enter("tableDelimiterRow"),i=!1,kt(P)?Mt(e,b,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):b(P))}function b(P){return P===45||P===58?T(P):P===124?(i=!0,e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),v):j(P)}function v(P){return kt(P)?Mt(e,T,"whitespace")(P):T(P)}function T(P){return P===58?(o+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(P),e.exit("tableDelimiterMarker"),y):P===45?(o+=1,y(P)):P===null||it(P)?I(P):j(P)}function y(P){return P===45?(e.enter("tableDelimiterFiller"),E(P)):j(P)}function E(P){return P===45?(e.consume(P),E):P===58?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(P),e.exit("tableDelimiterMarker"),w):(e.exit("tableDelimiterFiller"),w(P))}function w(P){return kt(P)?Mt(e,I,"whitespace")(P):I(P)}function I(P){return P===124?b(P):P===null||it(P)?!i||s!==o?j(P):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(P)):j(P)}function j(P){return n(P)}function _(P){return e.enter("tableRow"),C(P)}function C(P){return P===124?(e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),C):P===null||it(P)?(e.exit("tableRow"),t(P)):kt(P)?Mt(e,C,"whitespace")(P):(e.enter("data"),k(P))}function k(P){return P===null||P===124||Jt(P)?(e.exit("data"),C(P)):(e.consume(P),P===92?R:k)}function R(P){return P===92||P===124?(e.consume(P),k):k(P)}}function oK(e,t){let n=-1,r=!0,s=0,o=[0,0,0,0],i=[0,0,0,0],l=!1,u=0,f,m,h;const g=new eK;for(;++n<e.length;){const p=e[n],b=p[1];p[0]==="enter"?b.type==="tableHead"?(l=!1,u!==0&&(Tw(g,t,u,f,m),m=void 0,u=0),f={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",f,t]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(r=!0,h=void 0,o=[0,0,0,0],i=[0,n+1,0,0],l&&(l=!1,m={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",m,t]])),s=b.type==="tableDelimiterRow"?2:m?3:1):s&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(r=!1,i[2]===0&&(o[1]!==0&&(i[0]=i[1],h=Gd(g,t,o,s,void 0,h),o=[0,0,0,0]),i[2]=n)):b.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(i[0]=i[1],h=Gd(g,t,o,s,void 0,h)),o=i,i=[o[1],n,0,0])):b.type==="tableHead"?(l=!0,u=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(u=n,o[1]!==0?(i[0]=i[1],h=Gd(g,t,o,s,n,h)):i[1]!==0&&(h=Gd(g,t,i,s,n,h)),s=0):s&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(i[3]=n)}for(u!==0&&Tw(g,t,u,f,m),g.consume(t.events),n=-1;++n<t.events.length;){const p=t.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=nK(t.events,n))}return e}function Gd(e,t,n,r,s,o){const i=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(o.end=Object.assign({},El(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const u=El(t.events,n[1]);if(o={type:i,start:Object.assign({},u),end:Object.assign({},u)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const f=El(t.events,n[2]),m=El(t.events,n[3]),h={type:l,start:Object.assign({},f),end:Object.assign({},m)};if(e.add(n[2],0,[["enter",h,t]]),r!==2){const g=t.events[n[2]],p=t.events[n[3]];if(g[1].end=Object.assign({},p[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,v=n[3]-n[2]-1;e.add(b,v,[])}}e.add(n[3]+1,0,[["exit",h,t]])}return s!==void 0&&(o.end=Object.assign({},El(t.events,s)),e.add(s,0,[["exit",o,t]]),o=void 0),o}function Tw(e,t,n,r,s){const o=[],i=El(t.events,n);s&&(s.end=Object.assign({},i),o.push(["exit",s,t])),r.end=Object.assign({},i),o.push(["exit",r,t]),e.add(n+1,0,o)}function El(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const iK={tokenize:lK},aK={text:{91:iK}};function lK(e,t,n){const r=this;return s;function s(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),o)}function o(u){return Jt(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),i):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),i):n(u)}function i(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(u)}function l(u){return it(u)?t(u):kt(u)?e.check({tokenize:cK},t,n)(u):n(u)}}function cK(e,t,n){return Mt(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function uK(e){return i3([DG,GG(),ZG(e),rK,aK])}function Ew(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function dK(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const fK={}.hasOwnProperty,hK=function(e,t,n,r){let s,o;typeof t=="string"||t instanceof RegExp?(o=[[t,n]],s=r):(o=t,s=n),s||(s={});const i=C2(s.ignore||[]),l=mK(o);let u=-1;for(;++u<l.length;)C3(e,"text",f);return e;function f(h,g){let p=-1,b;for(;++p<g.length;){const v=g[p];if(i(v,b?b.children.indexOf(v):void 0,b))return;b=v}if(b)return m(h,g)}function m(h,g){const p=g[g.length-1],b=l[u][0],v=l[u][1];let T=0;const y=p.children.indexOf(h);let E=!1,w=[];b.lastIndex=0;let I=b.exec(h.value);for(;I;){const j=I.index,_={index:I.index,input:I.input,stack:[...g,h]};let C=v(...I,_);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C!==!1&&(T!==j&&w.push({type:"text",value:h.value.slice(T,j)}),Array.isArray(C)?w.push(...C):C&&w.push(C),T=j+I[0].length,E=!0),!b.global)break;I=b.exec(h.value)}return E?(T<h.value.length&&w.push({type:"text",value:h.value.slice(T)}),p.children.splice(y,1,...w)):w=[h],y+w.length}};function mK(e){const t=[];if(typeof e!="object")throw new TypeError("Expected array or object as schema");if(Array.isArray(e)){let n=-1;for(;++n<e.length;)t.push([Cw(e[n][0]),_w(e[n][1])])}else{let n;for(n in e)fK.call(e,n)&&t.push([Cw(n),_w(e[n])])}return t}function Cw(e){return typeof e=="string"?new RegExp(dK(e),"g"):e}function _w(e){return typeof e=="function"?e:()=>e}const Jp="phrasing",Zp=["autolink","link","image","label"],pK={transforms:[TK],enter:{literalAutolink:yK,literalAutolinkEmail:eg,literalAutolinkHttp:eg,literalAutolinkWww:eg},exit:{literalAutolink:wK,literalAutolinkEmail:bK,literalAutolinkHttp:xK,literalAutolinkWww:vK}},gK={unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Jp,notInConstruct:Zp},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Jp,notInConstruct:Zp},{character:":",before:"[ps]",after:"\\/",inConstruct:Jp,notInConstruct:Zp}]};function yK(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function eg(e){this.config.enter.autolinkProtocol.call(this,e)}function xK(e){this.config.exit.autolinkProtocol.call(this,e)}function vK(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.url="http://"+this.sliceSerialize(e)}function bK(e){this.config.exit.autolinkEmail.call(this,e)}function wK(e){this.exit(e)}function TK(e){hK(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,EK],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,CK]],{ignore:["link","linkReference"]})}function EK(e,t,n,r,s){let o="";if(!J3(s)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!_K(n)))return!1;const i=NK(n+r);if(!i[0])return!1;const l={type:"link",title:null,url:o+t+i[0],children:[{type:"text",value:t+i[0]}]};return i[1]?[l,{type:"text",value:i[1]}]:l}function CK(e,t,n,r){return!J3(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function _K(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function NK(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=Ew(e,"(");let o=Ew(e,")");for(;r!==-1&&s>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function J3(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Ya(n)||mm(n))&&(!t||n!==47)}function Z3(e){return e.label||!e.identifier?e.label||"":y3(e.identifier)}function SK(e,t,n){const r=t.indexStack,s=e.children||[],o=t.createTracker(n),i=[];let l=-1;for(r.push(-1);++l<s.length;){const u=s[l];r[r.length-1]=l,i.push(o.move(t.handle(u,e,t,{before:`
`,after:`
`,...o.current()}))),u.type!=="list"&&(t.bulletLastUsed=void 0),l<s.length-1&&i.push(o.move(kK(u,s[l+1],e,t)))}return r.pop(),i.join("")}function kK(e,t,n,r){let s=r.join.length;for(;s--;){const o=r.join[s](e,t,n,r);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}const AK=/\r?\n|\r/g;function OK(e,t){const n=[];let r=0,s=0,o;for(;o=AK.exec(e);)i(e.slice(r,o.index)),n.push(o[0]),r=o.index+o[0].length,s++;return i(e.slice(r)),n.join("");function i(l){n.push(t(l,s,!l))}}function e6(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function RK(e,t){return Nw(e,t.inConstruct,!0)&&!Nw(e,t.notInConstruct,!1)}function Nw(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function t6(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),s=[],o=[],i={};let l=-1;for(;++l<e.unsafe.length;){const m=e.unsafe[l];if(!RK(e.stack,m))continue;const h=e6(m);let g;for(;g=h.exec(r);){const p="before"in m||!!m.atBreak,b="after"in m,v=g.index+(p?g[1].length:0);s.includes(v)?(i[v].before&&!p&&(i[v].before=!1),i[v].after&&!b&&(i[v].after=!1)):(s.push(v),i[v]={before:p,after:b})}}s.sort(IK);let u=n.before?n.before.length:0;const f=r.length-(n.after?n.after.length:0);for(l=-1;++l<s.length;){const m=s[l];m<u||m>=f||m+1<f&&s[l+1]===m+1&&i[m].after&&!i[m+1].before&&!i[m+1].after||s[l-1]===m-1&&i[m].before&&!i[m-1].before&&!i[m-1].after||(u!==m&&o.push(Sw(r.slice(u,m),"\\")),u=m,/[!-/:-@[-`{-~]/.test(r.charAt(m))&&(!n.encode||!n.encode.includes(r.charAt(m)))?o.push("\\"):(o.push("&#x"+r.charCodeAt(m).toString(16).toUpperCase()+";"),u++))}return o.push(Sw(r.slice(u,f),n.after)),o.join("")}function IK(e,t){return e-t}function Sw(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],s=[],o=e+t;let i=-1,l=0,u;for(;u=n.exec(o);)r.push(u.index);for(;++i<r.length;)l!==r[i]&&s.push(e.slice(l,r[i])),s.push("\\"),l=r[i];return s.push(e.slice(l)),s.join("")}function Om(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,s=n.line||1,o=n.column||1;return{move:u,current:i,shift:l};function i(){return{now:{line:s,column:o},lineShift:r}}function l(f){r+=f}function u(f){const m=f||"",h=m.split(/\r?\n|\r/g),g=h[h.length-1];return s+=h.length-1,o=h.length===1?o+g.length:1+g.length+r,m}}n6.peek=$K;function jK(){return{enter:{gfmFootnoteDefinition:DK,gfmFootnoteDefinitionLabelString:MK,gfmFootnoteCall:BK,gfmFootnoteCallString:zK},exit:{gfmFootnoteDefinition:FK,gfmFootnoteDefinitionLabelString:PK,gfmFootnoteCall:HK,gfmFootnoteCallString:UK}}}function LK(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:WK,footnoteReference:n6}}}function DK(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function MK(){this.buffer()}function PK(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=to(this.sliceSerialize(e)).toLowerCase()}function FK(e){this.exit(e)}function BK(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function zK(){this.buffer()}function UK(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=to(this.sliceSerialize(e)).toLowerCase()}function HK(e){this.exit(e)}function n6(e,t,n,r){const s=Om(r);let o=s.move("[^");const i=n.enter("footnoteReference"),l=n.enter("reference");return o+=s.move(t6(n,Z3(e),{...s.current(),before:o,after:"]"})),l(),i(),o+=s.move("]"),o}function $K(){return"["}function WK(e,t,n,r){const s=Om(r);let o=s.move("[^");const i=n.enter("footnoteDefinition"),l=n.enter("label");return o+=s.move(t6(n,Z3(e),{...s.current(),before:o,after:"]"})),l(),o+=s.move("]:"+(e.children&&e.children.length>0?" ":"")),s.shift(4),o+=s.move(OK(SK(e,n,s.current()),GK)),i(),o}function GK(e,t,n){return t===0?e:(n?"":"    ")+e}function r6(e,t,n){const r=t.indexStack,s=e.children||[],o=[];let i=-1,l=n.before;r.push(-1);let u=t.createTracker(n);for(;++i<s.length;){const f=s[i];let m;if(r[r.length-1]=i,i+1<s.length){let h=t.handle.handlers[s[i+1].type];h&&h.peek&&(h=h.peek),m=h?h(s[i+1],e,t,{before:"",after:"",...u.current()}).charAt(0):""}else m=n.after;o.length>0&&(l==="\r"||l===`
`)&&f.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),l=" ",u=t.createTracker(n),u.move(o.join(""))),o.push(u.move(t.handle(f,e,t,{...u.current(),before:l,after:m}))),l=o[o.length-1].slice(-1)}return r.pop(),o.join("")}const KK=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];s6.peek=XK;const YK={canContainEols:["delete"],enter:{strikethrough:qK},exit:{strikethrough:QK}},VK={unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:KK}],handlers:{delete:s6}};function qK(e){this.enter({type:"delete",children:[]},e)}function QK(e){this.exit(e)}function s6(e,t,n,r){const s=Om(r),o=n.enter("strikethrough");let i=s.move("~~");return i+=r6(e,n,{...s.current(),before:i,after:"~"}),i+=s.move("~~"),o(),i}function XK(){return"~"}o6.peek=JK;function o6(e,t,n){let r=e.value||"",s="`",o=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const i=n.unsafe[o],l=e6(i);let u;if(i.atBreak)for(;u=l.exec(r);){let f=u.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(u.index+1)}}return s+r+s}function JK(){return"`"}function ZK(e){return e.length}function eY(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||ZK,o=[],i=[],l=[],u=[];let f=0,m=-1;for(;++m<e.length;){const v=[],T=[];let y=-1;for(e[m].length>f&&(f=e[m].length);++y<e[m].length;){const E=tY(e[m][y]);if(n.alignDelimiters!==!1){const w=s(E);T[y]=w,(u[y]===void 0||w>u[y])&&(u[y]=w)}v.push(E)}i[m]=v,l[m]=T}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<f;)o[h]=kw(r[h]);else{const v=kw(r);for(;++h<f;)o[h]=v}h=-1;const g=[],p=[];for(;++h<f;){const v=o[h];let T="",y="";v===99?(T=":",y=":"):v===108?T=":":v===114&&(y=":");let E=n.alignDelimiters===!1?1:Math.max(1,u[h]-T.length-y.length);const w=T+"-".repeat(E)+y;n.alignDelimiters!==!1&&(E=T.length+E+y.length,E>u[h]&&(u[h]=E),p[h]=E),g[h]=w}i.splice(1,0,g),l.splice(1,0,p),m=-1;const b=[];for(;++m<i.length;){const v=i[m],T=l[m];h=-1;const y=[];for(;++h<f;){const E=v[h]||"";let w="",I="";if(n.alignDelimiters!==!1){const j=u[h]-(T[h]||0),_=o[h];_===114?w=" ".repeat(j):_===99?j%2?(w=" ".repeat(j/2+.5),I=" ".repeat(j/2-.5)):(w=" ".repeat(j/2),I=w):I=" ".repeat(j)}n.delimiterStart!==!1&&!h&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&E==="")&&(n.delimiterStart!==!1||h)&&y.push(" "),n.alignDelimiters!==!1&&y.push(w),y.push(E),n.alignDelimiters!==!1&&y.push(I),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||h!==f-1)&&y.push("|")}b.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return b.join(`
`)}function tY(e){return e==null?"":String(e)}function kw(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const nY={enter:{table:rY,tableData:Aw,tableHeader:Aw,tableRow:oY},exit:{codeText:iY,table:sY,tableData:tg,tableHeader:tg,tableRow:tg}};function rY(e){const t=e._align;this.enter({type:"table",align:t.map(n=>n==="none"?null:n),children:[]},e),this.setData("inTable",!0)}function sY(e){this.exit(e),this.setData("inTable")}function oY(e){this.enter({type:"tableRow",children:[]},e)}function tg(e){this.exit(e)}function Aw(e){this.enter({type:"tableCell",children:[]},e)}function iY(e){let t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,aY));const n=this.stack[this.stack.length-1];n.value=t,this.exit(e)}function aY(e,t){return t==="|"?t:e}function lY(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:i,tableRow:l,tableCell:u,inlineCode:g}};function i(p,b,v,T){return f(m(p,v,T),p.align)}function l(p,b,v,T){const y=h(p,v,T),E=f([y]);return E.slice(0,E.indexOf(`
`))}function u(p,b,v,T){const y=v.enter("tableCell"),E=v.enter("phrasing"),w=r6(p,v,{...T,before:o,after:o});return E(),y(),w}function f(p,b){return eY(p,{align:b,alignDelimiters:r,padding:n,stringLength:s})}function m(p,b,v){const T=p.children;let y=-1;const E=[],w=b.enter("table");for(;++y<T.length;)E[y]=h(T[y],b,v);return w(),E}function h(p,b,v){const T=p.children;let y=-1;const E=[],w=b.enter("tableRow");for(;++y<T.length;)E[y]=u(T[y],p,b,v);return w(),E}function g(p,b,v){let T=o6(p,b,v);return v.stack.includes("tableCell")&&(T=T.replace(/\|/g,"\\$&")),T}}function cY(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function uY(e){const t=e.options.listItemIndent||"tab";if(t===1||t==="1")return"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function dY(e,t,n,r){const s=uY(n);let o=n.bulletCurrent||cY(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let i=o.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(i=Math.ceil(i/4)*4);const l=n.createTracker(r);l.move(o+" ".repeat(i-o.length)),l.shift(i);const u=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,l.current()),m);return u(),f;function m(h,g,p){return g?(p?"":" ".repeat(i))+h:(p?o:o+" ".repeat(i-o.length))+h}}const fY={exit:{taskListCheckValueChecked:Ow,taskListCheckValueUnchecked:Ow,paragraph:mY}},hY={unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:pY}};function Ow(e){const t=this.stack[this.stack.length-2];t.checked=e.type==="taskListCheckValueChecked"}function mY(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1],r=n.children[0];if(r&&r.type==="text"){const s=t.children;let o=-1,i;for(;++o<s.length;){const l=s[o];if(l.type==="paragraph"){i=l;break}}i===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function pY(e,t,n,r){const s=e.children[0],o=typeof e.checked=="boolean"&&s&&s.type==="paragraph",i="["+(e.checked?"x":" ")+"] ",l=Om(r);o&&l.move(i);let u=dY(e,t,n,{...r,...l.current()});return o&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),u;function f(m){return m+i}}function gY(){return[pK,jK(),YK,nY,fY]}function yY(e){return{extensions:[gK,LK(),VK,lY(e),hY]}}function ng(e={}){const t=this.data();n("micromarkExtensions",uK(e)),n("fromMarkdownExtensions",gY()),n("toMarkdownExtensions",yY(e));function n(r,s){(t[r]?t[r]:t[r]=[]).push(s)}}var io={};const xY=[65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111];io.REPLACEMENT_CHARACTER="�";io.CODE_POINTS={EOF:-1,NULL:0,TABULATION:9,CARRIAGE_RETURN:13,LINE_FEED:10,FORM_FEED:12,SPACE:32,EXCLAMATION_MARK:33,QUOTATION_MARK:34,NUMBER_SIGN:35,AMPERSAND:38,APOSTROPHE:39,HYPHEN_MINUS:45,SOLIDUS:47,DIGIT_0:48,DIGIT_9:57,SEMICOLON:59,LESS_THAN_SIGN:60,EQUALS_SIGN:61,GREATER_THAN_SIGN:62,QUESTION_MARK:63,LATIN_CAPITAL_A:65,LATIN_CAPITAL_F:70,LATIN_CAPITAL_X:88,LATIN_CAPITAL_Z:90,RIGHT_SQUARE_BRACKET:93,GRAVE_ACCENT:96,LATIN_SMALL_A:97,LATIN_SMALL_F:102,LATIN_SMALL_X:120,LATIN_SMALL_Z:122,REPLACEMENT_CHARACTER:65533};io.CODE_POINT_SEQUENCES={DASH_DASH_STRING:[45,45],DOCTYPE_STRING:[68,79,67,84,89,80,69],CDATA_START_STRING:[91,67,68,65,84,65,91],SCRIPT_STRING:[115,99,114,105,112,116],PUBLIC_STRING:[80,85,66,76,73,67],SYSTEM_STRING:[83,89,83,84,69,77]};io.isSurrogate=function(e){return e>=55296&&e<=57343};io.isSurrogatePair=function(e){return e>=56320&&e<=57343};io.getSurrogatePairCodePoint=function(e,t){return(e-55296)*1024+9216+t};io.isControlCodePoint=function(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159};io.isUndefinedCodePoint=function(e){return e>=64976&&e<=65007||xY.indexOf(e)>-1};var R2={controlCharacterInInputStream:"control-character-in-input-stream",noncharacterInInputStream:"noncharacter-in-input-stream",surrogateInInputStream:"surrogate-in-input-stream",nonVoidHtmlElementStartTagWithTrailingSolidus:"non-void-html-element-start-tag-with-trailing-solidus",endTagWithAttributes:"end-tag-with-attributes",endTagWithTrailingSolidus:"end-tag-with-trailing-solidus",unexpectedSolidusInTag:"unexpected-solidus-in-tag",unexpectedNullCharacter:"unexpected-null-character",unexpectedQuestionMarkInsteadOfTagName:"unexpected-question-mark-instead-of-tag-name",invalidFirstCharacterOfTagName:"invalid-first-character-of-tag-name",unexpectedEqualsSignBeforeAttributeName:"unexpected-equals-sign-before-attribute-name",missingEndTagName:"missing-end-tag-name",unexpectedCharacterInAttributeName:"unexpected-character-in-attribute-name",unknownNamedCharacterReference:"unknown-named-character-reference",missingSemicolonAfterCharacterReference:"missing-semicolon-after-character-reference",unexpectedCharacterAfterDoctypeSystemIdentifier:"unexpected-character-after-doctype-system-identifier",unexpectedCharacterInUnquotedAttributeValue:"unexpected-character-in-unquoted-attribute-value",eofBeforeTagName:"eof-before-tag-name",eofInTag:"eof-in-tag",missingAttributeValue:"missing-attribute-value",missingWhitespaceBetweenAttributes:"missing-whitespace-between-attributes",missingWhitespaceAfterDoctypePublicKeyword:"missing-whitespace-after-doctype-public-keyword",missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:"missing-whitespace-between-doctype-public-and-system-identifiers",missingWhitespaceAfterDoctypeSystemKeyword:"missing-whitespace-after-doctype-system-keyword",missingQuoteBeforeDoctypePublicIdentifier:"missing-quote-before-doctype-public-identifier",missingQuoteBeforeDoctypeSystemIdentifier:"missing-quote-before-doctype-system-identifier",missingDoctypePublicIdentifier:"missing-doctype-public-identifier",missingDoctypeSystemIdentifier:"missing-doctype-system-identifier",abruptDoctypePublicIdentifier:"abrupt-doctype-public-identifier",abruptDoctypeSystemIdentifier:"abrupt-doctype-system-identifier",cdataInHtmlContent:"cdata-in-html-content",incorrectlyOpenedComment:"incorrectly-opened-comment",eofInScriptHtmlCommentLikeText:"eof-in-script-html-comment-like-text",eofInDoctype:"eof-in-doctype",nestedComment:"nested-comment",abruptClosingOfEmptyComment:"abrupt-closing-of-empty-comment",eofInComment:"eof-in-comment",incorrectlyClosedComment:"incorrectly-closed-comment",eofInCdata:"eof-in-cdata",absenceOfDigitsInNumericCharacterReference:"absence-of-digits-in-numeric-character-reference",nullCharacterReference:"null-character-reference",surrogateCharacterReference:"surrogate-character-reference",characterReferenceOutsideUnicodeRange:"character-reference-outside-unicode-range",controlCharacterReference:"control-character-reference",noncharacterCharacterReference:"noncharacter-character-reference",missingWhitespaceBeforeDoctypeName:"missing-whitespace-before-doctype-name",missingDoctypeName:"missing-doctype-name",invalidCharacterSequenceAfterDoctypeName:"invalid-character-sequence-after-doctype-name",duplicateAttribute:"duplicate-attribute",nonConformingDoctype:"non-conforming-doctype",missingDoctype:"missing-doctype",misplacedDoctype:"misplaced-doctype",endTagWithoutMatchingOpenElement:"end-tag-without-matching-open-element",closingOfElementWithOpenChildElements:"closing-of-element-with-open-child-elements",disallowedContentInNoscriptInHead:"disallowed-content-in-noscript-in-head",openElementsLeftAfterEof:"open-elements-left-after-eof",abandonedHeadElementChild:"abandoned-head-element-child",misplacedStartTagForHeadElement:"misplaced-start-tag-for-head-element",nestedNoscriptInHead:"nested-noscript-in-head",eofInElementThatCanContainOnlyText:"eof-in-element-that-can-contain-only-text"};const Cl=io,rg=R2,Ca=Cl.CODE_POINTS,vY=65536;let bY=class{constructor(){this.html=null,this.pos=-1,this.lastGapPos=-1,this.lastCharPos=-1,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=vY}_err(){}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.lastCharPos){const n=this.html.charCodeAt(this.pos+1);if(Cl.isSurrogatePair(n))return this.pos++,this._addGap(),Cl.getSurrogatePairCodePoint(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Ca.EOF;return this._err(rg.surrogateInInputStream),t}dropParsedChunk(){this.pos>this.bufferWaterline&&(this.lastCharPos-=this.pos,this.html=this.html.substring(this.pos),this.pos=0,this.lastGapPos=-1,this.gapStack=[])}write(t,n){this.html?this.html+=t:this.html=t,this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1,this.html.length),this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1}advance(){if(this.pos++,this.pos>this.lastCharPos)return this.endOfChunkHit=!this.lastChunkWritten,Ca.EOF;let t=this.html.charCodeAt(this.pos);return this.skipNextNewLine&&t===Ca.LINE_FEED?(this.skipNextNewLine=!1,this._addGap(),this.advance()):t===Ca.CARRIAGE_RETURN?(this.skipNextNewLine=!0,Ca.LINE_FEED):(this.skipNextNewLine=!1,Cl.isSurrogate(t)&&(t=this._processSurrogate(t)),t>31&&t<127||t===Ca.LINE_FEED||t===Ca.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Cl.isControlCodePoint(t)?this._err(rg.controlCharacterInInputStream):Cl.isUndefinedCodePoint(t)&&this._err(rg.noncharacterInInputStream)}retreat(){this.pos===this.lastGapPos&&(this.lastGapPos=this.gapStack.pop(),this.pos--),this.pos--}};var wY=bY,TY=new Uint16Array([4,52,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,106,303,412,810,1432,1701,1796,1987,2114,2360,2420,2484,3170,3251,4140,4393,4575,4610,5106,5512,5728,6117,6274,6315,6345,6427,6516,7002,7910,8733,9323,9870,10170,10631,10893,11318,11386,11467,12773,13092,14474,14922,15448,15542,16419,17666,18166,18611,19004,19095,19298,19397,4,16,69,77,97,98,99,102,103,108,109,110,111,112,114,115,116,117,140,150,158,169,176,194,199,210,216,222,226,242,256,266,283,294,108,105,103,5,198,1,59,148,1,198,80,5,38,1,59,156,1,38,99,117,116,101,5,193,1,59,167,1,193,114,101,118,101,59,1,258,4,2,105,121,182,191,114,99,5,194,1,59,189,1,194,59,1,1040,114,59,3,55349,56580,114,97,118,101,5,192,1,59,208,1,192,112,104,97,59,1,913,97,99,114,59,1,256,100,59,1,10835,4,2,103,112,232,237,111,110,59,1,260,102,59,3,55349,56632,112,108,121,70,117,110,99,116,105,111,110,59,1,8289,105,110,103,5,197,1,59,264,1,197,4,2,99,115,272,277,114,59,3,55349,56476,105,103,110,59,1,8788,105,108,100,101,5,195,1,59,292,1,195,109,108,5,196,1,59,301,1,196,4,8,97,99,101,102,111,114,115,117,321,350,354,383,388,394,400,405,4,2,99,114,327,336,107,115,108,97,115,104,59,1,8726,4,2,118,119,342,345,59,1,10983,101,100,59,1,8966,121,59,1,1041,4,3,99,114,116,362,369,379,97,117,115,101,59,1,8757,110,111,117,108,108,105,115,59,1,8492,97,59,1,914,114,59,3,55349,56581,112,102,59,3,55349,56633,101,118,101,59,1,728,99,114,59,1,8492,109,112,101,113,59,1,8782,4,14,72,79,97,99,100,101,102,104,105,108,111,114,115,117,442,447,456,504,542,547,569,573,577,616,678,784,790,796,99,121,59,1,1063,80,89,5,169,1,59,454,1,169,4,3,99,112,121,464,470,497,117,116,101,59,1,262,4,2,59,105,476,478,1,8914,116,97,108,68,105,102,102,101,114,101,110,116,105,97,108,68,59,1,8517,108,101,121,115,59,1,8493,4,4,97,101,105,111,514,520,530,535,114,111,110,59,1,268,100,105,108,5,199,1,59,528,1,199,114,99,59,1,264,110,105,110,116,59,1,8752,111,116,59,1,266,4,2,100,110,553,560,105,108,108,97,59,1,184,116,101,114,68,111,116,59,1,183,114,59,1,8493,105,59,1,935,114,99,108,101,4,4,68,77,80,84,591,596,603,609,111,116,59,1,8857,105,110,117,115,59,1,8854,108,117,115,59,1,8853,105,109,101,115,59,1,8855,111,4,2,99,115,623,646,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8754,101,67,117,114,108,121,4,2,68,81,658,671,111,117,98,108,101,81,117,111,116,101,59,1,8221,117,111,116,101,59,1,8217,4,4,108,110,112,117,688,701,736,753,111,110,4,2,59,101,696,698,1,8759,59,1,10868,4,3,103,105,116,709,717,722,114,117,101,110,116,59,1,8801,110,116,59,1,8751,111,117,114,73,110,116,101,103,114,97,108,59,1,8750,4,2,102,114,742,745,59,1,8450,111,100,117,99,116,59,1,8720,110,116,101,114,67,108,111,99,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8755,111,115,115,59,1,10799,99,114,59,3,55349,56478,112,4,2,59,67,803,805,1,8915,97,112,59,1,8781,4,11,68,74,83,90,97,99,101,102,105,111,115,834,850,855,860,865,888,903,916,921,1011,1415,4,2,59,111,840,842,1,8517,116,114,97,104,100,59,1,10513,99,121,59,1,1026,99,121,59,1,1029,99,121,59,1,1039,4,3,103,114,115,873,879,883,103,101,114,59,1,8225,114,59,1,8609,104,118,59,1,10980,4,2,97,121,894,900,114,111,110,59,1,270,59,1,1044,108,4,2,59,116,910,912,1,8711,97,59,1,916,114,59,3,55349,56583,4,2,97,102,927,998,4,2,99,109,933,992,114,105,116,105,99,97,108,4,4,65,68,71,84,950,957,978,985,99,117,116,101,59,1,180,111,4,2,116,117,964,967,59,1,729,98,108,101,65,99,117,116,101,59,1,733,114,97,118,101,59,1,96,105,108,100,101,59,1,732,111,110,100,59,1,8900,102,101,114,101,110,116,105,97,108,68,59,1,8518,4,4,112,116,117,119,1021,1026,1048,1249,102,59,3,55349,56635,4,3,59,68,69,1034,1036,1041,1,168,111,116,59,1,8412,113,117,97,108,59,1,8784,98,108,101,4,6,67,68,76,82,85,86,1065,1082,1101,1189,1211,1236,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8751,111,4,2,116,119,1089,1092,59,1,168,110,65,114,114,111,119,59,1,8659,4,2,101,111,1107,1141,102,116,4,3,65,82,84,1117,1124,1136,114,114,111,119,59,1,8656,105,103,104,116,65,114,114,111,119,59,1,8660,101,101,59,1,10980,110,103,4,2,76,82,1149,1177,101,102,116,4,2,65,82,1158,1165,114,114,111,119,59,1,10232,105,103,104,116,65,114,114,111,119,59,1,10234,105,103,104,116,65,114,114,111,119,59,1,10233,105,103,104,116,4,2,65,84,1199,1206,114,114,111,119,59,1,8658,101,101,59,1,8872,112,4,2,65,68,1218,1225,114,114,111,119,59,1,8657,111,119,110,65,114,114,111,119,59,1,8661,101,114,116,105,99,97,108,66,97,114,59,1,8741,110,4,6,65,66,76,82,84,97,1264,1292,1299,1352,1391,1408,114,114,111,119,4,3,59,66,85,1276,1278,1283,1,8595,97,114,59,1,10515,112,65,114,114,111,119,59,1,8693,114,101,118,101,59,1,785,101,102,116,4,3,82,84,86,1310,1323,1334,105,103,104,116,86,101,99,116,111,114,59,1,10576,101,101,86,101,99,116,111,114,59,1,10590,101,99,116,111,114,4,2,59,66,1345,1347,1,8637,97,114,59,1,10582,105,103,104,116,4,2,84,86,1362,1373,101,101,86,101,99,116,111,114,59,1,10591,101,99,116,111,114,4,2,59,66,1384,1386,1,8641,97,114,59,1,10583,101,101,4,2,59,65,1399,1401,1,8868,114,114,111,119,59,1,8615,114,114,111,119,59,1,8659,4,2,99,116,1421,1426,114,59,3,55349,56479,114,111,107,59,1,272,4,16,78,84,97,99,100,102,103,108,109,111,112,113,115,116,117,120,1466,1470,1478,1489,1515,1520,1525,1536,1544,1593,1609,1617,1650,1664,1668,1677,71,59,1,330,72,5,208,1,59,1476,1,208,99,117,116,101,5,201,1,59,1487,1,201,4,3,97,105,121,1497,1503,1512,114,111,110,59,1,282,114,99,5,202,1,59,1510,1,202,59,1,1069,111,116,59,1,278,114,59,3,55349,56584,114,97,118,101,5,200,1,59,1534,1,200,101,109,101,110,116,59,1,8712,4,2,97,112,1550,1555,99,114,59,1,274,116,121,4,2,83,86,1563,1576,109,97,108,108,83,113,117,97,114,101,59,1,9723,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9643,4,2,103,112,1599,1604,111,110,59,1,280,102,59,3,55349,56636,115,105,108,111,110,59,1,917,117,4,2,97,105,1624,1640,108,4,2,59,84,1631,1633,1,10869,105,108,100,101,59,1,8770,108,105,98,114,105,117,109,59,1,8652,4,2,99,105,1656,1660,114,59,1,8496,109,59,1,10867,97,59,1,919,109,108,5,203,1,59,1675,1,203,4,2,105,112,1683,1689,115,116,115,59,1,8707,111,110,101,110,116,105,97,108,69,59,1,8519,4,5,99,102,105,111,115,1713,1717,1722,1762,1791,121,59,1,1060,114,59,3,55349,56585,108,108,101,100,4,2,83,86,1732,1745,109,97,108,108,83,113,117,97,114,101,59,1,9724,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9642,4,3,112,114,117,1770,1775,1781,102,59,3,55349,56637,65,108,108,59,1,8704,114,105,101,114,116,114,102,59,1,8497,99,114,59,1,8497,4,12,74,84,97,98,99,100,102,103,111,114,115,116,1822,1827,1834,1848,1855,1877,1882,1887,1890,1896,1978,1984,99,121,59,1,1027,5,62,1,59,1832,1,62,109,109,97,4,2,59,100,1843,1845,1,915,59,1,988,114,101,118,101,59,1,286,4,3,101,105,121,1863,1869,1874,100,105,108,59,1,290,114,99,59,1,284,59,1,1043,111,116,59,1,288,114,59,3,55349,56586,59,1,8921,112,102,59,3,55349,56638,101,97,116,101,114,4,6,69,70,71,76,83,84,1915,1933,1944,1953,1959,1971,113,117,97,108,4,2,59,76,1925,1927,1,8805,101,115,115,59,1,8923,117,108,108,69,113,117,97,108,59,1,8807,114,101,97,116,101,114,59,1,10914,101,115,115,59,1,8823,108,97,110,116,69,113,117,97,108,59,1,10878,105,108,100,101,59,1,8819,99,114,59,3,55349,56482,59,1,8811,4,8,65,97,99,102,105,111,115,117,2005,2012,2026,2032,2036,2049,2073,2089,82,68,99,121,59,1,1066,4,2,99,116,2018,2023,101,107,59,1,711,59,1,94,105,114,99,59,1,292,114,59,1,8460,108,98,101,114,116,83,112,97,99,101,59,1,8459,4,2,112,114,2055,2059,102,59,1,8461,105,122,111,110,116,97,108,76,105,110,101,59,1,9472,4,2,99,116,2079,2083,114,59,1,8459,114,111,107,59,1,294,109,112,4,2,68,69,2097,2107,111,119,110,72,117,109,112,59,1,8782,113,117,97,108,59,1,8783,4,14,69,74,79,97,99,100,102,103,109,110,111,115,116,117,2144,2149,2155,2160,2171,2189,2194,2198,2209,2245,2307,2329,2334,2341,99,121,59,1,1045,108,105,103,59,1,306,99,121,59,1,1025,99,117,116,101,5,205,1,59,2169,1,205,4,2,105,121,2177,2186,114,99,5,206,1,59,2184,1,206,59,1,1048,111,116,59,1,304,114,59,1,8465,114,97,118,101,5,204,1,59,2207,1,204,4,3,59,97,112,2217,2219,2238,1,8465,4,2,99,103,2225,2229,114,59,1,298,105,110,97,114,121,73,59,1,8520,108,105,101,115,59,1,8658,4,2,116,118,2251,2281,4,2,59,101,2257,2259,1,8748,4,2,103,114,2265,2271,114,97,108,59,1,8747,115,101,99,116,105,111,110,59,1,8898,105,115,105,98,108,101,4,2,67,84,2293,2300,111,109,109,97,59,1,8291,105,109,101,115,59,1,8290,4,3,103,112,116,2315,2320,2325,111,110,59,1,302,102,59,3,55349,56640,97,59,1,921,99,114,59,1,8464,105,108,100,101,59,1,296,4,2,107,109,2347,2352,99,121,59,1,1030,108,5,207,1,59,2358,1,207,4,5,99,102,111,115,117,2372,2386,2391,2397,2414,4,2,105,121,2378,2383,114,99,59,1,308,59,1,1049,114,59,3,55349,56589,112,102,59,3,55349,56641,4,2,99,101,2403,2408,114,59,3,55349,56485,114,99,121,59,1,1032,107,99,121,59,1,1028,4,7,72,74,97,99,102,111,115,2436,2441,2446,2452,2467,2472,2478,99,121,59,1,1061,99,121,59,1,1036,112,112,97,59,1,922,4,2,101,121,2458,2464,100,105,108,59,1,310,59,1,1050,114,59,3,55349,56590,112,102,59,3,55349,56642,99,114,59,3,55349,56486,4,11,74,84,97,99,101,102,108,109,111,115,116,2508,2513,2520,2562,2585,2981,2986,3004,3011,3146,3167,99,121,59,1,1033,5,60,1,59,2518,1,60,4,5,99,109,110,112,114,2532,2538,2544,2548,2558,117,116,101,59,1,313,98,100,97,59,1,923,103,59,1,10218,108,97,99,101,116,114,102,59,1,8466,114,59,1,8606,4,3,97,101,121,2570,2576,2582,114,111,110,59,1,317,100,105,108,59,1,315,59,1,1051,4,2,102,115,2591,2907,116,4,10,65,67,68,70,82,84,85,86,97,114,2614,2663,2672,2728,2735,2760,2820,2870,2888,2895,4,2,110,114,2620,2633,103,108,101,66,114,97,99,107,101,116,59,1,10216,114,111,119,4,3,59,66,82,2644,2646,2651,1,8592,97,114,59,1,8676,105,103,104,116,65,114,114,111,119,59,1,8646,101,105,108,105,110,103,59,1,8968,111,4,2,117,119,2679,2692,98,108,101,66,114,97,99,107,101,116,59,1,10214,110,4,2,84,86,2699,2710,101,101,86,101,99,116,111,114,59,1,10593,101,99,116,111,114,4,2,59,66,2721,2723,1,8643,97,114,59,1,10585,108,111,111,114,59,1,8970,105,103,104,116,4,2,65,86,2745,2752,114,114,111,119,59,1,8596,101,99,116,111,114,59,1,10574,4,2,101,114,2766,2792,101,4,3,59,65,86,2775,2777,2784,1,8867,114,114,111,119,59,1,8612,101,99,116,111,114,59,1,10586,105,97,110,103,108,101,4,3,59,66,69,2806,2808,2813,1,8882,97,114,59,1,10703,113,117,97,108,59,1,8884,112,4,3,68,84,86,2829,2841,2852,111,119,110,86,101,99,116,111,114,59,1,10577,101,101,86,101,99,116,111,114,59,1,10592,101,99,116,111,114,4,2,59,66,2863,2865,1,8639,97,114,59,1,10584,101,99,116,111,114,4,2,59,66,2881,2883,1,8636,97,114,59,1,10578,114,114,111,119,59,1,8656,105,103,104,116,97,114,114,111,119,59,1,8660,115,4,6,69,70,71,76,83,84,2922,2936,2947,2956,2962,2974,113,117,97,108,71,114,101,97,116,101,114,59,1,8922,117,108,108,69,113,117,97,108,59,1,8806,114,101,97,116,101,114,59,1,8822,101,115,115,59,1,10913,108,97,110,116,69,113,117,97,108,59,1,10877,105,108,100,101,59,1,8818,114,59,3,55349,56591,4,2,59,101,2992,2994,1,8920,102,116,97,114,114,111,119,59,1,8666,105,100,111,116,59,1,319,4,3,110,112,119,3019,3110,3115,103,4,4,76,82,108,114,3030,3058,3070,3098,101,102,116,4,2,65,82,3039,3046,114,114,111,119,59,1,10229,105,103,104,116,65,114,114,111,119,59,1,10231,105,103,104,116,65,114,114,111,119,59,1,10230,101,102,116,4,2,97,114,3079,3086,114,114,111,119,59,1,10232,105,103,104,116,97,114,114,111,119,59,1,10234,105,103,104,116,97,114,114,111,119,59,1,10233,102,59,3,55349,56643,101,114,4,2,76,82,3123,3134,101,102,116,65,114,114,111,119,59,1,8601,105,103,104,116,65,114,114,111,119,59,1,8600,4,3,99,104,116,3154,3158,3161,114,59,1,8466,59,1,8624,114,111,107,59,1,321,59,1,8810,4,8,97,99,101,102,105,111,115,117,3188,3192,3196,3222,3227,3237,3243,3248,112,59,1,10501,121,59,1,1052,4,2,100,108,3202,3213,105,117,109,83,112,97,99,101,59,1,8287,108,105,110,116,114,102,59,1,8499,114,59,3,55349,56592,110,117,115,80,108,117,115,59,1,8723,112,102,59,3,55349,56644,99,114,59,1,8499,59,1,924,4,9,74,97,99,101,102,111,115,116,117,3271,3276,3283,3306,3422,3427,4120,4126,4137,99,121,59,1,1034,99,117,116,101,59,1,323,4,3,97,101,121,3291,3297,3303,114,111,110,59,1,327,100,105,108,59,1,325,59,1,1053,4,3,103,115,119,3314,3380,3415,97,116,105,118,101,4,3,77,84,86,3327,3340,3365,101,100,105,117,109,83,112,97,99,101,59,1,8203,104,105,4,2,99,110,3348,3357,107,83,112,97,99,101,59,1,8203,83,112,97,99,101,59,1,8203,101,114,121,84,104,105,110,83,112,97,99,101,59,1,8203,116,101,100,4,2,71,76,3389,3405,114,101,97,116,101,114,71,114,101,97,116,101,114,59,1,8811,101,115,115,76,101,115,115,59,1,8810,76,105,110,101,59,1,10,114,59,3,55349,56593,4,4,66,110,112,116,3437,3444,3460,3464,114,101,97,107,59,1,8288,66,114,101,97,107,105,110,103,83,112,97,99,101,59,1,160,102,59,1,8469,4,13,59,67,68,69,71,72,76,78,80,82,83,84,86,3492,3494,3517,3536,3578,3657,3685,3784,3823,3860,3915,4066,4107,1,10988,4,2,111,117,3500,3510,110,103,114,117,101,110,116,59,1,8802,112,67,97,112,59,1,8813,111,117,98,108,101,86,101,114,116,105,99,97,108,66,97,114,59,1,8742,4,3,108,113,120,3544,3552,3571,101,109,101,110,116,59,1,8713,117,97,108,4,2,59,84,3561,3563,1,8800,105,108,100,101,59,3,8770,824,105,115,116,115,59,1,8708,114,101,97,116,101,114,4,7,59,69,70,71,76,83,84,3600,3602,3609,3621,3631,3637,3650,1,8815,113,117,97,108,59,1,8817,117,108,108,69,113,117,97,108,59,3,8807,824,114,101,97,116,101,114,59,3,8811,824,101,115,115,59,1,8825,108,97,110,116,69,113,117,97,108,59,3,10878,824,105,108,100,101,59,1,8821,117,109,112,4,2,68,69,3666,3677,111,119,110,72,117,109,112,59,3,8782,824,113,117,97,108,59,3,8783,824,101,4,2,102,115,3692,3724,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3709,3711,3717,1,8938,97,114,59,3,10703,824,113,117,97,108,59,1,8940,115,4,6,59,69,71,76,83,84,3739,3741,3748,3757,3764,3777,1,8814,113,117,97,108,59,1,8816,114,101,97,116,101,114,59,1,8824,101,115,115,59,3,8810,824,108,97,110,116,69,113,117,97,108,59,3,10877,824,105,108,100,101,59,1,8820,101,115,116,101,100,4,2,71,76,3795,3812,114,101,97,116,101,114,71,114,101,97,116,101,114,59,3,10914,824,101,115,115,76,101,115,115,59,3,10913,824,114,101,99,101,100,101,115,4,3,59,69,83,3838,3840,3848,1,8832,113,117,97,108,59,3,10927,824,108,97,110,116,69,113,117,97,108,59,1,8928,4,2,101,105,3866,3881,118,101,114,115,101,69,108,101,109,101,110,116,59,1,8716,103,104,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3900,3902,3908,1,8939,97,114,59,3,10704,824,113,117,97,108,59,1,8941,4,2,113,117,3921,3973,117,97,114,101,83,117,4,2,98,112,3933,3952,115,101,116,4,2,59,69,3942,3945,3,8847,824,113,117,97,108,59,1,8930,101,114,115,101,116,4,2,59,69,3963,3966,3,8848,824,113,117,97,108,59,1,8931,4,3,98,99,112,3981,4e3,4045,115,101,116,4,2,59,69,3990,3993,3,8834,8402,113,117,97,108,59,1,8840,99,101,101,100,115,4,4,59,69,83,84,4015,4017,4025,4037,1,8833,113,117,97,108,59,3,10928,824,108,97,110,116,69,113,117,97,108,59,1,8929,105,108,100,101,59,3,8831,824,101,114,115,101,116,4,2,59,69,4056,4059,3,8835,8402,113,117,97,108,59,1,8841,105,108,100,101,4,4,59,69,70,84,4080,4082,4089,4100,1,8769,113,117,97,108,59,1,8772,117,108,108,69,113,117,97,108,59,1,8775,105,108,100,101,59,1,8777,101,114,116,105,99,97,108,66,97,114,59,1,8740,99,114,59,3,55349,56489,105,108,100,101,5,209,1,59,4135,1,209,59,1,925,4,14,69,97,99,100,102,103,109,111,112,114,115,116,117,118,4170,4176,4187,4205,4212,4217,4228,4253,4259,4292,4295,4316,4337,4346,108,105,103,59,1,338,99,117,116,101,5,211,1,59,4185,1,211,4,2,105,121,4193,4202,114,99,5,212,1,59,4200,1,212,59,1,1054,98,108,97,99,59,1,336,114,59,3,55349,56594,114,97,118,101,5,210,1,59,4226,1,210,4,3,97,101,105,4236,4241,4246,99,114,59,1,332,103,97,59,1,937,99,114,111,110,59,1,927,112,102,59,3,55349,56646,101,110,67,117,114,108,121,4,2,68,81,4272,4285,111,117,98,108,101,81,117,111,116,101,59,1,8220,117,111,116,101,59,1,8216,59,1,10836,4,2,99,108,4301,4306,114,59,3,55349,56490,97,115,104,5,216,1,59,4314,1,216,105,4,2,108,109,4323,4332,100,101,5,213,1,59,4330,1,213,101,115,59,1,10807,109,108,5,214,1,59,4344,1,214,101,114,4,2,66,80,4354,4380,4,2,97,114,4360,4364,114,59,1,8254,97,99,4,2,101,107,4372,4375,59,1,9182,101,116,59,1,9140,97,114,101,110,116,104,101,115,105,115,59,1,9180,4,9,97,99,102,104,105,108,111,114,115,4413,4422,4426,4431,4435,4438,4448,4471,4561,114,116,105,97,108,68,59,1,8706,121,59,1,1055,114,59,3,55349,56595,105,59,1,934,59,1,928,117,115,77,105,110,117,115,59,1,177,4,2,105,112,4454,4467,110,99,97,114,101,112,108,97,110,101,59,1,8460,102,59,1,8473,4,4,59,101,105,111,4481,4483,4526,4531,1,10939,99,101,100,101,115,4,4,59,69,83,84,4498,4500,4507,4519,1,8826,113,117,97,108,59,1,10927,108,97,110,116,69,113,117,97,108,59,1,8828,105,108,100,101,59,1,8830,109,101,59,1,8243,4,2,100,112,4537,4543,117,99,116,59,1,8719,111,114,116,105,111,110,4,2,59,97,4555,4557,1,8759,108,59,1,8733,4,2,99,105,4567,4572,114,59,3,55349,56491,59,1,936,4,4,85,102,111,115,4585,4594,4599,4604,79,84,5,34,1,59,4592,1,34,114,59,3,55349,56596,112,102,59,1,8474,99,114,59,3,55349,56492,4,12,66,69,97,99,101,102,104,105,111,114,115,117,4636,4642,4650,4681,4704,4763,4767,4771,5047,5069,5081,5094,97,114,114,59,1,10512,71,5,174,1,59,4648,1,174,4,3,99,110,114,4658,4664,4668,117,116,101,59,1,340,103,59,1,10219,114,4,2,59,116,4675,4677,1,8608,108,59,1,10518,4,3,97,101,121,4689,4695,4701,114,111,110,59,1,344,100,105,108,59,1,342,59,1,1056,4,2,59,118,4710,4712,1,8476,101,114,115,101,4,2,69,85,4722,4748,4,2,108,113,4728,4736,101,109,101,110,116,59,1,8715,117,105,108,105,98,114,105,117,109,59,1,8651,112,69,113,117,105,108,105,98,114,105,117,109,59,1,10607,114,59,1,8476,111,59,1,929,103,104,116,4,8,65,67,68,70,84,85,86,97,4792,4840,4849,4905,4912,4972,5022,5040,4,2,110,114,4798,4811,103,108,101,66,114,97,99,107,101,116,59,1,10217,114,111,119,4,3,59,66,76,4822,4824,4829,1,8594,97,114,59,1,8677,101,102,116,65,114,114,111,119,59,1,8644,101,105,108,105,110,103,59,1,8969,111,4,2,117,119,4856,4869,98,108,101,66,114,97,99,107,101,116,59,1,10215,110,4,2,84,86,4876,4887,101,101,86,101,99,116,111,114,59,1,10589,101,99,116,111,114,4,2,59,66,4898,4900,1,8642,97,114,59,1,10581,108,111,111,114,59,1,8971,4,2,101,114,4918,4944,101,4,3,59,65,86,4927,4929,4936,1,8866,114,114,111,119,59,1,8614,101,99,116,111,114,59,1,10587,105,97,110,103,108,101,4,3,59,66,69,4958,4960,4965,1,8883,97,114,59,1,10704,113,117,97,108,59,1,8885,112,4,3,68,84,86,4981,4993,5004,111,119,110,86,101,99,116,111,114,59,1,10575,101,101,86,101,99,116,111,114,59,1,10588,101,99,116,111,114,4,2,59,66,5015,5017,1,8638,97,114,59,1,10580,101,99,116,111,114,4,2,59,66,5033,5035,1,8640,97,114,59,1,10579,114,114,111,119,59,1,8658,4,2,112,117,5053,5057,102,59,1,8477,110,100,73,109,112,108,105,101,115,59,1,10608,105,103,104,116,97,114,114,111,119,59,1,8667,4,2,99,104,5087,5091,114,59,1,8475,59,1,8625,108,101,68,101,108,97,121,101,100,59,1,10740,4,13,72,79,97,99,102,104,105,109,111,113,115,116,117,5134,5150,5157,5164,5198,5203,5259,5265,5277,5283,5374,5380,5385,4,2,67,99,5140,5146,72,99,121,59,1,1065,121,59,1,1064,70,84,99,121,59,1,1068,99,117,116,101,59,1,346,4,5,59,97,101,105,121,5176,5178,5184,5190,5195,1,10940,114,111,110,59,1,352,100,105,108,59,1,350,114,99,59,1,348,59,1,1057,114,59,3,55349,56598,111,114,116,4,4,68,76,82,85,5216,5227,5238,5250,111,119,110,65,114,114,111,119,59,1,8595,101,102,116,65,114,114,111,119,59,1,8592,105,103,104,116,65,114,114,111,119,59,1,8594,112,65,114,114,111,119,59,1,8593,103,109,97,59,1,931,97,108,108,67,105,114,99,108,101,59,1,8728,112,102,59,3,55349,56650,4,2,114,117,5289,5293,116,59,1,8730,97,114,101,4,4,59,73,83,85,5306,5308,5322,5367,1,9633,110,116,101,114,115,101,99,116,105,111,110,59,1,8851,117,4,2,98,112,5329,5347,115,101,116,4,2,59,69,5338,5340,1,8847,113,117,97,108,59,1,8849,101,114,115,101,116,4,2,59,69,5358,5360,1,8848,113,117,97,108,59,1,8850,110,105,111,110,59,1,8852,99,114,59,3,55349,56494,97,114,59,1,8902,4,4,98,99,109,112,5395,5420,5475,5478,4,2,59,115,5401,5403,1,8912,101,116,4,2,59,69,5411,5413,1,8912,113,117,97,108,59,1,8838,4,2,99,104,5426,5468,101,101,100,115,4,4,59,69,83,84,5440,5442,5449,5461,1,8827,113,117,97,108,59,1,10928,108,97,110,116,69,113,117,97,108,59,1,8829,105,108,100,101,59,1,8831,84,104,97,116,59,1,8715,59,1,8721,4,3,59,101,115,5486,5488,5507,1,8913,114,115,101,116,4,2,59,69,5498,5500,1,8835,113,117,97,108,59,1,8839,101,116,59,1,8913,4,11,72,82,83,97,99,102,104,105,111,114,115,5536,5546,5552,5567,5579,5602,5607,5655,5695,5701,5711,79,82,78,5,222,1,59,5544,1,222,65,68,69,59,1,8482,4,2,72,99,5558,5563,99,121,59,1,1035,121,59,1,1062,4,2,98,117,5573,5576,59,1,9,59,1,932,4,3,97,101,121,5587,5593,5599,114,111,110,59,1,356,100,105,108,59,1,354,59,1,1058,114,59,3,55349,56599,4,2,101,105,5613,5631,4,2,114,116,5619,5627,101,102,111,114,101,59,1,8756,97,59,1,920,4,2,99,110,5637,5647,107,83,112,97,99,101,59,3,8287,8202,83,112,97,99,101,59,1,8201,108,100,101,4,4,59,69,70,84,5668,5670,5677,5688,1,8764,113,117,97,108,59,1,8771,117,108,108,69,113,117,97,108,59,1,8773,105,108,100,101,59,1,8776,112,102,59,3,55349,56651,105,112,108,101,68,111,116,59,1,8411,4,2,99,116,5717,5722,114,59,3,55349,56495,114,111,107,59,1,358,4,14,97,98,99,100,102,103,109,110,111,112,114,115,116,117,5758,5789,5805,5823,5830,5835,5846,5852,5921,5937,6089,6095,6101,6108,4,2,99,114,5764,5774,117,116,101,5,218,1,59,5772,1,218,114,4,2,59,111,5781,5783,1,8607,99,105,114,59,1,10569,114,4,2,99,101,5796,5800,121,59,1,1038,118,101,59,1,364,4,2,105,121,5811,5820,114,99,5,219,1,59,5818,1,219,59,1,1059,98,108,97,99,59,1,368,114,59,3,55349,56600,114,97,118,101,5,217,1,59,5844,1,217,97,99,114,59,1,362,4,2,100,105,5858,5905,101,114,4,2,66,80,5866,5892,4,2,97,114,5872,5876,114,59,1,95,97,99,4,2,101,107,5884,5887,59,1,9183,101,116,59,1,9141,97,114,101,110,116,104,101,115,105,115,59,1,9181,111,110,4,2,59,80,5913,5915,1,8899,108,117,115,59,1,8846,4,2,103,112,5927,5932,111,110,59,1,370,102,59,3,55349,56652,4,8,65,68,69,84,97,100,112,115,5955,5985,5996,6009,6026,6033,6044,6075,114,114,111,119,4,3,59,66,68,5967,5969,5974,1,8593,97,114,59,1,10514,111,119,110,65,114,114,111,119,59,1,8645,111,119,110,65,114,114,111,119,59,1,8597,113,117,105,108,105,98,114,105,117,109,59,1,10606,101,101,4,2,59,65,6017,6019,1,8869,114,114,111,119,59,1,8613,114,114,111,119,59,1,8657,111,119,110,97,114,114,111,119,59,1,8661,101,114,4,2,76,82,6052,6063,101,102,116,65,114,114,111,119,59,1,8598,105,103,104,116,65,114,114,111,119,59,1,8599,105,4,2,59,108,6082,6084,1,978,111,110,59,1,933,105,110,103,59,1,366,99,114,59,3,55349,56496,105,108,100,101,59,1,360,109,108,5,220,1,59,6115,1,220,4,9,68,98,99,100,101,102,111,115,118,6137,6143,6148,6152,6166,6250,6255,6261,6267,97,115,104,59,1,8875,97,114,59,1,10987,121,59,1,1042,97,115,104,4,2,59,108,6161,6163,1,8873,59,1,10982,4,2,101,114,6172,6175,59,1,8897,4,3,98,116,121,6183,6188,6238,97,114,59,1,8214,4,2,59,105,6194,6196,1,8214,99,97,108,4,4,66,76,83,84,6209,6214,6220,6231,97,114,59,1,8739,105,110,101,59,1,124,101,112,97,114,97,116,111,114,59,1,10072,105,108,100,101,59,1,8768,84,104,105,110,83,112,97,99,101,59,1,8202,114,59,3,55349,56601,112,102,59,3,55349,56653,99,114,59,3,55349,56497,100,97,115,104,59,1,8874,4,5,99,101,102,111,115,6286,6292,6298,6303,6309,105,114,99,59,1,372,100,103,101,59,1,8896,114,59,3,55349,56602,112,102,59,3,55349,56654,99,114,59,3,55349,56498,4,4,102,105,111,115,6325,6330,6333,6339,114,59,3,55349,56603,59,1,926,112,102,59,3,55349,56655,99,114,59,3,55349,56499,4,9,65,73,85,97,99,102,111,115,117,6365,6370,6375,6380,6391,6405,6410,6416,6422,99,121,59,1,1071,99,121,59,1,1031,99,121,59,1,1070,99,117,116,101,5,221,1,59,6389,1,221,4,2,105,121,6397,6402,114,99,59,1,374,59,1,1067,114,59,3,55349,56604,112,102,59,3,55349,56656,99,114,59,3,55349,56500,109,108,59,1,376,4,8,72,97,99,100,101,102,111,115,6445,6450,6457,6472,6477,6501,6505,6510,99,121,59,1,1046,99,117,116,101,59,1,377,4,2,97,121,6463,6469,114,111,110,59,1,381,59,1,1047,111,116,59,1,379,4,2,114,116,6483,6497,111,87,105,100,116,104,83,112,97,99,101,59,1,8203,97,59,1,918,114,59,1,8488,112,102,59,1,8484,99,114,59,3,55349,56501,4,16,97,98,99,101,102,103,108,109,110,111,112,114,115,116,117,119,6550,6561,6568,6612,6622,6634,6645,6672,6699,6854,6870,6923,6933,6963,6974,6983,99,117,116,101,5,225,1,59,6559,1,225,114,101,118,101,59,1,259,4,6,59,69,100,105,117,121,6582,6584,6588,6591,6600,6609,1,8766,59,3,8766,819,59,1,8767,114,99,5,226,1,59,6598,1,226,116,101,5,180,1,59,6607,1,180,59,1,1072,108,105,103,5,230,1,59,6620,1,230,4,2,59,114,6628,6630,1,8289,59,3,55349,56606,114,97,118,101,5,224,1,59,6643,1,224,4,2,101,112,6651,6667,4,2,102,112,6657,6663,115,121,109,59,1,8501,104,59,1,8501,104,97,59,1,945,4,2,97,112,6678,6692,4,2,99,108,6684,6688,114,59,1,257,103,59,1,10815,5,38,1,59,6697,1,38,4,2,100,103,6705,6737,4,5,59,97,100,115,118,6717,6719,6724,6727,6734,1,8743,110,100,59,1,10837,59,1,10844,108,111,112,101,59,1,10840,59,1,10842,4,7,59,101,108,109,114,115,122,6753,6755,6758,6762,6814,6835,6848,1,8736,59,1,10660,101,59,1,8736,115,100,4,2,59,97,6770,6772,1,8737,4,8,97,98,99,100,101,102,103,104,6790,6793,6796,6799,6802,6805,6808,6811,59,1,10664,59,1,10665,59,1,10666,59,1,10667,59,1,10668,59,1,10669,59,1,10670,59,1,10671,116,4,2,59,118,6821,6823,1,8735,98,4,2,59,100,6830,6832,1,8894,59,1,10653,4,2,112,116,6841,6845,104,59,1,8738,59,1,197,97,114,114,59,1,9084,4,2,103,112,6860,6865,111,110,59,1,261,102,59,3,55349,56658,4,7,59,69,97,101,105,111,112,6886,6888,6891,6897,6900,6904,6908,1,8776,59,1,10864,99,105,114,59,1,10863,59,1,8778,100,59,1,8779,115,59,1,39,114,111,120,4,2,59,101,6917,6919,1,8776,113,59,1,8778,105,110,103,5,229,1,59,6931,1,229,4,3,99,116,121,6941,6946,6949,114,59,3,55349,56502,59,1,42,109,112,4,2,59,101,6957,6959,1,8776,113,59,1,8781,105,108,100,101,5,227,1,59,6972,1,227,109,108,5,228,1,59,6981,1,228,4,2,99,105,6989,6997,111,110,105,110,116,59,1,8755,110,116,59,1,10769,4,16,78,97,98,99,100,101,102,105,107,108,110,111,112,114,115,117,7036,7041,7119,7135,7149,7155,7219,7224,7347,7354,7463,7489,7786,7793,7814,7866,111,116,59,1,10989,4,2,99,114,7047,7094,107,4,4,99,101,112,115,7058,7064,7073,7080,111,110,103,59,1,8780,112,115,105,108,111,110,59,1,1014,114,105,109,101,59,1,8245,105,109,4,2,59,101,7088,7090,1,8765,113,59,1,8909,4,2,118,119,7100,7105,101,101,59,1,8893,101,100,4,2,59,103,7113,7115,1,8965,101,59,1,8965,114,107,4,2,59,116,7127,7129,1,9141,98,114,107,59,1,9142,4,2,111,121,7141,7146,110,103,59,1,8780,59,1,1073,113,117,111,59,1,8222,4,5,99,109,112,114,116,7167,7181,7188,7193,7199,97,117,115,4,2,59,101,7176,7178,1,8757,59,1,8757,112,116,121,118,59,1,10672,115,105,59,1,1014,110,111,117,59,1,8492,4,3,97,104,119,7207,7210,7213,59,1,946,59,1,8502,101,101,110,59,1,8812,114,59,3,55349,56607,103,4,7,99,111,115,116,117,118,119,7241,7262,7288,7305,7328,7335,7340,4,3,97,105,117,7249,7253,7258,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,4,3,100,112,116,7270,7275,7281,111,116,59,1,10752,108,117,115,59,1,10753,105,109,101,115,59,1,10754,4,2,113,116,7294,7300,99,117,112,59,1,10758,97,114,59,1,9733,114,105,97,110,103,108,101,4,2,100,117,7318,7324,111,119,110,59,1,9661,112,59,1,9651,112,108,117,115,59,1,10756,101,101,59,1,8897,101,100,103,101,59,1,8896,97,114,111,119,59,1,10509,4,3,97,107,111,7362,7436,7458,4,2,99,110,7368,7432,107,4,3,108,115,116,7377,7386,7394,111,122,101,110,103,101,59,1,10731,113,117,97,114,101,59,1,9642,114,105,97,110,103,108,101,4,4,59,100,108,114,7411,7413,7419,7425,1,9652,111,119,110,59,1,9662,101,102,116,59,1,9666,105,103,104,116,59,1,9656,107,59,1,9251,4,2,49,51,7442,7454,4,2,50,52,7448,7451,59,1,9618,59,1,9617,52,59,1,9619,99,107,59,1,9608,4,2,101,111,7469,7485,4,2,59,113,7475,7478,3,61,8421,117,105,118,59,3,8801,8421,116,59,1,8976,4,4,112,116,119,120,7499,7504,7517,7523,102,59,3,55349,56659,4,2,59,116,7510,7512,1,8869,111,109,59,1,8869,116,105,101,59,1,8904,4,12,68,72,85,86,98,100,104,109,112,116,117,118,7549,7571,7597,7619,7655,7660,7682,7708,7715,7721,7728,7750,4,4,76,82,108,114,7559,7562,7565,7568,59,1,9559,59,1,9556,59,1,9558,59,1,9555,4,5,59,68,85,100,117,7583,7585,7588,7591,7594,1,9552,59,1,9574,59,1,9577,59,1,9572,59,1,9575,4,4,76,82,108,114,7607,7610,7613,7616,59,1,9565,59,1,9562,59,1,9564,59,1,9561,4,7,59,72,76,82,104,108,114,7635,7637,7640,7643,7646,7649,7652,1,9553,59,1,9580,59,1,9571,59,1,9568,59,1,9579,59,1,9570,59,1,9567,111,120,59,1,10697,4,4,76,82,108,114,7670,7673,7676,7679,59,1,9557,59,1,9554,59,1,9488,59,1,9484,4,5,59,68,85,100,117,7694,7696,7699,7702,7705,1,9472,59,1,9573,59,1,9576,59,1,9516,59,1,9524,105,110,117,115,59,1,8863,108,117,115,59,1,8862,105,109,101,115,59,1,8864,4,4,76,82,108,114,7738,7741,7744,7747,59,1,9563,59,1,9560,59,1,9496,59,1,9492,4,7,59,72,76,82,104,108,114,7766,7768,7771,7774,7777,7780,7783,1,9474,59,1,9578,59,1,9569,59,1,9566,59,1,9532,59,1,9508,59,1,9500,114,105,109,101,59,1,8245,4,2,101,118,7799,7804,118,101,59,1,728,98,97,114,5,166,1,59,7812,1,166,4,4,99,101,105,111,7824,7829,7834,7846,114,59,3,55349,56503,109,105,59,1,8271,109,4,2,59,101,7841,7843,1,8765,59,1,8909,108,4,3,59,98,104,7855,7857,7860,1,92,59,1,10693,115,117,98,59,1,10184,4,2,108,109,7872,7885,108,4,2,59,101,7879,7881,1,8226,116,59,1,8226,112,4,3,59,69,101,7894,7896,7899,1,8782,59,1,10926,4,2,59,113,7905,7907,1,8783,59,1,8783,4,15,97,99,100,101,102,104,105,108,111,114,115,116,117,119,121,7942,8021,8075,8080,8121,8126,8157,8279,8295,8430,8446,8485,8491,8707,8726,4,3,99,112,114,7950,7956,8007,117,116,101,59,1,263,4,6,59,97,98,99,100,115,7970,7972,7977,7984,7998,8003,1,8745,110,100,59,1,10820,114,99,117,112,59,1,10825,4,2,97,117,7990,7994,112,59,1,10827,112,59,1,10823,111,116,59,1,10816,59,3,8745,65024,4,2,101,111,8013,8017,116,59,1,8257,110,59,1,711,4,4,97,101,105,117,8031,8046,8056,8061,4,2,112,114,8037,8041,115,59,1,10829,111,110,59,1,269,100,105,108,5,231,1,59,8054,1,231,114,99,59,1,265,112,115,4,2,59,115,8069,8071,1,10828,109,59,1,10832,111,116,59,1,267,4,3,100,109,110,8088,8097,8104,105,108,5,184,1,59,8095,1,184,112,116,121,118,59,1,10674,116,5,162,2,59,101,8112,8114,1,162,114,100,111,116,59,1,183,114,59,3,55349,56608,4,3,99,101,105,8134,8138,8154,121,59,1,1095,99,107,4,2,59,109,8146,8148,1,10003,97,114,107,59,1,10003,59,1,967,114,4,7,59,69,99,101,102,109,115,8174,8176,8179,8258,8261,8268,8273,1,9675,59,1,10691,4,3,59,101,108,8187,8189,8193,1,710,113,59,1,8791,101,4,2,97,100,8200,8223,114,114,111,119,4,2,108,114,8210,8216,101,102,116,59,1,8634,105,103,104,116,59,1,8635,4,5,82,83,97,99,100,8235,8238,8241,8246,8252,59,1,174,59,1,9416,115,116,59,1,8859,105,114,99,59,1,8858,97,115,104,59,1,8861,59,1,8791,110,105,110,116,59,1,10768,105,100,59,1,10991,99,105,114,59,1,10690,117,98,115,4,2,59,117,8288,8290,1,9827,105,116,59,1,9827,4,4,108,109,110,112,8305,8326,8376,8400,111,110,4,2,59,101,8313,8315,1,58,4,2,59,113,8321,8323,1,8788,59,1,8788,4,2,109,112,8332,8344,97,4,2,59,116,8339,8341,1,44,59,1,64,4,3,59,102,108,8352,8354,8358,1,8705,110,59,1,8728,101,4,2,109,120,8365,8371,101,110,116,59,1,8705,101,115,59,1,8450,4,2,103,105,8382,8395,4,2,59,100,8388,8390,1,8773,111,116,59,1,10861,110,116,59,1,8750,4,3,102,114,121,8408,8412,8417,59,3,55349,56660,111,100,59,1,8720,5,169,2,59,115,8424,8426,1,169,114,59,1,8471,4,2,97,111,8436,8441,114,114,59,1,8629,115,115,59,1,10007,4,2,99,117,8452,8457,114,59,3,55349,56504,4,2,98,112,8463,8474,4,2,59,101,8469,8471,1,10959,59,1,10961,4,2,59,101,8480,8482,1,10960,59,1,10962,100,111,116,59,1,8943,4,7,100,101,108,112,114,118,119,8507,8522,8536,8550,8600,8697,8702,97,114,114,4,2,108,114,8516,8519,59,1,10552,59,1,10549,4,2,112,115,8528,8532,114,59,1,8926,99,59,1,8927,97,114,114,4,2,59,112,8545,8547,1,8630,59,1,10557,4,6,59,98,99,100,111,115,8564,8566,8573,8587,8592,8596,1,8746,114,99,97,112,59,1,10824,4,2,97,117,8579,8583,112,59,1,10822,112,59,1,10826,111,116,59,1,8845,114,59,1,10821,59,3,8746,65024,4,4,97,108,114,118,8610,8623,8663,8672,114,114,4,2,59,109,8618,8620,1,8631,59,1,10556,121,4,3,101,118,119,8632,8651,8656,113,4,2,112,115,8639,8645,114,101,99,59,1,8926,117,99,99,59,1,8927,101,101,59,1,8910,101,100,103,101,59,1,8911,101,110,5,164,1,59,8670,1,164,101,97,114,114,111,119,4,2,108,114,8684,8690,101,102,116,59,1,8630,105,103,104,116,59,1,8631,101,101,59,1,8910,101,100,59,1,8911,4,2,99,105,8713,8721,111,110,105,110,116,59,1,8754,110,116,59,1,8753,108,99,116,121,59,1,9005,4,19,65,72,97,98,99,100,101,102,104,105,106,108,111,114,115,116,117,119,122,8773,8778,8783,8821,8839,8854,8887,8914,8930,8944,9036,9041,9058,9197,9227,9258,9281,9297,9305,114,114,59,1,8659,97,114,59,1,10597,4,4,103,108,114,115,8793,8799,8805,8809,103,101,114,59,1,8224,101,116,104,59,1,8504,114,59,1,8595,104,4,2,59,118,8816,8818,1,8208,59,1,8867,4,2,107,108,8827,8834,97,114,111,119,59,1,10511,97,99,59,1,733,4,2,97,121,8845,8851,114,111,110,59,1,271,59,1,1076,4,3,59,97,111,8862,8864,8880,1,8518,4,2,103,114,8870,8876,103,101,114,59,1,8225,114,59,1,8650,116,115,101,113,59,1,10871,4,3,103,108,109,8895,8902,8907,5,176,1,59,8900,1,176,116,97,59,1,948,112,116,121,118,59,1,10673,4,2,105,114,8920,8926,115,104,116,59,1,10623,59,3,55349,56609,97,114,4,2,108,114,8938,8941,59,1,8643,59,1,8642,4,5,97,101,103,115,118,8956,8986,8989,8996,9001,109,4,3,59,111,115,8965,8967,8983,1,8900,110,100,4,2,59,115,8975,8977,1,8900,117,105,116,59,1,9830,59,1,9830,59,1,168,97,109,109,97,59,1,989,105,110,59,1,8946,4,3,59,105,111,9009,9011,9031,1,247,100,101,5,247,2,59,111,9020,9022,1,247,110,116,105,109,101,115,59,1,8903,110,120,59,1,8903,99,121,59,1,1106,99,4,2,111,114,9048,9053,114,110,59,1,8990,111,112,59,1,8973,4,5,108,112,116,117,119,9070,9076,9081,9130,9144,108,97,114,59,1,36,102,59,3,55349,56661,4,5,59,101,109,112,115,9093,9095,9109,9116,9122,1,729,113,4,2,59,100,9102,9104,1,8784,111,116,59,1,8785,105,110,117,115,59,1,8760,108,117,115,59,1,8724,113,117,97,114,101,59,1,8865,98,108,101,98,97,114,119,101,100,103,101,59,1,8966,110,4,3,97,100,104,9153,9160,9172,114,114,111,119,59,1,8595,111,119,110,97,114,114,111,119,115,59,1,8650,97,114,112,111,111,110,4,2,108,114,9184,9190,101,102,116,59,1,8643,105,103,104,116,59,1,8642,4,2,98,99,9203,9211,107,97,114,111,119,59,1,10512,4,2,111,114,9217,9222,114,110,59,1,8991,111,112,59,1,8972,4,3,99,111,116,9235,9248,9252,4,2,114,121,9241,9245,59,3,55349,56505,59,1,1109,108,59,1,10742,114,111,107,59,1,273,4,2,100,114,9264,9269,111,116,59,1,8945,105,4,2,59,102,9276,9278,1,9663,59,1,9662,4,2,97,104,9287,9292,114,114,59,1,8693,97,114,59,1,10607,97,110,103,108,101,59,1,10662,4,2,99,105,9311,9315,121,59,1,1119,103,114,97,114,114,59,1,10239,4,18,68,97,99,100,101,102,103,108,109,110,111,112,113,114,115,116,117,120,9361,9376,9398,9439,9444,9447,9462,9495,9531,9585,9598,9614,9659,9755,9771,9792,9808,9826,4,2,68,111,9367,9372,111,116,59,1,10871,116,59,1,8785,4,2,99,115,9382,9392,117,116,101,5,233,1,59,9390,1,233,116,101,114,59,1,10862,4,4,97,105,111,121,9408,9414,9430,9436,114,111,110,59,1,283,114,4,2,59,99,9421,9423,1,8790,5,234,1,59,9428,1,234,108,111,110,59,1,8789,59,1,1101,111,116,59,1,279,59,1,8519,4,2,68,114,9453,9458,111,116,59,1,8786,59,3,55349,56610,4,3,59,114,115,9470,9472,9482,1,10906,97,118,101,5,232,1,59,9480,1,232,4,2,59,100,9488,9490,1,10902,111,116,59,1,10904,4,4,59,105,108,115,9505,9507,9515,9518,1,10905,110,116,101,114,115,59,1,9191,59,1,8467,4,2,59,100,9524,9526,1,10901,111,116,59,1,10903,4,3,97,112,115,9539,9544,9564,99,114,59,1,275,116,121,4,3,59,115,118,9554,9556,9561,1,8709,101,116,59,1,8709,59,1,8709,112,4,2,49,59,9571,9583,4,2,51,52,9577,9580,59,1,8196,59,1,8197,1,8195,4,2,103,115,9591,9594,59,1,331,112,59,1,8194,4,2,103,112,9604,9609,111,110,59,1,281,102,59,3,55349,56662,4,3,97,108,115,9622,9635,9640,114,4,2,59,115,9629,9631,1,8917,108,59,1,10723,117,115,59,1,10865,105,4,3,59,108,118,9649,9651,9656,1,949,111,110,59,1,949,59,1,1013,4,4,99,115,117,118,9669,9686,9716,9747,4,2,105,111,9675,9680,114,99,59,1,8790,108,111,110,59,1,8789,4,2,105,108,9692,9696,109,59,1,8770,97,110,116,4,2,103,108,9705,9710,116,114,59,1,10902,101,115,115,59,1,10901,4,3,97,101,105,9724,9729,9734,108,115,59,1,61,115,116,59,1,8799,118,4,2,59,68,9741,9743,1,8801,68,59,1,10872,112,97,114,115,108,59,1,10725,4,2,68,97,9761,9766,111,116,59,1,8787,114,114,59,1,10609,4,3,99,100,105,9779,9783,9788,114,59,1,8495,111,116,59,1,8784,109,59,1,8770,4,2,97,104,9798,9801,59,1,951,5,240,1,59,9806,1,240,4,2,109,114,9814,9822,108,5,235,1,59,9820,1,235,111,59,1,8364,4,3,99,105,112,9834,9838,9843,108,59,1,33,115,116,59,1,8707,4,2,101,111,9849,9859,99,116,97,116,105,111,110,59,1,8496,110,101,110,116,105,97,108,101,59,1,8519,4,12,97,99,101,102,105,106,108,110,111,112,114,115,9896,9910,9914,9921,9954,9960,9967,9989,9994,10027,10036,10164,108,108,105,110,103,100,111,116,115,101,113,59,1,8786,121,59,1,1092,109,97,108,101,59,1,9792,4,3,105,108,114,9929,9935,9950,108,105,103,59,1,64259,4,2,105,108,9941,9945,103,59,1,64256,105,103,59,1,64260,59,3,55349,56611,108,105,103,59,1,64257,108,105,103,59,3,102,106,4,3,97,108,116,9975,9979,9984,116,59,1,9837,105,103,59,1,64258,110,115,59,1,9649,111,102,59,1,402,4,2,112,114,1e4,10005,102,59,3,55349,56663,4,2,97,107,10011,10016,108,108,59,1,8704,4,2,59,118,10022,10024,1,8916,59,1,10969,97,114,116,105,110,116,59,1,10765,4,2,97,111,10042,10159,4,2,99,115,10048,10155,4,6,49,50,51,52,53,55,10062,10102,10114,10135,10139,10151,4,6,50,51,52,53,54,56,10076,10083,10086,10093,10096,10099,5,189,1,59,10081,1,189,59,1,8531,5,188,1,59,10091,1,188,59,1,8533,59,1,8537,59,1,8539,4,2,51,53,10108,10111,59,1,8532,59,1,8534,4,3,52,53,56,10122,10129,10132,5,190,1,59,10127,1,190,59,1,8535,59,1,8540,53,59,1,8536,4,2,54,56,10145,10148,59,1,8538,59,1,8541,56,59,1,8542,108,59,1,8260,119,110,59,1,8994,99,114,59,3,55349,56507,4,17,69,97,98,99,100,101,102,103,105,106,108,110,111,114,115,116,118,10206,10217,10247,10254,10268,10273,10358,10363,10374,10380,10385,10406,10458,10464,10470,10497,10610,4,2,59,108,10212,10214,1,8807,59,1,10892,4,3,99,109,112,10225,10231,10244,117,116,101,59,1,501,109,97,4,2,59,100,10239,10241,1,947,59,1,989,59,1,10886,114,101,118,101,59,1,287,4,2,105,121,10260,10265,114,99,59,1,285,59,1,1075,111,116,59,1,289,4,4,59,108,113,115,10283,10285,10288,10308,1,8805,59,1,8923,4,3,59,113,115,10296,10298,10301,1,8805,59,1,8807,108,97,110,116,59,1,10878,4,4,59,99,100,108,10318,10320,10324,10345,1,10878,99,59,1,10921,111,116,4,2,59,111,10332,10334,1,10880,4,2,59,108,10340,10342,1,10882,59,1,10884,4,2,59,101,10351,10354,3,8923,65024,115,59,1,10900,114,59,3,55349,56612,4,2,59,103,10369,10371,1,8811,59,1,8921,109,101,108,59,1,8503,99,121,59,1,1107,4,4,59,69,97,106,10395,10397,10400,10403,1,8823,59,1,10898,59,1,10917,59,1,10916,4,4,69,97,101,115,10416,10419,10434,10453,59,1,8809,112,4,2,59,112,10426,10428,1,10890,114,111,120,59,1,10890,4,2,59,113,10440,10442,1,10888,4,2,59,113,10448,10450,1,10888,59,1,8809,105,109,59,1,8935,112,102,59,3,55349,56664,97,118,101,59,1,96,4,2,99,105,10476,10480,114,59,1,8458,109,4,3,59,101,108,10489,10491,10494,1,8819,59,1,10894,59,1,10896,5,62,6,59,99,100,108,113,114,10512,10514,10527,10532,10538,10545,1,62,4,2,99,105,10520,10523,59,1,10919,114,59,1,10874,111,116,59,1,8919,80,97,114,59,1,10645,117,101,115,116,59,1,10876,4,5,97,100,101,108,115,10557,10574,10579,10599,10605,4,2,112,114,10563,10570,112,114,111,120,59,1,10886,114,59,1,10616,111,116,59,1,8919,113,4,2,108,113,10586,10592,101,115,115,59,1,8923,108,101,115,115,59,1,10892,101,115,115,59,1,8823,105,109,59,1,8819,4,2,101,110,10616,10626,114,116,110,101,113,113,59,3,8809,65024,69,59,3,8809,65024,4,10,65,97,98,99,101,102,107,111,115,121,10653,10658,10713,10718,10724,10760,10765,10786,10850,10875,114,114,59,1,8660,4,4,105,108,109,114,10668,10674,10678,10684,114,115,112,59,1,8202,102,59,1,189,105,108,116,59,1,8459,4,2,100,114,10690,10695,99,121,59,1,1098,4,3,59,99,119,10703,10705,10710,1,8596,105,114,59,1,10568,59,1,8621,97,114,59,1,8463,105,114,99,59,1,293,4,3,97,108,114,10732,10748,10754,114,116,115,4,2,59,117,10741,10743,1,9829,105,116,59,1,9829,108,105,112,59,1,8230,99,111,110,59,1,8889,114,59,3,55349,56613,115,4,2,101,119,10772,10779,97,114,111,119,59,1,10533,97,114,111,119,59,1,10534,4,5,97,109,111,112,114,10798,10803,10809,10839,10844,114,114,59,1,8703,116,104,116,59,1,8763,107,4,2,108,114,10816,10827,101,102,116,97,114,114,111,119,59,1,8617,105,103,104,116,97,114,114,111,119,59,1,8618,102,59,3,55349,56665,98,97,114,59,1,8213,4,3,99,108,116,10858,10863,10869,114,59,3,55349,56509,97,115,104,59,1,8463,114,111,107,59,1,295,4,2,98,112,10881,10887,117,108,108,59,1,8259,104,101,110,59,1,8208,4,15,97,99,101,102,103,105,106,109,110,111,112,113,115,116,117,10925,10936,10958,10977,10990,11001,11039,11045,11101,11192,11220,11226,11237,11285,11299,99,117,116,101,5,237,1,59,10934,1,237,4,3,59,105,121,10944,10946,10955,1,8291,114,99,5,238,1,59,10953,1,238,59,1,1080,4,2,99,120,10964,10968,121,59,1,1077,99,108,5,161,1,59,10975,1,161,4,2,102,114,10983,10986,59,1,8660,59,3,55349,56614,114,97,118,101,5,236,1,59,10999,1,236,4,4,59,105,110,111,11011,11013,11028,11034,1,8520,4,2,105,110,11019,11024,110,116,59,1,10764,116,59,1,8749,102,105,110,59,1,10716,116,97,59,1,8489,108,105,103,59,1,307,4,3,97,111,112,11053,11092,11096,4,3,99,103,116,11061,11065,11088,114,59,1,299,4,3,101,108,112,11073,11076,11082,59,1,8465,105,110,101,59,1,8464,97,114,116,59,1,8465,104,59,1,305,102,59,1,8887,101,100,59,1,437,4,5,59,99,102,111,116,11113,11115,11121,11136,11142,1,8712,97,114,101,59,1,8453,105,110,4,2,59,116,11129,11131,1,8734,105,101,59,1,10717,100,111,116,59,1,305,4,5,59,99,101,108,112,11154,11156,11161,11179,11186,1,8747,97,108,59,1,8890,4,2,103,114,11167,11173,101,114,115,59,1,8484,99,97,108,59,1,8890,97,114,104,107,59,1,10775,114,111,100,59,1,10812,4,4,99,103,112,116,11202,11206,11211,11216,121,59,1,1105,111,110,59,1,303,102,59,3,55349,56666,97,59,1,953,114,111,100,59,1,10812,117,101,115,116,5,191,1,59,11235,1,191,4,2,99,105,11243,11248,114,59,3,55349,56510,110,4,5,59,69,100,115,118,11261,11263,11266,11271,11282,1,8712,59,1,8953,111,116,59,1,8949,4,2,59,118,11277,11279,1,8948,59,1,8947,59,1,8712,4,2,59,105,11291,11293,1,8290,108,100,101,59,1,297,4,2,107,109,11305,11310,99,121,59,1,1110,108,5,239,1,59,11316,1,239,4,6,99,102,109,111,115,117,11332,11346,11351,11357,11363,11380,4,2,105,121,11338,11343,114,99,59,1,309,59,1,1081,114,59,3,55349,56615,97,116,104,59,1,567,112,102,59,3,55349,56667,4,2,99,101,11369,11374,114,59,3,55349,56511,114,99,121,59,1,1112,107,99,121,59,1,1108,4,8,97,99,102,103,104,106,111,115,11404,11418,11433,11438,11445,11450,11455,11461,112,112,97,4,2,59,118,11413,11415,1,954,59,1,1008,4,2,101,121,11424,11430,100,105,108,59,1,311,59,1,1082,114,59,3,55349,56616,114,101,101,110,59,1,312,99,121,59,1,1093,99,121,59,1,1116,112,102,59,3,55349,56668,99,114,59,3,55349,56512,4,23,65,66,69,72,97,98,99,100,101,102,103,104,106,108,109,110,111,112,114,115,116,117,118,11515,11538,11544,11555,11560,11721,11780,11818,11868,12136,12160,12171,12203,12208,12246,12275,12327,12509,12523,12569,12641,12732,12752,4,3,97,114,116,11523,11528,11532,114,114,59,1,8666,114,59,1,8656,97,105,108,59,1,10523,97,114,114,59,1,10510,4,2,59,103,11550,11552,1,8806,59,1,10891,97,114,59,1,10594,4,9,99,101,103,109,110,112,113,114,116,11580,11586,11594,11600,11606,11624,11627,11636,11694,117,116,101,59,1,314,109,112,116,121,118,59,1,10676,114,97,110,59,1,8466,98,100,97,59,1,955,103,4,3,59,100,108,11615,11617,11620,1,10216,59,1,10641,101,59,1,10216,59,1,10885,117,111,5,171,1,59,11634,1,171,114,4,8,59,98,102,104,108,112,115,116,11655,11657,11669,11673,11677,11681,11685,11690,1,8592,4,2,59,102,11663,11665,1,8676,115,59,1,10527,115,59,1,10525,107,59,1,8617,112,59,1,8619,108,59,1,10553,105,109,59,1,10611,108,59,1,8610,4,3,59,97,101,11702,11704,11709,1,10923,105,108,59,1,10521,4,2,59,115,11715,11717,1,10925,59,3,10925,65024,4,3,97,98,114,11729,11734,11739,114,114,59,1,10508,114,107,59,1,10098,4,2,97,107,11745,11758,99,4,2,101,107,11752,11755,59,1,123,59,1,91,4,2,101,115,11764,11767,59,1,10635,108,4,2,100,117,11774,11777,59,1,10639,59,1,10637,4,4,97,101,117,121,11790,11796,11811,11815,114,111,110,59,1,318,4,2,100,105,11802,11807,105,108,59,1,316,108,59,1,8968,98,59,1,123,59,1,1083,4,4,99,113,114,115,11828,11832,11845,11864,97,59,1,10550,117,111,4,2,59,114,11840,11842,1,8220,59,1,8222,4,2,100,117,11851,11857,104,97,114,59,1,10599,115,104,97,114,59,1,10571,104,59,1,8626,4,5,59,102,103,113,115,11880,11882,12008,12011,12031,1,8804,116,4,5,97,104,108,114,116,11895,11913,11935,11947,11996,114,114,111,119,4,2,59,116,11905,11907,1,8592,97,105,108,59,1,8610,97,114,112,111,111,110,4,2,100,117,11925,11931,111,119,110,59,1,8637,112,59,1,8636,101,102,116,97,114,114,111,119,115,59,1,8647,105,103,104,116,4,3,97,104,115,11959,11974,11984,114,114,111,119,4,2,59,115,11969,11971,1,8596,59,1,8646,97,114,112,111,111,110,115,59,1,8651,113,117,105,103,97,114,114,111,119,59,1,8621,104,114,101,101,116,105,109,101,115,59,1,8907,59,1,8922,4,3,59,113,115,12019,12021,12024,1,8804,59,1,8806,108,97,110,116,59,1,10877,4,5,59,99,100,103,115,12043,12045,12049,12070,12083,1,10877,99,59,1,10920,111,116,4,2,59,111,12057,12059,1,10879,4,2,59,114,12065,12067,1,10881,59,1,10883,4,2,59,101,12076,12079,3,8922,65024,115,59,1,10899,4,5,97,100,101,103,115,12095,12103,12108,12126,12131,112,112,114,111,120,59,1,10885,111,116,59,1,8918,113,4,2,103,113,12115,12120,116,114,59,1,8922,103,116,114,59,1,10891,116,114,59,1,8822,105,109,59,1,8818,4,3,105,108,114,12144,12150,12156,115,104,116,59,1,10620,111,111,114,59,1,8970,59,3,55349,56617,4,2,59,69,12166,12168,1,8822,59,1,10897,4,2,97,98,12177,12198,114,4,2,100,117,12184,12187,59,1,8637,4,2,59,108,12193,12195,1,8636,59,1,10602,108,107,59,1,9604,99,121,59,1,1113,4,5,59,97,99,104,116,12220,12222,12227,12235,12241,1,8810,114,114,59,1,8647,111,114,110,101,114,59,1,8990,97,114,100,59,1,10603,114,105,59,1,9722,4,2,105,111,12252,12258,100,111,116,59,1,320,117,115,116,4,2,59,97,12267,12269,1,9136,99,104,101,59,1,9136,4,4,69,97,101,115,12285,12288,12303,12322,59,1,8808,112,4,2,59,112,12295,12297,1,10889,114,111,120,59,1,10889,4,2,59,113,12309,12311,1,10887,4,2,59,113,12317,12319,1,10887,59,1,8808,105,109,59,1,8934,4,8,97,98,110,111,112,116,119,122,12345,12359,12364,12421,12446,12467,12474,12490,4,2,110,114,12351,12355,103,59,1,10220,114,59,1,8701,114,107,59,1,10214,103,4,3,108,109,114,12373,12401,12409,101,102,116,4,2,97,114,12382,12389,114,114,111,119,59,1,10229,105,103,104,116,97,114,114,111,119,59,1,10231,97,112,115,116,111,59,1,10236,105,103,104,116,97,114,114,111,119,59,1,10230,112,97,114,114,111,119,4,2,108,114,12433,12439,101,102,116,59,1,8619,105,103,104,116,59,1,8620,4,3,97,102,108,12454,12458,12462,114,59,1,10629,59,3,55349,56669,117,115,59,1,10797,105,109,101,115,59,1,10804,4,2,97,98,12480,12485,115,116,59,1,8727,97,114,59,1,95,4,3,59,101,102,12498,12500,12506,1,9674,110,103,101,59,1,9674,59,1,10731,97,114,4,2,59,108,12517,12519,1,40,116,59,1,10643,4,5,97,99,104,109,116,12535,12540,12548,12561,12564,114,114,59,1,8646,111,114,110,101,114,59,1,8991,97,114,4,2,59,100,12556,12558,1,8651,59,1,10605,59,1,8206,114,105,59,1,8895,4,6,97,99,104,105,113,116,12583,12589,12594,12597,12614,12635,113,117,111,59,1,8249,114,59,3,55349,56513,59,1,8624,109,4,3,59,101,103,12606,12608,12611,1,8818,59,1,10893,59,1,10895,4,2,98,117,12620,12623,59,1,91,111,4,2,59,114,12630,12632,1,8216,59,1,8218,114,111,107,59,1,322,5,60,8,59,99,100,104,105,108,113,114,12660,12662,12675,12680,12686,12692,12698,12705,1,60,4,2,99,105,12668,12671,59,1,10918,114,59,1,10873,111,116,59,1,8918,114,101,101,59,1,8907,109,101,115,59,1,8905,97,114,114,59,1,10614,117,101,115,116,59,1,10875,4,2,80,105,12711,12716,97,114,59,1,10646,4,3,59,101,102,12724,12726,12729,1,9667,59,1,8884,59,1,9666,114,4,2,100,117,12739,12746,115,104,97,114,59,1,10570,104,97,114,59,1,10598,4,2,101,110,12758,12768,114,116,110,101,113,113,59,3,8808,65024,69,59,3,8808,65024,4,14,68,97,99,100,101,102,104,105,108,110,111,112,115,117,12803,12809,12893,12908,12914,12928,12933,12937,13011,13025,13032,13049,13052,13069,68,111,116,59,1,8762,4,4,99,108,112,114,12819,12827,12849,12887,114,5,175,1,59,12825,1,175,4,2,101,116,12833,12836,59,1,9794,4,2,59,101,12842,12844,1,10016,115,101,59,1,10016,4,2,59,115,12855,12857,1,8614,116,111,4,4,59,100,108,117,12869,12871,12877,12883,1,8614,111,119,110,59,1,8615,101,102,116,59,1,8612,112,59,1,8613,107,101,114,59,1,9646,4,2,111,121,12899,12905,109,109,97,59,1,10793,59,1,1084,97,115,104,59,1,8212,97,115,117,114,101,100,97,110,103,108,101,59,1,8737,114,59,3,55349,56618,111,59,1,8487,4,3,99,100,110,12945,12954,12985,114,111,5,181,1,59,12952,1,181,4,4,59,97,99,100,12964,12966,12971,12976,1,8739,115,116,59,1,42,105,114,59,1,10992,111,116,5,183,1,59,12983,1,183,117,115,4,3,59,98,100,12995,12997,13e3,1,8722,59,1,8863,4,2,59,117,13006,13008,1,8760,59,1,10794,4,2,99,100,13017,13021,112,59,1,10971,114,59,1,8230,112,108,117,115,59,1,8723,4,2,100,112,13038,13044,101,108,115,59,1,8871,102,59,3,55349,56670,59,1,8723,4,2,99,116,13058,13063,114,59,3,55349,56514,112,111,115,59,1,8766,4,3,59,108,109,13077,13079,13087,1,956,116,105,109,97,112,59,1,8888,97,112,59,1,8888,4,24,71,76,82,86,97,98,99,100,101,102,103,104,105,106,108,109,111,112,114,115,116,117,118,119,13142,13165,13217,13229,13247,13330,13359,13414,13420,13508,13513,13579,13602,13626,13631,13762,13767,13855,13936,13995,14214,14285,14312,14432,4,2,103,116,13148,13152,59,3,8921,824,4,2,59,118,13158,13161,3,8811,8402,59,3,8811,824,4,3,101,108,116,13173,13200,13204,102,116,4,2,97,114,13181,13188,114,114,111,119,59,1,8653,105,103,104,116,97,114,114,111,119,59,1,8654,59,3,8920,824,4,2,59,118,13210,13213,3,8810,8402,59,3,8810,824,105,103,104,116,97,114,114,111,119,59,1,8655,4,2,68,100,13235,13241,97,115,104,59,1,8879,97,115,104,59,1,8878,4,5,98,99,110,112,116,13259,13264,13270,13275,13308,108,97,59,1,8711,117,116,101,59,1,324,103,59,3,8736,8402,4,5,59,69,105,111,112,13287,13289,13293,13298,13302,1,8777,59,3,10864,824,100,59,3,8779,824,115,59,1,329,114,111,120,59,1,8777,117,114,4,2,59,97,13316,13318,1,9838,108,4,2,59,115,13325,13327,1,9838,59,1,8469,4,2,115,117,13336,13344,112,5,160,1,59,13342,1,160,109,112,4,2,59,101,13352,13355,3,8782,824,59,3,8783,824,4,5,97,101,111,117,121,13371,13385,13391,13407,13411,4,2,112,114,13377,13380,59,1,10819,111,110,59,1,328,100,105,108,59,1,326,110,103,4,2,59,100,13399,13401,1,8775,111,116,59,3,10861,824,112,59,1,10818,59,1,1085,97,115,104,59,1,8211,4,7,59,65,97,100,113,115,120,13436,13438,13443,13466,13472,13478,13494,1,8800,114,114,59,1,8663,114,4,2,104,114,13450,13454,107,59,1,10532,4,2,59,111,13460,13462,1,8599,119,59,1,8599,111,116,59,3,8784,824,117,105,118,59,1,8802,4,2,101,105,13484,13489,97,114,59,1,10536,109,59,3,8770,824,105,115,116,4,2,59,115,13503,13505,1,8708,59,1,8708,114,59,3,55349,56619,4,4,69,101,115,116,13523,13527,13563,13568,59,3,8807,824,4,3,59,113,115,13535,13537,13559,1,8817,4,3,59,113,115,13545,13547,13551,1,8817,59,3,8807,824,108,97,110,116,59,3,10878,824,59,3,10878,824,105,109,59,1,8821,4,2,59,114,13574,13576,1,8815,59,1,8815,4,3,65,97,112,13587,13592,13597,114,114,59,1,8654,114,114,59,1,8622,97,114,59,1,10994,4,3,59,115,118,13610,13612,13623,1,8715,4,2,59,100,13618,13620,1,8956,59,1,8954,59,1,8715,99,121,59,1,1114,4,7,65,69,97,100,101,115,116,13647,13652,13656,13661,13665,13737,13742,114,114,59,1,8653,59,3,8806,824,114,114,59,1,8602,114,59,1,8229,4,4,59,102,113,115,13675,13677,13703,13725,1,8816,116,4,2,97,114,13684,13691,114,114,111,119,59,1,8602,105,103,104,116,97,114,114,111,119,59,1,8622,4,3,59,113,115,13711,13713,13717,1,8816,59,3,8806,824,108,97,110,116,59,3,10877,824,4,2,59,115,13731,13734,3,10877,824,59,1,8814,105,109,59,1,8820,4,2,59,114,13748,13750,1,8814,105,4,2,59,101,13757,13759,1,8938,59,1,8940,105,100,59,1,8740,4,2,112,116,13773,13778,102,59,3,55349,56671,5,172,3,59,105,110,13787,13789,13829,1,172,110,4,4,59,69,100,118,13800,13802,13806,13812,1,8713,59,3,8953,824,111,116,59,3,8949,824,4,3,97,98,99,13820,13823,13826,59,1,8713,59,1,8951,59,1,8950,105,4,2,59,118,13836,13838,1,8716,4,3,97,98,99,13846,13849,13852,59,1,8716,59,1,8958,59,1,8957,4,3,97,111,114,13863,13892,13899,114,4,4,59,97,115,116,13874,13876,13883,13888,1,8742,108,108,101,108,59,1,8742,108,59,3,11005,8421,59,3,8706,824,108,105,110,116,59,1,10772,4,3,59,99,101,13907,13909,13914,1,8832,117,101,59,1,8928,4,2,59,99,13920,13923,3,10927,824,4,2,59,101,13929,13931,1,8832,113,59,3,10927,824,4,4,65,97,105,116,13946,13951,13971,13982,114,114,59,1,8655,114,114,4,3,59,99,119,13961,13963,13967,1,8603,59,3,10547,824,59,3,8605,824,103,104,116,97,114,114,111,119,59,1,8603,114,105,4,2,59,101,13990,13992,1,8939,59,1,8941,4,7,99,104,105,109,112,113,117,14011,14036,14060,14080,14085,14090,14106,4,4,59,99,101,114,14021,14023,14028,14032,1,8833,117,101,59,1,8929,59,3,10928,824,59,3,55349,56515,111,114,116,4,2,109,112,14045,14050,105,100,59,1,8740,97,114,97,108,108,101,108,59,1,8742,109,4,2,59,101,14067,14069,1,8769,4,2,59,113,14075,14077,1,8772,59,1,8772,105,100,59,1,8740,97,114,59,1,8742,115,117,4,2,98,112,14098,14102,101,59,1,8930,101,59,1,8931,4,3,98,99,112,14114,14157,14171,4,4,59,69,101,115,14124,14126,14130,14133,1,8836,59,3,10949,824,59,1,8840,101,116,4,2,59,101,14141,14144,3,8834,8402,113,4,2,59,113,14151,14153,1,8840,59,3,10949,824,99,4,2,59,101,14164,14166,1,8833,113,59,3,10928,824,4,4,59,69,101,115,14181,14183,14187,14190,1,8837,59,3,10950,824,59,1,8841,101,116,4,2,59,101,14198,14201,3,8835,8402,113,4,2,59,113,14208,14210,1,8841,59,3,10950,824,4,4,103,105,108,114,14224,14228,14238,14242,108,59,1,8825,108,100,101,5,241,1,59,14236,1,241,103,59,1,8824,105,97,110,103,108,101,4,2,108,114,14254,14269,101,102,116,4,2,59,101,14263,14265,1,8938,113,59,1,8940,105,103,104,116,4,2,59,101,14279,14281,1,8939,113,59,1,8941,4,2,59,109,14291,14293,1,957,4,3,59,101,115,14301,14303,14308,1,35,114,111,59,1,8470,112,59,1,8199,4,9,68,72,97,100,103,105,108,114,115,14332,14338,14344,14349,14355,14369,14376,14408,14426,97,115,104,59,1,8877,97,114,114,59,1,10500,112,59,3,8781,8402,97,115,104,59,1,8876,4,2,101,116,14361,14365,59,3,8805,8402,59,3,62,8402,110,102,105,110,59,1,10718,4,3,65,101,116,14384,14389,14393,114,114,59,1,10498,59,3,8804,8402,4,2,59,114,14399,14402,3,60,8402,105,101,59,3,8884,8402,4,2,65,116,14414,14419,114,114,59,1,10499,114,105,101,59,3,8885,8402,105,109,59,3,8764,8402,4,3,65,97,110,14440,14445,14468,114,114,59,1,8662,114,4,2,104,114,14452,14456,107,59,1,10531,4,2,59,111,14462,14464,1,8598,119,59,1,8598,101,97,114,59,1,10535,4,18,83,97,99,100,101,102,103,104,105,108,109,111,112,114,115,116,117,118,14512,14515,14535,14560,14597,14603,14618,14643,14657,14662,14701,14741,14747,14769,14851,14877,14907,14916,59,1,9416,4,2,99,115,14521,14531,117,116,101,5,243,1,59,14529,1,243,116,59,1,8859,4,2,105,121,14541,14557,114,4,2,59,99,14548,14550,1,8858,5,244,1,59,14555,1,244,59,1,1086,4,5,97,98,105,111,115,14572,14577,14583,14587,14591,115,104,59,1,8861,108,97,99,59,1,337,118,59,1,10808,116,59,1,8857,111,108,100,59,1,10684,108,105,103,59,1,339,4,2,99,114,14609,14614,105,114,59,1,10687,59,3,55349,56620,4,3,111,114,116,14626,14630,14640,110,59,1,731,97,118,101,5,242,1,59,14638,1,242,59,1,10689,4,2,98,109,14649,14654,97,114,59,1,10677,59,1,937,110,116,59,1,8750,4,4,97,99,105,116,14672,14677,14693,14698,114,114,59,1,8634,4,2,105,114,14683,14687,114,59,1,10686,111,115,115,59,1,10683,110,101,59,1,8254,59,1,10688,4,3,97,101,105,14709,14714,14719,99,114,59,1,333,103,97,59,1,969,4,3,99,100,110,14727,14733,14736,114,111,110,59,1,959,59,1,10678,117,115,59,1,8854,112,102,59,3,55349,56672,4,3,97,101,108,14755,14759,14764,114,59,1,10679,114,112,59,1,10681,117,115,59,1,8853,4,7,59,97,100,105,111,115,118,14785,14787,14792,14831,14837,14841,14848,1,8744,114,114,59,1,8635,4,4,59,101,102,109,14802,14804,14817,14824,1,10845,114,4,2,59,111,14811,14813,1,8500,102,59,1,8500,5,170,1,59,14822,1,170,5,186,1,59,14829,1,186,103,111,102,59,1,8886,114,59,1,10838,108,111,112,101,59,1,10839,59,1,10843,4,3,99,108,111,14859,14863,14873,114,59,1,8500,97,115,104,5,248,1,59,14871,1,248,108,59,1,8856,105,4,2,108,109,14884,14893,100,101,5,245,1,59,14891,1,245,101,115,4,2,59,97,14901,14903,1,8855,115,59,1,10806,109,108,5,246,1,59,14914,1,246,98,97,114,59,1,9021,4,12,97,99,101,102,104,105,108,109,111,114,115,117,14948,14992,14996,15033,15038,15068,15090,15189,15192,15222,15427,15441,114,4,4,59,97,115,116,14959,14961,14976,14989,1,8741,5,182,2,59,108,14968,14970,1,182,108,101,108,59,1,8741,4,2,105,108,14982,14986,109,59,1,10995,59,1,11005,59,1,8706,121,59,1,1087,114,4,5,99,105,109,112,116,15009,15014,15019,15024,15027,110,116,59,1,37,111,100,59,1,46,105,108,59,1,8240,59,1,8869,101,110,107,59,1,8241,114,59,3,55349,56621,4,3,105,109,111,15046,15057,15063,4,2,59,118,15052,15054,1,966,59,1,981,109,97,116,59,1,8499,110,101,59,1,9742,4,3,59,116,118,15076,15078,15087,1,960,99,104,102,111,114,107,59,1,8916,59,1,982,4,2,97,117,15096,15119,110,4,2,99,107,15103,15115,107,4,2,59,104,15110,15112,1,8463,59,1,8462,118,59,1,8463,115,4,9,59,97,98,99,100,101,109,115,116,15140,15142,15148,15151,15156,15168,15171,15179,15184,1,43,99,105,114,59,1,10787,59,1,8862,105,114,59,1,10786,4,2,111,117,15162,15165,59,1,8724,59,1,10789,59,1,10866,110,5,177,1,59,15177,1,177,105,109,59,1,10790,119,111,59,1,10791,59,1,177,4,3,105,112,117,15200,15208,15213,110,116,105,110,116,59,1,10773,102,59,3,55349,56673,110,100,5,163,1,59,15220,1,163,4,10,59,69,97,99,101,105,110,111,115,117,15244,15246,15249,15253,15258,15334,15347,15367,15416,15421,1,8826,59,1,10931,112,59,1,10935,117,101,59,1,8828,4,2,59,99,15264,15266,1,10927,4,6,59,97,99,101,110,115,15280,15282,15290,15299,15303,15329,1,8826,112,112,114,111,120,59,1,10935,117,114,108,121,101,113,59,1,8828,113,59,1,10927,4,3,97,101,115,15311,15319,15324,112,112,114,111,120,59,1,10937,113,113,59,1,10933,105,109,59,1,8936,105,109,59,1,8830,109,101,4,2,59,115,15342,15344,1,8242,59,1,8473,4,3,69,97,115,15355,15358,15362,59,1,10933,112,59,1,10937,105,109,59,1,8936,4,3,100,102,112,15375,15378,15404,59,1,8719,4,3,97,108,115,15386,15392,15398,108,97,114,59,1,9006,105,110,101,59,1,8978,117,114,102,59,1,8979,4,2,59,116,15410,15412,1,8733,111,59,1,8733,105,109,59,1,8830,114,101,108,59,1,8880,4,2,99,105,15433,15438,114,59,3,55349,56517,59,1,968,110,99,115,112,59,1,8200,4,6,102,105,111,112,115,117,15462,15467,15472,15478,15485,15491,114,59,3,55349,56622,110,116,59,1,10764,112,102,59,3,55349,56674,114,105,109,101,59,1,8279,99,114,59,3,55349,56518,4,3,97,101,111,15499,15520,15534,116,4,2,101,105,15506,15515,114,110,105,111,110,115,59,1,8461,110,116,59,1,10774,115,116,4,2,59,101,15528,15530,1,63,113,59,1,8799,116,5,34,1,59,15540,1,34,4,21,65,66,72,97,98,99,100,101,102,104,105,108,109,110,111,112,114,115,116,117,120,15586,15609,15615,15620,15796,15855,15893,15931,15977,16001,16039,16183,16204,16222,16228,16285,16312,16318,16363,16408,16416,4,3,97,114,116,15594,15599,15603,114,114,59,1,8667,114,59,1,8658,97,105,108,59,1,10524,97,114,114,59,1,10511,97,114,59,1,10596,4,7,99,100,101,110,113,114,116,15636,15651,15656,15664,15687,15696,15770,4,2,101,117,15642,15646,59,3,8765,817,116,101,59,1,341,105,99,59,1,8730,109,112,116,121,118,59,1,10675,103,4,4,59,100,101,108,15675,15677,15680,15683,1,10217,59,1,10642,59,1,10661,101,59,1,10217,117,111,5,187,1,59,15694,1,187,114,4,11,59,97,98,99,102,104,108,112,115,116,119,15721,15723,15727,15739,15742,15746,15750,15754,15758,15763,15767,1,8594,112,59,1,10613,4,2,59,102,15733,15735,1,8677,115,59,1,10528,59,1,10547,115,59,1,10526,107,59,1,8618,112,59,1,8620,108,59,1,10565,105,109,59,1,10612,108,59,1,8611,59,1,8605,4,2,97,105,15776,15781,105,108,59,1,10522,111,4,2,59,110,15788,15790,1,8758,97,108,115,59,1,8474,4,3,97,98,114,15804,15809,15814,114,114,59,1,10509,114,107,59,1,10099,4,2,97,107,15820,15833,99,4,2,101,107,15827,15830,59,1,125,59,1,93,4,2,101,115,15839,15842,59,1,10636,108,4,2,100,117,15849,15852,59,1,10638,59,1,10640,4,4,97,101,117,121,15865,15871,15886,15890,114,111,110,59,1,345,4,2,100,105,15877,15882,105,108,59,1,343,108,59,1,8969,98,59,1,125,59,1,1088,4,4,99,108,113,115,15903,15907,15914,15927,97,59,1,10551,100,104,97,114,59,1,10601,117,111,4,2,59,114,15922,15924,1,8221,59,1,8221,104,59,1,8627,4,3,97,99,103,15939,15966,15970,108,4,4,59,105,112,115,15950,15952,15957,15963,1,8476,110,101,59,1,8475,97,114,116,59,1,8476,59,1,8477,116,59,1,9645,5,174,1,59,15975,1,174,4,3,105,108,114,15985,15991,15997,115,104,116,59,1,10621,111,111,114,59,1,8971,59,3,55349,56623,4,2,97,111,16007,16028,114,4,2,100,117,16014,16017,59,1,8641,4,2,59,108,16023,16025,1,8640,59,1,10604,4,2,59,118,16034,16036,1,961,59,1,1009,4,3,103,110,115,16047,16167,16171,104,116,4,6,97,104,108,114,115,116,16063,16081,16103,16130,16143,16155,114,114,111,119,4,2,59,116,16073,16075,1,8594,97,105,108,59,1,8611,97,114,112,111,111,110,4,2,100,117,16093,16099,111,119,110,59,1,8641,112,59,1,8640,101,102,116,4,2,97,104,16112,16120,114,114,111,119,115,59,1,8644,97,114,112,111,111,110,115,59,1,8652,105,103,104,116,97,114,114,111,119,115,59,1,8649,113,117,105,103,97,114,114,111,119,59,1,8605,104,114,101,101,116,105,109,101,115,59,1,8908,103,59,1,730,105,110,103,100,111,116,115,101,113,59,1,8787,4,3,97,104,109,16191,16196,16201,114,114,59,1,8644,97,114,59,1,8652,59,1,8207,111,117,115,116,4,2,59,97,16214,16216,1,9137,99,104,101,59,1,9137,109,105,100,59,1,10990,4,4,97,98,112,116,16238,16252,16257,16278,4,2,110,114,16244,16248,103,59,1,10221,114,59,1,8702,114,107,59,1,10215,4,3,97,102,108,16265,16269,16273,114,59,1,10630,59,3,55349,56675,117,115,59,1,10798,105,109,101,115,59,1,10805,4,2,97,112,16291,16304,114,4,2,59,103,16298,16300,1,41,116,59,1,10644,111,108,105,110,116,59,1,10770,97,114,114,59,1,8649,4,4,97,99,104,113,16328,16334,16339,16342,113,117,111,59,1,8250,114,59,3,55349,56519,59,1,8625,4,2,98,117,16348,16351,59,1,93,111,4,2,59,114,16358,16360,1,8217,59,1,8217,4,3,104,105,114,16371,16377,16383,114,101,101,59,1,8908,109,101,115,59,1,8906,105,4,4,59,101,102,108,16394,16396,16399,16402,1,9657,59,1,8885,59,1,9656,116,114,105,59,1,10702,108,117,104,97,114,59,1,10600,59,1,8478,4,19,97,98,99,100,101,102,104,105,108,109,111,112,113,114,115,116,117,119,122,16459,16466,16472,16572,16590,16672,16687,16746,16844,16850,16924,16963,16988,17115,17121,17154,17206,17614,17656,99,117,116,101,59,1,347,113,117,111,59,1,8218,4,10,59,69,97,99,101,105,110,112,115,121,16494,16496,16499,16513,16518,16531,16536,16556,16564,16569,1,8827,59,1,10932,4,2,112,114,16505,16508,59,1,10936,111,110,59,1,353,117,101,59,1,8829,4,2,59,100,16524,16526,1,10928,105,108,59,1,351,114,99,59,1,349,4,3,69,97,115,16544,16547,16551,59,1,10934,112,59,1,10938,105,109,59,1,8937,111,108,105,110,116,59,1,10771,105,109,59,1,8831,59,1,1089,111,116,4,3,59,98,101,16582,16584,16587,1,8901,59,1,8865,59,1,10854,4,7,65,97,99,109,115,116,120,16606,16611,16634,16642,16646,16652,16668,114,114,59,1,8664,114,4,2,104,114,16618,16622,107,59,1,10533,4,2,59,111,16628,16630,1,8600,119,59,1,8600,116,5,167,1,59,16640,1,167,105,59,1,59,119,97,114,59,1,10537,109,4,2,105,110,16659,16665,110,117,115,59,1,8726,59,1,8726,116,59,1,10038,114,4,2,59,111,16679,16682,3,55349,56624,119,110,59,1,8994,4,4,97,99,111,121,16697,16702,16716,16739,114,112,59,1,9839,4,2,104,121,16708,16713,99,121,59,1,1097,59,1,1096,114,116,4,2,109,112,16724,16729,105,100,59,1,8739,97,114,97,108,108,101,108,59,1,8741,5,173,1,59,16744,1,173,4,2,103,109,16752,16770,109,97,4,3,59,102,118,16762,16764,16767,1,963,59,1,962,59,1,962,4,8,59,100,101,103,108,110,112,114,16788,16790,16795,16806,16817,16828,16832,16838,1,8764,111,116,59,1,10858,4,2,59,113,16801,16803,1,8771,59,1,8771,4,2,59,69,16812,16814,1,10910,59,1,10912,4,2,59,69,16823,16825,1,10909,59,1,10911,101,59,1,8774,108,117,115,59,1,10788,97,114,114,59,1,10610,97,114,114,59,1,8592,4,4,97,101,105,116,16860,16883,16891,16904,4,2,108,115,16866,16878,108,115,101,116,109,105,110,117,115,59,1,8726,104,112,59,1,10803,112,97,114,115,108,59,1,10724,4,2,100,108,16897,16900,59,1,8739,101,59,1,8995,4,2,59,101,16910,16912,1,10922,4,2,59,115,16918,16920,1,10924,59,3,10924,65024,4,3,102,108,112,16932,16938,16958,116,99,121,59,1,1100,4,2,59,98,16944,16946,1,47,4,2,59,97,16952,16954,1,10692,114,59,1,9023,102,59,3,55349,56676,97,4,2,100,114,16970,16985,101,115,4,2,59,117,16978,16980,1,9824,105,116,59,1,9824,59,1,8741,4,3,99,115,117,16996,17028,17089,4,2,97,117,17002,17015,112,4,2,59,115,17009,17011,1,8851,59,3,8851,65024,112,4,2,59,115,17022,17024,1,8852,59,3,8852,65024,117,4,2,98,112,17035,17062,4,3,59,101,115,17043,17045,17048,1,8847,59,1,8849,101,116,4,2,59,101,17056,17058,1,8847,113,59,1,8849,4,3,59,101,115,17070,17072,17075,1,8848,59,1,8850,101,116,4,2,59,101,17083,17085,1,8848,113,59,1,8850,4,3,59,97,102,17097,17099,17112,1,9633,114,4,2,101,102,17106,17109,59,1,9633,59,1,9642,59,1,9642,97,114,114,59,1,8594,4,4,99,101,109,116,17131,17136,17142,17148,114,59,3,55349,56520,116,109,110,59,1,8726,105,108,101,59,1,8995,97,114,102,59,1,8902,4,2,97,114,17160,17172,114,4,2,59,102,17167,17169,1,9734,59,1,9733,4,2,97,110,17178,17202,105,103,104,116,4,2,101,112,17188,17197,112,115,105,108,111,110,59,1,1013,104,105,59,1,981,115,59,1,175,4,5,98,99,109,110,112,17218,17351,17420,17423,17427,4,9,59,69,100,101,109,110,112,114,115,17238,17240,17243,17248,17261,17267,17279,17285,17291,1,8834,59,1,10949,111,116,59,1,10941,4,2,59,100,17254,17256,1,8838,111,116,59,1,10947,117,108,116,59,1,10945,4,2,69,101,17273,17276,59,1,10955,59,1,8842,108,117,115,59,1,10943,97,114,114,59,1,10617,4,3,101,105,117,17299,17335,17339,116,4,3,59,101,110,17308,17310,17322,1,8834,113,4,2,59,113,17317,17319,1,8838,59,1,10949,101,113,4,2,59,113,17330,17332,1,8842,59,1,10955,109,59,1,10951,4,2,98,112,17345,17348,59,1,10965,59,1,10963,99,4,6,59,97,99,101,110,115,17366,17368,17376,17385,17389,17415,1,8827,112,112,114,111,120,59,1,10936,117,114,108,121,101,113,59,1,8829,113,59,1,10928,4,3,97,101,115,17397,17405,17410,112,112,114,111,120,59,1,10938,113,113,59,1,10934,105,109,59,1,8937,105,109,59,1,8831,59,1,8721,103,59,1,9834,4,13,49,50,51,59,69,100,101,104,108,109,110,112,115,17455,17462,17469,17476,17478,17481,17496,17509,17524,17530,17536,17548,17554,5,185,1,59,17460,1,185,5,178,1,59,17467,1,178,5,179,1,59,17474,1,179,1,8835,59,1,10950,4,2,111,115,17487,17491,116,59,1,10942,117,98,59,1,10968,4,2,59,100,17502,17504,1,8839,111,116,59,1,10948,115,4,2,111,117,17516,17520,108,59,1,10185,98,59,1,10967,97,114,114,59,1,10619,117,108,116,59,1,10946,4,2,69,101,17542,17545,59,1,10956,59,1,8843,108,117,115,59,1,10944,4,3,101,105,117,17562,17598,17602,116,4,3,59,101,110,17571,17573,17585,1,8835,113,4,2,59,113,17580,17582,1,8839,59,1,10950,101,113,4,2,59,113,17593,17595,1,8843,59,1,10956,109,59,1,10952,4,2,98,112,17608,17611,59,1,10964,59,1,10966,4,3,65,97,110,17622,17627,17650,114,114,59,1,8665,114,4,2,104,114,17634,17638,107,59,1,10534,4,2,59,111,17644,17646,1,8601,119,59,1,8601,119,97,114,59,1,10538,108,105,103,5,223,1,59,17664,1,223,4,13,97,98,99,100,101,102,104,105,111,112,114,115,119,17694,17709,17714,17737,17742,17749,17754,17860,17905,17957,17964,18090,18122,4,2,114,117,17700,17706,103,101,116,59,1,8982,59,1,964,114,107,59,1,9140,4,3,97,101,121,17722,17728,17734,114,111,110,59,1,357,100,105,108,59,1,355,59,1,1090,111,116,59,1,8411,108,114,101,99,59,1,8981,114,59,3,55349,56625,4,4,101,105,107,111,17764,17805,17836,17851,4,2,114,116,17770,17786,101,4,2,52,102,17777,17780,59,1,8756,111,114,101,59,1,8756,97,4,3,59,115,118,17795,17797,17802,1,952,121,109,59,1,977,59,1,977,4,2,99,110,17811,17831,107,4,2,97,115,17818,17826,112,112,114,111,120,59,1,8776,105,109,59,1,8764,115,112,59,1,8201,4,2,97,115,17842,17846,112,59,1,8776,105,109,59,1,8764,114,110,5,254,1,59,17858,1,254,4,3,108,109,110,17868,17873,17901,100,101,59,1,732,101,115,5,215,3,59,98,100,17884,17886,17898,1,215,4,2,59,97,17892,17894,1,8864,114,59,1,10801,59,1,10800,116,59,1,8749,4,3,101,112,115,17913,17917,17953,97,59,1,10536,4,4,59,98,99,102,17927,17929,17934,17939,1,8868,111,116,59,1,9014,105,114,59,1,10993,4,2,59,111,17945,17948,3,55349,56677,114,107,59,1,10970,97,59,1,10537,114,105,109,101,59,1,8244,4,3,97,105,112,17972,17977,18082,100,101,59,1,8482,4,7,97,100,101,109,112,115,116,17993,18051,18056,18059,18066,18072,18076,110,103,108,101,4,5,59,100,108,113,114,18009,18011,18017,18032,18035,1,9653,111,119,110,59,1,9663,101,102,116,4,2,59,101,18026,18028,1,9667,113,59,1,8884,59,1,8796,105,103,104,116,4,2,59,101,18045,18047,1,9657,113,59,1,8885,111,116,59,1,9708,59,1,8796,105,110,117,115,59,1,10810,108,117,115,59,1,10809,98,59,1,10701,105,109,101,59,1,10811,101,122,105,117,109,59,1,9186,4,3,99,104,116,18098,18111,18116,4,2,114,121,18104,18108,59,3,55349,56521,59,1,1094,99,121,59,1,1115,114,111,107,59,1,359,4,2,105,111,18128,18133,120,116,59,1,8812,104,101,97,100,4,2,108,114,18143,18154,101,102,116,97,114,114,111,119,59,1,8606,105,103,104,116,97,114,114,111,119,59,1,8608,4,18,65,72,97,98,99,100,102,103,104,108,109,111,112,114,115,116,117,119,18204,18209,18214,18234,18250,18268,18292,18308,18319,18343,18379,18397,18413,18504,18547,18553,18584,18603,114,114,59,1,8657,97,114,59,1,10595,4,2,99,114,18220,18230,117,116,101,5,250,1,59,18228,1,250,114,59,1,8593,114,4,2,99,101,18241,18245,121,59,1,1118,118,101,59,1,365,4,2,105,121,18256,18265,114,99,5,251,1,59,18263,1,251,59,1,1091,4,3,97,98,104,18276,18281,18287,114,114,59,1,8645,108,97,99,59,1,369,97,114,59,1,10606,4,2,105,114,18298,18304,115,104,116,59,1,10622,59,3,55349,56626,114,97,118,101,5,249,1,59,18317,1,249,4,2,97,98,18325,18338,114,4,2,108,114,18332,18335,59,1,8639,59,1,8638,108,107,59,1,9600,4,2,99,116,18349,18374,4,2,111,114,18355,18369,114,110,4,2,59,101,18363,18365,1,8988,114,59,1,8988,111,112,59,1,8975,114,105,59,1,9720,4,2,97,108,18385,18390,99,114,59,1,363,5,168,1,59,18395,1,168,4,2,103,112,18403,18408,111,110,59,1,371,102,59,3,55349,56678,4,6,97,100,104,108,115,117,18427,18434,18445,18470,18475,18494,114,114,111,119,59,1,8593,111,119,110,97,114,114,111,119,59,1,8597,97,114,112,111,111,110,4,2,108,114,18457,18463,101,102,116,59,1,8639,105,103,104,116,59,1,8638,117,115,59,1,8846,105,4,3,59,104,108,18484,18486,18489,1,965,59,1,978,111,110,59,1,965,112,97,114,114,111,119,115,59,1,8648,4,3,99,105,116,18512,18537,18542,4,2,111,114,18518,18532,114,110,4,2,59,101,18526,18528,1,8989,114,59,1,8989,111,112,59,1,8974,110,103,59,1,367,114,105,59,1,9721,99,114,59,3,55349,56522,4,3,100,105,114,18561,18566,18572,111,116,59,1,8944,108,100,101,59,1,361,105,4,2,59,102,18579,18581,1,9653,59,1,9652,4,2,97,109,18590,18595,114,114,59,1,8648,108,5,252,1,59,18601,1,252,97,110,103,108,101,59,1,10663,4,15,65,66,68,97,99,100,101,102,108,110,111,112,114,115,122,18643,18648,18661,18667,18847,18851,18857,18904,18909,18915,18931,18937,18943,18949,18996,114,114,59,1,8661,97,114,4,2,59,118,18656,18658,1,10984,59,1,10985,97,115,104,59,1,8872,4,2,110,114,18673,18679,103,114,116,59,1,10652,4,7,101,107,110,112,114,115,116,18695,18704,18711,18720,18742,18754,18810,112,115,105,108,111,110,59,1,1013,97,112,112,97,59,1,1008,111,116,104,105,110,103,59,1,8709,4,3,104,105,114,18728,18732,18735,105,59,1,981,59,1,982,111,112,116,111,59,1,8733,4,2,59,104,18748,18750,1,8597,111,59,1,1009,4,2,105,117,18760,18766,103,109,97,59,1,962,4,2,98,112,18772,18791,115,101,116,110,101,113,4,2,59,113,18784,18787,3,8842,65024,59,3,10955,65024,115,101,116,110,101,113,4,2,59,113,18803,18806,3,8843,65024,59,3,10956,65024,4,2,104,114,18816,18822,101,116,97,59,1,977,105,97,110,103,108,101,4,2,108,114,18834,18840,101,102,116,59,1,8882,105,103,104,116,59,1,8883,121,59,1,1074,97,115,104,59,1,8866,4,3,101,108,114,18865,18884,18890,4,3,59,98,101,18873,18875,18880,1,8744,97,114,59,1,8891,113,59,1,8794,108,105,112,59,1,8942,4,2,98,116,18896,18901,97,114,59,1,124,59,1,124,114,59,3,55349,56627,116,114,105,59,1,8882,115,117,4,2,98,112,18923,18927,59,3,8834,8402,59,3,8835,8402,112,102,59,3,55349,56679,114,111,112,59,1,8733,116,114,105,59,1,8883,4,2,99,117,18955,18960,114,59,3,55349,56523,4,2,98,112,18966,18981,110,4,2,69,101,18973,18977,59,3,10955,65024,59,3,8842,65024,110,4,2,69,101,18988,18992,59,3,10956,65024,59,3,8843,65024,105,103,122,97,103,59,1,10650,4,7,99,101,102,111,112,114,115,19020,19026,19061,19066,19072,19075,19089,105,114,99,59,1,373,4,2,100,105,19032,19055,4,2,98,103,19038,19043,97,114,59,1,10847,101,4,2,59,113,19050,19052,1,8743,59,1,8793,101,114,112,59,1,8472,114,59,3,55349,56628,112,102,59,3,55349,56680,59,1,8472,4,2,59,101,19081,19083,1,8768,97,116,104,59,1,8768,99,114,59,3,55349,56524,4,14,99,100,102,104,105,108,109,110,111,114,115,117,118,119,19125,19146,19152,19157,19173,19176,19192,19197,19202,19236,19252,19269,19286,19291,4,3,97,105,117,19133,19137,19142,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,116,114,105,59,1,9661,114,59,3,55349,56629,4,2,65,97,19163,19168,114,114,59,1,10234,114,114,59,1,10231,59,1,958,4,2,65,97,19182,19187,114,114,59,1,10232,114,114,59,1,10229,97,112,59,1,10236,105,115,59,1,8955,4,3,100,112,116,19210,19215,19230,111,116,59,1,10752,4,2,102,108,19221,19225,59,3,55349,56681,117,115,59,1,10753,105,109,101,59,1,10754,4,2,65,97,19242,19247,114,114,59,1,10233,114,114,59,1,10230,4,2,99,113,19258,19263,114,59,3,55349,56525,99,117,112,59,1,10758,4,2,112,116,19275,19281,108,117,115,59,1,10756,114,105,59,1,9651,101,101,59,1,8897,101,100,103,101,59,1,8896,4,8,97,99,101,102,105,111,115,117,19316,19335,19349,19357,19362,19367,19373,19379,99,4,2,117,121,19323,19332,116,101,5,253,1,59,19330,1,253,59,1,1103,4,2,105,121,19341,19346,114,99,59,1,375,59,1,1099,110,5,165,1,59,19355,1,165,114,59,3,55349,56630,99,121,59,1,1111,112,102,59,3,55349,56682,99,114,59,3,55349,56526,4,2,99,109,19385,19389,121,59,1,1102,108,5,255,1,59,19395,1,255,4,10,97,99,100,101,102,104,105,111,115,119,19419,19426,19441,19446,19462,19467,19472,19480,19486,19492,99,117,116,101,59,1,378,4,2,97,121,19432,19438,114,111,110,59,1,382,59,1,1079,111,116,59,1,380,4,2,101,116,19452,19458,116,114,102,59,1,8488,97,59,1,950,114,59,3,55349,56631,99,121,59,1,1078,103,114,97,114,114,59,1,8669,112,102,59,3,55349,56683,99,114,59,3,55349,56527,4,2,106,110,19498,19501,59,1,8205,106,59,1,8204]);const EY=wY,qt=io,Pa=TY,Ae=R2,se=qt.CODE_POINTS,_a=qt.CODE_POINT_SEQUENCES,CY={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},i6=1,a6=2,l6=4,_Y=i6|a6|l6,Nt="DATA_STATE",_l="RCDATA_STATE",hu="RAWTEXT_STATE",Yo="SCRIPT_DATA_STATE",c6="PLAINTEXT_STATE",Rw="TAG_OPEN_STATE",Iw="END_TAG_OPEN_STATE",sg="TAG_NAME_STATE",jw="RCDATA_LESS_THAN_SIGN_STATE",Lw="RCDATA_END_TAG_OPEN_STATE",Dw="RCDATA_END_TAG_NAME_STATE",Mw="RAWTEXT_LESS_THAN_SIGN_STATE",Pw="RAWTEXT_END_TAG_OPEN_STATE",Fw="RAWTEXT_END_TAG_NAME_STATE",Bw="SCRIPT_DATA_LESS_THAN_SIGN_STATE",zw="SCRIPT_DATA_END_TAG_OPEN_STATE",Uw="SCRIPT_DATA_END_TAG_NAME_STATE",Hw="SCRIPT_DATA_ESCAPE_START_STATE",$w="SCRIPT_DATA_ESCAPE_START_DASH_STATE",Gs="SCRIPT_DATA_ESCAPED_STATE",Ww="SCRIPT_DATA_ESCAPED_DASH_STATE",og="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",Kd="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE",Gw="SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE",Kw="SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE",Yw="SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE",Ho="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",Vw="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE",qw="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE",Yd="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",Qw="SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE",po="BEFORE_ATTRIBUTE_NAME_STATE",Vd="ATTRIBUTE_NAME_STATE",ig="AFTER_ATTRIBUTE_NAME_STATE",ag="BEFORE_ATTRIBUTE_VALUE_STATE",qd="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",Qd="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE",Xd="ATTRIBUTE_VALUE_UNQUOTED_STATE",lg="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE",Ni="SELF_CLOSING_START_TAG_STATE",Zc="BOGUS_COMMENT_STATE",Xw="MARKUP_DECLARATION_OPEN_STATE",Jw="COMMENT_START_STATE",Zw="COMMENT_START_DASH_STATE",Si="COMMENT_STATE",eT="COMMENT_LESS_THAN_SIGN_STATE",tT="COMMENT_LESS_THAN_SIGN_BANG_STATE",nT="COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE",rT="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE",Jd="COMMENT_END_DASH_STATE",Zd="COMMENT_END_STATE",sT="COMMENT_END_BANG_STATE",oT="DOCTYPE_STATE",ef="BEFORE_DOCTYPE_NAME_STATE",tf="DOCTYPE_NAME_STATE",iT="AFTER_DOCTYPE_NAME_STATE",aT="AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE",lT="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE",cg="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE",ug="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE",dg="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE",cT="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE",uT="AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE",dT="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE",eu="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE",tu="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE",fg="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE",$o="BOGUS_DOCTYPE_STATE",nf="CDATA_SECTION_STATE",fT="CDATA_SECTION_BRACKET_STATE",hT="CDATA_SECTION_END_STATE",yl="CHARACTER_REFERENCE_STATE",mT="NAMED_CHARACTER_REFERENCE_STATE",pT="AMBIGUOS_AMPERSAND_STATE",gT="NUMERIC_CHARACTER_REFERENCE_STATE",yT="HEXADEMICAL_CHARACTER_REFERENCE_START_STATE",xT="DECIMAL_CHARACTER_REFERENCE_START_STATE",vT="HEXADEMICAL_CHARACTER_REFERENCE_STATE",bT="DECIMAL_CHARACTER_REFERENCE_STATE",nu="NUMERIC_CHARACTER_REFERENCE_END_STATE";function an(e){return e===se.SPACE||e===se.LINE_FEED||e===se.TABULATION||e===se.FORM_FEED}function Nu(e){return e>=se.DIGIT_0&&e<=se.DIGIT_9}function Ks(e){return e>=se.LATIN_CAPITAL_A&&e<=se.LATIN_CAPITAL_Z}function Ra(e){return e>=se.LATIN_SMALL_A&&e<=se.LATIN_SMALL_Z}function Oi(e){return Ra(e)||Ks(e)}function hg(e){return Oi(e)||Nu(e)}function u6(e){return e>=se.LATIN_CAPITAL_A&&e<=se.LATIN_CAPITAL_F}function d6(e){return e>=se.LATIN_SMALL_A&&e<=se.LATIN_SMALL_F}function NY(e){return Nu(e)||u6(e)||d6(e)}function jf(e){return e+32}function vn(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(e>>>10&1023|55296)+String.fromCharCode(56320|e&1023))}function ki(e){return String.fromCharCode(jf(e))}function wT(e,t){const n=Pa[++e];let r=++e,s=r+n-1;for(;r<=s;){const o=r+s>>>1,i=Pa[o];if(i<t)r=o+1;else if(i>t)s=o-1;else return Pa[o+n]}return-1}let Ps=class Lr{constructor(){this.preprocessor=new EY,this.tokenQueue=[],this.allowCDATA=!1,this.state=Nt,this.returnState="",this.charRefCode=-1,this.tempBuff=[],this.lastStartTagName="",this.consumedAfterSnapshot=-1,this.active=!1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr=null}_err(){}_errOnNextCodePoint(t){this._consume(),this._err(t),this._unconsume()}getNextToken(){for(;!this.tokenQueue.length&&this.active;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this[this.state](t)}return this.tokenQueue.shift()}write(t,n){this.active=!0,this.preprocessor.write(t,n)}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t)}_ensureHibernation(){if(this.preprocessor.endOfChunkHit){for(;this.consumedAfterSnapshot>0;this.consumedAfterSnapshot--)this.preprocessor.retreat();return this.active=!1,this.tokenQueue.push({type:Lr.HIBERNATION_TOKEN}),!0}return!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(){this.consumedAfterSnapshot--,this.preprocessor.retreat()}_reconsumeInState(t){this.state=t,this._unconsume()}_consumeSequenceIfMatch(t,n,r){let s=0,o=!0;const i=t.length;let l=0,u=n,f;for(;l<i;l++){if(l>0&&(u=this._consume(),s++),u===se.EOF){o=!1;break}if(f=t[l],u!==f&&(r||u!==jf(f))){o=!1;break}}if(!o)for(;s--;)this._unconsume();return o}_isTempBufferEqualToScriptString(){if(this.tempBuff.length!==_a.SCRIPT_STRING.length)return!1;for(let t=0;t<this.tempBuff.length;t++)if(this.tempBuff[t]!==_a.SCRIPT_STRING[t])return!1;return!0}_createStartTagToken(){this.currentToken={type:Lr.START_TAG_TOKEN,tagName:"",selfClosing:!1,ackSelfClosing:!1,attrs:[]}}_createEndTagToken(){this.currentToken={type:Lr.END_TAG_TOKEN,tagName:"",selfClosing:!1,attrs:[]}}_createCommentToken(){this.currentToken={type:Lr.COMMENT_TOKEN,data:""}}_createDoctypeToken(t){this.currentToken={type:Lr.DOCTYPE_TOKEN,name:t,forceQuirks:!1,publicId:null,systemId:null}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n}}_createEOFToken(){this.currentToken={type:Lr.EOF_TOKEN}}_createAttr(t){this.currentAttr={name:t,value:""}}_leaveAttrName(t){Lr.getTokenAttr(this.currentToken,this.currentAttr.name)===null?this.currentToken.attrs.push(this.currentAttr):this._err(Ae.duplicateAttribute),this.state=t}_leaveAttrValue(t){this.state=t}_emitCurrentToken(){this._emitCurrentCharacterToken();const t=this.currentToken;this.currentToken=null,t.type===Lr.START_TAG_TOKEN?this.lastStartTagName=t.tagName:t.type===Lr.END_TAG_TOKEN&&(t.attrs.length>0&&this._err(Ae.endTagWithAttributes),t.selfClosing&&this._err(Ae.endTagWithTrailingSolidus)),this.tokenQueue.push(t)}_emitCurrentCharacterToken(){this.currentCharacterToken&&(this.tokenQueue.push(this.currentCharacterToken),this.currentCharacterToken=null)}_emitEOFToken(){this._createEOFToken(),this._emitCurrentToken()}_appendCharToCurrentCharacterToken(t,n){this.currentCharacterToken&&this.currentCharacterToken.type!==t&&this._emitCurrentCharacterToken(),this.currentCharacterToken?this.currentCharacterToken.chars+=n:this._createCharacterToken(t,n)}_emitCodePoint(t){let n=Lr.CHARACTER_TOKEN;an(t)?n=Lr.WHITESPACE_CHARACTER_TOKEN:t===se.NULL&&(n=Lr.NULL_CHARACTER_TOKEN),this._appendCharToCurrentCharacterToken(n,vn(t))}_emitSeveralCodePoints(t){for(let n=0;n<t.length;n++)this._emitCodePoint(t[n])}_emitChars(t){this._appendCharToCurrentCharacterToken(Lr.CHARACTER_TOKEN,t)}_matchNamedCharacterReference(t){let n=null,r=1,s=wT(0,t);for(this.tempBuff.push(t);s>-1;){const o=Pa[s],i=o<_Y;i&&o&i6&&(n=o&a6?[Pa[++s],Pa[++s]]:[Pa[++s]],r=0);const u=this._consume();if(this.tempBuff.push(u),r++,u===se.EOF)break;i?s=o&l6?wT(s,u):-1:s=u===o?++s:-1}for(;r--;)this.tempBuff.pop(),this._unconsume();return n}_isCharacterReferenceInAttribute(){return this.returnState===qd||this.returnState===Qd||this.returnState===Xd}_isCharacterReferenceAttributeQuirk(t){if(!t&&this._isCharacterReferenceInAttribute()){const n=this._consume();return this._unconsume(),n===se.EQUALS_SIGN||hg(n)}return!1}_flushCodePointsConsumedAsCharacterReference(){if(this._isCharacterReferenceInAttribute())for(let t=0;t<this.tempBuff.length;t++)this.currentAttr.value+=vn(this.tempBuff[t]);else this._emitSeveralCodePoints(this.tempBuff);this.tempBuff=[]}[Nt](t){this.preprocessor.dropParsedChunk(),t===se.LESS_THAN_SIGN?this.state=Rw:t===se.AMPERSAND?(this.returnState=Nt,this.state=yl):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this._emitCodePoint(t)):t===se.EOF?this._emitEOFToken():this._emitCodePoint(t)}[_l](t){this.preprocessor.dropParsedChunk(),t===se.AMPERSAND?(this.returnState=_l,this.state=yl):t===se.LESS_THAN_SIGN?this.state=jw:t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this._emitChars(qt.REPLACEMENT_CHARACTER)):t===se.EOF?this._emitEOFToken():this._emitCodePoint(t)}[hu](t){this.preprocessor.dropParsedChunk(),t===se.LESS_THAN_SIGN?this.state=Mw:t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this._emitChars(qt.REPLACEMENT_CHARACTER)):t===se.EOF?this._emitEOFToken():this._emitCodePoint(t)}[Yo](t){this.preprocessor.dropParsedChunk(),t===se.LESS_THAN_SIGN?this.state=Bw:t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this._emitChars(qt.REPLACEMENT_CHARACTER)):t===se.EOF?this._emitEOFToken():this._emitCodePoint(t)}[c6](t){this.preprocessor.dropParsedChunk(),t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this._emitChars(qt.REPLACEMENT_CHARACTER)):t===se.EOF?this._emitEOFToken():this._emitCodePoint(t)}[Rw](t){t===se.EXCLAMATION_MARK?this.state=Xw:t===se.SOLIDUS?this.state=Iw:Oi(t)?(this._createStartTagToken(),this._reconsumeInState(sg)):t===se.QUESTION_MARK?(this._err(Ae.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(),this._reconsumeInState(Zc)):t===se.EOF?(this._err(Ae.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken()):(this._err(Ae.invalidFirstCharacterOfTagName),this._emitChars("<"),this._reconsumeInState(Nt))}[Iw](t){Oi(t)?(this._createEndTagToken(),this._reconsumeInState(sg)):t===se.GREATER_THAN_SIGN?(this._err(Ae.missingEndTagName),this.state=Nt):t===se.EOF?(this._err(Ae.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken()):(this._err(Ae.invalidFirstCharacterOfTagName),this._createCommentToken(),this._reconsumeInState(Zc))}[sg](t){an(t)?this.state=po:t===se.SOLIDUS?this.state=Ni:t===se.GREATER_THAN_SIGN?(this.state=Nt,this._emitCurrentToken()):Ks(t)?this.currentToken.tagName+=ki(t):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentToken.tagName+=qt.REPLACEMENT_CHARACTER):t===se.EOF?(this._err(Ae.eofInTag),this._emitEOFToken()):this.currentToken.tagName+=vn(t)}[jw](t){t===se.SOLIDUS?(this.tempBuff=[],this.state=Lw):(this._emitChars("<"),this._reconsumeInState(_l))}[Lw](t){Oi(t)?(this._createEndTagToken(),this._reconsumeInState(Dw)):(this._emitChars("</"),this._reconsumeInState(_l))}[Dw](t){if(Ks(t))this.currentToken.tagName+=ki(t),this.tempBuff.push(t);else if(Ra(t))this.currentToken.tagName+=vn(t),this.tempBuff.push(t);else{if(this.lastStartTagName===this.currentToken.tagName){if(an(t)){this.state=po;return}if(t===se.SOLIDUS){this.state=Ni;return}if(t===se.GREATER_THAN_SIGN){this.state=Nt,this._emitCurrentToken();return}}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(_l)}}[Mw](t){t===se.SOLIDUS?(this.tempBuff=[],this.state=Pw):(this._emitChars("<"),this._reconsumeInState(hu))}[Pw](t){Oi(t)?(this._createEndTagToken(),this._reconsumeInState(Fw)):(this._emitChars("</"),this._reconsumeInState(hu))}[Fw](t){if(Ks(t))this.currentToken.tagName+=ki(t),this.tempBuff.push(t);else if(Ra(t))this.currentToken.tagName+=vn(t),this.tempBuff.push(t);else{if(this.lastStartTagName===this.currentToken.tagName){if(an(t)){this.state=po;return}if(t===se.SOLIDUS){this.state=Ni;return}if(t===se.GREATER_THAN_SIGN){this._emitCurrentToken(),this.state=Nt;return}}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(hu)}}[Bw](t){t===se.SOLIDUS?(this.tempBuff=[],this.state=zw):t===se.EXCLAMATION_MARK?(this.state=Hw,this._emitChars("<!")):(this._emitChars("<"),this._reconsumeInState(Yo))}[zw](t){Oi(t)?(this._createEndTagToken(),this._reconsumeInState(Uw)):(this._emitChars("</"),this._reconsumeInState(Yo))}[Uw](t){if(Ks(t))this.currentToken.tagName+=ki(t),this.tempBuff.push(t);else if(Ra(t))this.currentToken.tagName+=vn(t),this.tempBuff.push(t);else{if(this.lastStartTagName===this.currentToken.tagName){if(an(t)){this.state=po;return}else if(t===se.SOLIDUS){this.state=Ni;return}else if(t===se.GREATER_THAN_SIGN){this._emitCurrentToken(),this.state=Nt;return}}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(Yo)}}[Hw](t){t===se.HYPHEN_MINUS?(this.state=$w,this._emitChars("-")):this._reconsumeInState(Yo)}[$w](t){t===se.HYPHEN_MINUS?(this.state=og,this._emitChars("-")):this._reconsumeInState(Yo)}[Gs](t){t===se.HYPHEN_MINUS?(this.state=Ww,this._emitChars("-")):t===se.LESS_THAN_SIGN?this.state=Kd:t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this._emitChars(qt.REPLACEMENT_CHARACTER)):t===se.EOF?(this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(t)}[Ww](t){t===se.HYPHEN_MINUS?(this.state=og,this._emitChars("-")):t===se.LESS_THAN_SIGN?this.state=Kd:t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.state=Gs,this._emitChars(qt.REPLACEMENT_CHARACTER)):t===se.EOF?(this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=Gs,this._emitCodePoint(t))}[og](t){t===se.HYPHEN_MINUS?this._emitChars("-"):t===se.LESS_THAN_SIGN?this.state=Kd:t===se.GREATER_THAN_SIGN?(this.state=Yo,this._emitChars(">")):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.state=Gs,this._emitChars(qt.REPLACEMENT_CHARACTER)):t===se.EOF?(this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=Gs,this._emitCodePoint(t))}[Kd](t){t===se.SOLIDUS?(this.tempBuff=[],this.state=Gw):Oi(t)?(this.tempBuff=[],this._emitChars("<"),this._reconsumeInState(Yw)):(this._emitChars("<"),this._reconsumeInState(Gs))}[Gw](t){Oi(t)?(this._createEndTagToken(),this._reconsumeInState(Kw)):(this._emitChars("</"),this._reconsumeInState(Gs))}[Kw](t){if(Ks(t))this.currentToken.tagName+=ki(t),this.tempBuff.push(t);else if(Ra(t))this.currentToken.tagName+=vn(t),this.tempBuff.push(t);else{if(this.lastStartTagName===this.currentToken.tagName){if(an(t)){this.state=po;return}if(t===se.SOLIDUS){this.state=Ni;return}if(t===se.GREATER_THAN_SIGN){this._emitCurrentToken(),this.state=Nt;return}}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(Gs)}}[Yw](t){an(t)||t===se.SOLIDUS||t===se.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?Ho:Gs,this._emitCodePoint(t)):Ks(t)?(this.tempBuff.push(jf(t)),this._emitCodePoint(t)):Ra(t)?(this.tempBuff.push(t),this._emitCodePoint(t)):this._reconsumeInState(Gs)}[Ho](t){t===se.HYPHEN_MINUS?(this.state=Vw,this._emitChars("-")):t===se.LESS_THAN_SIGN?(this.state=Yd,this._emitChars("<")):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this._emitChars(qt.REPLACEMENT_CHARACTER)):t===se.EOF?(this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(t)}[Vw](t){t===se.HYPHEN_MINUS?(this.state=qw,this._emitChars("-")):t===se.LESS_THAN_SIGN?(this.state=Yd,this._emitChars("<")):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.state=Ho,this._emitChars(qt.REPLACEMENT_CHARACTER)):t===se.EOF?(this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=Ho,this._emitCodePoint(t))}[qw](t){t===se.HYPHEN_MINUS?this._emitChars("-"):t===se.LESS_THAN_SIGN?(this.state=Yd,this._emitChars("<")):t===se.GREATER_THAN_SIGN?(this.state=Yo,this._emitChars(">")):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.state=Ho,this._emitChars(qt.REPLACEMENT_CHARACTER)):t===se.EOF?(this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=Ho,this._emitCodePoint(t))}[Yd](t){t===se.SOLIDUS?(this.tempBuff=[],this.state=Qw,this._emitChars("/")):this._reconsumeInState(Ho)}[Qw](t){an(t)||t===se.SOLIDUS||t===se.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?Gs:Ho,this._emitCodePoint(t)):Ks(t)?(this.tempBuff.push(jf(t)),this._emitCodePoint(t)):Ra(t)?(this.tempBuff.push(t),this._emitCodePoint(t)):this._reconsumeInState(Ho)}[po](t){an(t)||(t===se.SOLIDUS||t===se.GREATER_THAN_SIGN||t===se.EOF?this._reconsumeInState(ig):t===se.EQUALS_SIGN?(this._err(Ae.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Vd):(this._createAttr(""),this._reconsumeInState(Vd)))}[Vd](t){an(t)||t===se.SOLIDUS||t===se.GREATER_THAN_SIGN||t===se.EOF?(this._leaveAttrName(ig),this._unconsume()):t===se.EQUALS_SIGN?this._leaveAttrName(ag):Ks(t)?this.currentAttr.name+=ki(t):t===se.QUOTATION_MARK||t===se.APOSTROPHE||t===se.LESS_THAN_SIGN?(this._err(Ae.unexpectedCharacterInAttributeName),this.currentAttr.name+=vn(t)):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentAttr.name+=qt.REPLACEMENT_CHARACTER):this.currentAttr.name+=vn(t)}[ig](t){an(t)||(t===se.SOLIDUS?this.state=Ni:t===se.EQUALS_SIGN?this.state=ag:t===se.GREATER_THAN_SIGN?(this.state=Nt,this._emitCurrentToken()):t===se.EOF?(this._err(Ae.eofInTag),this._emitEOFToken()):(this._createAttr(""),this._reconsumeInState(Vd)))}[ag](t){an(t)||(t===se.QUOTATION_MARK?this.state=qd:t===se.APOSTROPHE?this.state=Qd:t===se.GREATER_THAN_SIGN?(this._err(Ae.missingAttributeValue),this.state=Nt,this._emitCurrentToken()):this._reconsumeInState(Xd))}[qd](t){t===se.QUOTATION_MARK?this.state=lg:t===se.AMPERSAND?(this.returnState=qd,this.state=yl):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=qt.REPLACEMENT_CHARACTER):t===se.EOF?(this._err(Ae.eofInTag),this._emitEOFToken()):this.currentAttr.value+=vn(t)}[Qd](t){t===se.APOSTROPHE?this.state=lg:t===se.AMPERSAND?(this.returnState=Qd,this.state=yl):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=qt.REPLACEMENT_CHARACTER):t===se.EOF?(this._err(Ae.eofInTag),this._emitEOFToken()):this.currentAttr.value+=vn(t)}[Xd](t){an(t)?this._leaveAttrValue(po):t===se.AMPERSAND?(this.returnState=Xd,this.state=yl):t===se.GREATER_THAN_SIGN?(this._leaveAttrValue(Nt),this._emitCurrentToken()):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=qt.REPLACEMENT_CHARACTER):t===se.QUOTATION_MARK||t===se.APOSTROPHE||t===se.LESS_THAN_SIGN||t===se.EQUALS_SIGN||t===se.GRAVE_ACCENT?(this._err(Ae.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=vn(t)):t===se.EOF?(this._err(Ae.eofInTag),this._emitEOFToken()):this.currentAttr.value+=vn(t)}[lg](t){an(t)?this._leaveAttrValue(po):t===se.SOLIDUS?this._leaveAttrValue(Ni):t===se.GREATER_THAN_SIGN?(this._leaveAttrValue(Nt),this._emitCurrentToken()):t===se.EOF?(this._err(Ae.eofInTag),this._emitEOFToken()):(this._err(Ae.missingWhitespaceBetweenAttributes),this._reconsumeInState(po))}[Ni](t){t===se.GREATER_THAN_SIGN?(this.currentToken.selfClosing=!0,this.state=Nt,this._emitCurrentToken()):t===se.EOF?(this._err(Ae.eofInTag),this._emitEOFToken()):(this._err(Ae.unexpectedSolidusInTag),this._reconsumeInState(po))}[Zc](t){t===se.GREATER_THAN_SIGN?(this.state=Nt,this._emitCurrentToken()):t===se.EOF?(this._emitCurrentToken(),this._emitEOFToken()):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentToken.data+=qt.REPLACEMENT_CHARACTER):this.currentToken.data+=vn(t)}[Xw](t){this._consumeSequenceIfMatch(_a.DASH_DASH_STRING,t,!0)?(this._createCommentToken(),this.state=Jw):this._consumeSequenceIfMatch(_a.DOCTYPE_STRING,t,!1)?this.state=oT:this._consumeSequenceIfMatch(_a.CDATA_START_STRING,t,!0)?this.allowCDATA?this.state=nf:(this._err(Ae.cdataInHtmlContent),this._createCommentToken(),this.currentToken.data="[CDATA[",this.state=Zc):this._ensureHibernation()||(this._err(Ae.incorrectlyOpenedComment),this._createCommentToken(),this._reconsumeInState(Zc))}[Jw](t){t===se.HYPHEN_MINUS?this.state=Zw:t===se.GREATER_THAN_SIGN?(this._err(Ae.abruptClosingOfEmptyComment),this.state=Nt,this._emitCurrentToken()):this._reconsumeInState(Si)}[Zw](t){t===se.HYPHEN_MINUS?this.state=Zd:t===se.GREATER_THAN_SIGN?(this._err(Ae.abruptClosingOfEmptyComment),this.state=Nt,this._emitCurrentToken()):t===se.EOF?(this._err(Ae.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState(Si))}[Si](t){t===se.HYPHEN_MINUS?this.state=Jd:t===se.LESS_THAN_SIGN?(this.currentToken.data+="<",this.state=eT):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentToken.data+=qt.REPLACEMENT_CHARACTER):t===se.EOF?(this._err(Ae.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.data+=vn(t)}[eT](t){t===se.EXCLAMATION_MARK?(this.currentToken.data+="!",this.state=tT):t===se.LESS_THAN_SIGN?this.currentToken.data+="!":this._reconsumeInState(Si)}[tT](t){t===se.HYPHEN_MINUS?this.state=nT:this._reconsumeInState(Si)}[nT](t){t===se.HYPHEN_MINUS?this.state=rT:this._reconsumeInState(Jd)}[rT](t){t!==se.GREATER_THAN_SIGN&&t!==se.EOF&&this._err(Ae.nestedComment),this._reconsumeInState(Zd)}[Jd](t){t===se.HYPHEN_MINUS?this.state=Zd:t===se.EOF?(this._err(Ae.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState(Si))}[Zd](t){t===se.GREATER_THAN_SIGN?(this.state=Nt,this._emitCurrentToken()):t===se.EXCLAMATION_MARK?this.state=sT:t===se.HYPHEN_MINUS?this.currentToken.data+="-":t===se.EOF?(this._err(Ae.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--",this._reconsumeInState(Si))}[sT](t){t===se.HYPHEN_MINUS?(this.currentToken.data+="--!",this.state=Jd):t===se.GREATER_THAN_SIGN?(this._err(Ae.incorrectlyClosedComment),this.state=Nt,this._emitCurrentToken()):t===se.EOF?(this._err(Ae.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--!",this._reconsumeInState(Si))}[oT](t){an(t)?this.state=ef:t===se.GREATER_THAN_SIGN?this._reconsumeInState(ef):t===se.EOF?(this._err(Ae.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(Ae.missingWhitespaceBeforeDoctypeName),this._reconsumeInState(ef))}[ef](t){an(t)||(Ks(t)?(this._createDoctypeToken(ki(t)),this.state=tf):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this._createDoctypeToken(qt.REPLACEMENT_CHARACTER),this.state=tf):t===se.GREATER_THAN_SIGN?(this._err(Ae.missingDoctypeName),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=Nt):t===se.EOF?(this._err(Ae.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._createDoctypeToken(vn(t)),this.state=tf))}[tf](t){an(t)?this.state=iT:t===se.GREATER_THAN_SIGN?(this.state=Nt,this._emitCurrentToken()):Ks(t)?this.currentToken.name+=ki(t):t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentToken.name+=qt.REPLACEMENT_CHARACTER):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.name+=vn(t)}[iT](t){an(t)||(t===se.GREATER_THAN_SIGN?(this.state=Nt,this._emitCurrentToken()):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this._consumeSequenceIfMatch(_a.PUBLIC_STRING,t,!1)?this.state=aT:this._consumeSequenceIfMatch(_a.SYSTEM_STRING,t,!1)?this.state=uT:this._ensureHibernation()||(this._err(Ae.invalidCharacterSequenceAfterDoctypeName),this.currentToken.forceQuirks=!0,this._reconsumeInState($o)))}[aT](t){an(t)?this.state=lT:t===se.QUOTATION_MARK?(this._err(Ae.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state=cg):t===se.APOSTROPHE?(this._err(Ae.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state=ug):t===se.GREATER_THAN_SIGN?(this._err(Ae.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=Nt,this._emitCurrentToken()):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(Ae.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState($o))}[lT](t){an(t)||(t===se.QUOTATION_MARK?(this.currentToken.publicId="",this.state=cg):t===se.APOSTROPHE?(this.currentToken.publicId="",this.state=ug):t===se.GREATER_THAN_SIGN?(this._err(Ae.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=Nt,this._emitCurrentToken()):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(Ae.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState($o)))}[cg](t){t===se.QUOTATION_MARK?this.state=dg:t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentToken.publicId+=qt.REPLACEMENT_CHARACTER):t===se.GREATER_THAN_SIGN?(this._err(Ae.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=Nt):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=vn(t)}[ug](t){t===se.APOSTROPHE?this.state=dg:t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentToken.publicId+=qt.REPLACEMENT_CHARACTER):t===se.GREATER_THAN_SIGN?(this._err(Ae.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=Nt):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=vn(t)}[dg](t){an(t)?this.state=cT:t===se.GREATER_THAN_SIGN?(this.state=Nt,this._emitCurrentToken()):t===se.QUOTATION_MARK?(this._err(Ae.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state=eu):t===se.APOSTROPHE?(this._err(Ae.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state=tu):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState($o))}[cT](t){an(t)||(t===se.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=Nt):t===se.QUOTATION_MARK?(this.currentToken.systemId="",this.state=eu):t===se.APOSTROPHE?(this.currentToken.systemId="",this.state=tu):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState($o)))}[uT](t){an(t)?this.state=dT:t===se.QUOTATION_MARK?(this._err(Ae.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state=eu):t===se.APOSTROPHE?(this._err(Ae.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state=tu):t===se.GREATER_THAN_SIGN?(this._err(Ae.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=Nt,this._emitCurrentToken()):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState($o))}[dT](t){an(t)||(t===se.QUOTATION_MARK?(this.currentToken.systemId="",this.state=eu):t===se.APOSTROPHE?(this.currentToken.systemId="",this.state=tu):t===se.GREATER_THAN_SIGN?(this._err(Ae.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=Nt,this._emitCurrentToken()):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState($o)))}[eu](t){t===se.QUOTATION_MARK?this.state=fg:t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentToken.systemId+=qt.REPLACEMENT_CHARACTER):t===se.GREATER_THAN_SIGN?(this._err(Ae.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=Nt):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=vn(t)}[tu](t){t===se.APOSTROPHE?this.state=fg:t===se.NULL?(this._err(Ae.unexpectedNullCharacter),this.currentToken.systemId+=qt.REPLACEMENT_CHARACTER):t===se.GREATER_THAN_SIGN?(this._err(Ae.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=Nt):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=vn(t)}[fg](t){an(t)||(t===se.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=Nt):t===se.EOF?(this._err(Ae.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(Ae.unexpectedCharacterAfterDoctypeSystemIdentifier),this._reconsumeInState($o)))}[$o](t){t===se.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=Nt):t===se.NULL?this._err(Ae.unexpectedNullCharacter):t===se.EOF&&(this._emitCurrentToken(),this._emitEOFToken())}[nf](t){t===se.RIGHT_SQUARE_BRACKET?this.state=fT:t===se.EOF?(this._err(Ae.eofInCdata),this._emitEOFToken()):this._emitCodePoint(t)}[fT](t){t===se.RIGHT_SQUARE_BRACKET?this.state=hT:(this._emitChars("]"),this._reconsumeInState(nf))}[hT](t){t===se.GREATER_THAN_SIGN?this.state=Nt:t===se.RIGHT_SQUARE_BRACKET?this._emitChars("]"):(this._emitChars("]]"),this._reconsumeInState(nf))}[yl](t){this.tempBuff=[se.AMPERSAND],t===se.NUMBER_SIGN?(this.tempBuff.push(t),this.state=gT):hg(t)?this._reconsumeInState(mT):(this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}[mT](t){const n=this._matchNamedCharacterReference(t);if(this._ensureHibernation())this.tempBuff=[se.AMPERSAND];else if(n){const r=this.tempBuff[this.tempBuff.length-1]===se.SEMICOLON;this._isCharacterReferenceAttributeQuirk(r)||(r||this._errOnNextCodePoint(Ae.missingSemicolonAfterCharacterReference),this.tempBuff=n),this._flushCodePointsConsumedAsCharacterReference(),this.state=this.returnState}else this._flushCodePointsConsumedAsCharacterReference(),this.state=pT}[pT](t){hg(t)?this._isCharacterReferenceInAttribute()?this.currentAttr.value+=vn(t):this._emitCodePoint(t):(t===se.SEMICOLON&&this._err(Ae.unknownNamedCharacterReference),this._reconsumeInState(this.returnState))}[gT](t){this.charRefCode=0,t===se.LATIN_SMALL_X||t===se.LATIN_CAPITAL_X?(this.tempBuff.push(t),this.state=yT):this._reconsumeInState(xT)}[yT](t){NY(t)?this._reconsumeInState(vT):(this._err(Ae.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}[xT](t){Nu(t)?this._reconsumeInState(bT):(this._err(Ae.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}[vT](t){u6(t)?this.charRefCode=this.charRefCode*16+t-55:d6(t)?this.charRefCode=this.charRefCode*16+t-87:Nu(t)?this.charRefCode=this.charRefCode*16+t-48:t===se.SEMICOLON?this.state=nu:(this._err(Ae.missingSemicolonAfterCharacterReference),this._reconsumeInState(nu))}[bT](t){Nu(t)?this.charRefCode=this.charRefCode*10+t-48:t===se.SEMICOLON?this.state=nu:(this._err(Ae.missingSemicolonAfterCharacterReference),this._reconsumeInState(nu))}[nu](){if(this.charRefCode===se.NULL)this._err(Ae.nullCharacterReference),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ae.characterReferenceOutsideUnicodeRange),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(qt.isSurrogate(this.charRefCode))this._err(Ae.surrogateCharacterReference),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(qt.isUndefinedCodePoint(this.charRefCode))this._err(Ae.noncharacterCharacterReference);else if(qt.isControlCodePoint(this.charRefCode)||this.charRefCode===se.CARRIAGE_RETURN){this._err(Ae.controlCharacterReference);const t=CY[this.charRefCode];t&&(this.charRefCode=t)}this.tempBuff=[this.charRefCode],this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)}};Ps.CHARACTER_TOKEN="CHARACTER_TOKEN";Ps.NULL_CHARACTER_TOKEN="NULL_CHARACTER_TOKEN";Ps.WHITESPACE_CHARACTER_TOKEN="WHITESPACE_CHARACTER_TOKEN";Ps.START_TAG_TOKEN="START_TAG_TOKEN";Ps.END_TAG_TOKEN="END_TAG_TOKEN";Ps.COMMENT_TOKEN="COMMENT_TOKEN";Ps.DOCTYPE_TOKEN="DOCTYPE_TOKEN";Ps.EOF_TOKEN="EOF_TOKEN";Ps.HIBERNATION_TOKEN="HIBERNATION_TOKEN";Ps.MODE={DATA:Nt,RCDATA:_l,RAWTEXT:hu,SCRIPT_DATA:Yo,PLAINTEXT:c6};Ps.getTokenAttr=function(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null};var Rm=Ps,ao={};const mg=ao.NAMESPACES={HTML:"http://www.w3.org/1999/xhtml",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"};ao.ATTRS={TYPE:"type",ACTION:"action",ENCODING:"encoding",PROMPT:"prompt",NAME:"name",COLOR:"color",FACE:"face",SIZE:"size"};ao.DOCUMENT_MODE={NO_QUIRKS:"no-quirks",QUIRKS:"quirks",LIMITED_QUIRKS:"limited-quirks"};const Be=ao.TAG_NAMES={A:"a",ADDRESS:"address",ANNOTATION_XML:"annotation-xml",APPLET:"applet",AREA:"area",ARTICLE:"article",ASIDE:"aside",B:"b",BASE:"base",BASEFONT:"basefont",BGSOUND:"bgsound",BIG:"big",BLOCKQUOTE:"blockquote",BODY:"body",BR:"br",BUTTON:"button",CAPTION:"caption",CENTER:"center",CODE:"code",COL:"col",COLGROUP:"colgroup",DD:"dd",DESC:"desc",DETAILS:"details",DIALOG:"dialog",DIR:"dir",DIV:"div",DL:"dl",DT:"dt",EM:"em",EMBED:"embed",FIELDSET:"fieldset",FIGCAPTION:"figcaption",FIGURE:"figure",FONT:"font",FOOTER:"footer",FOREIGN_OBJECT:"foreignObject",FORM:"form",FRAME:"frame",FRAMESET:"frameset",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HEAD:"head",HEADER:"header",HGROUP:"hgroup",HR:"hr",HTML:"html",I:"i",IMG:"img",IMAGE:"image",INPUT:"input",IFRAME:"iframe",KEYGEN:"keygen",LABEL:"label",LI:"li",LINK:"link",LISTING:"listing",MAIN:"main",MALIGNMARK:"malignmark",MARQUEE:"marquee",MATH:"math",MENU:"menu",META:"meta",MGLYPH:"mglyph",MI:"mi",MO:"mo",MN:"mn",MS:"ms",MTEXT:"mtext",NAV:"nav",NOBR:"nobr",NOFRAMES:"noframes",NOEMBED:"noembed",NOSCRIPT:"noscript",OBJECT:"object",OL:"ol",OPTGROUP:"optgroup",OPTION:"option",P:"p",PARAM:"param",PLAINTEXT:"plaintext",PRE:"pre",RB:"rb",RP:"rp",RT:"rt",RTC:"rtc",RUBY:"ruby",S:"s",SCRIPT:"script",SECTION:"section",SELECT:"select",SOURCE:"source",SMALL:"small",SPAN:"span",STRIKE:"strike",STRONG:"strong",STYLE:"style",SUB:"sub",SUMMARY:"summary",SUP:"sup",TABLE:"table",TBODY:"tbody",TEMPLATE:"template",TEXTAREA:"textarea",TFOOT:"tfoot",TD:"td",TH:"th",THEAD:"thead",TITLE:"title",TR:"tr",TRACK:"track",TT:"tt",U:"u",UL:"ul",SVG:"svg",VAR:"var",WBR:"wbr",XMP:"xmp"};ao.SPECIAL_ELEMENTS={[mg.HTML]:{[Be.ADDRESS]:!0,[Be.APPLET]:!0,[Be.AREA]:!0,[Be.ARTICLE]:!0,[Be.ASIDE]:!0,[Be.BASE]:!0,[Be.BASEFONT]:!0,[Be.BGSOUND]:!0,[Be.BLOCKQUOTE]:!0,[Be.BODY]:!0,[Be.BR]:!0,[Be.BUTTON]:!0,[Be.CAPTION]:!0,[Be.CENTER]:!0,[Be.COL]:!0,[Be.COLGROUP]:!0,[Be.DD]:!0,[Be.DETAILS]:!0,[Be.DIR]:!0,[Be.DIV]:!0,[Be.DL]:!0,[Be.DT]:!0,[Be.EMBED]:!0,[Be.FIELDSET]:!0,[Be.FIGCAPTION]:!0,[Be.FIGURE]:!0,[Be.FOOTER]:!0,[Be.FORM]:!0,[Be.FRAME]:!0,[Be.FRAMESET]:!0,[Be.H1]:!0,[Be.H2]:!0,[Be.H3]:!0,[Be.H4]:!0,[Be.H5]:!0,[Be.H6]:!0,[Be.HEAD]:!0,[Be.HEADER]:!0,[Be.HGROUP]:!0,[Be.HR]:!0,[Be.HTML]:!0,[Be.IFRAME]:!0,[Be.IMG]:!0,[Be.INPUT]:!0,[Be.LI]:!0,[Be.LINK]:!0,[Be.LISTING]:!0,[Be.MAIN]:!0,[Be.MARQUEE]:!0,[Be.MENU]:!0,[Be.META]:!0,[Be.NAV]:!0,[Be.NOEMBED]:!0,[Be.NOFRAMES]:!0,[Be.NOSCRIPT]:!0,[Be.OBJECT]:!0,[Be.OL]:!0,[Be.P]:!0,[Be.PARAM]:!0,[Be.PLAINTEXT]:!0,[Be.PRE]:!0,[Be.SCRIPT]:!0,[Be.SECTION]:!0,[Be.SELECT]:!0,[Be.SOURCE]:!0,[Be.STYLE]:!0,[Be.SUMMARY]:!0,[Be.TABLE]:!0,[Be.TBODY]:!0,[Be.TD]:!0,[Be.TEMPLATE]:!0,[Be.TEXTAREA]:!0,[Be.TFOOT]:!0,[Be.TH]:!0,[Be.THEAD]:!0,[Be.TITLE]:!0,[Be.TR]:!0,[Be.TRACK]:!0,[Be.UL]:!0,[Be.WBR]:!0,[Be.XMP]:!0},[mg.MATHML]:{[Be.MI]:!0,[Be.MO]:!0,[Be.MN]:!0,[Be.MS]:!0,[Be.MTEXT]:!0,[Be.ANNOTATION_XML]:!0},[mg.SVG]:{[Be.TITLE]:!0,[Be.FOREIGN_OBJECT]:!0,[Be.DESC]:!0}};const f6=ao,ze=f6.TAG_NAMES,Qt=f6.NAMESPACES;function TT(e){switch(e.length){case 1:return e===ze.P;case 2:return e===ze.RB||e===ze.RP||e===ze.RT||e===ze.DD||e===ze.DT||e===ze.LI;case 3:return e===ze.RTC;case 6:return e===ze.OPTION;case 8:return e===ze.OPTGROUP}return!1}function SY(e){switch(e.length){case 1:return e===ze.P;case 2:return e===ze.RB||e===ze.RP||e===ze.RT||e===ze.DD||e===ze.DT||e===ze.LI||e===ze.TD||e===ze.TH||e===ze.TR;case 3:return e===ze.RTC;case 5:return e===ze.TBODY||e===ze.TFOOT||e===ze.THEAD;case 6:return e===ze.OPTION;case 7:return e===ze.CAPTION;case 8:return e===ze.OPTGROUP||e===ze.COLGROUP}return!1}function rf(e,t){switch(e.length){case 2:if(e===ze.TD||e===ze.TH)return t===Qt.HTML;if(e===ze.MI||e===ze.MO||e===ze.MN||e===ze.MS)return t===Qt.MATHML;break;case 4:if(e===ze.HTML)return t===Qt.HTML;if(e===ze.DESC)return t===Qt.SVG;break;case 5:if(e===ze.TABLE)return t===Qt.HTML;if(e===ze.MTEXT)return t===Qt.MATHML;if(e===ze.TITLE)return t===Qt.SVG;break;case 6:return(e===ze.APPLET||e===ze.OBJECT)&&t===Qt.HTML;case 7:return(e===ze.CAPTION||e===ze.MARQUEE)&&t===Qt.HTML;case 8:return e===ze.TEMPLATE&&t===Qt.HTML;case 13:return e===ze.FOREIGN_OBJECT&&t===Qt.SVG;case 14:return e===ze.ANNOTATION_XML&&t===Qt.MATHML}return!1}let kY=class{constructor(t,n){this.stackTop=-1,this.items=[],this.current=t,this.currentTagName=null,this.currentTmplContent=null,this.tmplCount=0,this.treeAdapter=n}_indexOf(t){let n=-1;for(let r=this.stackTop;r>=0;r--)if(this.items[r]===t){n=r;break}return n}_isInTemplate(){return this.currentTagName===ze.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Qt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagName=this.current&&this.treeAdapter.getTagName(this.current),this.currentTmplContent=this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):null}push(t){this.items[++this.stackTop]=t,this._updateCurrentElement(),this._isInTemplate()&&this.tmplCount++}pop(){this.stackTop--,this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this._updateCurrentElement()}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&this._updateCurrentElement()}insertAfter(t,n){const r=this._indexOf(t)+1;this.items.splice(r,0,n),r===++this.stackTop&&this._updateCurrentElement()}popUntilTagNamePopped(t){for(;this.stackTop>-1;){const n=this.currentTagName,r=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),n===t&&r===Qt.HTML)break}}popUntilElementPopped(t){for(;this.stackTop>-1;){const n=this.current;if(this.pop(),n===t)break}}popUntilNumberedHeaderPopped(){for(;this.stackTop>-1;){const t=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),t===ze.H1||t===ze.H2||t===ze.H3||t===ze.H4||t===ze.H5||t===ze.H6&&n===Qt.HTML)break}}popUntilTableCellPopped(){for(;this.stackTop>-1;){const t=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),t===ze.TD||t===ze.TH&&n===Qt.HTML)break}}popAllUpToHtmlElement(){this.stackTop=0,this._updateCurrentElement()}clearBackToTableContext(){for(;this.currentTagName!==ze.TABLE&&this.currentTagName!==ze.TEMPLATE&&this.currentTagName!==ze.HTML||this.treeAdapter.getNamespaceURI(this.current)!==Qt.HTML;)this.pop()}clearBackToTableBodyContext(){for(;this.currentTagName!==ze.TBODY&&this.currentTagName!==ze.TFOOT&&this.currentTagName!==ze.THEAD&&this.currentTagName!==ze.TEMPLATE&&this.currentTagName!==ze.HTML||this.treeAdapter.getNamespaceURI(this.current)!==Qt.HTML;)this.pop()}clearBackToTableRowContext(){for(;this.currentTagName!==ze.TR&&this.currentTagName!==ze.TEMPLATE&&this.currentTagName!==ze.HTML||this.treeAdapter.getNamespaceURI(this.current)!==Qt.HTML;)this.pop()}remove(t){for(let n=this.stackTop;n>=0;n--)if(this.items[n]===t){this.items.splice(n,1),this.stackTop--,this._updateCurrentElement();break}}tryPeekProperlyNestedBodyElement(){const t=this.items[1];return t&&this.treeAdapter.getTagName(t)===ze.BODY?t:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){let n=this._indexOf(t);return--n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.currentTagName===ze.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.treeAdapter.getTagName(this.items[n]),s=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&s===Qt.HTML)return!0;if(rf(r,s))return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if((n===ze.H1||n===ze.H2||n===ze.H3||n===ze.H4||n===ze.H5||n===ze.H6)&&r===Qt.HTML)return!0;if(rf(n,r))return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.treeAdapter.getTagName(this.items[n]),s=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&s===Qt.HTML)return!0;if((r===ze.UL||r===ze.OL)&&s===Qt.HTML||rf(r,s))return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.treeAdapter.getTagName(this.items[n]),s=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&s===Qt.HTML)return!0;if(r===ze.BUTTON&&s===Qt.HTML||rf(r,s))return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.treeAdapter.getTagName(this.items[n]);if(this.treeAdapter.getNamespaceURI(this.items[n])===Qt.HTML){if(r===t)return!0;if(r===ze.TABLE||r===ze.TEMPLATE||r===ze.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===Qt.HTML){if(n===ze.TBODY||n===ze.THEAD||n===ze.TFOOT)return!0;if(n===ze.TABLE||n===ze.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.treeAdapter.getTagName(this.items[n]);if(this.treeAdapter.getNamespaceURI(this.items[n])===Qt.HTML){if(r===t)return!0;if(r!==ze.OPTION&&r!==ze.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;TT(this.currentTagName);)this.pop()}generateImpliedEndTagsThoroughly(){for(;SY(this.currentTagName);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;TT(this.currentTagName)&&this.currentTagName!==t;)this.pop()}};var AY=kY;const sf=3;let I2=class Ri{constructor(t){this.length=0,this.entries=[],this.treeAdapter=t,this.bookmark=null}_getNoahArkConditionCandidates(t){const n=[];if(this.length>=sf){const r=this.treeAdapter.getAttrList(t).length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let i=this.length-1;i>=0;i--){const l=this.entries[i];if(l.type===Ri.MARKER_ENTRY)break;const u=l.element,f=this.treeAdapter.getAttrList(u);this.treeAdapter.getTagName(u)===s&&this.treeAdapter.getNamespaceURI(u)===o&&f.length===r&&n.push({idx:i,attrs:f})}}return n.length<sf?[]:n}_ensureNoahArkCondition(t){const n=this._getNoahArkConditionCandidates(t);let r=n.length;if(r){const s=this.treeAdapter.getAttrList(t),o=s.length,i=Object.create(null);for(let l=0;l<o;l++){const u=s[l];i[u.name]=u.value}for(let l=0;l<o;l++)for(let u=0;u<r;u++){const f=n[u].attrs[l];if(i[f.name]!==f.value&&(n.splice(u,1),r--),n.length<sf)return}for(let l=r-1;l>=sf-1;l--)this.entries.splice(n[l].idx,1),this.length--}}insertMarker(){this.entries.push({type:Ri.MARKER_ENTRY}),this.length++}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.push({type:Ri.ELEMENT_ENTRY,element:t,token:n}),this.length++}insertElementAfterBookmark(t,n){let r=this.length-1;for(;r>=0&&this.entries[r]!==this.bookmark;r--);this.entries.splice(r+1,0,{type:Ri.ELEMENT_ENTRY,element:t,token:n}),this.length++}removeEntry(t){for(let n=this.length-1;n>=0;n--)if(this.entries[n]===t){this.entries.splice(n,1),this.length--;break}}clearToLastMarker(){for(;this.length;){const t=this.entries.pop();if(this.length--,t.type===Ri.MARKER_ENTRY)break}}getElementEntryInScopeWithTagName(t){for(let n=this.length-1;n>=0;n--){const r=this.entries[n];if(r.type===Ri.MARKER_ENTRY)return null;if(this.treeAdapter.getTagName(r.element)===t)return r}return null}getElementEntry(t){for(let n=this.length-1;n>=0;n--){const r=this.entries[n];if(r.type===Ri.ELEMENT_ENTRY&&r.element===t)return r}return null}};I2.MARKER_ENTRY="MARKER_ENTRY";I2.ELEMENT_ENTRY="ELEMENT_ENTRY";var OY=I2;let h6=class{constructor(t){const n={},r=this._getOverriddenMethods(this,n);for(const s of Object.keys(r))typeof r[s]=="function"&&(n[s]=t[s],t[s]=r[s])}_getOverriddenMethods(){throw new Error("Not implemented")}};h6.install=function(e,t,n){e.__mixins||(e.__mixins=[]);for(let s=0;s<e.__mixins.length;s++)if(e.__mixins[s].constructor===t)return e.__mixins[s];const r=new t(e,n);return e.__mixins.push(r),r};var di=h6;const RY=di;let IY=class extends RY{constructor(t){super(t),this.preprocessor=t,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.offset=0,this.col=0,this.line=1}_getOverriddenMethods(t,n){return{advance(){const r=this.pos+1,s=this.html[r];return t.isEol&&(t.isEol=!1,t.line++,t.lineStartPos=r),(s===`
`||s==="\r"&&this.html[r+1]!==`
`)&&(t.isEol=!0),t.col=r-t.lineStartPos+1,t.offset=t.droppedBufferSize+r,n.advance.call(this)},retreat(){n.retreat.call(this),t.isEol=!1,t.col=this.pos-t.lineStartPos+1},dropParsedChunk(){const r=this.pos;n.dropParsedChunk.call(this);const s=r-this.pos;t.lineStartPos-=s,t.droppedBufferSize+=s,t.offset=t.droppedBufferSize+this.pos}}}};var m6=IY;const ET=di,pg=Rm,jY=m6;let LY=class extends ET{constructor(t){super(t),this.tokenizer=t,this.posTracker=ET.install(t.preprocessor,jY),this.currentAttrLocation=null,this.ctLoc=null}_getCurrentLocation(){return{startLine:this.posTracker.line,startCol:this.posTracker.col,startOffset:this.posTracker.offset,endLine:-1,endCol:-1,endOffset:-1}}_attachCurrentAttrLocationInfo(){this.currentAttrLocation.endLine=this.posTracker.line,this.currentAttrLocation.endCol=this.posTracker.col,this.currentAttrLocation.endOffset=this.posTracker.offset;const t=this.tokenizer.currentToken,n=this.tokenizer.currentAttr;t.location.attrs||(t.location.attrs=Object.create(null)),t.location.attrs[n.name]=this.currentAttrLocation}_getOverriddenMethods(t,n){const r={_createStartTagToken(){n._createStartTagToken.call(this),this.currentToken.location=t.ctLoc},_createEndTagToken(){n._createEndTagToken.call(this),this.currentToken.location=t.ctLoc},_createCommentToken(){n._createCommentToken.call(this),this.currentToken.location=t.ctLoc},_createDoctypeToken(s){n._createDoctypeToken.call(this,s),this.currentToken.location=t.ctLoc},_createCharacterToken(s,o){n._createCharacterToken.call(this,s,o),this.currentCharacterToken.location=t.ctLoc},_createEOFToken(){n._createEOFToken.call(this),this.currentToken.location=t._getCurrentLocation()},_createAttr(s){n._createAttr.call(this,s),t.currentAttrLocation=t._getCurrentLocation()},_leaveAttrName(s){n._leaveAttrName.call(this,s),t._attachCurrentAttrLocationInfo()},_leaveAttrValue(s){n._leaveAttrValue.call(this,s),t._attachCurrentAttrLocationInfo()},_emitCurrentToken(){const s=this.currentToken.location;this.currentCharacterToken&&(this.currentCharacterToken.location.endLine=s.startLine,this.currentCharacterToken.location.endCol=s.startCol,this.currentCharacterToken.location.endOffset=s.startOffset),this.currentToken.type===pg.EOF_TOKEN?(s.endLine=s.startLine,s.endCol=s.startCol,s.endOffset=s.startOffset):(s.endLine=t.posTracker.line,s.endCol=t.posTracker.col+1,s.endOffset=t.posTracker.offset+1),n._emitCurrentToken.call(this)},_emitCurrentCharacterToken(){const s=this.currentCharacterToken&&this.currentCharacterToken.location;s&&s.endOffset===-1&&(s.endLine=t.posTracker.line,s.endCol=t.posTracker.col,s.endOffset=t.posTracker.offset),n._emitCurrentCharacterToken.call(this)}};return Object.keys(pg.MODE).forEach(s=>{const o=pg.MODE[s];r[o]=function(i){t.ctLoc=t._getCurrentLocation(),n[o].call(this,i)}}),r}};var p6=LY;const DY=di;let MY=class extends DY{constructor(t,n){super(t),this.onItemPop=n.onItemPop}_getOverriddenMethods(t,n){return{pop(){t.onItemPop(this.current),n.pop.call(this)},popAllUpToHtmlElement(){for(let r=this.stackTop;r>0;r--)t.onItemPop(this.items[r]);n.popAllUpToHtmlElement.call(this)},remove(r){t.onItemPop(this.current),n.remove.call(this,r)}}}};var PY=MY;const gg=di,CT=Rm,FY=p6,BY=PY,zY=ao,yg=zY.TAG_NAMES;let UY=class extends gg{constructor(t){super(t),this.parser=t,this.treeAdapter=this.parser.treeAdapter,this.posTracker=null,this.lastStartTagToken=null,this.lastFosterParentingLocation=null,this.currentToken=null}_setStartLocation(t){let n=null;this.lastStartTagToken&&(n=Object.assign({},this.lastStartTagToken.location),n.startTag=this.lastStartTagToken.location),this.treeAdapter.setNodeSourceCodeLocation(t,n)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const s=n.location,o=this.treeAdapter.getTagName(t),i=n.type===CT.END_TAG_TOKEN&&o===n.tagName,l={};i?(l.endTag=Object.assign({},s),l.endLine=s.endLine,l.endCol=s.endCol,l.endOffset=s.endOffset):(l.endLine=s.startLine,l.endCol=s.startCol,l.endOffset=s.startOffset),this.treeAdapter.updateNodeSourceCodeLocation(t,l)}}_getOverriddenMethods(t,n){return{_bootstrap(r,s){n._bootstrap.call(this,r,s),t.lastStartTagToken=null,t.lastFosterParentingLocation=null,t.currentToken=null;const o=gg.install(this.tokenizer,FY);t.posTracker=o.posTracker,gg.install(this.openElements,BY,{onItemPop:function(i){t._setEndLocation(i,t.currentToken)}})},_runParsingLoop(r){n._runParsingLoop.call(this,r);for(let s=this.openElements.stackTop;s>=0;s--)t._setEndLocation(this.openElements.items[s],t.currentToken)},_processTokenInForeignContent(r){t.currentToken=r,n._processTokenInForeignContent.call(this,r)},_processToken(r){if(t.currentToken=r,n._processToken.call(this,r),r.type===CT.END_TAG_TOKEN&&(r.tagName===yg.HTML||r.tagName===yg.BODY&&this.openElements.hasInScope(yg.BODY)))for(let o=this.openElements.stackTop;o>=0;o--){const i=this.openElements.items[o];if(this.treeAdapter.getTagName(i)===r.tagName){t._setEndLocation(i,r);break}}},_setDocumentType(r){n._setDocumentType.call(this,r);const s=this.treeAdapter.getChildNodes(this.document),o=s.length;for(let i=0;i<o;i++){const l=s[i];if(this.treeAdapter.isDocumentTypeNode(l)){this.treeAdapter.setNodeSourceCodeLocation(l,r.location);break}}},_attachElementToTree(r){t._setStartLocation(r),t.lastStartTagToken=null,n._attachElementToTree.call(this,r)},_appendElement(r,s){t.lastStartTagToken=r,n._appendElement.call(this,r,s)},_insertElement(r,s){t.lastStartTagToken=r,n._insertElement.call(this,r,s)},_insertTemplate(r){t.lastStartTagToken=r,n._insertTemplate.call(this,r);const s=this.treeAdapter.getTemplateContent(this.openElements.current);this.treeAdapter.setNodeSourceCodeLocation(s,null)},_insertFakeRootElement(){n._insertFakeRootElement.call(this),this.treeAdapter.setNodeSourceCodeLocation(this.openElements.current,null)},_appendCommentNode(r,s){n._appendCommentNode.call(this,r,s);const o=this.treeAdapter.getChildNodes(s),i=o[o.length-1];this.treeAdapter.setNodeSourceCodeLocation(i,r.location)},_findFosterParentingLocation(){return t.lastFosterParentingLocation=n._findFosterParentingLocation.call(this),t.lastFosterParentingLocation},_insertCharacters(r){n._insertCharacters.call(this,r);const s=this._shouldFosterParentOnInsertion(),o=s&&t.lastFosterParentingLocation.parent||this.openElements.currentTmplContent||this.openElements.current,i=this.treeAdapter.getChildNodes(o),l=s&&t.lastFosterParentingLocation.beforeElement?i.indexOf(t.lastFosterParentingLocation.beforeElement)-1:i.length-1,u=i[l];if(this.treeAdapter.getNodeSourceCodeLocation(u)){const{endLine:m,endCol:h,endOffset:g}=r.location;this.treeAdapter.updateNodeSourceCodeLocation(u,{endLine:m,endCol:h,endOffset:g})}else this.treeAdapter.setNodeSourceCodeLocation(u,r.location)}}}};var HY=UY;const $Y=di;let WY=class extends $Y{constructor(t,n){super(t),this.posTracker=null,this.onParseError=n.onParseError}_setErrorLocation(t){t.startLine=t.endLine=this.posTracker.line,t.startCol=t.endCol=this.posTracker.col,t.startOffset=t.endOffset=this.posTracker.offset}_reportError(t){const n={code:t,startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1};this._setErrorLocation(n),this.onParseError(n)}_getOverriddenMethods(t){return{_err(n){t._reportError(n)}}}};var j2=WY;const GY=j2,KY=m6,YY=di;let VY=class extends GY{constructor(t,n){super(t,n),this.posTracker=YY.install(t,KY),this.lastErrOffset=-1}_reportError(t){this.lastErrOffset!==this.posTracker.offset&&(this.lastErrOffset=this.posTracker.offset,super._reportError(t))}};var qY=VY;const QY=j2,XY=qY,JY=di;let ZY=class extends QY{constructor(t,n){super(t,n);const r=JY.install(t.preprocessor,XY,n);this.posTracker=r.posTracker}};var eV=ZY;const tV=j2,nV=eV,rV=p6,_T=di;let sV=class extends tV{constructor(t,n){super(t,n),this.opts=n,this.ctLoc=null,this.locBeforeToken=!1}_setErrorLocation(t){this.ctLoc&&(t.startLine=this.ctLoc.startLine,t.startCol=this.ctLoc.startCol,t.startOffset=this.ctLoc.startOffset,t.endLine=this.locBeforeToken?this.ctLoc.startLine:this.ctLoc.endLine,t.endCol=this.locBeforeToken?this.ctLoc.startCol:this.ctLoc.endCol,t.endOffset=this.locBeforeToken?this.ctLoc.startOffset:this.ctLoc.endOffset)}_getOverriddenMethods(t,n){return{_bootstrap(r,s){n._bootstrap.call(this,r,s),_T.install(this.tokenizer,nV,t.opts),_T.install(this.tokenizer,rV)},_processInputToken(r){t.ctLoc=r.location,n._processInputToken.call(this,r)},_err(r,s){t.locBeforeToken=s&&s.beforeToken,t._reportError(r)}}}};var oV=sV,Pt={};const{DOCUMENT_MODE:iV}=ao;Pt.createDocument=function(){return{nodeName:"#document",mode:iV.NO_QUIRKS,childNodes:[]}};Pt.createDocumentFragment=function(){return{nodeName:"#document-fragment",childNodes:[]}};Pt.createElement=function(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}};Pt.createCommentNode=function(e){return{nodeName:"#comment",data:e,parentNode:null}};const g6=function(e){return{nodeName:"#text",value:e,parentNode:null}},y6=Pt.appendChild=function(e,t){e.childNodes.push(t),t.parentNode=e},aV=Pt.insertBefore=function(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e};Pt.setTemplateContent=function(e,t){e.content=t};Pt.getTemplateContent=function(e){return e.content};Pt.setDocumentType=function(e,t,n,r){let s=null;for(let o=0;o<e.childNodes.length;o++)if(e.childNodes[o].nodeName==="#documentType"){s=e.childNodes[o];break}s?(s.name=t,s.publicId=n,s.systemId=r):y6(e,{nodeName:"#documentType",name:t,publicId:n,systemId:r})};Pt.setDocumentMode=function(e,t){e.mode=t};Pt.getDocumentMode=function(e){return e.mode};Pt.detachNode=function(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}};Pt.insertText=function(e,t){if(e.childNodes.length){const n=e.childNodes[e.childNodes.length-1];if(n.nodeName==="#text"){n.value+=t;return}}y6(e,g6(t))};Pt.insertTextBefore=function(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&r.nodeName==="#text"?r.value+=t:aV(e,g6(t),n)};Pt.adoptAttributes=function(e,t){const n=[];for(let r=0;r<e.attrs.length;r++)n.push(e.attrs[r].name);for(let r=0;r<t.length;r++)n.indexOf(t[r].name)===-1&&e.attrs.push(t[r])};Pt.getFirstChild=function(e){return e.childNodes[0]};Pt.getChildNodes=function(e){return e.childNodes};Pt.getParentNode=function(e){return e.parentNode};Pt.getAttrList=function(e){return e.attrs};Pt.getTagName=function(e){return e.tagName};Pt.getNamespaceURI=function(e){return e.namespaceURI};Pt.getTextNodeContent=function(e){return e.value};Pt.getCommentNodeContent=function(e){return e.data};Pt.getDocumentTypeNodeName=function(e){return e.name};Pt.getDocumentTypeNodePublicId=function(e){return e.publicId};Pt.getDocumentTypeNodeSystemId=function(e){return e.systemId};Pt.isTextNode=function(e){return e.nodeName==="#text"};Pt.isCommentNode=function(e){return e.nodeName==="#comment"};Pt.isDocumentTypeNode=function(e){return e.nodeName==="#documentType"};Pt.isElementNode=function(e){return!!e.tagName};Pt.setNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=t};Pt.getNodeSourceCodeLocation=function(e){return e.sourceCodeLocation};Pt.updateNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=Object.assign(e.sourceCodeLocation,t)};var lV=function(t,n){return n=n||Object.create(null),[t,n].reduce((r,s)=>(Object.keys(s).forEach(o=>{r[o]=s[o]}),r),Object.create(null))},Im={};const{DOCUMENT_MODE:xl}=ao,x6="html",cV="about:legacy-compat",uV="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",v6=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],dV=v6.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]),fV=["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"],b6=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],hV=b6.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]);function NT(e){const t=e.indexOf('"')!==-1?"'":'"';return t+e+t}function ST(e,t){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])===0)return!0;return!1}Im.isConforming=function(e){return e.name===x6&&e.publicId===null&&(e.systemId===null||e.systemId===cV)};Im.getDocumentMode=function(e){if(e.name!==x6)return xl.QUIRKS;const t=e.systemId;if(t&&t.toLowerCase()===uV)return xl.QUIRKS;let n=e.publicId;if(n!==null){if(n=n.toLowerCase(),fV.indexOf(n)>-1)return xl.QUIRKS;let r=t===null?dV:v6;if(ST(n,r))return xl.QUIRKS;if(r=t===null?b6:hV,ST(n,r))return xl.LIMITED_QUIRKS}return xl.NO_QUIRKS};Im.serializeContent=function(e,t,n){let r="!DOCTYPE ";return e&&(r+=e),t?r+=" PUBLIC "+NT(t):n&&(r+=" SYSTEM"),n!==null&&(r+=" "+NT(n)),r};var da={};const xg=Rm,L2=ao,ot=L2.TAG_NAMES,er=L2.NAMESPACES,Lf=L2.ATTRS,kT={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},mV="definitionurl",pV="definitionURL",gV={attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},yV={"xlink:actuate":{prefix:"xlink",name:"actuate",namespace:er.XLINK},"xlink:arcrole":{prefix:"xlink",name:"arcrole",namespace:er.XLINK},"xlink:href":{prefix:"xlink",name:"href",namespace:er.XLINK},"xlink:role":{prefix:"xlink",name:"role",namespace:er.XLINK},"xlink:show":{prefix:"xlink",name:"show",namespace:er.XLINK},"xlink:title":{prefix:"xlink",name:"title",namespace:er.XLINK},"xlink:type":{prefix:"xlink",name:"type",namespace:er.XLINK},"xml:base":{prefix:"xml",name:"base",namespace:er.XML},"xml:lang":{prefix:"xml",name:"lang",namespace:er.XML},"xml:space":{prefix:"xml",name:"space",namespace:er.XML},xmlns:{prefix:"",name:"xmlns",namespace:er.XMLNS},"xmlns:xlink":{prefix:"xmlns",name:"xlink",namespace:er.XMLNS}},xV=da.SVG_TAG_NAMES_ADJUSTMENT_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},vV={[ot.B]:!0,[ot.BIG]:!0,[ot.BLOCKQUOTE]:!0,[ot.BODY]:!0,[ot.BR]:!0,[ot.CENTER]:!0,[ot.CODE]:!0,[ot.DD]:!0,[ot.DIV]:!0,[ot.DL]:!0,[ot.DT]:!0,[ot.EM]:!0,[ot.EMBED]:!0,[ot.H1]:!0,[ot.H2]:!0,[ot.H3]:!0,[ot.H4]:!0,[ot.H5]:!0,[ot.H6]:!0,[ot.HEAD]:!0,[ot.HR]:!0,[ot.I]:!0,[ot.IMG]:!0,[ot.LI]:!0,[ot.LISTING]:!0,[ot.MENU]:!0,[ot.META]:!0,[ot.NOBR]:!0,[ot.OL]:!0,[ot.P]:!0,[ot.PRE]:!0,[ot.RUBY]:!0,[ot.S]:!0,[ot.SMALL]:!0,[ot.SPAN]:!0,[ot.STRONG]:!0,[ot.STRIKE]:!0,[ot.SUB]:!0,[ot.SUP]:!0,[ot.TABLE]:!0,[ot.TT]:!0,[ot.U]:!0,[ot.UL]:!0,[ot.VAR]:!0};da.causesExit=function(e){const t=e.tagName;return t===ot.FONT&&(xg.getTokenAttr(e,Lf.COLOR)!==null||xg.getTokenAttr(e,Lf.SIZE)!==null||xg.getTokenAttr(e,Lf.FACE)!==null)?!0:vV[t]};da.adjustTokenMathMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===mV){e.attrs[t].name=pV;break}};da.adjustTokenSVGAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=gV[e.attrs[t].name];n&&(e.attrs[t].name=n)}};da.adjustTokenXMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=yV[e.attrs[t].name];n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}};da.adjustTokenSVGTagName=function(e){const t=xV[e.tagName];t&&(e.tagName=t)};function bV(e,t){return t===er.MATHML&&(e===ot.MI||e===ot.MO||e===ot.MN||e===ot.MS||e===ot.MTEXT)}function wV(e,t,n){if(t===er.MATHML&&e===ot.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Lf.ENCODING){const s=n[r].value.toLowerCase();return s===kT.TEXT_HTML||s===kT.APPLICATION_XML}}return t===er.SVG&&(e===ot.FOREIGN_OBJECT||e===ot.DESC||e===ot.TITLE)}da.isIntegrationPoint=function(e,t,n,r){return!!((!r||r===er.HTML)&&wV(e,t,n)||(!r||r===er.MATHML)&&bV(e,t))};const ae=Rm,TV=AY,AT=OY,EV=HY,CV=oV,OT=di,_V=Pt,NV=lV,RT=Im,To=da,rr=R2,SV=io,Ja=ao,O=Ja.TAG_NAMES,Ze=Ja.NAMESPACES,w6=Ja.ATTRS,kV={scriptingEnabled:!0,sourceCodeLocationInfo:!1,onParseError:null,treeAdapter:_V},T6="hidden",AV=8,OV=3,E6="INITIAL_MODE",D2="BEFORE_HTML_MODE",jm="BEFORE_HEAD_MODE",bc="IN_HEAD_MODE",C6="IN_HEAD_NO_SCRIPT_MODE",Lm="AFTER_HEAD_MODE",So="IN_BODY_MODE",kh="TEXT_MODE",hr="IN_TABLE_MODE",_6="IN_TABLE_TEXT_MODE",Dm="IN_CAPTION_MODE",R1="IN_COLUMN_GROUP_MODE",Os="IN_TABLE_BODY_MODE",ai="IN_ROW_MODE",Mm="IN_CELL_MODE",M2="IN_SELECT_MODE",P2="IN_SELECT_IN_TABLE_MODE",Ah="IN_TEMPLATE_MODE",F2="AFTER_BODY_MODE",Pm="IN_FRAMESET_MODE",N6="AFTER_FRAMESET_MODE",S6="AFTER_AFTER_BODY_MODE",k6="AFTER_AFTER_FRAMESET_MODE",RV={[O.TR]:ai,[O.TBODY]:Os,[O.THEAD]:Os,[O.TFOOT]:Os,[O.CAPTION]:Dm,[O.COLGROUP]:R1,[O.TABLE]:hr,[O.BODY]:So,[O.FRAMESET]:Pm},IV={[O.CAPTION]:hr,[O.COLGROUP]:hr,[O.TBODY]:hr,[O.TFOOT]:hr,[O.THEAD]:hr,[O.COL]:R1,[O.TR]:Os,[O.TD]:ai,[O.TH]:ai},IT={[E6]:{[ae.CHARACTER_TOKEN]:su,[ae.NULL_CHARACTER_TOKEN]:su,[ae.WHITESPACE_CHARACTER_TOKEN]:Rt,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:HV,[ae.START_TAG_TOKEN]:su,[ae.END_TAG_TOKEN]:su,[ae.EOF_TOKEN]:su},[D2]:{[ae.CHARACTER_TOKEN]:Su,[ae.NULL_CHARACTER_TOKEN]:Su,[ae.WHITESPACE_CHARACTER_TOKEN]:Rt,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:$V,[ae.END_TAG_TOKEN]:WV,[ae.EOF_TOKEN]:Su},[jm]:{[ae.CHARACTER_TOKEN]:ku,[ae.NULL_CHARACTER_TOKEN]:ku,[ae.WHITESPACE_CHARACTER_TOKEN]:Rt,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:of,[ae.START_TAG_TOKEN]:GV,[ae.END_TAG_TOKEN]:KV,[ae.EOF_TOKEN]:ku},[bc]:{[ae.CHARACTER_TOKEN]:Au,[ae.NULL_CHARACTER_TOKEN]:Au,[ae.WHITESPACE_CHARACTER_TOKEN]:Dr,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:of,[ae.START_TAG_TOKEN]:qn,[ae.END_TAG_TOKEN]:Za,[ae.EOF_TOKEN]:Au},[C6]:{[ae.CHARACTER_TOKEN]:Ou,[ae.NULL_CHARACTER_TOKEN]:Ou,[ae.WHITESPACE_CHARACTER_TOKEN]:Dr,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:of,[ae.START_TAG_TOKEN]:YV,[ae.END_TAG_TOKEN]:VV,[ae.EOF_TOKEN]:Ou},[Lm]:{[ae.CHARACTER_TOKEN]:Ru,[ae.NULL_CHARACTER_TOKEN]:Ru,[ae.WHITESPACE_CHARACTER_TOKEN]:Dr,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:of,[ae.START_TAG_TOKEN]:qV,[ae.END_TAG_TOKEN]:QV,[ae.EOF_TOKEN]:Ru},[So]:{[ae.CHARACTER_TOKEN]:af,[ae.NULL_CHARACTER_TOKEN]:Rt,[ae.WHITESPACE_CHARACTER_TOKEN]:Na,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:Wr,[ae.END_TAG_TOKEN]:B2,[ae.EOF_TOKEN]:Go},[kh]:{[ae.CHARACTER_TOKEN]:Dr,[ae.NULL_CHARACTER_TOKEN]:Dr,[ae.WHITESPACE_CHARACTER_TOKEN]:Dr,[ae.COMMENT_TOKEN]:Rt,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:Rt,[ae.END_TAG_TOKEN]:Sq,[ae.EOF_TOKEN]:kq},[hr]:{[ae.CHARACTER_TOKEN]:Ko,[ae.NULL_CHARACTER_TOKEN]:Ko,[ae.WHITESPACE_CHARACTER_TOKEN]:Ko,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:z2,[ae.END_TAG_TOKEN]:U2,[ae.EOF_TOKEN]:Go},[_6]:{[ae.CHARACTER_TOKEN]:Fq,[ae.NULL_CHARACTER_TOKEN]:Rt,[ae.WHITESPACE_CHARACTER_TOKEN]:Pq,[ae.COMMENT_TOKEN]:ou,[ae.DOCTYPE_TOKEN]:ou,[ae.START_TAG_TOKEN]:ou,[ae.END_TAG_TOKEN]:ou,[ae.EOF_TOKEN]:ou},[Dm]:{[ae.CHARACTER_TOKEN]:af,[ae.NULL_CHARACTER_TOKEN]:Rt,[ae.WHITESPACE_CHARACTER_TOKEN]:Na,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:Bq,[ae.END_TAG_TOKEN]:zq,[ae.EOF_TOKEN]:Go},[R1]:{[ae.CHARACTER_TOKEN]:Oh,[ae.NULL_CHARACTER_TOKEN]:Oh,[ae.WHITESPACE_CHARACTER_TOKEN]:Dr,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:Uq,[ae.END_TAG_TOKEN]:Hq,[ae.EOF_TOKEN]:Go},[Os]:{[ae.CHARACTER_TOKEN]:Ko,[ae.NULL_CHARACTER_TOKEN]:Ko,[ae.WHITESPACE_CHARACTER_TOKEN]:Ko,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:$q,[ae.END_TAG_TOKEN]:Wq,[ae.EOF_TOKEN]:Go},[ai]:{[ae.CHARACTER_TOKEN]:Ko,[ae.NULL_CHARACTER_TOKEN]:Ko,[ae.WHITESPACE_CHARACTER_TOKEN]:Ko,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:Gq,[ae.END_TAG_TOKEN]:Kq,[ae.EOF_TOKEN]:Go},[Mm]:{[ae.CHARACTER_TOKEN]:af,[ae.NULL_CHARACTER_TOKEN]:Rt,[ae.WHITESPACE_CHARACTER_TOKEN]:Na,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:Yq,[ae.END_TAG_TOKEN]:Vq,[ae.EOF_TOKEN]:Go},[M2]:{[ae.CHARACTER_TOKEN]:Dr,[ae.NULL_CHARACTER_TOKEN]:Rt,[ae.WHITESPACE_CHARACTER_TOKEN]:Dr,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:A6,[ae.END_TAG_TOKEN]:O6,[ae.EOF_TOKEN]:Go},[P2]:{[ae.CHARACTER_TOKEN]:Dr,[ae.NULL_CHARACTER_TOKEN]:Rt,[ae.WHITESPACE_CHARACTER_TOKEN]:Dr,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:qq,[ae.END_TAG_TOKEN]:Qq,[ae.EOF_TOKEN]:Go},[Ah]:{[ae.CHARACTER_TOKEN]:af,[ae.NULL_CHARACTER_TOKEN]:Rt,[ae.WHITESPACE_CHARACTER_TOKEN]:Na,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:Xq,[ae.END_TAG_TOKEN]:Jq,[ae.EOF_TOKEN]:R6},[F2]:{[ae.CHARACTER_TOKEN]:Rh,[ae.NULL_CHARACTER_TOKEN]:Rh,[ae.WHITESPACE_CHARACTER_TOKEN]:Na,[ae.COMMENT_TOKEN]:UV,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:Zq,[ae.END_TAG_TOKEN]:eQ,[ae.EOF_TOKEN]:ru},[Pm]:{[ae.CHARACTER_TOKEN]:Rt,[ae.NULL_CHARACTER_TOKEN]:Rt,[ae.WHITESPACE_CHARACTER_TOKEN]:Dr,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:tQ,[ae.END_TAG_TOKEN]:nQ,[ae.EOF_TOKEN]:ru},[N6]:{[ae.CHARACTER_TOKEN]:Rt,[ae.NULL_CHARACTER_TOKEN]:Rt,[ae.WHITESPACE_CHARACTER_TOKEN]:Dr,[ae.COMMENT_TOKEN]:Fn,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:rQ,[ae.END_TAG_TOKEN]:sQ,[ae.EOF_TOKEN]:ru},[S6]:{[ae.CHARACTER_TOKEN]:Df,[ae.NULL_CHARACTER_TOKEN]:Df,[ae.WHITESPACE_CHARACTER_TOKEN]:Na,[ae.COMMENT_TOKEN]:jT,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:oQ,[ae.END_TAG_TOKEN]:Df,[ae.EOF_TOKEN]:ru},[k6]:{[ae.CHARACTER_TOKEN]:Rt,[ae.NULL_CHARACTER_TOKEN]:Rt,[ae.WHITESPACE_CHARACTER_TOKEN]:Na,[ae.COMMENT_TOKEN]:jT,[ae.DOCTYPE_TOKEN]:Rt,[ae.START_TAG_TOKEN]:iQ,[ae.END_TAG_TOKEN]:Rt,[ae.EOF_TOKEN]:ru}};class jV{constructor(t){this.options=NV(kV,t),this.treeAdapter=this.options.treeAdapter,this.pendingScript=null,this.options.sourceCodeLocationInfo&&OT.install(this,EV),this.options.onParseError&&OT.install(this,CV,{onParseError:this.options.onParseError})}parse(t){const n=this.treeAdapter.createDocument();return this._bootstrap(n,null),this.tokenizer.write(t,!0),this._runParsingLoop(null),n}parseFragment(t,n){n||(n=this.treeAdapter.createElement(O.TEMPLATE,Ze.HTML,[]));const r=this.treeAdapter.createElement("documentmock",Ze.HTML,[]);this._bootstrap(r,n),this.treeAdapter.getTagName(n)===O.TEMPLATE&&this._pushTmplInsertionMode(Ah),this._initTokenizerForFragmentParsing(),this._insertFakeRootElement(),this._resetInsertionMode(),this._findFormInFragmentContext(),this.tokenizer.write(t,!0),this._runParsingLoop(null);const s=this.treeAdapter.getFirstChild(r),o=this.treeAdapter.createDocumentFragment();return this._adoptNodes(s,o),o}_bootstrap(t,n){this.tokenizer=new ae(this.options),this.stopped=!1,this.insertionMode=E6,this.originalInsertionMode="",this.document=t,this.fragmentContext=n,this.headElement=null,this.formElement=null,this.openElements=new TV(this.document,this.treeAdapter),this.activeFormattingElements=new AT(this.treeAdapter),this.tmplInsertionModeStack=[],this.tmplInsertionModeStackTop=-1,this.currentTmplInsertionMode=null,this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1}_err(){}_runParsingLoop(t){for(;!this.stopped;){this._setupTokenizerCDATAMode();const n=this.tokenizer.getNextToken();if(n.type===ae.HIBERNATION_TOKEN)break;if(this.skipNextNewLine&&(this.skipNextNewLine=!1,n.type===ae.WHITESPACE_CHARACTER_TOKEN&&n.chars[0]===`
`)){if(n.chars.length===1)continue;n.chars=n.chars.substr(1)}if(this._processInputToken(n),t&&this.pendingScript)break}}runParsingLoopForCurrentChunk(t,n){if(this._runParsingLoop(n),n&&this.pendingScript){const r=this.pendingScript;this.pendingScript=null,n(r);return}t&&t()}_setupTokenizerCDATAMode(){const t=this._getAdjustedCurrentElement();this.tokenizer.allowCDATA=t&&t!==this.document&&this.treeAdapter.getNamespaceURI(t)!==Ze.HTML&&!this._isIntegrationPoint(t)}_switchToTextParsing(t,n){this._insertElement(t,Ze.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=kh}switchToPlaintextParsing(){this.insertionMode=kh,this.originalInsertionMode=So,this.tokenizer.state=ae.MODE.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;do{if(this.treeAdapter.getTagName(t)===O.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}while(t)}_initTokenizerForFragmentParsing(){if(this.treeAdapter.getNamespaceURI(this.fragmentContext)===Ze.HTML){const t=this.treeAdapter.getTagName(this.fragmentContext);t===O.TITLE||t===O.TEXTAREA?this.tokenizer.state=ae.MODE.RCDATA:t===O.STYLE||t===O.XMP||t===O.IFRAME||t===O.NOEMBED||t===O.NOFRAMES||t===O.NOSCRIPT?this.tokenizer.state=ae.MODE.RAWTEXT:t===O.SCRIPT?this.tokenizer.state=ae.MODE.SCRIPT_DATA:t===O.PLAINTEXT&&(this.tokenizer.state=ae.MODE.PLAINTEXT)}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",s=t.systemId||"";this.treeAdapter.setDocumentType(this.document,n,r,s)}_attachElementToTree(t){if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const n=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.appendChild(n,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r),this.openElements.push(r)}_insertFakeElement(t){const n=this.treeAdapter.createElement(t,Ze.HTML,[]);this._attachElementToTree(n),this.openElements.push(n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Ze.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n),this.openElements.push(n)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(O.HTML,Ze.HTML,[]);this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r)}_insertCharacters(t){if(this._shouldFosterParentOnInsertion())this._fosterParentText(t.chars);else{const n=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.insertText(n,t.chars)}}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_shouldProcessTokenInForeignContent(t){const n=this._getAdjustedCurrentElement();if(!n||n===this.document)return!1;const r=this.treeAdapter.getNamespaceURI(n);if(r===Ze.HTML||this.treeAdapter.getTagName(n)===O.ANNOTATION_XML&&r===Ze.MATHML&&t.type===ae.START_TAG_TOKEN&&t.tagName===O.SVG)return!1;const s=t.type===ae.CHARACTER_TOKEN||t.type===ae.NULL_CHARACTER_TOKEN||t.type===ae.WHITESPACE_CHARACTER_TOKEN;return(t.type===ae.START_TAG_TOKEN&&t.tagName!==O.MGLYPH&&t.tagName!==O.MALIGNMARK||s)&&this._isIntegrationPoint(n,Ze.MATHML)||(t.type===ae.START_TAG_TOKEN||s)&&this._isIntegrationPoint(n,Ze.HTML)?!1:t.type!==ae.EOF_TOKEN}_processToken(t){IT[this.insertionMode][t.type](this,t)}_processTokenInBodyMode(t){IT[So][t.type](this,t)}_processTokenInForeignContent(t){t.type===ae.CHARACTER_TOKEN?lQ(this,t):t.type===ae.NULL_CHARACTER_TOKEN?aQ(this,t):t.type===ae.WHITESPACE_CHARACTER_TOKEN?Dr(this,t):t.type===ae.COMMENT_TOKEN?Fn(this,t):t.type===ae.START_TAG_TOKEN?cQ(this,t):t.type===ae.END_TAG_TOKEN&&uQ(this,t)}_processInputToken(t){this._shouldProcessTokenInForeignContent(t)?this._processTokenInForeignContent(t):this._processToken(t),t.type===ae.START_TAG_TOKEN&&t.selfClosing&&!t.ackSelfClosing&&this._err(rr.nonVoidHtmlElementStartTagWithTrailingSolidus)}_isIntegrationPoint(t,n){const r=this.treeAdapter.getTagName(t),s=this.treeAdapter.getNamespaceURI(t),o=this.treeAdapter.getAttrList(t);return To.isIntegrationPoint(r,s,o,n)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.length;if(t){let n=t,r=null;do if(n--,r=this.activeFormattingElements.entries[n],r.type===AT.MARKER_ENTRY||this.openElements.contains(r.element)){n++;break}while(n>0);for(let s=n;s<t;s++)r=this.activeFormattingElements.entries[s],this._insertElement(r.token,this.treeAdapter.getNamespaceURI(r.element)),r.element=this.openElements.current}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ai}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop,n=!1;t>=0;t--){let r=this.openElements.items[t];t===0&&(n=!0,this.fragmentContext&&(r=this.fragmentContext));const s=this.treeAdapter.getTagName(r),o=RV[s];if(o){this.insertionMode=o;break}else if(!n&&(s===O.TD||s===O.TH)){this.insertionMode=Mm;break}else if(!n&&s===O.HEAD){this.insertionMode=bc;break}else if(s===O.SELECT){this._resetInsertionModeForSelect(t);break}else if(s===O.TEMPLATE){this.insertionMode=this.currentTmplInsertionMode;break}else if(s===O.HTML){this.insertionMode=this.headElement?Lm:jm;break}else if(n){this.insertionMode=So;break}}}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.items[n],s=this.treeAdapter.getTagName(r);if(s===O.TEMPLATE)break;if(s===O.TABLE){this.insertionMode=P2;return}}this.insertionMode=M2}_pushTmplInsertionMode(t){this.tmplInsertionModeStack.push(t),this.tmplInsertionModeStackTop++,this.currentTmplInsertionMode=t}_popTmplInsertionMode(){this.tmplInsertionModeStack.pop(),this.tmplInsertionModeStackTop--,this.currentTmplInsertionMode=this.tmplInsertionModeStack[this.tmplInsertionModeStackTop]}_isElementCausesFosterParenting(t){const n=this.treeAdapter.getTagName(t);return n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.current)}_findFosterParentingLocation(){const t={parent:null,beforeElement:null};for(let n=this.openElements.stackTop;n>=0;n--){const r=this.openElements.items[n],s=this.treeAdapter.getTagName(r),o=this.treeAdapter.getNamespaceURI(r);if(s===O.TEMPLATE&&o===Ze.HTML){t.parent=this.treeAdapter.getTemplateContent(r);break}else if(s===O.TABLE){t.parent=this.treeAdapter.getParentNode(r),t.parent?t.beforeElement=r:t.parent=this.openElements.items[n-1];break}}return t.parent||(t.parent=this.openElements.items[0]),t}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_fosterParentText(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertTextBefore(n.parent,t,n.beforeElement):this.treeAdapter.insertText(n.parent,t)}_isSpecialElement(t){const n=this.treeAdapter.getTagName(t),r=this.treeAdapter.getNamespaceURI(t);return Ja.SPECIAL_ELEMENTS[r][n]}}var LV=jV;function DV(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagName)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Ys(e,t),n}function MV(e,t){let n=null;for(let r=e.openElements.stackTop;r>=0;r--){const s=e.openElements.items[r];if(s===t.element)break;e._isSpecialElement(s)&&(n=s)}return n||(e.openElements.popUntilElementPopped(t.element),e.activeFormattingElements.removeEntry(t)),n}function PV(e,t,n){let r=t,s=e.openElements.getCommonAncestor(t);for(let o=0,i=s;i!==n;o++,i=s){s=e.openElements.getCommonAncestor(i);const l=e.activeFormattingElements.getElementEntry(i),u=l&&o>=OV;!l||u?(u&&e.activeFormattingElements.removeEntry(l),e.openElements.remove(i)):(i=FV(e,l),r===t&&(e.activeFormattingElements.bookmark=l),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(i,r),r=i)}return r}function FV(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function BV(e,t,n){if(e._isElementCausesFosterParenting(t))e._fosterParentElement(n);else{const r=e.treeAdapter.getTagName(t),s=e.treeAdapter.getNamespaceURI(t);r===O.TEMPLATE&&s===Ze.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function zV(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),s=n.token,o=e.treeAdapter.createElement(s.tagName,r,s.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,n.token),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o)}function Di(e,t){let n;for(let r=0;r<AV&&(n=DV(e,t),!!n);r++){const s=MV(e,n);if(!s)break;e.activeFormattingElements.bookmark=n;const o=PV(e,s,n.element),i=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(o),BV(e,i,o),zV(e,s,n)}}function Rt(){}function of(e){e._err(rr.misplacedDoctype)}function Fn(e,t){e._appendCommentNode(t,e.openElements.currentTmplContent||e.openElements.current)}function UV(e,t){e._appendCommentNode(t,e.openElements.items[0])}function jT(e,t){e._appendCommentNode(t,e.document)}function Dr(e,t){e._insertCharacters(t)}function ru(e){e.stopped=!0}function HV(e,t){e._setDocumentType(t);const n=t.forceQuirks?Ja.DOCUMENT_MODE.QUIRKS:RT.getDocumentMode(t);RT.isConforming(t)||e._err(rr.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=D2}function su(e,t){e._err(rr.missingDoctype,{beforeToken:!0}),e.treeAdapter.setDocumentMode(e.document,Ja.DOCUMENT_MODE.QUIRKS),e.insertionMode=D2,e._processToken(t)}function $V(e,t){t.tagName===O.HTML?(e._insertElement(t,Ze.HTML),e.insertionMode=jm):Su(e,t)}function WV(e,t){const n=t.tagName;(n===O.HTML||n===O.HEAD||n===O.BODY||n===O.BR)&&Su(e,t)}function Su(e,t){e._insertFakeRootElement(),e.insertionMode=jm,e._processToken(t)}function GV(e,t){const n=t.tagName;n===O.HTML?Wr(e,t):n===O.HEAD?(e._insertElement(t,Ze.HTML),e.headElement=e.openElements.current,e.insertionMode=bc):ku(e,t)}function KV(e,t){const n=t.tagName;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?ku(e,t):e._err(rr.endTagWithoutMatchingOpenElement)}function ku(e,t){e._insertFakeElement(O.HEAD),e.headElement=e.openElements.current,e.insertionMode=bc,e._processToken(t)}function qn(e,t){const n=t.tagName;n===O.HTML?Wr(e,t):n===O.BASE||n===O.BASEFONT||n===O.BGSOUND||n===O.LINK||n===O.META?(e._appendElement(t,Ze.HTML),t.ackSelfClosing=!0):n===O.TITLE?e._switchToTextParsing(t,ae.MODE.RCDATA):n===O.NOSCRIPT?e.options.scriptingEnabled?e._switchToTextParsing(t,ae.MODE.RAWTEXT):(e._insertElement(t,Ze.HTML),e.insertionMode=C6):n===O.NOFRAMES||n===O.STYLE?e._switchToTextParsing(t,ae.MODE.RAWTEXT):n===O.SCRIPT?e._switchToTextParsing(t,ae.MODE.SCRIPT_DATA):n===O.TEMPLATE?(e._insertTemplate(t,Ze.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Ah,e._pushTmplInsertionMode(Ah)):n===O.HEAD?e._err(rr.misplacedStartTagForHeadElement):Au(e,t)}function Za(e,t){const n=t.tagName;n===O.HEAD?(e.openElements.pop(),e.insertionMode=Lm):n===O.BODY||n===O.BR||n===O.HTML?Au(e,t):n===O.TEMPLATE&&e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagName!==O.TEMPLATE&&e._err(rr.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode()):e._err(rr.endTagWithoutMatchingOpenElement)}function Au(e,t){e.openElements.pop(),e.insertionMode=Lm,e._processToken(t)}function YV(e,t){const n=t.tagName;n===O.HTML?Wr(e,t):n===O.BASEFONT||n===O.BGSOUND||n===O.HEAD||n===O.LINK||n===O.META||n===O.NOFRAMES||n===O.STYLE?qn(e,t):n===O.NOSCRIPT?e._err(rr.nestedNoscriptInHead):Ou(e,t)}function VV(e,t){const n=t.tagName;n===O.NOSCRIPT?(e.openElements.pop(),e.insertionMode=bc):n===O.BR?Ou(e,t):e._err(rr.endTagWithoutMatchingOpenElement)}function Ou(e,t){const n=t.type===ae.EOF_TOKEN?rr.openElementsLeftAfterEof:rr.disallowedContentInNoscriptInHead;e._err(n),e.openElements.pop(),e.insertionMode=bc,e._processToken(t)}function qV(e,t){const n=t.tagName;n===O.HTML?Wr(e,t):n===O.BODY?(e._insertElement(t,Ze.HTML),e.framesetOk=!1,e.insertionMode=So):n===O.FRAMESET?(e._insertElement(t,Ze.HTML),e.insertionMode=Pm):n===O.BASE||n===O.BASEFONT||n===O.BGSOUND||n===O.LINK||n===O.META||n===O.NOFRAMES||n===O.SCRIPT||n===O.STYLE||n===O.TEMPLATE||n===O.TITLE?(e._err(rr.abandonedHeadElementChild),e.openElements.push(e.headElement),qn(e,t),e.openElements.remove(e.headElement)):n===O.HEAD?e._err(rr.misplacedStartTagForHeadElement):Ru(e,t)}function QV(e,t){const n=t.tagName;n===O.BODY||n===O.HTML||n===O.BR?Ru(e,t):n===O.TEMPLATE?Za(e,t):e._err(rr.endTagWithoutMatchingOpenElement)}function Ru(e,t){e._insertFakeElement(O.BODY),e.insertionMode=So,e._processToken(t)}function Na(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function af(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function XV(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function JV(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function ZV(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ze.HTML),e.insertionMode=Pm)}function Wo(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ze.HTML)}function eq(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement();const n=e.openElements.currentTagName;(n===O.H1||n===O.H2||n===O.H3||n===O.H4||n===O.H5||n===O.H6)&&e.openElements.pop(),e._insertElement(t,Ze.HTML)}function LT(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ze.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function tq(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ze.HTML),n||(e.formElement=e.openElements.current))}function nq(e,t){e.framesetOk=!1;const n=t.tagName;for(let r=e.openElements.stackTop;r>=0;r--){const s=e.openElements.items[r],o=e.treeAdapter.getTagName(s);let i=null;if(n===O.LI&&o===O.LI?i=O.LI:(n===O.DD||n===O.DT)&&(o===O.DD||o===O.DT)&&(i=o),i){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(o!==O.ADDRESS&&o!==O.DIV&&o!==O.P&&e._isSpecialElement(s))break}e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ze.HTML)}function rq(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ze.HTML),e.tokenizer.state=ae.MODE.PLAINTEXT}function sq(e,t){e.openElements.hasInScope(O.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ze.HTML),e.framesetOk=!1}function oq(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(O.A);n&&(Di(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function vl(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function iq(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.NOBR)&&(Di(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function DT(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ze.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function aq(e,t){e.treeAdapter.getDocumentMode(e.document)!==Ja.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ze.HTML),e.framesetOk=!1,e.insertionMode=hr}function Nl(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ze.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function lq(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ze.HTML);const n=ae.getTokenAttr(t,w6.TYPE);(!n||n.toLowerCase()!==T6)&&(e.framesetOk=!1),t.ackSelfClosing=!0}function MT(e,t){e._appendElement(t,Ze.HTML),t.ackSelfClosing=!0}function cq(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._appendElement(t,Ze.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function uq(e,t){t.tagName=O.IMG,Nl(e,t)}function dq(e,t){e._insertElement(t,Ze.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ae.MODE.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=kh}function fq(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ae.MODE.RAWTEXT)}function hq(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ae.MODE.RAWTEXT)}function PT(e,t){e._switchToTextParsing(t,ae.MODE.RAWTEXT)}function mq(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ze.HTML),e.framesetOk=!1,e.insertionMode===hr||e.insertionMode===Dm||e.insertionMode===Os||e.insertionMode===ai||e.insertionMode===Mm?e.insertionMode=P2:e.insertionMode=M2}function FT(e,t){e.openElements.currentTagName===O.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ze.HTML)}function BT(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ze.HTML)}function pq(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.RTC),e._insertElement(t,Ze.HTML)}function gq(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ze.HTML)}function yq(e,t){e._reconstructActiveFormattingElements(),To.adjustTokenMathMLAttrs(t),To.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,Ze.MATHML):e._insertElement(t,Ze.MATHML),t.ackSelfClosing=!0}function xq(e,t){e._reconstructActiveFormattingElements(),To.adjustTokenSVGAttrs(t),To.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,Ze.SVG):e._insertElement(t,Ze.SVG),t.ackSelfClosing=!0}function bs(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ze.HTML)}function Wr(e,t){const n=t.tagName;switch(n.length){case 1:n===O.I||n===O.S||n===O.B||n===O.U?vl(e,t):n===O.P?Wo(e,t):n===O.A?oq(e,t):bs(e,t);break;case 2:n===O.DL||n===O.OL||n===O.UL?Wo(e,t):n===O.H1||n===O.H2||n===O.H3||n===O.H4||n===O.H5||n===O.H6?eq(e,t):n===O.LI||n===O.DD||n===O.DT?nq(e,t):n===O.EM||n===O.TT?vl(e,t):n===O.BR?Nl(e,t):n===O.HR?cq(e,t):n===O.RB?BT(e,t):n===O.RT||n===O.RP?pq(e,t):n!==O.TH&&n!==O.TD&&n!==O.TR&&bs(e,t);break;case 3:n===O.DIV||n===O.DIR||n===O.NAV?Wo(e,t):n===O.PRE?LT(e,t):n===O.BIG?vl(e,t):n===O.IMG||n===O.WBR?Nl(e,t):n===O.XMP?fq(e,t):n===O.SVG?xq(e,t):n===O.RTC?BT(e,t):n!==O.COL&&bs(e,t);break;case 4:n===O.HTML?XV(e,t):n===O.BASE||n===O.LINK||n===O.META?qn(e,t):n===O.BODY?JV(e,t):n===O.MAIN||n===O.MENU?Wo(e,t):n===O.FORM?tq(e,t):n===O.CODE||n===O.FONT?vl(e,t):n===O.NOBR?iq(e,t):n===O.AREA?Nl(e,t):n===O.MATH?yq(e,t):n===O.MENU?gq(e,t):n!==O.HEAD&&bs(e,t);break;case 5:n===O.STYLE||n===O.TITLE?qn(e,t):n===O.ASIDE?Wo(e,t):n===O.SMALL?vl(e,t):n===O.TABLE?aq(e,t):n===O.EMBED?Nl(e,t):n===O.INPUT?lq(e,t):n===O.PARAM||n===O.TRACK?MT(e,t):n===O.IMAGE?uq(e,t):n!==O.FRAME&&n!==O.TBODY&&n!==O.TFOOT&&n!==O.THEAD&&bs(e,t);break;case 6:n===O.SCRIPT?qn(e,t):n===O.CENTER||n===O.FIGURE||n===O.FOOTER||n===O.HEADER||n===O.HGROUP||n===O.DIALOG?Wo(e,t):n===O.BUTTON?sq(e,t):n===O.STRIKE||n===O.STRONG?vl(e,t):n===O.APPLET||n===O.OBJECT?DT(e,t):n===O.KEYGEN?Nl(e,t):n===O.SOURCE?MT(e,t):n===O.IFRAME?hq(e,t):n===O.SELECT?mq(e,t):n===O.OPTION?FT(e,t):bs(e,t);break;case 7:n===O.BGSOUND?qn(e,t):n===O.DETAILS||n===O.ADDRESS||n===O.ARTICLE||n===O.SECTION||n===O.SUMMARY?Wo(e,t):n===O.LISTING?LT(e,t):n===O.MARQUEE?DT(e,t):n===O.NOEMBED?PT(e,t):n!==O.CAPTION&&bs(e,t);break;case 8:n===O.BASEFONT?qn(e,t):n===O.FRAMESET?ZV(e,t):n===O.FIELDSET?Wo(e,t):n===O.TEXTAREA?dq(e,t):n===O.TEMPLATE?qn(e,t):n===O.NOSCRIPT?e.options.scriptingEnabled?PT(e,t):bs(e,t):n===O.OPTGROUP?FT(e,t):n!==O.COLGROUP&&bs(e,t);break;case 9:n===O.PLAINTEXT?rq(e,t):bs(e,t);break;case 10:n===O.BLOCKQUOTE||n===O.FIGCAPTION?Wo(e,t):bs(e,t);break;default:bs(e,t)}}function vq(e){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=F2)}function bq(e,t){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=F2,e._processToken(t))}function Ai(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function wq(e){const t=e.openElements.tmplCount>0,n=e.formElement;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.FORM):e.openElements.remove(n))}function Tq(e){e.openElements.hasInButtonScope(O.P)||e._insertFakeElement(O.P),e._closePElement()}function Eq(e){e.openElements.hasInListItemScope(O.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.LI),e.openElements.popUntilTagNamePopped(O.LI))}function Cq(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function _q(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function zT(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Nq(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(O.BR),e.openElements.pop(),e.framesetOk=!1}function Ys(e,t){const n=t.tagName;for(let r=e.openElements.stackTop;r>0;r--){const s=e.openElements.items[r];if(e.treeAdapter.getTagName(s)===n){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilElementPopped(s);break}if(e._isSpecialElement(s))break}}function B2(e,t){const n=t.tagName;switch(n.length){case 1:n===O.A||n===O.B||n===O.I||n===O.S||n===O.U?Di(e,t):n===O.P?Tq(e):Ys(e,t);break;case 2:n===O.DL||n===O.UL||n===O.OL?Ai(e,t):n===O.LI?Eq(e):n===O.DD||n===O.DT?Cq(e,t):n===O.H1||n===O.H2||n===O.H3||n===O.H4||n===O.H5||n===O.H6?_q(e):n===O.BR?Nq(e):n===O.EM||n===O.TT?Di(e,t):Ys(e,t);break;case 3:n===O.BIG?Di(e,t):n===O.DIR||n===O.DIV||n===O.NAV||n===O.PRE?Ai(e,t):Ys(e,t);break;case 4:n===O.BODY?vq(e):n===O.HTML?bq(e,t):n===O.FORM?wq(e):n===O.CODE||n===O.FONT||n===O.NOBR?Di(e,t):n===O.MAIN||n===O.MENU?Ai(e,t):Ys(e,t);break;case 5:n===O.ASIDE?Ai(e,t):n===O.SMALL?Di(e,t):Ys(e,t);break;case 6:n===O.CENTER||n===O.FIGURE||n===O.FOOTER||n===O.HEADER||n===O.HGROUP||n===O.DIALOG?Ai(e,t):n===O.APPLET||n===O.OBJECT?zT(e,t):n===O.STRIKE||n===O.STRONG?Di(e,t):Ys(e,t);break;case 7:n===O.ADDRESS||n===O.ARTICLE||n===O.DETAILS||n===O.SECTION||n===O.SUMMARY||n===O.LISTING?Ai(e,t):n===O.MARQUEE?zT(e,t):Ys(e,t);break;case 8:n===O.FIELDSET?Ai(e,t):n===O.TEMPLATE?Za(e,t):Ys(e,t);break;case 10:n===O.BLOCKQUOTE||n===O.FIGCAPTION?Ai(e,t):Ys(e,t);break;default:Ys(e,t)}}function Go(e,t){e.tmplInsertionModeStackTop>-1?R6(e,t):e.stopped=!0}function Sq(e,t){t.tagName===O.SCRIPT&&(e.pendingScript=e.openElements.current),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function kq(e,t){e._err(rr.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e._processToken(t)}function Ko(e,t){const n=e.openElements.currentTagName;n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR?(e.pendingCharacterTokens=[],e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=_6,e._processToken(t)):ws(e,t)}function Aq(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ze.HTML),e.insertionMode=Dm}function Oq(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ze.HTML),e.insertionMode=R1}function Rq(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(O.COLGROUP),e.insertionMode=R1,e._processToken(t)}function Iq(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ze.HTML),e.insertionMode=Os}function jq(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(O.TBODY),e.insertionMode=Os,e._processToken(t)}function Lq(e,t){e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode(),e._processToken(t))}function Dq(e,t){const n=ae.getTokenAttr(t,w6.TYPE);n&&n.toLowerCase()===T6?e._appendElement(t,Ze.HTML):ws(e,t),t.ackSelfClosing=!0}function Mq(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ze.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function z2(e,t){const n=t.tagName;switch(n.length){case 2:n===O.TD||n===O.TH||n===O.TR?jq(e,t):ws(e,t);break;case 3:n===O.COL?Rq(e,t):ws(e,t);break;case 4:n===O.FORM?Mq(e,t):ws(e,t);break;case 5:n===O.TABLE?Lq(e,t):n===O.STYLE?qn(e,t):n===O.TBODY||n===O.TFOOT||n===O.THEAD?Iq(e,t):n===O.INPUT?Dq(e,t):ws(e,t);break;case 6:n===O.SCRIPT?qn(e,t):ws(e,t);break;case 7:n===O.CAPTION?Aq(e,t):ws(e,t);break;case 8:n===O.COLGROUP?Oq(e,t):n===O.TEMPLATE?qn(e,t):ws(e,t);break;default:ws(e,t)}}function U2(e,t){const n=t.tagName;n===O.TABLE?e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode()):n===O.TEMPLATE?Za(e,t):n!==O.BODY&&n!==O.CAPTION&&n!==O.COL&&n!==O.COLGROUP&&n!==O.HTML&&n!==O.TBODY&&n!==O.TD&&n!==O.TFOOT&&n!==O.TH&&n!==O.THEAD&&n!==O.TR&&ws(e,t)}function ws(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,e._processTokenInBodyMode(t),e.fosterParentingEnabled=n}function Pq(e,t){e.pendingCharacterTokens.push(t)}function Fq(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function ou(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)ws(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}function Bq(e,t){const n=t.tagName;n===O.CAPTION||n===O.COL||n===O.COLGROUP||n===O.TBODY||n===O.TD||n===O.TFOOT||n===O.TH||n===O.THEAD||n===O.TR?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=hr,e._processToken(t)):Wr(e,t)}function zq(e,t){const n=t.tagName;n===O.CAPTION||n===O.TABLE?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=hr,n===O.TABLE&&e._processToken(t)):n!==O.BODY&&n!==O.COL&&n!==O.COLGROUP&&n!==O.HTML&&n!==O.TBODY&&n!==O.TD&&n!==O.TFOOT&&n!==O.TH&&n!==O.THEAD&&n!==O.TR&&B2(e,t)}function Uq(e,t){const n=t.tagName;n===O.HTML?Wr(e,t):n===O.COL?(e._appendElement(t,Ze.HTML),t.ackSelfClosing=!0):n===O.TEMPLATE?qn(e,t):Oh(e,t)}function Hq(e,t){const n=t.tagName;n===O.COLGROUP?e.openElements.currentTagName===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=hr):n===O.TEMPLATE?Za(e,t):n!==O.COL&&Oh(e,t)}function Oh(e,t){e.openElements.currentTagName===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=hr,e._processToken(t))}function $q(e,t){const n=t.tagName;n===O.TR?(e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ze.HTML),e.insertionMode=ai):n===O.TH||n===O.TD?(e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(O.TR),e.insertionMode=ai,e._processToken(t)):n===O.CAPTION||n===O.COL||n===O.COLGROUP||n===O.TBODY||n===O.TFOOT||n===O.THEAD?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=hr,e._processToken(t)):z2(e,t)}function Wq(e,t){const n=t.tagName;n===O.TBODY||n===O.TFOOT||n===O.THEAD?e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=hr):n===O.TABLE?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=hr,e._processToken(t)):(n!==O.BODY&&n!==O.CAPTION&&n!==O.COL&&n!==O.COLGROUP||n!==O.HTML&&n!==O.TD&&n!==O.TH&&n!==O.TR)&&U2(e,t)}function Gq(e,t){const n=t.tagName;n===O.TH||n===O.TD?(e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ze.HTML),e.insertionMode=Mm,e.activeFormattingElements.insertMarker()):n===O.CAPTION||n===O.COL||n===O.COLGROUP||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR?e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Os,e._processToken(t)):z2(e,t)}function Kq(e,t){const n=t.tagName;n===O.TR?e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Os):n===O.TABLE?e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Os,e._processToken(t)):n===O.TBODY||n===O.TFOOT||n===O.THEAD?(e.openElements.hasInTableScope(n)||e.openElements.hasInTableScope(O.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Os,e._processToken(t)):(n!==O.BODY&&n!==O.CAPTION&&n!==O.COL&&n!==O.COLGROUP||n!==O.HTML&&n!==O.TD&&n!==O.TH)&&U2(e,t)}function Yq(e,t){const n=t.tagName;n===O.CAPTION||n===O.COL||n===O.COLGROUP||n===O.TBODY||n===O.TD||n===O.TFOOT||n===O.TH||n===O.THEAD||n===O.TR?(e.openElements.hasInTableScope(O.TD)||e.openElements.hasInTableScope(O.TH))&&(e._closeTableCell(),e._processToken(t)):Wr(e,t)}function Vq(e,t){const n=t.tagName;n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ai):n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR?e.openElements.hasInTableScope(n)&&(e._closeTableCell(),e._processToken(t)):n!==O.BODY&&n!==O.CAPTION&&n!==O.COL&&n!==O.COLGROUP&&n!==O.HTML&&B2(e,t)}function A6(e,t){const n=t.tagName;n===O.HTML?Wr(e,t):n===O.OPTION?(e.openElements.currentTagName===O.OPTION&&e.openElements.pop(),e._insertElement(t,Ze.HTML)):n===O.OPTGROUP?(e.openElements.currentTagName===O.OPTION&&e.openElements.pop(),e.openElements.currentTagName===O.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ze.HTML)):n===O.INPUT||n===O.KEYGEN||n===O.TEXTAREA||n===O.SELECT?e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),n!==O.SELECT&&e._processToken(t)):(n===O.SCRIPT||n===O.TEMPLATE)&&qn(e,t)}function O6(e,t){const n=t.tagName;if(n===O.OPTGROUP){const r=e.openElements.items[e.openElements.stackTop-1],s=r&&e.treeAdapter.getTagName(r);e.openElements.currentTagName===O.OPTION&&s===O.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagName===O.OPTGROUP&&e.openElements.pop()}else n===O.OPTION?e.openElements.currentTagName===O.OPTION&&e.openElements.pop():n===O.SELECT&&e.openElements.hasInSelectScope(O.SELECT)?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode()):n===O.TEMPLATE&&Za(e,t)}function qq(e,t){const n=t.tagName;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processToken(t)):A6(e,t)}function Qq(e,t){const n=t.tagName;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processToken(t)):O6(e,t)}function Xq(e,t){const n=t.tagName;if(n===O.BASE||n===O.BASEFONT||n===O.BGSOUND||n===O.LINK||n===O.META||n===O.NOFRAMES||n===O.SCRIPT||n===O.STYLE||n===O.TEMPLATE||n===O.TITLE)qn(e,t);else{const r=IV[n]||So;e._popTmplInsertionMode(),e._pushTmplInsertionMode(r),e.insertionMode=r,e._processToken(t)}}function Jq(e,t){t.tagName===O.TEMPLATE&&Za(e,t)}function R6(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode(),e._processToken(t)):e.stopped=!0}function Zq(e,t){t.tagName===O.HTML?Wr(e,t):Rh(e,t)}function eQ(e,t){t.tagName===O.HTML?e.fragmentContext||(e.insertionMode=S6):Rh(e,t)}function Rh(e,t){e.insertionMode=So,e._processToken(t)}function tQ(e,t){const n=t.tagName;n===O.HTML?Wr(e,t):n===O.FRAMESET?e._insertElement(t,Ze.HTML):n===O.FRAME?(e._appendElement(t,Ze.HTML),t.ackSelfClosing=!0):n===O.NOFRAMES&&qn(e,t)}function nQ(e,t){t.tagName===O.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagName!==O.FRAMESET&&(e.insertionMode=N6))}function rQ(e,t){const n=t.tagName;n===O.HTML?Wr(e,t):n===O.NOFRAMES&&qn(e,t)}function sQ(e,t){t.tagName===O.HTML&&(e.insertionMode=k6)}function oQ(e,t){t.tagName===O.HTML?Wr(e,t):Df(e,t)}function Df(e,t){e.insertionMode=So,e._processToken(t)}function iQ(e,t){const n=t.tagName;n===O.HTML?Wr(e,t):n===O.NOFRAMES&&qn(e,t)}function aQ(e,t){t.chars=SV.REPLACEMENT_CHARACTER,e._insertCharacters(t)}function lQ(e,t){e._insertCharacters(t),e.framesetOk=!1}function cQ(e,t){if(To.causesExit(t)&&!e.fragmentContext){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ze.HTML&&!e._isIntegrationPoint(e.openElements.current);)e.openElements.pop();e._processToken(t)}else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Ze.MATHML?To.adjustTokenMathMLAttrs(t):r===Ze.SVG&&(To.adjustTokenSVGTagName(t),To.adjustTokenSVGAttrs(t)),To.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function uQ(e,t){for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Ze.HTML){e._processToken(t);break}if(e.treeAdapter.getTagName(r).toLowerCase()===t.tagName){e.openElements.popUntilElementPopped(r);break}}}const dQ=ra(LV),UT=/[#.]/g;function fQ(e,t){const n=e||"",r={};let s=0,o,i;for(;s<n.length;){UT.lastIndex=s;const l=UT.exec(n),u=n.slice(s,l?l.index:n.length);u&&(o?o==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:i=u,s+=u.length),l&&(o=l[0],s++)}return{type:"element",tagName:i||t||"div",properties:r,children:[]}}const hQ=new Set(["menu","submit","reset","button"]),Yy={}.hasOwnProperty;function I6(e,t,n){const r=n&&yQ(n);return function(o,i,...l){let u=-1,f;if(o==null)f={type:"root",children:[]},l.unshift(i);else if(f=fQ(o,t),f.tagName=f.tagName.toLowerCase(),r&&Yy.call(r,f.tagName)&&(f.tagName=r[f.tagName]),mQ(i,f.tagName)){let m;for(m in i)Yy.call(i,m)&&pQ(e,f.properties,m,i[m])}else l.unshift(i);for(;++u<l.length;)Vy(f.children,l[u]);return f.type==="element"&&f.tagName==="template"&&(f.content={type:"root",children:f.children},f.children=[]),f}}function mQ(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?hQ.has(e.type.toLowerCase()):!("value"in e)}function pQ(e,t,n,r){const s=vm(e,n);let o=-1,i;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;i=r}else typeof r=="boolean"?i=r:typeof r=="string"?s.spaceSeparated?i=pw(r):s.commaSeparated?i=gw(r):s.commaOrSpaceSeparated?i=pw(gw(r).join(" ")):i=HT(s,s.property,r):Array.isArray(r)?i=r.concat():i=s.property==="style"?gQ(r):String(r);if(Array.isArray(i)){const l=[];for(;++o<i.length;)l[o]=HT(s,s.property,i[o]);i=l}s.property==="className"&&Array.isArray(t.className)&&(i=t.className.concat(i)),t[s.property]=i}}function Vy(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)Vy(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?Vy(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function HT(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||l1(n)===l1(t)))return!0}return n}function gQ(e){const t=[];let n;for(n in e)Yy.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function yQ(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const xQ=I6(O1,"div"),vQ=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],bQ=I6(vc,"g",vQ);function wQ(e){const t=String(e),n=[],r=/\r?\n|\r/g;for(;r.test(t);)n.push(r.lastIndex);return n.push(t.length+1),{toPoint:s,toOffset:o};function s(i){let l=-1;if(typeof i=="number"&&i>-1&&i<n[n.length-1]){for(;++l<n.length;)if(n[l]>i)return{line:l+1,column:i-(l>0?n[l-1]:0)+1,offset:i}}return{line:void 0,column:void 0,offset:void 0}}function o(i){const l=i&&i.line,u=i&&i.column;if(typeof l=="number"&&typeof u=="number"&&!Number.isNaN(l)&&!Number.isNaN(u)&&l-1 in n){const f=(n[l-2]||0)+u-1||0;if(f>-1&&f<n[n.length-1])return f}return-1}}const c1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},j6={}.hasOwnProperty,TQ=Object.prototype;function EQ(e,t){const n=t||{};let r,s;return NQ(n)?(s=n,r={}):(s=n.file||void 0,r=n),H2({schema:r.space==="svg"?vc:O1,file:s,verbose:r.verbose,location:!1},e)}function H2(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},Mf(e,r,n),n}case"#document":case"#document-fragment":{const r=t,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:L6(e,t.childNodes),data:{quirksMode:s}},e.file&&e.location){const o=String(e.file),i=wQ(o),l=i.toPoint(0),u=i.toPoint(o.length);n.position={start:l,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},Mf(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},Mf(e,r,n),n}default:return n=CQ(e,t),n}}function L6(e,t){let n=-1;const r=[];for(;++n<t.length;)r[n]=H2(e,t[n]);return r}function CQ(e,t){const n=e.schema;e.schema=t.namespaceURI===c1.svg?vc:O1;let r=-1;const s={};for(;++r<t.attrs.length;){const l=t.attrs[r],u=(l.prefix?l.prefix+":":"")+l.name;j6.call(TQ,u)||(s[u]=l.value)}const i=(e.schema.space==="svg"?bQ:xQ)(t.tagName,s,L6(e,t.childNodes));if(Mf(e,t,i),i.tagName==="template"){const l=t,u=l.sourceCodeLocation,f=u&&u.startTag&&zl(u.startTag),m=u&&u.endTag&&zl(u.endTag),h=H2(e,l.content);f&&m&&e.file&&(h.position={start:f.end,end:m.start}),i.content=h}return e.schema=n,i}function Mf(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=_Q(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function _Q(e,t,n){const r=zl(n);if(t.type==="element"){const s=t.children[t.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),e.verbose){const o={};let i;if(n.attrs)for(i in n.attrs)j6.call(n.attrs,i)&&(o[vm(e.schema,i).property]=zl(n.attrs[i]));t.data={position:{opening:zl(n.startTag),closing:n.endTag?zl(n.endTag):null,properties:o}}}}return r}function zl(e){const t=$T({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=$T({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function $T(e){return e.line&&e.column?e:void 0}function NQ(e){return"messages"in e}const WT={}.hasOwnProperty;function D6(e,t){const n=t||{};function r(s,...o){let i=r.invalid;const l=r.handlers;if(s&&WT.call(s,e)){const u=String(s[e]);i=WT.call(l,u)?l[u]:r.unknown}if(i)return i.call(this,s,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const SQ={}.hasOwnProperty,M6=D6("type",{handlers:{root:AQ,element:LQ,text:IQ,comment:jQ,doctype:RQ}});function kQ(e,t){const n=t&&typeof t=="object"?t.space:t;return M6(e,n==="svg"?vc:O1)}function AQ(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=$2(e.children,n,t),wc(e,n),n}function OQ(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=$2(e.children,n,t),wc(e,n),n}function RQ(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:void 0};return wc(e,t),t}function IQ(e){const t={nodeName:"#text",value:e.value,parentNode:void 0};return wc(e,t),t}function jQ(e){const t={nodeName:"#comment",data:e.value,parentNode:void 0};return wc(e,t),t}function LQ(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=vc);const s=[];let o;if(e.properties){for(o in e.properties)if(o!=="children"&&SQ.call(e.properties,o)){const l=DQ(r,o,e.properties[o]);l&&s.push(l)}}const i={nodeName:e.tagName,tagName:e.tagName,attrs:s,namespaceURI:c1[r.space],childNodes:[],parentNode:void 0};return i.childNodes=$2(e.children,i,r),wc(e,i),e.tagName==="template"&&e.content&&(i.content=OQ(e.content,r)),i}function DQ(e,t,n){const r=vm(e,t);if(n==null||n===!1||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?U3(n):z3(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=s.name.indexOf(":");o<0?s.prefix="":(s.name=s.name.slice(o+1),s.prefix=r.attribute.slice(0,o)),s.namespace=c1[r.space]}return s}function $2(e,t,n){let r=-1;const s=[];if(e)for(;++r<e.length;){const o=M6(e[r],n);o.parentNode=t,s.push(o)}return s}function wc(e,t){const n=e.position;n&&n.start&&n.end&&(t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const MQ=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"],PQ="IN_TEMPLATE_MODE",FQ="DATA_STATE",BQ="CHARACTER_TOKEN",zQ="START_TAG_TOKEN",UQ="END_TAG_TOKEN",HQ="COMMENT_TOKEN",$Q="DOCTYPE_TOKEN",WQ={sourceCodeLocationInfo:!0,scriptingEnabled:!1},P6=function(e,t,n){let r=-1;const s=new dQ(WQ),o=D6("type",{handlers:{root:v,element:T,text:y,comment:w,doctype:E,raw:I},unknown:VQ});let i,l,u,f,m;if(QQ(t)&&(n=t,t=void 0),n&&n.passThrough)for(;++r<n.passThrough.length;)o.handlers[n.passThrough[r]]=j;const h=EQ(qQ(e)?p():g(),t);if(i&&xm(h,"comment",(C,k,R)=>{const P=C;if(P.value.stitch&&R!==null&&k!==null)return R.children[k]=P.value.stitch,k}),e.type!=="root"&&h.type==="root"&&h.children.length===1)return h.children[0];return h;function g(){const C={nodeName:"template",tagName:"template",attrs:[],namespaceURI:c1.html,childNodes:[]},k={nodeName:"documentmock",tagName:"documentmock",attrs:[],namespaceURI:c1.html,childNodes:[]},R={nodeName:"#document-fragment",childNodes:[]};if(s._bootstrap(k,C),s._pushTmplInsertionMode(PQ),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),l=s.tokenizer,!l)throw new Error("Expected `tokenizer`");return u=l.preprocessor,m=l.__mixins[0],f=m.posTracker,o(e),_(),s._adoptNodes(k.childNodes[0],R),R}function p(){const C=s.treeAdapter.createDocument();if(s._bootstrap(C,void 0),l=s.tokenizer,!l)throw new Error("Expected `tokenizer`");return u=l.preprocessor,m=l.__mixins[0],f=m.posTracker,o(e),_(),C}function b(C){let k=-1;if(C)for(;++k<C.length;)o(C[k])}function v(C){b(C.children)}function T(C){_(),s._processInputToken(GQ(C)),b(C.children),MQ.includes(C.tagName)||(_(),s._processInputToken(YQ(C)))}function y(C){_(),s._processInputToken({type:BQ,chars:C.value,location:Ul(C)})}function E(C){_(),s._processInputToken({type:$Q,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Ul(C)})}function w(C){_(),s._processInputToken({type:HQ,data:C.value,location:Ul(C)})}function I(C){const k=k1(C),R=k.line||1,P=k.column||1,Y=k.offset||0;if(!u)throw new Error("Expected `preprocessor`");if(!l)throw new Error("Expected `tokenizer`");if(!f)throw new Error("Expected `posTracker`");if(!m)throw new Error("Expected `locationTracker`");u.html=void 0,u.pos=-1,u.lastGapPos=-1,u.lastCharPos=-1,u.gapStack=[],u.skipNextNewLine=!1,u.lastChunkWritten=!1,u.endOfChunkHit=!1,f.isEol=!1,f.lineStartPos=-P+1,f.droppedBufferSize=Y,f.offset=0,f.col=1,f.line=R,m.currentAttrLocation=void 0,m.ctLoc=Ul(C),l.write(C.value),s._runParsingLoop(null),(l.state==="NAMED_CHARACTER_REFERENCE_STATE"||l.state==="NUMERIC_CHARACTER_REFERENCE_END_STATE")&&(u.lastChunkWritten=!0,l[l.state](l._consume()))}function j(C){i=!0;let k;"children"in C?k={...C,children:P6({type:"root",children:C.children},t,n).children}:k={...C},w({type:"comment",value:{stitch:k}})}function _(){if(!l)throw new Error("Expected `tokenizer`");if(!f)throw new Error("Expected `posTracker`");const C=l.currentCharacterToken;C&&(C.location.endLine=f.line,C.location.endCol=f.col+1,C.location.endOffset=f.offset+1,s._processInputToken(C)),l.tokenQueue=[],l.state=FQ,l.returnState="",l.charRefCode=-1,l.tempBuff=[],l.lastStartTagName="",l.consumedAfterSnapshot=-1,l.active=!1,l.currentCharacterToken=void 0,l.currentToken=void 0,l.currentAttr=void 0}};function GQ(e){const t=Object.assign(Ul(e));return t.startTag=Object.assign({},t),{type:zQ,tagName:e.tagName,selfClosing:!1,attrs:KQ(e),location:t}}function KQ(e){return kQ({tagName:e.tagName,type:"element",properties:e.properties,children:[]}).attrs}function YQ(e){const t=Object.assign(Ul(e));return t.startTag=Object.assign({},t),{type:UQ,tagName:e.tagName,attrs:[],location:t}}function VQ(e){throw new Error("Cannot compile `"+e.type+"` node")}function qQ(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName==="html"))}function Ul(e){const t=k1(e),n=gm(e);return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function QQ(e){return!!(e&&!("message"in e&&"messages"in e))}function vg(e={}){return(t,n)=>P6(t,n,e)}const Ft={imageStates:new Map,config:{maxRetries:3,retryDelay:1e3,permanentFailureCodes:[404],cacheTimeout:5*60*1e3,enableGlobalRetry:!0,logLevel:"warn"},retryQueue:[],isProcessingQueue:!1};function XQ(e={}){Ft.config={...Ft.config,...e},console.log("[全局图片重试] 系统已初始化",Ft.config)}function u1(e){if(!e)return null;const t=Ft.imageStates.get(e);return t&&Date.now()-t.timestamp>Ft.config.cacheTimeout?(Ft.imageStates.delete(e),null):t}function Fm(e,t){if(!e)return;const n={...t,timestamp:Date.now()};Ft.imageStates.set(e,n),Ft.config.logLevel==="debug"&&console.log("[全局图片重试] 状态更新:",e,n)}function F6(e,t={}){const n=u1(e);if(!n)return!0;if(n.retryCount>=Ft.config.maxRetries)return Ft.config.logLevel!=="silent"&&console.warn("[全局图片重试] 已达到最大重试次数，停止重试:",e),!1;const r=t.status||t.statusCode||0;if(Ft.config.permanentFailureCodes.includes(r))return Ft.config.logLevel!=="silent"&&console.warn("[全局图片重试] 检测到永久失败错误，停止重试:",e,r),!1;const s=(t.message||"").toLowerCase();return s.includes("corb")||s.includes("cors")?n.retryCount===0:!0}function JQ(e,t={}){if(!e)return null;const n=u1(e)||{status:"loading",retryCount:0,lastError:null},r=t.status||t.statusCode||0,s=Ft.config.permanentFailureCodes.includes(r),o=n.retryCount>=Ft.config.maxRetries,i={status:s||o?"permanent-failure":"error",retryCount:n.retryCount+1,lastError:{message:t.message||"Unknown error",status:r,timestamp:Date.now()}};return Fm(e,i),F6(e,t)&&Ft.config.enableGlobalRetry&&eX(e),i}function ZQ(e){if(!e)return;Fm(e,{status:"success",retryCount:0,lastError:null}),Ft.config.logLevel==="debug"&&console.log("[全局图片重试] 图片加载成功:",e)}function eX(e){!e||Ft.retryQueue.some(n=>n.url===e)||(Ft.retryQueue.push({url:e,timestamp:Date.now(),delay:Ft.config.retryDelay}),Ft.config.logLevel==="debug"&&console.log("[全局图片重试] 添加到重试队列:",e),Ft.isProcessingQueue||tX())}async function tX(){if(!(Ft.isProcessingQueue||Ft.retryQueue.length===0)){Ft.isProcessingQueue=!0;try{for(;Ft.retryQueue.length>0;){const e=Ft.retryQueue.shift(),t=u1(e.url);if(!t||t.status==="success")continue;const r=Date.now()-e.timestamp,s=Math.max(0,e.delay-r);s>0&&await new Promise(o=>setTimeout(o,s)),F6(e.url,t.lastError||{})&&(Ft.config.logLevel!=="silent"&&console.log("[全局图片重试] 执行重试:",e.url,`重试次数: ${t.retryCount}`),Fm(e.url,{...t,status:"loading"}),nX(e.url))}}catch(e){console.error("[全局图片重试] 处理重试队列时出错:",e)}finally{Ft.isProcessingQueue=!1}}}function nX(e){const t=new CustomEvent("globalImageRetry",{detail:{url:e}});document.dispatchEvent(t),Ft.config.logLevel==="debug"&&console.log("[全局图片重试] 触发重试事件:",e)}function rX(){const e=Date.now(),t=[];for(const[n,r]of Ft.imageStates)e-r.timestamp>Ft.config.cacheTimeout&&t.push(n);t.forEach(n=>{Ft.imageStates.delete(n)}),t.length>0&&Ft.config.logLevel==="debug"&&console.log("[全局图片重试] 清理过期状态:",t.length,"个记录")}typeof window<"u"&&setInterval(rX,6e4);const B6=({content:e,className:t="",onContentChange:n,editable:r=!1,textColors:s={},onNoteClick:o,notes:i=[]})=>{N.useEffect(()=>{XQ({maxRetries:3,retryDelay:1e3,permanentFailureCodes:[404],cacheTimeout:5*60*1e3,enableGlobalRetry:!0,logLevel:"warn"});const g=p=>{const{url:b}=p.detail;console.log("[MarkdownRenderer] 收到全局重试事件:",b),l({})};return document.addEventListener("globalImageRetry",g),()=>{document.removeEventListener("globalImageRetry",g)}},[]);const[,l]=N.useState({}),u=g=>{if(!g||typeof g!="string")return"";const p=g.trim();if(!p)return"";if(p.startsWith("file://")||p.startsWith("\\")||/^[A-Za-z]:\\/.test(p))return console.log("检测到本地文件路径，跳过加载:",p),"";if(p.startsWith("/uploads/")||p.startsWith("uploads/")){const T=p.startsWith("/")?p:`/${p}`;return`${zn.replace("/api","")}${T}`}if(p.startsWith("data:image/"))return p;if(p.startsWith("/"))return`${zn.replace("/api","")}${p}`;if(p.startsWith("http://")||p.startsWith("https://")){const T=window.location.origin;if(new URL(p).origin!==T){console.log("检测到跨域图片URL:",p);const E=`${zn}/proxy/image?url=${encodeURIComponent(p)}`;return console.log("使用代理URL:",E),E}return p}const b=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/,v=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}\/.*$/;if(b.test(p)||v.test(p)){const T=`https://${p}`,y=`${zn}/proxy/image?url=${encodeURIComponent(T)}`;return console.log("外部域名使用代理:",y),y}if(/\.(jpg|jpeg|png|gif|webp|svg|bmp|ico)(\?.*)?$/i.test(p)){if(p.includes("://")){const E=`${zn}/proxy/image?url=${encodeURIComponent(p)}`;return console.log("外部图片使用代理:",E),E}const T=`https://${p}`,y=`${zn}/proxy/image?url=${encodeURIComponent(T)}`;return console.log("外部图片使用代理:",y),y}if(p.includes("://")){const T=`${zn}/proxy/image?url=${encodeURIComponent(p)}`;return console.log("兜底代理处理:",T),T}return console.log("无法处理的URL格式:",p),""},f=N.useCallback((g,p)=>{if(!r||!n)return;const T=e.split(`
`).map((y,E)=>E===g&&(y.trim().startsWith("- [ ]")||y.trim().startsWith("- [x]"))?p?y.replace("- [ ]","- [x]"):y.replace("- [x]","- [ ]"):y).join(`
`);n(T)},[e,r,n]),m={img:({src:g,alt:p,...b})=>{const v={maxWidth:"100%",height:"auto",width:"auto",display:"block",margin:"0 auto"},T=u(g),[y,E]=N.useState(()=>u1(T)||{status:"loading",retryCount:0,lastError:null});N.useEffect(()=>{const C=u1(T);C&&JSON.stringify(C)!==JSON.stringify(y)&&E(C)},[T,y]);const w=()=>{console.log("图片加载成功:",T),ZQ(T),E(C=>({...C,status:"success",errorMessage:""}))},I=C=>{console.log("图片加载失败:",T,C);const k={message:C.message||(C.target&&C.target.error?C.target.error.message:"Unknown error"),status:C.target?C.target.status:void 0,timestamp:Date.now()},R=JQ(T,k);E(R)},j=()=>{console.log("手动重试加载图片:",T);const C={status:"loading",retryCount:y.retryCount+1,lastError:null};Fm(T,C),E(C)},_=()=>{if(!T||y.status!=="loading"&&y.status!=="success")return"";if(y.retryCount>0){const C=T.includes("?")?"&":"?";return`${T}${C}retry=${y.retryCount}&t=${Date.now()}`}return T};if(!g||!T)return c.jsx("div",{className:"max-w-full h-32 bg-theme-elevated my-2 flex items-center justify-center",style:{...v,borderRadius:"0",border:"none"},children:c.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[c.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("p",{className:"text-sm",children:"本地图片文件不存在或无法访问"}),c.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 break-all",children:p||g})]})});if(y.status==="error"||y.status==="timeout"||y.status==="permanent-failure"){const C=y.status==="permanent-failure",k=y.lastError?y.lastError.message:"图片加载失败";return c.jsx("div",{className:"max-w-full h-32 bg-theme-elevated my-2 flex items-center justify-center",style:{borderRadius:"0",border:"none"},children:c.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[c.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsxs("p",{className:"text-sm",children:[k,y.retryCount>0&&` (重试次数: ${y.retryCount})`,C&&" (文件不存在)"]}),c.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 break-all",children:p||T}),c.jsx("button",{onClick:j,className:"mt-2 px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"重试"})]})})}return(y.status==="loading"||y.status==="success")&&_()?c.jsx("img",{src:_(),alt:p,className:"max-w-full h-auto max-h-96 my-2 mx-auto block w-full",loading:"lazy",crossOrigin:"anonymous",referrerPolicy:"no-referrer-when-downgrade",onLoad:w,onError:I,style:{...v,borderRadius:"0",border:"none"},...b},`${T}-${y.retryCount}`):null},em:({children:g,...p})=>c.jsx("em",{className:"italic force-italic",style:{fontStyle:"italic !important",fontFamily:"inherit !important",fontSynthesis:"style !important",color:(s==null?void 0:s.main)||"inherit"},...p,children:g}),strong:({children:g,...p})=>c.jsx("strong",{className:"font-bold",style:{color:(s==null?void 0:s.main)||"inherit"},...p,children:g}),del:({children:g,...p})=>c.jsx("del",{className:"line-through opacity-60",style:{color:s.secondary||"inherit"},...p,children:g}),u:({children:g,...p})=>c.jsx("u",{className:"underline",style:{textDecoration:"underline !important",textDecorationLine:"underline",textDecorationStyle:"solid",textDecorationColor:"currentColor"},...p,children:g}),input:({type:g,checked:p,...b})=>g==="checkbox"?c.jsx("input",{type:"checkbox",checked:p,readOnly:!r,className:`mr-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-transparent focus:ring-0 ${r?"cursor-pointer":"cursor-default"}`,...b}):c.jsx("input",{type:g,checked:p,...b}),blockquote:({children:g,...p})=>c.jsx("blockquote",{className:"border-l-4 border-blue-500 pl-4 py-2 my-4 bg-blue-50 dark:bg-blue-900/20 italic",style:{color:(s==null?void 0:s.secondary)||"inherit"},...p,children:g}),li:({children:g,ordered:p,...b})=>{const{ordered:v,...T}={ordered:p,...b};return g&&g.some&&g.some(E=>E&&E.props&&E.props.type==="checkbox")?c.jsx("li",{className:"task-list-item",style:{color:(s==null?void 0:s.main)||"inherit"},...T,children:g}):c.jsx("li",{style:{color:(s==null?void 0:s.main)||"inherit"},...T,children:g})},code:({inline:g,className:p,children:b,...v})=>g?c.jsx("code",{className:"bg-theme-elevated rounded px-1 py-0.5 font-mono text-sm",...v,children:b}):c.jsx("pre",{className:"bg-theme-elevated p-4 rounded-md overflow-x-auto",children:c.jsx("code",{className:p,...v,children:b})}),a:({href:g,children:p,...b})=>{const v=g&&g.match(/^https?:\/\/(localhost|127\.0\.0\.1|\d+\.\d+\.\d+\.\d+)(?::(\d+))?\/note\/(\d+)$/);if(v){const[,T,y,E]=v,w=y||(g.startsWith("https://")?"443":"80");console.log("[引用链接] 渲染HTTP引用链接，笔记ID:",E,"主机:",T,"端口:",w,"可用笔记:",(i==null?void 0:i.length)||0);const j=(z=>!i||!Array.isArray(i)?null:i.find(Q=>typeof Q.id=="string"&&typeof z=="string"?Q.id===z:Q.id===parseInt(z)||Q.id.toString()===z.toString()))(E),_=!!j,C=j?j.title||"无标题":p,k=z=>{z.preventDefault(),z.stopPropagation(),console.log("[引用点击] 点击HTTP引用链接，笔记ID:",E,"类型:",typeof E),console.log("[引用点击] 目标笔记:",j,"是否存在:",_),console.log("[引用点击] onNoteClick函数:",typeof o,o?"存在":"不存在"),o&&_?(console.log("[引用点击] 准备跳转到笔记:",j.title,"ID:",j.id,"ID类型:",typeof j.id),o(j.id),console.log("[引用点击] 已调用onNoteClick函数")):_?o||console.log("[引用点击] onNoteClick函数不存在"):console.log("[引用点击] 未找到笔记ID:",E,"可用笔记:",(i==null?void 0:i.map(Q=>`${Q.id}:${Q.title}(${typeof Q.id})`))||[])},R=_?"underline cursor-pointer transition-colors duration-200":"text-gray-400 dark:text-gray-500 line-through cursor-not-allowed",P=_?`跳转到笔记: ${C}`:`笔记不存在 (ID: ${E})`,Y=z=>z;return c.jsxs("a",{href:"#",className:`${R} note-reference-link px-2 py-1 rounded ${_?"bg-theme-elevated border-l-2 border-theme-border":""} focus:outline-none focus:ring-0`,onClick:k,title:P,style:{fontFamily:"inherit",textRendering:"optimizeLegibility",fontFeatureSettings:'"kern" 1, "liga" 1',color:_?(s==null?void 0:s.reference)||(s==null?void 0:s.link)||"var(--theme-primary)":"var(--theme-text-secondary)",textDecoration:_?"none":"line-through"},...b,children:[c.jsx("span",{className:"reference-text",children:Y(p)}),!_&&" (不存在)"]})}return!g||g.trim()===""||g.startsWith("javascript:")?c.jsx("span",{className:"text-gray-500",...b,children:p}):c.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 special-char focus:outline-none focus:ring-0",style:{color:(s==null?void 0:s.link)||"var(--theme-primary)",fontFamily:"inherit",textRendering:"optimizeLegibility",fontFeatureSettings:'"kern" 1, "liga" 1'},...b,children:c.jsx("span",{className:"special-char",children:p})})},h1:({children:g,...p})=>c.jsx("h1",{className:"text-2xl font-bold mb-4",style:{color:(s==null?void 0:s.main)||"inherit"},...p,children:g}),h2:({children:g,...p})=>c.jsx("h2",{className:"text-xl font-bold mb-3",style:{color:(s==null?void 0:s.main)||"inherit"},...p,children:g}),h3:({children:g,...p})=>c.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:(s==null?void 0:s.main)||"inherit"},...p,children:g}),h4:({children:g,...p})=>c.jsx("h4",{className:"text-base font-bold mb-2",style:{color:(s==null?void 0:s.main)||"inherit"},...p,children:g}),h5:({children:g,...p})=>c.jsx("h5",{className:"text-sm font-bold mb-1",style:{color:(s==null?void 0:s.main)||"inherit"},...p,children:g}),h6:({children:g,...p})=>c.jsx("h6",{className:"text-xs font-bold mb-1",style:{color:(s==null?void 0:s.main)||"inherit"},...p,children:g}),p:({children:g,...p})=>c.jsx("span",{className:"block mb-4",style:{color:(s==null?void 0:s.main)||"inherit"},...p,children:g})},h=()=>{if(!e)return null;const g=e,p=g.split(`
`);return p.some(v=>v.trim().startsWith("- [ ]")||v.trim().startsWith("- [x]"))&&r?c.jsx("div",{children:p.map((v,T)=>{if(v.trim().startsWith("- [ ]")||v.trim().startsWith("- [x]")){const y=v.trim().startsWith("- [x]"),E=v.trim().replace(/^- \[[ x]\] /,"");return c.jsxs("div",{className:"flex items-start mb-1",children:[c.jsx("input",{type:"checkbox",checked:y,onChange:w=>{w.stopPropagation(),f(T,!y)},onClick:w=>{w.stopPropagation()},className:`mt-1 mr-2 h-4 w-4 rounded border-2 cursor-pointer transition-colors \r
                      border-gray-300 dark:border-gray-600 \r
                      bg-white dark:bg-gray-700 \r
                      text-blue-600 dark:text-blue-400 \r
                      focus:outline-none focus:ring-0 focus:border-transparent \r
                      checked:bg-blue-600 dark:checked:bg-blue-500 \r
                      checked:border-blue-600 dark:checked:border-blue-500 \r
                      hover:border-blue-400 dark:hover:border-blue-500`}),c.jsx("div",{className:y?"line-through opacity-60":"",style:{color:y?s.secondary||"inherit":s.main||"inherit"},children:c.jsx(If,{remarkPlugins:[ng],rehypePlugins:[vg],components:m,children:E})})]},`task-${T}`)}else return v.trim()?c.jsx(If,{remarkPlugins:[ng],rehypePlugins:[vg],components:m,children:v},`line-${T}`):c.jsx("br",{},`empty-${T}`)})}):c.jsx(If,{remarkPlugins:[ng],rehypePlugins:[vg],components:m,children:g})};return c.jsx("div",{className:`prose prose-sm max-w-none ${t}`,style:{fontFamily:"inherit"},children:h()})},sX=({isOpen:e,onClose:t,position:n,noteId:r,currentSettings:s={},onApply:o,onApplyToAll:i,onResetThisCard:l,onResetAllToDefault:u})=>{const{darkMode:f,isInitialized:m}=ca(),h=()=>({borderWidth:1,borderColor:"",shadowSize:"sm",backgroundColor:"",backgroundGradient:!1,gradientColors:["",""],borderRadius:8,maxLines:6,mainTextColor:"",secondaryTextColor:"",linkTextColor:"#3b82f6",buttonTextColor:"",referenceTextColor:"",textColor:""}),[g,p]=N.useState(()=>({...h(),...s}));N.useState(!1);const[b,v]=N.useState([]),[T,y]=N.useState([]),[E,w]=N.useState(!1),[I,j]=N.useState(!1);N.useEffect(()=>{if(!E&&e){console.log("🔧 [CardCustomizer] 设置面板打开，加载最新配置:",s);const G={...h()};Object.keys(s||{}).forEach(H=>{s[H]!==""&&s[H]!==void 0&&s[H]!==null&&(G[H]=s[H])}),p(G),console.log("🔧 [CardCustomizer] 设置已更新:",G)}},[e,E]);const _=async()=>{try{const $=localStorage.getItem("token");if(!$){console.log("未找到认证令牌，跳过加载配置方案"),v([]);return}const G=await fetch(`${zn}/notes/color-schemes`,{headers:{Authorization:`Bearer ${$}`}});if(G.ok){const H=await G.json();v(H||[]),console.log("配置方案加载成功:",H)}else{const H=await G.text();console.error("加载配置方案失败:",G.status,H)}}catch($){console.error("加载配置方案失败:",$),v([])}};N.useEffect(()=>{m&&_()},[m]),N.useEffect(()=>{e&&m&&(console.log("🔧 [CardCustomizer] 设置面板打开，重新加载配置方案"),_())},[e,m]),N.useEffect(()=>{m&&e&&(console.log("🔧 [CardCustomizer] 主题切换，重新加载颜色配置"),_(),p($=>({...$})))},[f,m,e]);const C=[{value:"none",label:"无阴影",class:"shadow-none",style:"none"},{value:"sm",label:"小阴影",class:"shadow-sm",style:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},{value:"md",label:"中阴影",class:"shadow-md",style:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},{value:"lg",label:"大阴影",class:"shadow-lg",style:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},{value:"xl",label:"超大阴影",class:"shadow-xl",style:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},{value:"2xl",label:"巨大阴影",class:"shadow-2xl",style:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"}],k=($,G)=>{p(H=>({...H,[$]:G}))},R=($,G)=>{const U=[...g.gradientColors&&g.gradientColors.length>=2?[...g.gradientColors]:["",""]];U[$]=G,p(ee=>({...ee,gradientColors:U}))},P=()=>{const ee=[...f?[["#2c3e50","#34495e"],["#232526","#414345"],["#1e3c72","#2a5298"],["#4b6cb7","#182848"],["#360033","#0b8793"],["#2c5364","#203a43"],["#0f0c29","#302b63"],["#24243e","#302b63"],["#1a1a2e","#16213e"],["#0f3460","#0e4b99"],["#2d1b69","#11998e"],["#8360c3","#2ebf91"],["#ee0979","#ff6a00"],["#134e5e","#71b280"],["#667db6","#0082c8"],["#2193b0","#6dd5ed"]]:[["#ffecd2","#fcb69f"],["#a8edea","#fed6e3"],["#d299c2","#fef9d7"],["#89f7fe","#66a6ff"],["#fdbb2d","#22c1c3"],["#ff9a9e","#fecfef"],["#a8e6cf","#dcedc1"],["#ffd3a5","#fd9853"],["#667eea","#764ba2"],["#f093fb","#f5576c"],["#4facfe","#00f2fe"],["#43e97b","#38f9d7"],["#fa709a","#fee140"],["#a8caba","#5d4e75"],["#ff6b6b","#feca57"],["#48cae4","#023e8a"]]].sort(()=>.5-Math.random()).slice(0,6);y(ee)},Y=()=>{console.log("🔄 [CardCustomizer] 开始重置到默认设置"),w(!0);const $=h();p($),console.log("🔄 [CardCustomizer] 默认设置已应用:",$),setTimeout(()=>{w(!1),console.log("🔄 [CardCustomizer] 重置完成")},300)},z=async()=>{b.length>=10||j(!0)},Q=async $=>{if(!$)return;const G=localStorage.getItem("token");if(!G){console.error("未找到认证令牌，无法保存配置方案");return}const H={name:$,borderColor:g.borderColor,backgroundColor:g.backgroundColor,backgroundGradient:g.backgroundGradient,gradientColors:[...g.gradientColors],shadowSize:g.shadowSize,borderRadius:g.borderRadius,borderWidth:g.borderWidth,mainTextColor:g.mainTextColor,secondaryTextColor:g.secondaryTextColor,linkTextColor:g.linkTextColor,buttonTextColor:g.buttonTextColor,textColor:g.textColor};try{const U=f?"dark":"light",ee=await fetch(`${zn}/notes/color-schemes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${G}`},body:JSON.stringify({name:$,schemeData:H,theme_mode:U})});if(ee.ok)console.log("配置方案保存成功"),_();else{const te=await ee.text();let V="保存配色方案失败";try{V=JSON.parse(te).error||V}catch{}console.error("保存配色方案失败:",ee.status,V)}}catch(U){console.error("保存配置方案失败:",U)}},M=$=>{console.log("应用配色方案:",$);const H={...$.settings||$};$.theme_mode&&$.theme_mode!==(f?"dark":"light")&&($.theme_mode==="dark"&&!f?(H.borderColor==="#374151"&&(H.borderColor="#e5e7eb"),H.backgroundColor==="#1f2937"&&(H.backgroundColor="#ffffff")):$.theme_mode==="light"&&f&&(H.borderColor==="#e5e7eb"&&(H.borderColor="#374151"),H.backgroundColor==="#ffffff"&&(H.backgroundColor="#1f2937"))),p(U=>({...U,borderColor:H.borderColor,backgroundColor:H.backgroundColor,backgroundGradient:H.backgroundGradient,gradientColors:Array.isArray(H.gradientColors)?[...H.gradientColors]:[],shadowSize:H.shadowSize,borderRadius:H.borderRadius,borderWidth:H.borderWidth,mainTextColor:H.mainTextColor||H.textColor,secondaryTextColor:H.secondaryTextColor||H.textColor,linkTextColor:H.linkTextColor||H.textColor,buttonTextColor:H.buttonTextColor||H.textColor,referenceTextColor:H.referenceTextColor||H.textColor,textColor:H.textColor}))},le=async $=>{try{const G=localStorage.getItem("token");if(!G){console.error("未找到认证令牌，无法删除配置方案");return}const H=await fetch(`${zn}/notes/color-schemes/${$}`,{method:"DELETE",headers:{Authorization:`Bearer ${G}`}});if(H.ok)console.log("配置方案删除成功"),await _();else{const U=await H.text();console.error("删除配置方案失败:",H.status,U)}}catch(G){console.error("删除配置方案失败:",G)}},Ne=()=>{const $=C.find(H=>H.value===g.shadowSize),G={borderWidth:`${g.borderWidth}px`,borderColor:g.borderColor,borderStyle:"solid",borderRadius:`${g.borderRadius}px`,boxShadow:($==null?void 0:$.style)==="none"?"none":($==null?void 0:$.style)||"0 1px 2px 0 rgba(0, 0, 0, 0.05)",color:g.mainTextColor||g.textColor};return g.backgroundGradient?G.background=`linear-gradient(135deg, ${g.gradientColors[0]}, ${g.gradientColors[1]})`:G.backgroundColor=g.backgroundColor,G};return N.useEffect(()=>{if(e){document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${window.scrollY}px`;const $=window.scrollY;return()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.top="",window.scrollTo(0,$)}}},[e]),e?Fr.createPortal(c.jsxs(c.Fragment,{children:[c.jsx("style",{children:`
          .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
          }
          .scrollbar-hide::-webkit-scrollbar {
            display: none;
          }
          body {
            overflow: hidden;
          }
        `}),c.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center pointer-events-none",children:[c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t,onTouchMove:$=>{$.preventDefault()},style:{touchAction:"none"}}),c.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto scrollbar-hide smooth-scroll-container scrollbar-smooth pointer-events-auto",style:{backgroundColor:"var(--theme-surface)",border:"1px solid var(--theme-border)",scrollbarWidth:"none",msOverflowStyle:"none"},onTouchStart:$=>{$.stopPropagation()},onTouchMove:$=>{$.stopPropagation()},onTouchEnd:$=>{$.stopPropagation()},children:[c.jsxs("div",{className:"sticky top-0 z-10 p-4 border-b relative",style:{borderColor:"var(--theme-border)",backgroundColor:"var(--theme-surface)"},children:[c.jsx("button",{onClick:t,className:"absolute top-2 right-2 p-1 rounded-md hover:bg-theme-elevated transition-colors z-20",style:{color:"var(--theme-text-secondary)"},children:c.jsx(wn,{size:18})}),c.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--theme-text)"},children:"预览效果"}),c.jsxs("div",{className:"p-3 h-24 overflow-hidden",style:Ne(),children:[c.jsx("div",{className:"text-sm font-medium mb-1",style:{color:g.mainTextColor||g.textColor},children:"示例笔记标题"}),c.jsx("div",{className:"text-xs leading-relaxed",style:{color:g.secondaryTextColor||g.textColor},children:"这是一个示例笔记内容，用于预览卡片样式效果。"}),c.jsx("div",{className:"mt-2 flex justify-end",children:c.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 border",style:{color:g.linkTextColor||g.textColor},children:"示例"})})]})]}),c.jsxs("div",{className:"p-3 space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("input",{type:"color",value:g.borderColor,onChange:$=>k("borderColor",$.target.value),className:"w-10 h-10 rounded-lg border-2 cursor-pointer",style:{borderColor:"var(--theme-border)"}})}),c.jsx("label",{className:"text-xs font-medium mt-1",style:{color:"var(--theme-text)"},children:"边框"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("input",{type:"color",value:g.backgroundColor,onChange:$=>k("backgroundColor",$.target.value),className:"w-10 h-10 rounded-lg border-2 cursor-pointer",style:{borderColor:"var(--theme-border)"}})}),c.jsx("label",{className:"text-xs font-medium mt-1",style:{color:"var(--theme-text)"},children:"背景"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--theme-text)"},children:"阴影大小"}),c.jsx("div",{className:"grid grid-cols-6 gap-1",children:C.map(($,G)=>c.jsx("button",{onClick:()=>k("shadowSize",$.value),className:`px-2 py-1 text-xs rounded border transition-colors ${g.shadowSize===$.value?"bg-blue-500 text-white border-blue-500":"border-gray-300 hover:bg-theme-elevated"}`,style:{backgroundColor:g.shadowSize===$.value?"#3b82f6":"var(--theme-surface)",borderColor:g.shadowSize===$.value?"#3b82f6":"var(--theme-border)",color:g.shadowSize===$.value?"white":"var(--theme-text)"},title:$.label,children:G},$.value))})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--theme-text)"},children:"边框宽度"}),c.jsx("input",{type:"range",min:"0",max:"5",value:g.borderWidth,onChange:$=>k("borderWidth",parseInt($.target.value)),className:"w-full"}),c.jsxs("div",{className:"text-xs text-center mt-0.5",style:{color:"var(--theme-text-secondary)"},children:[g.borderWidth,"px"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--theme-text)"},children:"圆角大小"}),c.jsx("input",{type:"range",min:"0",max:"20",value:g.borderRadius,onChange:$=>k("borderRadius",parseInt($.target.value)),className:"w-full"}),c.jsxs("div",{className:"text-xs text-center mt-0.5",style:{color:"var(--theme-text-secondary)"},children:[g.borderRadius,"px"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--theme-text)"},children:"显示行数"}),c.jsx("input",{type:"range",min:"3",max:"10",value:g.maxLines,onChange:$=>k("maxLines",parseInt($.target.value)),className:"w-full"}),c.jsxs("div",{className:"text-xs text-center mt-0.5",style:{color:"var(--theme-text-secondary)"},children:[g.maxLines,"行"]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("label",{className:"text-xs font-medium",style:{color:"var(--theme-text)"},children:"渐变背景"}),c.jsxs("label",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"checkbox",checked:g.backgroundGradient,onChange:$=>k("backgroundGradient",$.target.checked),className:"rounded"}),c.jsx("span",{className:"text-xs",style:{color:"var(--theme-text-secondary)"},children:"启用"})]})]}),c.jsx("div",{children:c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-xs font-medium",style:{color:"var(--theme-text)"},children:"智能配色"}),c.jsxs("button",{onClick:P,className:"flex items-center gap-1 px-2 py-1 text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded hover:from-purple-600 hover:to-pink-600 transition-colors duration-200",title:`生成${f?"深色系":"浅色系"}随机渐变`,children:[c.jsx(hF,{size:10}),"生成"]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-1",children:T.map(($,G)=>{const H=g.gradientColors[0]===$[0]&&g.gradientColors[1]===$[1];return c.jsx("button",{onClick:()=>{k("backgroundGradient",!0),k("gradientColors",$)},className:`h-8 rounded border transition-colors relative ${H?"border-blue-500 border-2":"border-gray-300"}`,style:{background:`linear-gradient(135deg, ${$[0]}, ${$[1]})`},title:`${$[0]} → ${$[1]} - 点击应用渐变背景`,children:H&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-4 h-4 bg-white rounded-full flex items-center justify-center shadow-md",children:c.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})},G)})})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium mb-2 block",style:{color:"var(--theme-text)"},children:"手动设置"}),c.jsxs("div",{className:"flex justify-center gap-2",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"color",value:g.gradientColors[0]||"#ffffff",onChange:$=>R(0,$.target.value),className:"w-10 h-10 rounded-lg border-2 cursor-pointer",style:{borderColor:"var(--theme-border)"}}),c.jsx("span",{className:"text-xs mt-1",style:{color:"var(--theme-text-secondary)"},children:"起始"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"color",value:g.gradientColors[1]||"#ffffff",onChange:$=>R(1,$.target.value),className:"w-10 h-10 rounded-lg border-2 cursor-pointer",style:{borderColor:"var(--theme-border)"}}),c.jsx("span",{className:"text-xs mt-1",style:{color:"var(--theme-text-secondary)"},children:"结束"})]})]})]})]})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"grid grid-cols-5 gap-1",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("input",{type:"color",value:g.mainTextColor,onChange:$=>k("mainTextColor",$.target.value),className:"w-10 h-10 rounded-lg border-2 cursor-pointer",style:{borderColor:"var(--theme-border)"}})}),c.jsx("label",{className:"text-xs font-medium mt-1",style:{color:"var(--theme-text-secondary)"},children:"主要"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("input",{type:"color",value:g.secondaryTextColor,onChange:$=>k("secondaryTextColor",$.target.value),className:"w-10 h-10 rounded-lg border-2 cursor-pointer",style:{borderColor:"var(--theme-border)"}})}),c.jsx("label",{className:"text-xs font-medium mt-1",style:{color:"var(--theme-text-secondary)"},children:"次要"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("input",{type:"color",value:g.linkTextColor,onChange:$=>k("linkTextColor",$.target.value),className:"w-10 h-10 rounded-lg border-2 cursor-pointer",style:{borderColor:"var(--theme-border)"}})}),c.jsx("label",{className:"text-xs font-medium mt-1",style:{color:"var(--theme-text-secondary)"},children:"链接"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("input",{type:"color",value:g.buttonTextColor,onChange:$=>k("buttonTextColor",$.target.value),className:"w-10 h-10 rounded-lg border-2 cursor-pointer",style:{borderColor:"var(--theme-border)"}})}),c.jsx("label",{className:"text-xs font-medium mt-1",style:{color:"var(--theme-text-secondary)"},children:"按钮"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("input",{type:"color",value:g.referenceTextColor,onChange:$=>k("referenceTextColor",$.target.value),className:"w-10 h-10 rounded-lg border-2 cursor-pointer",style:{borderColor:"var(--theme-border)"}})}),c.jsx("label",{className:"text-xs font-medium mt-1",style:{color:"var(--theme-text-secondary)"},children:"引用"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--theme-text-secondary)"},children:"快速选择"}),c.jsx("div",{className:"grid grid-cols-8 gap-1",children:["#000000","#374151","#6b7280","#9ca3af","#dc2626","#ea580c","#d97706","#65a30d","#059669","#0891b2","#2563eb","#7c3aed","#c026d3","#e11d48","#be123c","#7f1d1d"].map($=>{const G=g.mainTextColor===$;return c.jsx("button",{onClick:()=>{k("mainTextColor",$),k("secondaryTextColor",$),k("linkTextColor",$),k("buttonTextColor",$),k("referenceTextColor",$),k("textColor",$)},className:`w-5 h-5 rounded border transition-colors relative ${G?"border-blue-500 border-2":"border-gray-300"}`,style:{backgroundColor:$},title:`应用 ${$} 到所有文本`,children:G&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-3 h-3 bg-white rounded-full flex items-center justify-center shadow-sm",children:c.jsx("svg",{className:"w-2 h-2 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})},$)})})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"text-sm font-medium",style:{color:"var(--theme-text)"},children:"配置方案"}),c.jsxs("button",{onClick:z,disabled:b.length>=10,className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition-colors ${b.length>=10?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,title:b.length>=10?"最多保存10个配置方案":"保存当前配置",children:[c.jsx(za,{size:12}),"保存配置"]})]}),b.length>0&&c.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-40 overflow-y-auto scrollbar-hide smooth-scroll-container scrollbar-smooth",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:b.map($=>{const G=$.settings||$,H=g.backgroundColor===G.backgroundColor&&g.backgroundGradient===G.backgroundGradient&&g.gradientColors[0]===G.gradientColors[0]&&g.gradientColors[1]===G.gradientColors[1]&&g.borderColor===G.borderColor&&g.borderWidth===G.borderWidth&&g.mainTextColor===G.mainTextColor&&g.secondaryTextColor===G.secondaryTextColor;return c.jsxs("div",{className:"relative group",children:[c.jsx("button",{onClick:()=>M($),className:`w-full h-8 rounded border transition-colors relative ${H?"border-blue-500 border-2":"border-gray-300"}`,style:{backgroundColor:G.backgroundGradient?void 0:G.backgroundColor,background:G.backgroundGradient?`linear-gradient(135deg, ${G.gradientColors[0]}, ${G.gradientColors[1]})`:void 0},title:`${$.name} - 点击应用此配置`,children:H&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-4 h-4 bg-white rounded-full flex items-center justify-center shadow-md",children:c.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})}),c.jsx("button",{onClick:U=>{U.stopPropagation(),le($.id)},className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-red-600",title:`删除配置方案: ${$.name}`,children:c.jsx("svg",{className:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-1 px-2 py-1 bg-black text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-10",children:[$.name,$.theme_mode&&c.jsxs("span",{className:$.theme_mode==="dark"?"text-gray-300 ml-1":"text-yellow-300 ml-1",children:["(",$.theme_mode==="dark"?"深色":"浅色","主题)"]}),H&&c.jsx("span",{className:"text-blue-300 ml-1",children:"(当前)"})]})]},$.id)})}),b.length===0&&c.jsx("div",{className:"text-xs text-center py-4 border-2 border-dashed rounded",style:{color:"var(--theme-text-secondary)",borderColor:"var(--theme-border)"},children:"暂无保存的配置方案"})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 border-t",style:{borderColor:"var(--theme-border)"},children:[c.jsxs("div",{className:"flex gap-1",children:[c.jsxs("button",{onClick:$=>{$.preventDefault(),$.stopPropagation(),console.log('🔄 [CardCustomizer] 点击"恢复此卡片"按钮'),l?l():(console.log("🔄 [CardCustomizer] isResetting状态:",E),Y())},disabled:E,className:`flex items-center gap-1 px-2 py-1 text-xs transition-colors ${E?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:text-gray-800 hover:bg-theme-elevated cursor-pointer"}`,style:{color:E?"#9ca3af":"var(--theme-text-secondary)",pointerEvents:E?"none":"auto"},children:[c.jsx(g2,{size:12,className:E?"animate-spin":""}),E?"恢复中":"恢复此卡片"]}),u&&c.jsxs("button",{onClick:$=>{$.preventDefault(),$.stopPropagation(),console.log('🔄 [CardCustomizer] 点击"全部恢复默认"按钮'),u()},className:"flex items-center gap-1 px-2 py-1 text-xs text-red-600 hover:text-red-800 hover:bg-red-50 transition-colors cursor-pointer",title:"删除所有笔记的个性化设置，恢复到默认状态",children:[c.jsx(As,{size:12}),"全部恢复默认"]})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsxs("button",{onClick:()=>{console.log('🎨 [CardCustomizer] 点击"应用到此卡片"按钮, settings:',g),o(g)},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors",children:[c.jsx(Br,{size:12}),"应用到此卡片"]}),c.jsxs("button",{onClick:()=>{console.log('🌍 [CardCustomizer] 点击"应用到全部"按钮, settings:',g),i(g)},className:"flex items-center gap-1 px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors",children:[c.jsx(Br,{size:12}),"应用到全部"]})]})]})]})]}),c.jsx(q_,{isOpen:I,onClose:()=>j(!1),onConfirm:Q,title:"保存配置方案",placeholder:"请输入配置方案名称",maxLength:20})]}),document.body):null},bl={backdropEnter:"",backdropExit:"",dialogEnter:"",dialogExit:"",duration:""},oX=({isOpen:e,onCancel:t,onConfirm:n,title:r="确认操作",message:s,confirmText:o="确认",cancelText:i="取消",type:l="warning"})=>{const[u,f]=N.useState(!1),[m,h]=N.useState(!1);if(N.useEffect(()=>{if(e)h(!0),f(!0);else{f(!1);const T=setTimeout(()=>{h(!1)},0);return()=>clearTimeout(T)}},[e]),!m)return null;const p=(()=>{switch(l){case"danger":return{iconColor:"text-red-500",confirmBg:"bg-red-500 hover:bg-red-600",borderColor:"border-red-200"};case"info":return{iconColor:"text-blue-500",confirmBg:"bg-blue-500 hover:bg-blue-600",borderColor:"border-blue-200"};default:return{iconColor:"text-yellow-500",confirmBg:"bg-yellow-500 hover:bg-yellow-600",borderColor:"border-yellow-200"}}})(),b=()=>{n(),t()},v=()=>{t()};return Fr.createPortal(c.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center",children:[c.jsx("div",{className:`absolute inset-0 bg-black bg-opacity-50 ${bl.duration} ${u?bl.backdropEnter:bl.backdropExit}`,onClick:v}),c.jsxs("div",{className:`relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 border-2 ${p.borderColor} ${bl.duration} ${u?bl.dialogEnter:bl.dialogExit}`,style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)",transformOrigin:"center"},children:[c.jsx("button",{onClick:v,className:"absolute top-3 right-3 p-1 rounded-full hover:bg-theme-elevated transition-colors",style:{color:"var(--theme-text-secondary)"},children:c.jsx(wn,{size:18})}),c.jsxs("div",{className:"p-6 pb-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:`p-2 rounded-full bg-opacity-10 ${p.iconColor}`,children:c.jsx(f2,{size:24,className:p.iconColor})}),c.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--theme-text)"},children:r})]}),c.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-line",style:{color:"var(--theme-text-secondary)"},children:s})]}),c.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 pt-2 border-t",style:{borderColor:"var(--theme-border)"},children:[c.jsx("button",{onClick:v,className:"px-4 py-2 text-sm rounded-md border transition-colors",style:{color:"var(--theme-text-secondary)",borderColor:"var(--theme-border)",backgroundColor:"var(--theme-elevated)"},onMouseEnter:T=>{T.target.style.backgroundColor="var(--theme-hover)"},onMouseLeave:T=>{T.target.style.backgroundColor="var(--theme-elevated)"},children:i}),c.jsx("button",{onClick:b,className:`px-4 py-2 text-sm text-white rounded-md transition-colors ${p.confirmBg}`,children:o})]})]})]}),document.body)},Ih=e=>{let t;return e.includes("T")&&e.includes("Z")?(t=a1(e),t=No(t,"Asia/Shanghai")):e.includes("-")&&e.includes(":")?(t=new Date(e),t=No(t,"Asia/Shanghai")):(t=new Date(e),isNaN(t.getTime())||(t=No(t,"Asia/Shanghai"))),t},qy=e=>{if(!e)return"";try{const t=Ih(e);if(isNaN(t.getTime()))return console.warn("无效的日期格式:",e),e;const n=new Date,s=t.getTime()-n.getTime()>0,o=VB(t,n,{locale:Rn,includeSeconds:!0});return s?`${o}后`:`${o}前`}catch(t){return console.error("相对时间格式化错误:",t,"原始日期:",e),e}},cc=e=>{if(!e)return"";try{const t=Ih(e);return isNaN(t.getTime())?(console.warn("无效的日期格式:",e),e):Tt(t,"yyyy年MM月dd日 HH:mm (中国时间)",{locale:Rn})}catch(t){return console.error("日期格式化错误:",t,"原始日期:",e),e}},jh=(e,t)=>{const n=!!e.is_pinned,r=!!t.is_pinned;if(n!==r)return r?1:-1;const s=Ih(e.created_at),o=Ih(t.created_at),i=new Date,l=s>i,u=o>i;return l!==u?l?-1:1:l&&u?s-o:o-s},bg={backdropEnter:"",backdropExit:"",modalEnter:"",modalExit:"",duration:""},iX=({isOpen:e,onClose:t,noteId:n,noteTitle:r,onNoteClick:s,triggerPosition:o=null})=>{var j,_;const[i,l]=N.useState({incoming:[],outgoing:[]}),[u,f]=N.useState(!1),[m,h]=N.useState(null),[g,p]=N.useState(!1),[b,v]=N.useState(!1),[T,y]=N.useState({top:"50%",left:"50%",transform:"translate(-50%, -50%)"});N.useEffect(()=>{if(e)v(!0),p(!0),y({top:"50%",left:"50%",transform:"translate(-50%, -50%)"});else{p(!1);const C=setTimeout(()=>{v(!1)},0);return()=>clearTimeout(C)}},[e,o]),N.useEffect(()=>{if(e&&n){E();const C=setInterval(E,3e4);return()=>{clearInterval(C)}}},[e,n]);const E=async()=>{f(!0),h(null);try{const C=await x2(n);l(C)}catch(C){h("加载引用关系失败"),console.error("加载引用关系失败:",C)}finally{f(!1)}},w=C=>{s&&s(C),t()},I=C=>{var Y;if(!C)return"无标题";const R=(Y=C.split(`
`)[0])==null?void 0:Y.trim();if(R!=null&&R.startsWith("#")){let z=R.replace(/^#+\s*/,"");return z=z.replace(/<[^>]*>/g,""),z.trim()||"无标题"}if(R!=null&&R.match(/^[-*+]\s+/)){let z=R.replace(/^[-*+]\s+/,"").trim();return z=z.replace(/<[^>]*>/g,""),(z==null?void 0:z.length)>50?z.substring(0,50)+"...":z||"无标题"}let P=R==null?void 0:R.replace(/[#*`_~\[\]()]/g,"").trim();return P=P==null?void 0:P.replace(/<[^>]*>/g,"").trim(),(P==null?void 0:P.length)>50?P.substring(0,50)+"...":P||"无标题"};return b?Fr.createPortal(c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[10000]",onClick:t}),c.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-references-modal w-full mx-4 max-h-[80vh] overflow-hidden ${bg.duration} ${g?bg.modalEnter:bg.modalExit}`,style:{backgroundColor:"var(--theme-elevated)",border:"1px solid var(--theme-border)",transformOrigin:"center",position:"fixed",zIndex:10001,...T},onClick:C=>C.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:"var(--theme-border)"},children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(m2,{className:"mr-3",size:20,style:{color:"var(--theme-primary)"}}),c.jsx("h2",{className:"text-xl font-semibold",style:{color:"var(--theme-text)"},children:"双向链接"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:E,disabled:u,className:"p-2 rounded-md transition-colors",style:{color:"var(--theme-text-secondary)"},onMouseEnter:C=>C.target.style.backgroundColor="var(--theme-elevated)",onMouseLeave:C=>C.target.style.backgroundColor="transparent",title:"刷新双向链接",children:c.jsx(g2,{size:18,className:u?"animate-spin":""})}),c.jsx("button",{onClick:t,className:"p-2 rounded-md transition-colors",style:{color:"var(--theme-text-secondary)"},onMouseEnter:C=>C.target.style.backgroundColor="var(--theme-elevated)",onMouseLeave:C=>C.target.style.backgroundColor="transparent",children:c.jsx(wn,{size:20})})]})]}),c.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh] smooth-scroll-container scrollbar-smooth",children:u?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--theme-primary)"}}),c.jsx("span",{className:"ml-3",style:{color:"var(--theme-text-secondary)"},children:"加载中..."})]}):m?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{style:{color:"var(--theme-error)"},children:m}),c.jsx("button",{onClick:E,className:"mt-4 px-4 py-2 rounded-md transition-colors",style:{backgroundColor:"var(--theme-primary)",color:"white"},children:"重试"})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(qP,{className:"mr-2",style:{color:"var(--theme-primary)"}}),c.jsxs("h3",{className:"text-lg font-medium",style:{color:"var(--theme-text)"},children:["被引用 (",((j=i.incoming)==null?void 0:j.length)||0,")"]})]}),i.incoming&&i.incoming.length>0?c.jsx("div",{className:"space-y-3",children:i.incoming.map(C=>c.jsxs("div",{className:"p-4 rounded-lg border cursor-pointer transition-all hover:shadow-md",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)"},onClick:()=>w(C.from_note_id),onMouseEnter:k=>k.target.style.backgroundColor="var(--theme-elevated)",onMouseLeave:k=>k.target.style.backgroundColor="var(--theme-surface)",children:[c.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--theme-text)"},children:I(C.from_note_content)}),c.jsxs("p",{className:"text-sm",style:{color:"var(--theme-text-secondary)"},children:['引用文本: "',C.reference_text,'"']}),c.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--theme-text-secondary)"},children:["创建时间: ",cc(C.created_at)]})]},`incoming-${C.id}`))}):c.jsx("p",{className:"text-center py-4",style:{color:"var(--theme-text-secondary)"},children:"暂无其他笔记引用此笔记"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(XP,{className:"mr-2",style:{color:"var(--theme-primary)"}}),c.jsxs("h3",{className:"text-lg font-medium",style:{color:"var(--theme-text)"},children:["引用 (",((_=i.outgoing)==null?void 0:_.length)||0,")"]})]}),i.outgoing&&i.outgoing.length>0?c.jsx("div",{className:"space-y-3",children:i.outgoing.map(C=>c.jsxs("div",{className:"p-4 rounded-lg border cursor-pointer transition-all hover:shadow-md",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)"},onClick:()=>w(C.to_note_id),onMouseEnter:k=>k.target.style.backgroundColor="var(--theme-elevated)",onMouseLeave:k=>k.target.style.backgroundColor="var(--theme-surface)",children:[c.jsx("h4",{className:"font-medium mb-2",style:{color:"var(--theme-text)"},children:I(C.to_note_content)}),c.jsxs("p",{className:"text-sm",style:{color:"var(--theme-text-secondary)"},children:['引用文本: "',C.reference_text,'"']}),c.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--theme-text-secondary)"},children:["创建时间: ",cc(C.created_at)]})]},`outgoing-${C.id}`))}):c.jsx("p",{className:"text-center py-4",style:{color:"var(--theme-text-secondary)"},children:"此笔记暂未引用其他笔记"})]})]})})]})]}),document.body):null},aX=({isOpen:e,onClose:t,noteId:n,noteTitle:r,noteContent:s,noteTags:o,history:i,onNoteClick:l})=>{const[u,f]=N.useState(null),[m,h]=N.useState(!1),[g,p]=N.useState(null);if(!e)return null;const b=async(w,I)=>{try{await navigator.clipboard.writeText(w),p(I),setTimeout(()=>p(null),2e3)}catch(j){console.error("复制内容失败:",j)}},v=w=>{switch(w){case"create":return"创建";case"edit":return"编辑";case"delete":return"删除";default:return w}},T=w=>{switch(w){case"create":return"text-green-600 dark:text-green-400";case"edit":return"text-blue-600 dark:text-blue-400";case"delete":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}},y=(w,I)=>{const j=w.split(`
`),_=I.split(`
`),C=[];let k=Math.max(j.length,_.length);for(let R=0;R<k;R++){const P=j[R]||"",Y=_[R]||"";P===Y?C.push({type:"same",content:P}):P?Y?(C.push({type:"removed",content:P}),C.push({type:"added",content:Y})):C.push({type:"removed",content:P}):C.push({type:"added",content:Y})}return C},E=(w,I)=>{const j=[],_=R=>R?typeof R=="string"?R.split(",").map(P=>P.trim()).filter(P=>P):Array.isArray(R)?R.map(P=>typeof P=="object"&&P!==null?P.name:P).filter(P=>P):[]:[],C=_(w),k=_(I);return C.forEach(R=>{k.includes(R)||j.push({type:"removed",content:R})}),k.forEach(R=>{C.includes(R)||j.push({type:"added",content:R})}),C.forEach(R=>{k.includes(R)&&j.push({type:"same",content:R})}),j};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",style:{backgroundColor:"var(--theme-elevated)"},children:[c.jsxs("div",{className:"flex items-center justify-between p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(ns,{className:"text-blue-600 dark:text-blue-400",size:24}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"笔记历史记录"}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r||"无标题笔记"," • ",i.length," 条记录"]})]})]}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:c.jsx(wn,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),c.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[c.jsx("div",{className:"w-1/3 overflow-y-auto",children:c.jsx("div",{className:"p-4 space-y-3",children:i.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[c.jsx(ns,{size:48,className:"mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"暂无历史记录"}),c.jsx("p",{className:"text-sm mt-2",children:"最近30天的编辑记录将显示在这里"})]}):i.map((w,I)=>c.jsxs("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${(u==null?void 0:u.id)===w.id?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>f(w),children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:`text-sm font-medium ${T(w.operation_type)}`,children:v(w.operation_type)}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:qy(w.created_at)})]}),c.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:cc(w.created_at)}),c.jsxs("div",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300 line-clamp-2",children:[w.content?w.content.substring(0,100):"无内容",w.content&&w.content.length>100&&"..."]})]},w.id))})}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:u?c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T(u.operation_type)}`,children:v(u.operation_type)}),c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:cc(u.created_at)})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("button",{onClick:()=>h(!m),className:"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:[m?c.jsx(sF,{size:16}):c.jsx(oF,{size:16}),c.jsx("span",{className:"ml-1",children:m?"隐藏差异":"显示差异"})]}),c.jsxs("button",{onClick:()=>b(u.content,i.indexOf(u)),className:"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:[c.jsx(tF,{size:16}),c.jsx("span",{className:"ml-1",children:g===i.indexOf(u)?"已复制":"复制"})]})]})]}),m&&o?c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"标签差异"}),c.jsx("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--theme-elevated)"},children:E(o,u.tags).map((w,I)=>c.jsxs("span",{className:`inline-block px-2 py-1 text-xs rounded-full mr-2 mb-2 ${w.type==="added"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":w.type==="removed"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200":"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200"}`,children:[w.type==="added"&&"+ ",w.type==="removed"&&"- ",w.content]},I))})]}):u.tags&&u.tags.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"标签"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:typeof u.tags=="string"?u.tags.split(",").map((w,I)=>c.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:w.trim()},I)):u.tags.map((w,I)=>c.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:w},I))})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"内容"}),m&&s?c.jsx("div",{className:"rounded-lg p-4 max-h-96 overflow-y-auto",style:{backgroundColor:"var(--theme-elevated)"},children:y(s,u.content||"").map((w,I)=>c.jsxs("div",{className:`py-1 px-2 ${w.type==="added"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":w.type==="removed"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200":"text-gray-700 dark:text-gray-300"}`,children:[w.type==="added"&&"+ ",w.type==="removed"&&"- ",w.content||" "]},I))}):c.jsx("div",{className:"rounded-lg p-4 max-h-96 overflow-y-auto",style:{backgroundColor:"var(--theme-elevated)"},children:c.jsx(B6,{content:u.content||""})})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ns,{size:48,className:"mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"选择一条历史记录查看详情"})]})})})]}),c.jsx("div",{className:"p-4",style:{backgroundColor:"var(--theme-elevated)"},children:c.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[c.jsx("span",{children:"仅显示最近30天的编辑记录"}),c.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"关闭"})]})})]})})};class lX{constructor(){this.listeners={}}on(t,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n)}off(t,n){if(!this.listeners[t])return;const r=this.listeners[t].indexOf(n);r>-1&&this.listeners[t].splice(r,1)}emit(t,n){this.listeners[t]&&this.listeners[t].forEach(r=>{try{r(n)}catch(s){console.error(`全局事件 ${t} 处理失败:`,s)}})}removeAllListeners(t){t?delete this.listeners[t]:this.listeners={}}}const Vo=new lX,qo={CARD_SETTINGS_GLOBAL_UPDATE:"card_settings_global_update",CARD_SETTINGS_RESET_ALL:"card_settings_reset_all",NOTE_REFERENCES_UPDATED:"note_references_updated"},cX=Object.freeze(Object.defineProperty({__proto__:null,GLOBAL_EVENTS:qo,default:Vo},Symbol.toStringTag,{value:"Module"})),W2=({note:e,onEdit:t,onDelete:n,onPin:r,onFavorite:s,onNoteClick:o,notes:i=[]})=>{[...rs];const[l,u]=N.useState(!1),f=ne=>ne?/!\[.*?\]\([^)]+\)/g.test(ne):!1,[m,h]=N.useState({}),[g,p]=N.useState(!1),[b,v]=N.useState(!1),[T,y]=N.useState(!1),[E,w]=N.useState(!1),[I,j]=N.useState(!1),[_,C]=N.useState(0),[k,R]=N.useState({top:0,left:0}),[P,Y]=N.useState(null),[z,Q]=N.useState(null),[M,le]=N.useState(!1),[Ne,$]=N.useState({}),[G,H]=N.useState({}),[U,ee]=N.useState(!1),[te,V]=N.useState({x:0,y:0}),[xe,we]=N.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:"warning"}),[Le,Ve]=N.useState(!1),[Me,Ke]=N.useState(null),[De,nt]=N.useState({incoming:0,outgoing:0}),[ut,dt]=N.useState({incoming:[],outgoing:[]}),[D,ue]=N.useState(!1),[F,A]=N.useState([]);N.useState(()=>new w2);const{isEditing:L,startEditing:K,stopEditing:oe}=DC(),{darkMode:ie,isInitialized:J}=ca(),me=N.useRef(null),be=N.useRef(null),ye=N.useRef(null),je=N.useRef(null),X=L(e.id),Z=ne=>ei.parseContentForMoodAndWeather(ne);N.useEffect(()=>{if(e&&e.content){const{mood:ne,weather:fe}=Z(e.content);Y(ne),Q(fe)}else Y(null),Q(null)},[e.content]);const pe=ne=>ei.removeAllMoodAndWeather(ne),ge=()=>{if(!g&&be.current){const ne=be.current.getBoundingClientRect(),fe=256,Se=160;let Ie=ne.left,We=ne.bottom+8;We+Se>window.innerHeight-10&&(We=ne.top-Se-8,We<10&&(We=(window.innerHeight-Se)/2)),Ie+fe>window.innerWidth-10&&(Ie=window.innerWidth-fe-10),Ie<10&&(Ie=10),We<10&&(We=10),R({top:We,left:Ie})}p(!g)},Ee=()=>{K(e.id)},He=ne=>{ne.preventDefault(),ne.stopPropagation(),X||(clearTimeout(je.current),Ee())},Ye=ne=>{ne.preventDefault(),ne.stopPropagation(),je.current=setTimeout(()=>{},200)},pt=ne=>{ne.preventDefault(),ne.stopPropagation();{let Ie=ne.clientX,We=ne.clientY+8;We+160>window.innerHeight-10&&(We=ne.clientY-160-8,We<10&&(We=(window.innerHeight-160)/2)),Ie+256>window.innerWidth-10&&(Ie=window.innerWidth-256-10),Ie<10&&(Ie=10),We<10&&(We=10),V({x:Ie,y:We}),ee(!0),p(!1)}};N.useEffect(()=>{const ne=Ie=>{me.current&&!me.current.contains(Ie.target)&&be.current&&!be.current.contains(Ie.target)&&p(!1),ee(!1)},fe=()=>{p(!1),ee(!1)},Se=()=>{p(!1),ee(!1)};if(g||U)return document.addEventListener("mousedown",ne),window.addEventListener("scroll",fe,!0),window.addEventListener("resize",Se),()=>{document.removeEventListener("mousedown",ne),window.removeEventListener("scroll",fe,!0),window.removeEventListener("resize",Se)}},[g,U]),N.useEffect(()=>{(async()=>{try{const Ie=et.getTagColors();h(Ie),w(!0)}catch(Ie){console.error("加载颜色数据失败:",Ie);const We=JSON.parse(localStorage.getItem("tagColors")||"{}");h(We),w(!0)}})();const fe=Ie=>{h(Ie)},Se=()=>{C(Ie=>Ie+1)};return et.addListener("tagColorsChanged",fe),et.addListener("userPreferencesChanged",Se),()=>{et.removeListener("tagColorsChanged",fe),et.removeListener("userPreferencesChanged",Se)}},[]),N.useEffect(()=>{const ne=async Se=>{try{const{fetchTagColors:Ie}=await ic(()=>Promise.resolve().then(()=>s1),void 0),We=await Ie();h(We),localStorage.setItem("tagColors",JSON.stringify(We))}catch(Ie){console.error("同步标签颜色失败:",Ie);const{tagName:We,color:Vt}=Se.detail||{};We&&Vt&&h(Sn=>({...Sn,[We]:Vt}))}},fe=Se=>{const{selectedColor:Ie}=Se.detail||{};Ie&&(localStorage.setItem("lastSelectedTagColor",Ie),w(We=>!We),setTimeout(()=>w(We=>!We),10))};return window.addEventListener("tagColorsUpdated",ne),window.addEventListener("selectedColorChanged",fe),()=>{window.removeEventListener("tagColorsUpdated",ne),window.removeEventListener("selectedColorChanged",fe)}},[]),N.useEffect(()=>{J&&(async()=>{try{const fe=ie?"dark":"light",Se=await du(fe);if(H(Se),e.id)try{const Ie=await kf(e.id,fe);$(Ie)}catch{$({})}j(!0)}catch(fe){console.error("加载卡片设置失败:",fe),H({}),$({}),j(!0)}})()},[e.id,J,ie]),N.useEffect(()=>{const ne=async()=>{var Ie,We;if(e!=null&&e.id)try{const Vt=await x2(e.id);dt(Vt),nt({incoming:((Ie=Vt.incoming)==null?void 0:Ie.length)||0,outgoing:((We=Vt.outgoing)==null?void 0:We.length)||0})}catch(Vt){console.error("获取引用关系数据失败:",Vt)}};ne();const fe=setInterval(ne,3e4),Se=Ie=>{const{noteId:We}=Ie||{};We===e.id&&(console.log(`[NoteCard] 收到引用关系更新事件，重新加载笔记${e.id}的引用数据`),ne())};return Vo.on(qo.NOTE_REFERENCES_UPDATED,Se),()=>{clearInterval(fe),Vo.off(qo.NOTE_REFERENCES_UPDATED,Se)}},[e.id]),N.useEffect(()=>{const ne=async fe=>{console.log("🌍 [NoteCard] 收到全局设置更新事件:",fe);try{const Se=ie?"dark":"light",Ie=await du(Se);if(H(Ie),(fe==null?void 0:fe.type)==="reset_all"||(fe==null?void 0:fe.type)==="apply_to_all")if(e.id)try{const We=await kf(e.id,Se);$(We)}catch{$({})}else $({});j(!0),console.log("🌍 [NoteCard] 全局设置已更新")}catch(Se){console.error("🌍 [NoteCard] 重新加载全局设置失败:",Se),j(!0)}};return Vo.on(qo.CARD_SETTINGS_GLOBAL_UPDATE,ne),Vo.on(qo.CARD_SETTINGS_RESET_ALL,ne),()=>{Vo.off(qo.CARD_SETTINGS_GLOBAL_UPDATE,ne),Vo.off(qo.CARD_SETTINGS_RESET_ALL,ne)}},[ie]),N.useEffect(()=>{if(!J)return;(async()=>{console.log("🎨 [NoteCard] 检测到主题切换，重新加载配置");try{const fe=ie?"dark":"light",Se=await du(fe);if(H(Se),e.id)try{const Ie=await kf(e.id,fe);$(Ie)}catch{$({})}j(!0),console.log("🎨 [NoteCard] 主题切换配置重新加载完成")}catch(fe){console.error("🎨 [NoteCard] 主题切换配置重新加载失败:",fe),j(!0)}})()},[ie,J,e.id]);const Qe=()=>e.created_at,Et=ne=>(m[ne],"text-white"),Dt=ne=>{const fe=m[ne];if(fe&&fe.startsWith("#"))return{backgroundColor:fe,color:"#ffffff"};const Se=rs.find(Ie=>Ie.value===fe);return Se?{backgroundColor:Se.hexColor,color:"#ffffff"}:{backgroundColor:"#3B82F6",color:"#ffffff"}},$n=!!e.is_pinned,$t=()=>{const ne={borderWidth:1,shadowSize:"sm",backgroundGradient:!1,borderRadius:8,maxLines:6,width:"auto"},fe=G||{},Se=Ne||{},Ie={...ne};return Object.keys(fe).forEach(We=>{fe[We]!==""&&fe[We]!==void 0&&fe[We]!==null&&(Ie[We]=fe[We])}),Object.keys(Se).forEach(We=>{Se[We]!==""&&Se[We]!==void 0&&Se[We]!==null&&(Ie[We]=Se[We])}),Ie},us=(ne,fe,Se,Ie="warning")=>{we({isOpen:!0,title:ne,message:fe,onConfirm:Se,type:Ie})},Fs=()=>{we({isOpen:!1,title:"",message:"",onConfirm:null,type:"warning"})},Ut=ne=>{us("应用到此卡片",`确定要将当前设置应用到此卡片吗？
这将覆盖此卡片的现有个性化设置。`,async()=>{console.log("🎨 [NoteCard] 开始应用个性化设置:",ne);try{if(typeof ie>"u"){console.error("🎨 [NoteCard] darkMode未初始化");return}const fe=ie?"dark":"light";console.log("🎨 [NoteCard] 调用 saveNoteCardSettings, noteId:",e.id,"themeMode:",fe),await R_(e.id,ne,fe),console.log("🎨 [NoteCard] 保存成功，更新本地状态"),$(ne),le(!1),console.log("🎨 [NoteCard] 个性化设置应用完成")}catch(fe){console.error("🎨 [NoteCard] 保存卡片设置失败:",fe)}},"info")},un=ne=>{us("应用到全部",`确定要将当前设置应用到所有卡片吗？
这将覆盖所有卡片的个性化设置，无法撤销。`,async()=>{console.log("🌍 [NoteCard] 开始应用全局设置:",ne);try{J||(console.error("🌍 [NoteCard] 主题未初始化，等待初始化完成"),await new Promise(Se=>{const Ie=setInterval(()=>{J&&(clearInterval(Ie),Se())},100)}));const fe=ie?"dark":"light";console.log("🌍 [NoteCard] 调用 deleteAllNoteCardSettings, themeMode:",fe),await Py(fe),console.log("🌍 [NoteCard] 删除所有笔记设置成功"),console.log("🌍 [NoteCard] 调用 saveGlobalCardSettings, themeMode:",fe),await My(ne,fe),console.log("🌍 [NoteCard] 保存成功，更新本地状态"),H(ne),$({}),le(!1),Vo.emit(qo.CARD_SETTINGS_GLOBAL_UPDATE,{type:"apply_to_all",settings:ne}),console.log("🌍 [NoteCard] 全局设置应用完成，已通知所有卡片刷新")}catch(fe){console.error("🌍 [NoteCard] 保存全局设置失败:",fe)}},"warning")},Nn=async()=>{try{const ne=await j_(e.id);A(ne),ue(!0)}catch(ne){console.error("获取笔记历史记录失败:",ne)}},kr=()=>{us("恢复此卡片",`确定要恢复此卡片到默认设置吗？
此操作将清除当前卡片的所有个性化设置，恢复为全局默认样式。`,async()=>{console.log("🔄 [NoteCard] 开始恢复此卡片到默认");try{J||(console.error("🔄 [NoteCard] 主题未初始化，等待初始化完成"),await new Promise(Se=>{const Ie=setInterval(()=>{J&&(clearInterval(Ie),Se())},100)}));const ne=ie?"dark":"light";console.log("🔄 [NoteCard] 调用 deleteNoteCardSettings, noteId:",e.id,"themeMode:",ne);const fe=await I_(e.id,ne);console.log("🔄 [NoteCard] 删除笔记设置成功:",fe),$({}),le(!1);try{const Se=ie?"dark":"light";console.log("🔄 [NoteCard] 重新加载当前主题全局设置:",Se);const Ie=await du(Se);console.log("🔄 [NoteCard] 全局设置加载成功:",Ie),H(Ie)}catch(Se){console.error("🔄 [NoteCard] 重新加载全局设置失败:",Se)}console.log("🔄 [NoteCard] 恢复此卡片到默认完成")}catch(ne){console.error("🔄 [NoteCard] 恢复此卡片到默认失败:",ne)}},"warning")},Wn=()=>{us("全部恢复默认",`确定要恢复所有卡片到默认设置吗？
此操作将清除所有卡片的个性化设置和全局设置，无法撤销。`,async()=>{console.log("🔄 [NoteCard] 开始全部恢复默认");try{J||(console.error("🔄 [NoteCard] 主题未初始化，等待初始化完成"),await new Promise(Ie=>{const We=setInterval(()=>{J&&(clearInterval(We),Ie())},100)}));const ne=ie?"dark":"light";console.log("🔄 [NoteCard] 调用 deleteAllNoteCardSettings, themeMode:",ne);const fe=await Py(ne);console.log("🔄 [NoteCard] 删除所有笔记设置成功:",fe);const Se={borderWidth:1,shadowSize:"sm",backgroundGradient:!1,borderRadius:8,maxLines:6};console.log("🔄 [NoteCard] 保存默认全局设置, themeMode:",ne),await My(Se,ne),H(Se),$({}),le(!1),Vo.emit(qo.CARD_SETTINGS_RESET_ALL,{type:"reset_all",settings:Se}),console.log("🔄 [NoteCard] 全部恢复默认完成")}catch(ne){console.error("🔄 [NoteCard] 全部恢复默认失败:",ne)}},"danger")},Zt=()=>{switch(et.getUserPreferences().cardWidth||"70%"){case"50%":return"w-1/2 max-w-full";case"60%":return"w-3/5 max-w-full";case"70%":return"w-[70%] max-w-full";case"80%":return"w-4/5 max-w-full";case"90%":return"w-[90%] max-w-full";case"100%":return"w-full max-w-full";default:return"w-[70%] max-w-full"}},or=()=>`${`${Zt()} min-h-card p-6 card-optimized smooth-transition select-none relative z-10`} note-card`,Kr=()=>{const fe=(()=>({backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--card-global-bg").trim()||"var(--theme-surface)",borderColor:getComputedStyle(document.documentElement).getPropertyValue("--card-global-border").trim(),borderWidth:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--card-global-border-width").trim())||1,borderRadius:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--card-global-border-radius").trim())||8,shadowSize:getComputedStyle(document.documentElement).getPropertyValue("--card-global-shadow").trim()||"sm",textColor:getComputedStyle(document.documentElement).getPropertyValue("--card-global-text").trim()||"var(--theme-text)",backgroundGradient:!1}))(),Se=I?$t():fe,Ie={none:"none",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},We={borderWidth:`${Se.borderWidth}px`,borderStyle:"solid",borderRadius:`${Se.borderRadius}px`,boxShadow:Ie[Se.shadowSize]||Ie.sm,color:Se.textColor||"var(--theme-text)"};if(Se.borderColor&&Se.borderColor!==""?We.borderColor=Se.borderColor:(We.borderWidth="0",We.borderStyle="none"),Se.backgroundGradient){const Sn=getComputedStyle(document.documentElement).getPropertyValue("--theme-surface").trim()||"#e2e8f0",gr=Array.isArray(Se.gradientColors)?Se.gradientColors:["",""];let Dn=gr[0],yr=gr[1];(!Dn||Dn===""||Dn==="#ffffff"||Dn==="#1F2937"||Dn==="#e2e8f0"||Dn===Sn)&&(Dn="var(--theme-surface)"),(!yr||yr===""||yr==="#ffffff"||yr==="#1F2937"||yr==="#f9fafb"||yr===Sn)&&(yr="var(--theme-elevated)"),We.background=`linear-gradient(135deg, ${Dn}, ${yr})`,delete We.backgroundColor}else!Se.backgroundColor||Se.backgroundColor===""||Se.backgroundColor==="#ffffff"||Se.backgroundColor==="#1F2937"||Se.backgroundColor==="#e2e8f0"?We.backgroundColor=fe.backgroundColor:We.backgroundColor=Se.backgroundColor,delete We.background;return{style:We,shadowClass:""}},sn=async ne=>{try{await t(e.id,ne,{preventReload:!0}),ne.isTagChange||oe()}catch(fe){console.error("保存笔记失败:",fe)}},ir=()=>{v(!0),ye.current&&ye.current.classList.add("card-exit"),oe(),setTimeout(()=>{ye.current&&ye.current.classList.remove("card-exit"),v(!1)},350)},hn=ne=>{ne.preventDefault(),ne.stopPropagation(),console.log("[NoteCard] 删除按钮被点击，笔记ID:",e.id),console.log("[NoteCard] onDelete函数存在:",typeof n=="function"),typeof n=="function"?n(e.id):console.error("[NoteCard] onDelete不是一个函数:",n)},jn=async ne=>{var Ie;ne.preventDefault(),ne.stopPropagation();const fe=e.is_pinned,Se=!fe;r&&r(e.id,Se);try{await fm(e.id)}catch(We){console.error("置顶操作失败:",We),console.error("错误详情:",((Ie=We.response)==null?void 0:Ie.data)||We.message),r&&r(e.id,fe)}},ds=(()=>e.tags?typeof e.tags=="string"?e.tags.split(",").map(ne=>ne.trim()).filter(ne=>ne):Array.isArray(e.tags)?e.tags:[]:[])(),Ln=pe(e.content);N.useEffect(()=>{if(f(Ln)){const fe=et.getUserPreferences().expandImages!==!1;u(fe)}},[Ln]);const fi=(ne=>{if(!ne)return 0;const fe=ne.split(`
`);let Se=0;return fe.forEach(Ie=>{if(Ie.trim()==="")Se+=1;else{const Vt=window.innerWidth<768?35:60,Sn=(Ie.match(/[\u4e00-\u9fa5]/g)||[]).length,gr=Ie.length-Sn,Dn=Sn*1.5+gr,yr=Math.ceil(Dn/Vt)||1;Se+=yr}}),Se})(Ln),Nc=$t().maxLines,Yr=f(Ln)||fi>Nc,fa=Ln,Ce=N.useCallback(async ne=>{try{const{mood:fe,weather:Se}=Z(e.content);let Ie=ne;Se&&(Ie=ei.addWeatherToContent(Ie,Se)),fe&&(Ie=ei.addMoodToContent(Ie,fe)),await sn({content:Ie})}catch(fe){console.error("保存内容变化失败:",fe)}},[sn,e.content]),{style:$e}=Kr();if(X){const{style:ne}=Kr(),fe=$t();return c.jsx(Z_,{note:e,onSubmit:sn,onCancel:ir,submitText:"保存",showCancel:!0,isEditMode:!0,onNoteClick:o,autoFocus:!0,cardStyle:ne,cardSettings:fe,initialTags:e.tags})}const rt=(()=>{const ne={...$e,transition:"opacity 0.3s ease-in-out"};return I?ne.opacity="1":ne.opacity="0",ne})(),Ue=(ne="main",fe=1)=>{const Se=$t();let Ie;switch(ne){case"main":Ie=Se.mainTextColor||Se.textColor;break;case"secondary":Ie=Se.secondaryTextColor||Se.textColor;break;case"link":Ie=Se.linkTextColor||Se.textColor;break;case"button":Ie=Se.buttonTextColor||Se.textColor;break;case"primary":Ie=Se.mainTextColor||Se.textColor;break;default:Ie=Se.textColor}if(Ie){if(Ie.startsWith("#")){const We=Ie.slice(1),Vt=parseInt(We.slice(0,2),16),Sn=parseInt(We.slice(2,4),16),gr=parseInt(We.slice(4,6),16);return`rgba(${Vt}, ${Sn}, ${gr}, ${fe})`}return Ie}switch(ne){case"secondary":return fe<1?`rgba(var(--theme-text-secondary-rgb), ${fe})`:"var(--theme-text-secondary)";case"link":return ie?fe<1?`rgba(96, 165, 250, ${fe})`:"#60a5fa":fe<1?`rgba(37, 99, 235, ${fe})`:"#2563eb";case"button":return fe<1?`rgba(var(--theme-primary-rgb), ${fe})`:"var(--theme-primary)";case"primary":return fe<1?`rgba(var(--theme-primary-rgb), ${fe})`:"var(--theme-primary)";default:return fe<1?`rgba(var(--theme-text-rgb), ${fe})`:"var(--theme-text)"}};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{ref:ye,"data-note-id":e.id,className:or(),style:{...rt,color:Ue("main")},onClick:Ye,onDoubleClick:He,onContextMenu:pt,children:[$n&&c.jsxs("div",{className:"flex items-center mb-3 text-sm font-medium text-yellow-600 dark:text-yellow-400",children:[c.jsx(_o,{className:"mr-1 fill-current",size:14}),c.jsx("span",{children:"已置顶"})]}),c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex-1",children:[(P||z)&&c.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[P&&c.jsx("div",{className:"text-lg px-2 py-1 rounded-md",style:{backgroundColor:Ue("primary",.1),color:Ue("primary",.9),border:`1px solid ${Ue("primary",.3)}`},title:`心情: ${P.name}`,children:c.jsx("span",{className:"emoji-button",style:{fontFamily:"Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, EmojiSymbols, EmojiOne Mozilla, Twemoji Mozilla, Segoe UI Symbol, Noto Emoji",fontVariantEmoji:"emoji",textRendering:"optimizeQuality"},children:P.emoji})}),z&&c.jsx("div",{className:"text-lg px-2 py-1 rounded-md",style:{backgroundColor:Ue("primary",.1),color:Ue("primary",.9),border:`1px solid ${Ue("primary",.3)}`},title:`天气: ${z.name}`,children:c.jsx("span",{className:"emoji-button",style:{fontFamily:"Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, EmojiSymbols, EmojiOne Mozilla, Twemoji Mozilla, Segoe UI Symbol, Noto Emoji",fontVariantEmoji:"emoji",textRendering:"optimizeQuality"},children:z.emoji})})]}),e.title&&c.jsx("h3",{className:"text-lg font-semibold mb-2 flex items-center",style:{color:Ue("main")},children:e.title})]}),c.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[(De.incoming>0||De.outgoing>0)&&c.jsxs("div",{className:"flex items-center gap-1",children:[De.incoming>0&&c.jsxs("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation();const fe=ne.currentTarget.getBoundingClientRect();Ke({left:fe.left,top:fe.top,bottom:fe.bottom,width:fe.width,height:fe.height}),Ve(!0)},className:"flex items-center gap-1 px-2 py-1 rounded-md transition-colors duration-200 relative",style:{backgroundColor:Ue("link",.1),color:Ue("link",.8),border:`1px solid ${Ue("link",.3)}`},onMouseEnter:ne=>{ne.target.style.backgroundColor=Ue("link",.15),ne.target.style.color=Ue("link",1)},onMouseLeave:ne=>{ne.target.style.backgroundColor=Ue("link",.1),ne.target.style.color=Ue("link",.8)},title:`被 ${De.incoming} 个笔记引用`,children:[c.jsx(E1,{size:12}),c.jsx("span",{className:"text-xs font-medium",children:De.incoming})]}),De.outgoing>0&&c.jsxs("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation();const fe=ne.currentTarget.getBoundingClientRect();Ke({left:fe.left,top:fe.top,bottom:fe.bottom,width:fe.width,height:fe.height}),Ve(!0)},className:"flex items-center gap-1 px-2 py-1 rounded-md transition-colors duration-200 relative",style:{backgroundColor:Ue("secondary",.1),color:Ue("secondary",.8),border:`1px solid ${Ue("secondary",.3)}`},onMouseEnter:ne=>{ne.target.style.backgroundColor=Ue("secondary",.15),ne.target.style.color=Ue("secondary",1)},onMouseLeave:ne=>{ne.target.style.backgroundColor=Ue("secondary",.1),ne.target.style.color=Ue("secondary",.8)},title:`引用了 ${De.outgoing} 个笔记`,children:[c.jsx(QP,{size:12}),c.jsx("span",{className:"text-xs font-medium",children:De.outgoing})]})]}),c.jsx("div",{className:"relative",children:c.jsx("button",{ref:be,onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),ge()},className:"p-2 transition-colors duration-200 rounded-md",style:{color:Ue("button",.7)},onMouseEnter:ne=>{ne.target.style.color=Ue("button",1),ne.target.style.backgroundColor="var(--theme-elevated)"},onMouseLeave:ne=>{ne.target.style.color=Ue("button",.7),ne.target.style.backgroundColor="transparent"},title:"更多操作",children:c.jsx(p2,{size:16})})})]})]}),Ln&&c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{className:"note-content-container",style:{display:"-webkit-box",WebkitLineClamp:l?"none":$t().maxLines,WebkitBoxOrient:"vertical",overflow:l?"visible":"hidden",lineHeight:"1.6",maxHeight:l?"none":`${$t().maxLines*1.6}em`,minHeight:l?"auto":`${Math.min($t().maxLines,3)*1.6}em`,transition:"max-height 0.3s ease-out, min-height 0.3s ease-out"},children:c.jsx(B6,{content:fa,className:"note-content",editable:!0,onContentChange:Ce,onNoteClick:o,notes:i,textColors:{main:Ue("main"),secondary:Ue("secondary"),link:Ue("link"),button:Ue("button"),reference:$t().referenceTextColor||$t().linkTextColor||$t().textColor}})}),Yr&&c.jsx("button",{onClick:()=>u(!l),className:"mt-2 text-sm hover:underline transition-colors duration-200 focus:outline-none focus:ring-0",style:{color:Ue("link",.8)},onMouseEnter:ne=>{ne.target.style.color=Ue("link",1)},onMouseLeave:ne=>{ne.target.style.color=Ue("link",.8)},children:l?"收起":"展开"})]}),c.jsxs("div",{className:"mt-10",children:[ds.length>0&&c.jsxs("div",{className:"flex items-center justify-end flex-wrap gap-2 mb-3",children:[c.jsx(lc,{style:{color:Ue("secondary",.7)},size:14}),ds.map((ne,fe)=>c.jsx("span",{className:`inline-block text-xs px-2 py-1 rounded-full ${Et(ne)}`,style:Dt(ne),children:ne},fe))]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("div",{className:"text-xs cursor-pointer transition-colors select-none",style:{color:Ue("secondary",.6)},onClick:()=>y(!T),onMouseEnter:ne=>{y(!0),ne.target.style.color=Ue("secondary",.8)},onMouseLeave:ne=>{y(!1),ne.target.style.color=Ue("secondary",.6)},title:T?qy(Qe()):cc(Qe()),children:c.jsx("span",{children:T?cc(Qe()):qy(Qe())})})})]})]}),g&&Fr.createPortal(c.jsxs("div",{ref:me,className:"fixed w-menu-width rounded-none shadow-lg z-[10001]",style:{backgroundColor:"var(--theme-elevated)",top:`${k.top}px`,left:`${k.left}px`},children:[c.jsxs("button",{onClick:ne=>{jn(ne),p(!1)},className:"w-full px-3 py-2 text-left text-sm flex items-center rounded-none transition-colors duration-150 hover:translate-x-1",style:{color:"var(--theme-text)"},onMouseEnter:ne=>ne.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ne=>ne.target.style.backgroundColor="transparent",children:[c.jsx(_o,{className:`mr-2 transition-all duration-150 ${$n?"text-yellow-500 fill-current":""}`,size:14}),$n?"取消置顶":"置顶"]}),c.jsxs("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),Ee(),p(!1)},className:"w-full px-3 py-2 text-left text-sm flex items-center transition-colors duration-150 hover:translate-x-1",style:{color:"var(--theme-text)"},onMouseEnter:ne=>ne.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ne=>ne.target.style.backgroundColor="transparent",children:[c.jsx(n1,{className:"mr-2 transition-all duration-150",size:14}),"编辑"]}),c.jsxs("button",{onClick:()=>{le(!0),p(!1)},className:"w-full px-3 py-2 text-left text-sm flex items-center transition-colors duration-150 hover:translate-x-1",style:{color:"var(--theme-text)"},onMouseEnter:ne=>ne.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ne=>ne.target.style.backgroundColor="transparent",children:[c.jsx(ac,{className:"mr-2 transition-all duration-150",size:14}),"个性化设置"]}),c.jsxs("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),Nn(),p(!1)},className:"w-full px-3 py-2 text-left text-sm flex items-center transition-colors duration-150 hover:translate-x-1",style:{color:"var(--theme-text)"},onMouseEnter:ne=>ne.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ne=>ne.target.style.backgroundColor="transparent",children:[c.jsx(ns,{className:"mr-2 transition-all duration-150",size:14}),"历史记录"]}),c.jsxs("button",{onClick:ne=>{hn(ne),p(!1)},className:"w-full px-3 py-2 text-left text-sm flex items-center rounded-none transition-colors duration-150 hover:translate-x-1",style:{color:ie?"#ef4444":"#dc2626"},onMouseEnter:ne=>ne.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ne=>ne.target.style.backgroundColor="transparent",children:[c.jsx(As,{className:"mr-2 transition-all duration-150",size:14}),"删除"]})]}),document.body),U&&Fr.createPortal(c.jsxs("div",{className:"fixed w-menu-width rounded-none shadow-lg z-[10001]",style:{backgroundColor:"var(--theme-elevated)",top:`${te.y}px`,left:`${te.x}px`},children:[c.jsxs("button",{onClick:ne=>{jn(ne),ee(!1)},className:"w-full px-3 py-2 text-left text-sm flex items-center rounded-t-md transition-colors duration-150 hover:translate-x-1",style:{color:"var(--theme-text)"},onMouseEnter:ne=>ne.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ne=>ne.target.style.backgroundColor="transparent",children:[c.jsx(_o,{className:`mr-2 transition-all duration-150 ${$n?"text-yellow-500 fill-current":""}`,size:14}),$n?"取消置顶":"置顶"]}),c.jsxs("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),Ee(),ee(!1)},className:"w-full px-3 py-2 text-left text-sm flex items-center transition-colors duration-150 hover:translate-x-1",style:{color:"var(--theme-text)"},onMouseEnter:ne=>ne.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ne=>ne.target.style.backgroundColor="transparent",children:[c.jsx(n1,{className:"mr-2 transition-all duration-150",size:14}),"编辑"]}),c.jsxs("button",{onClick:()=>{le(!0),ee(!1)},className:"w-full px-3 py-2 text-left text-sm flex items-center transition-colors duration-150 hover:translate-x-1",style:{color:"var(--theme-text)"},onMouseEnter:ne=>ne.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ne=>ne.target.style.backgroundColor="transparent",children:[c.jsx(ac,{className:"mr-2 transition-all duration-150",size:14}),"个性化设置"]}),c.jsxs("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation(),Nn(),ee(!1)},className:"w-full px-3 py-2 text-left text-sm flex items-center transition-colors duration-150 hover:translate-x-1",style:{color:"var(--theme-text)"},onMouseEnter:ne=>ne.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ne=>ne.target.style.backgroundColor="transparent",children:[c.jsx(ns,{className:"mr-2 transition-all duration-150",size:14}),"历史记录"]}),c.jsxs("button",{onClick:ne=>{hn(ne),ee(!1)},className:"w-full px-3 py-2 text-left text-sm flex items-center rounded-b-md transition-colors duration-150 hover:translate-x-1",style:{color:ie?"#ef4444":"#dc2626"},onMouseEnter:ne=>ne.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ne=>ne.target.style.backgroundColor="transparent",children:[c.jsx(As,{className:"mr-2 transition-all duration-150",size:14}),"删除"]})]}),document.body),c.jsx(sX,{isOpen:M,onClose:()=>le(!1),noteId:e.id,currentSettings:$t(),onApply:Ut,onApplyToAll:un,onResetThisCard:kr,onResetAllToDefault:Wn}),c.jsx(oX,{isOpen:xe.isOpen,title:xe.title,message:xe.message,onConfirm:xe.onConfirm,onCancel:Fs,type:xe.type}),c.jsx(iX,{isOpen:Le,onClose:()=>{Ve(!1),Ke(null)},noteId:e.id,noteTitle:e.title,onNoteClick:o,triggerPosition:Me}),c.jsx(aX,{isOpen:D,onClose:()=>{ue(!1),A([])},noteId:e.id,noteTitle:e.title,noteContent:e.content,noteTags:e.tags,history:F,onNoteClick:o})]})},G2=({message:e="没有找到笔记",subMessage:t="开始创建你的第一个笔记吧！"})=>c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx("div",{className:"p-6 rounded-full mb-4",style:{backgroundColor:"var(--theme-elevated)"},children:c.jsx(xh,{className:"h-12 w-12",style:{color:"var(--theme-text-secondary)"}})}),c.jsx("h3",{className:"text-xl font-medium mb-2",style:{color:"var(--theme-text)"},children:e}),c.jsx("p",{style:{color:"var(--theme-text-secondary)"},children:t})]}),uX=({onDateChange:e,selectedDate:t,noteDates:n=[]})=>{const[r,s]=N.useState(new Date),o=T=>T?Tt(T,"yyyy-MM-dd"):null,i=()=>{const T=Th(r),y=i1(r),E=ta(T,{weekStartsOn:0}),w=KB(y,{weekStartsOn:0}),I=[];let j=E;for(;j<=w;)I.push(j),j=nn(j,1);return I},l=()=>{s(v2(r,1))},u=()=>{s(hm(r,1))},f=T=>{const y=o(T);e(t===y?null:y)},m=()=>{e(null)},h=()=>{const T=new Date;s(T),e(o(T))},g=i(),p=t?new Date(t):null,b=T=>n.filter(y=>y===T).length,v=T=>T===1?"bg-green-400":T===2?"bg-green-500":T===3?"bg-green-600":"bg-green-700";return c.jsxs("div",{className:"compact-calendar-filter w-full",style:{backgroundColor:"transparent"},children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(tr,{className:"w-4 h-4 text-green-500"}),t&&c.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-green-50 dark:bg-green-900/30 rounded text-xs",children:[c.jsx("span",{className:"text-green-700 dark:text-green-300",children:Tt(No(new Date(t),"Asia/Shanghai"),"MM/dd",{locale:Rn})}),c.jsx("button",{onClick:m,className:"text-green-500 hover:text-green-700 dark:hover:text-green-300",children:c.jsx(wn,{className:"w-3 h-3"})})]})]}),c.jsx("button",{onClick:h,className:"px-2 py-1 text-xs text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 rounded transition-colors",children:"今天"})]}),c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("button",{onClick:l,className:"p-1 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",children:c.jsx(h2,{className:"w-3 h-3"})}),c.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:Tt(r,"yyyy年MM月",{locale:Rn})}),c.jsx("button",{onClick:u,className:"p-1 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",children:c.jsx(t1,{className:"w-3 h-3"})})]}),c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["日","一","二","三","四","五","六"].map(T=>c.jsx("div",{className:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1",children:T},T))}),c.jsx("div",{className:"grid grid-cols-7 gap-1",children:g.map((T,y)=>{const E=fu(T,r),w=ni(T),I=p&&_1(T,p),j=o(T),_=n.includes(j),C=_?b(j):0;return c.jsxs("button",{onClick:()=>f(T),className:`
                relative flex items-center justify-center h-6 w-full text-xs rounded
                transition-all duration-200
                ${E?"":"text-gray-300 dark:text-gray-600 cursor-default"}
                ${w&&!I?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 font-bold":""}
                ${I?"bg-green-500 text-white font-bold hover:bg-green-600":""}
                ${!I&&E&&!w?"hover:bg-green-50 dark:hover:bg-green-900/20 text-gray-700 dark:text-gray-300":""}
                ${_&&!I&&!w?"text-green-600 dark:text-green-400 font-bold":""}
              `,disabled:!E,title:`${Tt(T,"yyyy年MM月dd日",{locale:Rn})}${_?" (有笔记)":""}`,children:[Tt(T,"d"),_&&!I&&c.jsx("div",{className:`absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0.5 h-0.5 ${v(C)} rounded-full`})]},y)})}),c.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2",children:[c.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[c.jsx("button",{onClick:()=>f(new Date(Date.now()-24*60*60*1e3)),className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-800/50 hover:bg-green-200 dark:hover:bg-green-700/50 rounded transition-colors",children:"昨天"}),c.jsx("button",{onClick:()=>f(new Date(Date.now()-2*24*60*60*1e3)),className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-800/50 hover:bg-green-200 dark:hover:bg-green-700/50 rounded transition-colors",children:"前天"}),c.jsx("button",{onClick:()=>f(new Date(Date.now()-3*24*60*60*1e3)),className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-800/50 hover:bg-green-200 dark:hover:bg-green-700/50 rounded transition-colors",children:"三天前"}),c.jsx("button",{onClick:()=>f(new Date(Date.now()+24*60*60*1e3)),className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-800/50 hover:bg-green-200 dark:hover:bg-green-700/50 rounded transition-colors",children:"明天"}),c.jsx("button",{onClick:()=>f(new Date(Date.now()+2*24*60*60*1e3)),className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-800/50 hover:bg-green-200 dark:hover:bg-green-700/50 rounded transition-colors",children:"后天"}),c.jsx("button",{onClick:()=>f(new Date(Date.now()+3*24*60*60*1e3)),className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-800/50 hover:bg-green-200 dark:hover:bg-green-700/50 rounded transition-colors",children:"三天后"})]}),t&&c.jsx("button",{onClick:m,className:"px-2 py-0.5 text-xs text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 rounded transition-colors",children:"清除"})]})]})},dX=({isOpen:e,onClose:t,onConfirm:n,title:r="确认操作",message:s="确定要执行此操作吗？",confirmText:o="确定",cancelText:i="取消",type:l="default"})=>{if(N.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const f=(()=>{switch(l){case"danger":return{confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",icon:"text-red-600",border:"border-red-200"};case"warning":return{confirmButton:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",icon:"text-yellow-600",border:"border-yellow-200"};default:return{confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",icon:"text-blue-600",border:"border-blue-200"}}})();return c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),c.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full ${f.border} border-2 flex items-center justify-center`,children:c.jsx("svg",{className:`w-6 h-6 ${f.icon}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l==="danger"?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}):l==="warning"?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:r})]}),c.jsx("div",{className:"mb-6",children:c.jsx("p",{className:"text-sm text-gray-500",children:s})}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-0 focus:ring-offset-0 transition-colors",onClick:t,children:i}),c.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-0 focus:ring-offset-0 transition-colors ${f.confirmButton}`,onClick:n,children:o})]})]})})]})},fX=({onTagsChange:e,onDateChange:t,selectedDate:n,noteDates:r,className:s=""})=>{const[o,i]=N.useState([]),[l,u]=N.useState([]),[f,m]=N.useState({}),[h,g]=N.useState(!1),[p,b]=N.useState(!1),[v,T]=N.useState(!1),[y,E]=N.useState(null);N.useRef(null);const[w,I]=N.useState(null),[j,_]=N.useState(null),[C,k]=N.useState("");N.useState(!1);const[R,P]=N.useState(null),[Y,z]=N.useState(!1),[Q,M]=N.useState({title:"",message:"",onConfirm:null,type:"default"}),le=(X,Z,pe,ge="default")=>{M({title:X,message:Z,onConfirm:pe,type:ge}),z(!0)},Ne=()=>{z(!1),M({title:"",message:"",onConfirm:null,type:"default"})},$=()=>{Q.onConfirm&&Q.onConfirm(),Ne()},G=X=>({id:X.id,name:X.name,color:f[X.name]||"#3B82F6",isFavorite:X.isFavorite||!1,isPinned:X.isPinned||!1,toggleFavorite:async()=>{try{const Z=!X.isFavorite;await et.updateTag(X.id,{isFavorite:Z});const pe=window.favoriteConfigManager?window.favoriteConfigManager.getConfig():H;let ge=[];if(pe.enablePersistenceOptimization){const Ee=localStorage.getItem("memeos_favorite_tags");ge=Ee?JSON.parse(Ee):[]}return Z?ge.includes(X.name)||ge.push(X.name):ge=ge.filter(Ee=>Ee!==X.name),pe.enablePersistenceOptimization&&localStorage.setItem("memeos_favorite_tags",JSON.stringify(ge)),pe.enableStateSynchronization&&window.dispatchEvent(new CustomEvent("favoriteTagsUpdated",{detail:{favoriteTags:ge}})),pe.enableLogging&&console.log("TagManager: 切换收藏状态:",{tag:X.name,newFavoriteStatus:Z}),Z}catch(Z){throw console.error("切换收藏状态失败:",Z),Z}}}),H={enableSyncOptimization:!0,enablePersistenceOptimization:!0,enableLogging:!0,syncTimeout:5e3},U=X=>{Object.assign(H,X),H.enableLogging&&console.log("TagManager: 收藏配置已更新:",H)},ee=()=>({...H}),te=()=>{H.enableSyncOptimization=!0,H.enablePersistenceOptimization=!0,H.enableLogging=!0,H.syncTimeout=5e3,H.enableLogging&&console.log("TagManager: 收藏配置已重置为默认值")},V=async X=>{const{favoriteTags:Z}=X.detail||{};H.enableLogging&&(console.log("TagManager: 收到收藏列表更新事件:",Z),console.log("TagManager: 收藏状态同步优化状态:",H.enableSyncOptimization));const pe=et.getTags(),Ee=[...o,...pe].reduce((He,Ye)=>{if(!Ye)return He;Ye.id||Ye.name||Ye.label||Ye.title;const pt=He.findIndex(Qe=>Qe.id&&Qe.id===Ye.id||Qe.name&&Qe.name===Ye.name||Qe.label&&Qe.label===Ye.label||Qe.title&&Qe.title===Ye.title);return pt>=0?He[pt]={...He[pt],...Ye,isFavorite:Z.includes(Ye.name||Ye.label||Ye.title||Ye.id||"unknown")}:He.push({...Ye,isFavorite:Z.includes(Ye.name||Ye.label||Ye.title||Ye.id||"unknown")}),He},[]).filter(He=>!(!He||typeof He!="object"));if(i(Ee),H.enableLogging&&console.log("TagManager: 收藏状态已更新，保留所有标签，标签数量:",Ee.length),H.enablePersistenceOptimization)try{localStorage.setItem("memeos_favorite_tags",JSON.stringify(Z)),H.enableLogging&&console.log("TagManager: 收藏状态已持久化到localStorage")}catch(He){console.error("TagManager: 持久化收藏状态失败:",He)}else H.enableLogging&&console.log("TagManager: 收藏状态持久化优化已禁用，跳过localStorage持久化");if(H.enableSyncOptimization)try{for(const He of Ee)He.name&&He.id&&await et.updateTag(He.id,{isFavorite:He.isFavorite});H.enableLogging&&console.log("TagManager: 本地配置管理器收藏状态已同步")}catch(He){console.error("TagManager: 同步本地配置管理器收藏状态失败:",He)}else H.enableLogging&&console.log("TagManager: 收藏状态同步优化已禁用，跳过本地配置管理器同步");H.enableLogging&&console.log("TagManager: 收藏状态同步完成")},xe=async X=>{const{action:Z,tagName:pe,tag:ge}=X.detail||{};if(H.enableLogging&&console.log("TagManager: 收到标签更新事件:",{action:Z,tagName:pe,tag:ge}),Z==="add"&&pe&&ge&&!o.find(He=>He.name===pe)){const He={id:ge.id||Date.now(),name:pe,isFavorite:!1,isPinned:!1,...ge},Ye=[...o,He];i(Ye),H.enableLogging&&console.log("TagManager: 新标签已添加到列表:",pe)}},we=X=>{H.enableLogging&&console.log("TagManager: 收到标签变化事件:",X);const pe=L(X).filter(ge=>!(!ge||typeof ge!="object"));if(i(pe),H.enableLogging&&console.log("TagManager: 标签列表已更新，保留所有标签，标签数量:",pe.length),e){const ge=pe.map(Ee=>Ee.name||Ee.label||Ee.title||Ee.id||"unknown");e(ge)}},Le=X=>{m(X)},Ve=async(X,Z)=>{try{const pe={...f,[X]:Z};m(pe);const ge=JSON.parse(localStorage.getItem("tagColors")||"{}");ge[X]=Z,localStorage.setItem("tagColors",JSON.stringify(ge)),window.dispatchEvent(new CustomEvent("tagColorsUpdated",{detail:{tagName:X,color:Z}})),console.log("标签颜色已更新:",X,"->",Z)}catch(pe){console.error("更新标签颜色失败:",pe),window.showToast("更新标签颜色失败，请重试","error")}},[Me,Ke]=N.useState(""),[De,nt]=N.useState("#3B82F6"),[ut,dt]=N.useState(!1),[D,ue]=N.useState(null),F=N.useRef(null),A=N.useRef(null);N.useEffect(()=>{(async()=>{g(!0);try{const[Ee]=await Promise.all([g_()]);u(Ee||rs),b(!0),H.enableLogging&&console.log("加载本地标签数据..."),await et.loadFromDatabase();let He=et.getTags();const Ye=et.getTagColors();let pt=[];if(H.enablePersistenceOptimization)try{const Qe=localStorage.getItem("memeos_favorite_tags");Qe&&(pt=JSON.parse(Qe),H.enableLogging&&console.log("从localStorage加载收藏状态:",pt),He=He.map(Et=>({...Et,isFavorite:pt.includes(Et.name||Et.label||Et.title||Et.id||"unknown")})),H.enableLogging&&console.log("收藏状态已同步到标签对象，标签数量:",He.length))}catch(Qe){console.error("加载收藏状态失败:",Qe)}else H.enableLogging&&console.log("TagManager: 收藏状态持久化优化已禁用，跳过localStorage加载");if(pt.length===0){const Qe=He.map(Et=>({...Et,isFavorite:pt.includes(Et.name||Et.label||Et.title||Et.id||"unknown")}));i(Qe),H.enableLogging&&console.log("标签数据加载完成（无收藏状态）:",Qe)}else i(He),H.enableLogging&&console.log("标签数据加载完成（有收藏状态）:",He);et.addListener("tagsChanged",we),et.addListener("tagColorsChanged",Le)}catch(Ee){console.error("加载数据失败:",Ee),u(rs),b(!0)}finally{g(!1)}})(),window.addEventListener("favoriteTagsUpdated",V),window.addEventListener("tagsUpdated",xe);const Z=Ee=>{U(Ee.detail)},pe=()=>{window.dispatchEvent(new CustomEvent("getFavoriteConfigResponse",{detail:ee()}))},ge=()=>{te()};return window.addEventListener("updateFavoriteConfig",Z),window.addEventListener("getFavoriteConfig",pe),window.addEventListener("resetFavoriteConfig",ge),()=>{et.removeListener("tagsChanged",we),et.removeListener("tagColorsChanged",Le),window.removeEventListener("favoriteTagsUpdated",V),window.removeEventListener("tagsUpdated",xe),window.removeEventListener("updateFavoriteConfig",Z),window.removeEventListener("getFavoriteConfig",pe),window.removeEventListener("resetFavoriteConfig",ge)}},[]);const L=X=>X?Array.isArray(X)?X.filter(Z=>Z&&typeof Z=="object").map(Z=>{const pe=Z.name||Z.label||Z.title||Z.id||"unknown";return{id:Z.id||`tag_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:pe,color:Z.color||"#3B82F6",isFavorite:Z.isFavorite||!1,isPinned:Z.isPinned||!1,...Z}}).filter(Z=>Z!==null):typeof X=="object"&&X.name?[{id:X.id||`tag_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:X.name,color:X.color||"#3B82F6",isFavorite:X.isFavorite||!1,isPinned:X.isPinned||!1,...X}]:(H.enableLogging&&console.warn("flattenTags: 无法识别的标签数据格式:",X),[]):(H.enableLogging&&console.warn("flattenTags: 接收到空的标签数据"),[]),K=()=>{T(!1),E(null)},oe=async()=>{if(!y)return;let X,Z;if(typeof y=="string")X=y,Z=null;else if(y&&y.id)X=y.name||y.tagName||y.label||y.title,Z=y.id;else{H.enableLogging&&console.error("删除标签失败：无效的标签对象",y),K();return}if(!X&&Z){const ge=et.getTags().find(Ee=>Ee.id===Z);ge&&(X=ge.name)}if(!Z&&X){const ge=et.getTags().find(Ee=>Ee.name===X);ge&&(Z=ge.id)}if(!Z&&!X){console.error("删除标签失败：缺少标签名称或ID",{tagName:X,tagId:Z,tagToDelete:y}),K();return}try{if(console.log("开始删除标签:",{tagName:X,tagId:Z}),await et.deleteTag(Z)){console.log("标签删除成功:",X);try{const ge=localStorage.getItem("memeos_favorite_tags");if(ge){let Ee=JSON.parse(ge);Ee.includes(X)&&(Ee=Ee.filter(He=>He!==X),localStorage.setItem("memeos_favorite_tags",JSON.stringify(Ee)),window.dispatchEvent(new CustomEvent("favoriteTagsUpdated",{detail:{favoriteTags:Ee}})),console.log("已从收藏列表中移除标签:",X))}}catch(ge){console.warn("从收藏列表移除标签失败:",ge)}await et.loadFromDatabase(),K(),console.log("标签删除完成，数据已刷新")}else console.error("本地标签删除失败:",X)}catch(pe){console.error("删除标签过程中发生错误:",pe),K()}},ie=(X,Z)=>{X.stopPropagation(),I(w===Z?null:Z)};N.useEffect(()=>{const X=Z=>{if(w!==null){const pe=document.querySelector(`[data-menu-id="${w}"]`);pe&&!pe.contains(Z.target)&&I(null)}};return document.addEventListener("mousedown",X),()=>{document.removeEventListener("mousedown",X)}},[w]);const J=async(X,Z)=>{switch(I(null),X){case"pin":try{const ge=!Z.isPinned;await et.updateTag(Z.id,{isPinned:ge}),await et.loadFromDatabase();const Ee=et.getTags();i(Ee),console.log("标签置顶状态已切换:",Z.name,"->",ge?"已置顶":"未置顶"),console.log("标签置顶状态修改完成")}catch(ge){console.error("标签置顶状态修改失败:",ge),window.showToast("标签置顶状态修改失败，请重试","error")}break;case"favorite":try{const Ee=await G(Z).toggleFavorite();window.showToast(`标签已${Ee?"收藏":"取消收藏"}`,"success"),console.log("TagManager: 标签收藏状态修改完成，通过事件同步到其他组件")}catch(ge){console.error("标签收藏状态修改失败:",ge),window.showToast("标签收藏状态修改失败，请重试","error")}break;case"setColor":nt(f[Z.name]||"#3B82F6"),ue(Z),dt(!0);break;case"rename":_(Z),k(Z.name);break;case"remove":try{const ge=await Ly(Z.name);if(ge.success){console.log("已从所有笔记中移除标签并删除标签本身:",Z.name),window.showToast(ge.message||"已从所有笔记中移除标签并删除标签本身","success");try{await et.deleteTag(Z.id),console.log("本地配置管理器中的标签已删除:",Z.name)}catch(Ee){console.warn("从本地配置管理器删除标签失败:",Ee)}}else{const Ee=await Ly(Z.name);if(Ee.success){console.log("已从所有笔记中移除标签并删除标签本身:",Z.name),window.showToast(Ee.message||"已从所有笔记中移除标签并删除标签本身","success");try{await et.deleteTag(Z.id),console.log("本地配置管理器中的标签已删除:",Z.name)}catch(He){console.warn("从本地配置管理器删除标签失败:",He)}}else{console.error("移除标签失败:",Ee.message),window.showToast("移除标签失败，请重试","error");return}}try{typeof window.refreshNotes=="function"&&window.refreshNotes()}catch(Ee){console.warn("refreshNotes函数调用失败:",Ee)}try{typeof window.refreshTags=="function"&&window.refreshTags()}catch(Ee){console.warn("refreshTags函数调用失败:",Ee)}}catch(ge){console.error("移除标签失败:",ge),window.showToast("移除标签失败，请重试","error")}break;case"deleteAll":const pe=`确定要删除标签 "${Z.name}" 及其所有相关笔记吗？此操作不可恢复。`;le("删除标签和笔记",pe,async()=>{try{const ge=await Dy(Z.name);if(ge.success){console.log("已删除标签和相关笔记:",Z.name),window.showToast(ge.message||"标签及其相关笔记已删除","success");try{await et.deleteTag(Z.id),console.log("本地配置管理器中的标签已删除:",Z.name)}catch(Ee){console.warn("从本地配置管理器删除标签失败:",Ee)}}else{const Ee=await Dy(Z.name);if(Ee.success){console.log("已删除标签和相关笔记:",Z.name),window.showToast(Ee.message||"标签及其相关笔记已删除","success");try{await et.deleteTag(Z.id),console.log("本地配置管理器中的标签已删除:",Z.name)}catch(He){console.warn("从本地配置管理器删除标签失败:",He)}}else{console.error("删除标签和笔记失败:",Ee.message),window.showToast("删除标签和笔记失败，请重试","error");return}}try{const Ee=localStorage.getItem("memeos_favorite_tags");if(Ee){let He=JSON.parse(Ee);const Ye=He.filter(pt=>!allTagNames.includes(pt));Ye.length!==He.length&&(localStorage.setItem("memeos_favorite_tags",JSON.stringify(Ye)),window.dispatchEvent(new CustomEvent("favoriteTagsUpdated",{detail:{favoriteTags:Ye}})),console.log("已从收藏列表中移除标签:",allTagNames.filter(pt=>He.includes(pt)).join(", ")))}}catch(Ee){console.warn("从收藏列表移除标签失败:",Ee)}try{typeof window.refreshNotes=="function"&&window.refreshNotes()}catch(Ee){console.warn("refreshNotes函数调用失败:",Ee)}try{typeof window.refreshTags=="function"&&window.refreshTags()}catch(Ee){console.warn("refreshTags函数调用失败:",Ee)}}catch(ge){console.error("删除标签和笔记失败:",ge),window.showToast("删除标签和笔记失败，请重试","error")}},"danger");break}},me=async()=>{if(!j||!C.trim())return;const X=j.name,Z=C.trim();if(et.getAllTagNames().includes(Z)){window.showToast("标签名称已存在","warning");return}try{console.log("开始重命名标签:",{oldName:X,newName:Z});const pe=await N_(X,Z);pe.success?(console.log("标签重命名成功:",{oldName:X,newName:Z}),window.showToast("标签重命名成功","success"),f[X]&&(await et.setTagColor(Z,f[X]),delete f[X]),console.log("标签重命名完成")):(console.error("标签重命名失败:",pe.message),window.showToast("重命名标签失败，请重试","error"))}catch(pe){console.error("重命名标签过程中发生错误:",pe),window.showToast("重命名标签失败，请重试","error")}finally{_(null),k("")}},be=(X,Z)=>{if(!Z.trim())return X;const pe=Z.toLowerCase();return X.filter(ge=>ge.name&&ge.name.toLowerCase().includes(pe))},ye=X=>{R&&R.id===X.id?(P(null),console.log("取消选中标签:",X.name),window.handleTagFilter&&window.handleTagFilter(null)):(P(X),console.log("选中标签:",X.name),window.handleTagFilter&&window.handleTagFilter(X.name))};N.useEffect(()=>{const X=async Z=>{const{tagName:pe,color:ge}=Z.detail;console.log("TagManager: 收到标签颜色更新事件:",pe,ge),m(Ee=>({...Ee,[pe]:ge}));try{await et.setTagColor(pe,ge),console.log("TagManager: 标签颜色已同步到服务器:",pe,ge)}catch(Ee){console.error("TagManager: 同步标签颜色到服务器失败:",Ee)}};return window.addEventListener("tagColorsUpdated",X),()=>{window.removeEventListener("tagColorsUpdated",X)}},[]),N.useEffect(()=>{const X=pe=>{const{tagName:ge}=pe.detail||{};if(ge){const Ee=o.find(He=>He.name===ge);Ee&&P(Ee)}else P(null)},Z=()=>{console.log("TagManager接收到filterCleared事件，清除选中状态"),P(null)};return window.addEventListener("tagFilterChanged",X),window.addEventListener("filterCleared",Z),()=>{window.removeEventListener("tagFilterChanged",X),window.removeEventListener("filterCleared",Z)}},[o]);const je=X=>[...X].sort((pe,ge)=>pe.isPinned&&!ge.isPinned?-1:!pe.isPinned&&ge.isPinned?1:0).map(pe=>c.jsxs("div",{className:"w-full",children:[c.jsxs("div",{className:`tag-item flex items-center w-full p-2 mb-1 rounded-lg cursor-pointer transition-colors hover:bg-gray-100 dark:hover:bg-gray-700 ${pe.isPinned?"border-l-4 border-blue-500":""}`,style:{paddingLeft:"8px"},onClick:()=>ye(pe),children:[c.jsx("div",{className:"mr-2 w-3 h-3 rounded-full border border-gray-300 dark:border-gray-600",style:{backgroundColor:f[pe.name]||"#9CA3AF"},title:`标签颜色: ${f[pe.name]||"默认"}`}),c.jsxs("span",{className:"flex-1 text-xs text-gray-800 dark:text-gray-200 truncate",children:["#",pe.name]}),R&&R.id===pe.id&&c.jsx(Br,{className:"mr-1 text-green-500",size:12}),pe.isPinned&&c.jsx(ub,{className:"mr-1 text-blue-500",size:12}),pe.isFavorite&&c.jsx(_o,{className:"mr-2 text-purple-500",size:12}),c.jsx("button",{onClick:ge=>ie(ge,pe.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",children:c.jsx(p2,{size:14})})]}),w===pe.id&&c.jsxs("div",{"data-menu-id":pe.id,className:"absolute right-2 top-8 shadow-lg z-50 min-w-[180px] rounded-none",style:{backgroundColor:"var(--theme-elevated)"},children:[c.jsx("button",{onClick:ge=>{ge.stopPropagation(),I(null)},className:"absolute top-2 right-2 p-1 rounded transition-colors",style:{backgroundColor:"transparent"},onMouseEnter:ge=>ge.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ge=>ge.target.style.backgroundColor="transparent",title:"关闭",children:c.jsx(wn,{className:"text-red-500 hover:text-red-700",size:14})}),c.jsxs("button",{onClick:()=>J("pin",pe),className:"w-full text-left px-3 py-2 text-sm flex items-center border-0 transition-colors",style:{backgroundColor:"transparent",color:"var(--theme-text)"},onMouseEnter:ge=>ge.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ge=>ge.target.style.backgroundColor="transparent",children:[c.jsx(ub,{className:`mr-2 ${pe.isPinned?"text-blue-500":""}`,size:14}),pe.isPinned?"取消置顶":"标签置顶"]}),c.jsxs("button",{onClick:()=>J("favorite",pe),className:"w-full text-left px-3 py-2 text-sm flex items-center border-0 transition-colors",style:{backgroundColor:"transparent",color:"var(--theme-text)"},onMouseEnter:ge=>ge.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ge=>ge.target.style.backgroundColor="transparent",children:[c.jsx(_o,{className:`mr-2 ${pe.isFavorite?"text-yellow-500 fill-current":""}`,size:14}),pe.isFavorite?"取消收藏":"收藏标签"]}),c.jsx("div",{className:"border-0 my-1"}),c.jsxs("button",{ref:A,onClick:()=>J("setColor",pe),className:"w-full text-left px-3 py-2 text-sm flex items-center border-0 transition-colors",style:{backgroundColor:"transparent",color:"var(--theme-text)"},onMouseEnter:ge=>ge.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ge=>ge.target.style.backgroundColor="transparent",children:[c.jsx("div",{className:"mr-2 w-4 h-4 rounded-full",style:{backgroundColor:f[pe.name]||"#9CA3AF",borderColor:"var(--theme-border)"}}),"设置颜色"]}),c.jsx("div",{className:"border-0 my-1"}),c.jsxs("button",{onClick:()=>J("remove",pe),className:"w-full text-left px-3 py-2 text-sm flex items-center border-0 transition-colors",style:{backgroundColor:"transparent",color:"var(--theme-text)"},onMouseEnter:ge=>ge.target.style.backgroundColor="var(--theme-surface)",onMouseLeave:ge=>ge.target.style.backgroundColor="transparent",children:[c.jsx(nF,{className:"mr-2",size:14}),"仅移除标签"]}),c.jsxs("button",{onClick:()=>J("deleteAll",pe),className:"w-full text-left px-3 py-2 text-sm flex items-center border-0 transition-colors",style:{backgroundColor:"transparent",color:"#ef4444"},onMouseEnter:ge=>{ge.target.style.backgroundColor="var(--theme-surface)",ge.target.style.color="#dc2626"},onMouseLeave:ge=>{ge.target.style.backgroundColor="transparent",ge.target.style.color="#ef4444"},title:"删除标签和笔记",children:[c.jsx(As,{className:"mr-2",size:14}),c.jsx("span",{children:"删除标签和笔记"})]})]})]},pe.id));return c.jsx("div",{className:`tag-manager flex flex-row h-full ${s}`,children:c.jsxs("div",{className:"flex-1 flex flex-col",children:[c.jsx("div",{className:"mb-4",children:c.jsx(uX,{selectedDate:n,onDateChange:t,noteDates:r})}),c.jsxs("div",{className:"flex-shrink-0 mb-3 flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-semibold text-theme-text",children:"标签管理"}),c.jsx("div",{className:"flex items-center gap-2"})]}),c.jsx("div",{className:"mb-3",children:c.jsxs("div",{className:"relative mb-2",children:[c.jsx("input",{type:"text",value:Me,onChange:X=>Ke(X.target.value),onKeyPress:async X=>{if(X.key==="Enter"&&Me.trim()){const Z=Me.trim();try{const pe=Z.toLowerCase();if(o.find(He=>(He.name||He.label||He.title||He.id||"").toLowerCase()===pe)){console.log("标签已存在，不允许重复创建:",Z);return}const Ee=await et.addTag({name:Z,isPinned:!1,children:[]});if(Ee){await et.setTagColor(Z,De),m(Qe=>({...Qe,[Z]:De})),console.log("通过搜索框添加标签成功:",Z,"颜色:",De,"ID:",Ee.id),window.dispatchEvent(new CustomEvent("tagsUpdated",{detail:{action:"add",tag:Ee,tagName:Z}}));const He=et.getTags();let Ye=[];try{const Qe=localStorage.getItem("memeos_favorite_tags");Qe&&(Ye=JSON.parse(Qe))}catch(Qe){console.error("获取收藏状态失败:",Qe)}const pt=He.map(Qe=>({...Qe,isFavorite:Ye.includes(Qe.name||Qe.label||Qe.title||Qe.id||"unknown")}));i(pt),Ke("")}else console.error("通过搜索框添加标签失败")}catch(pe){console.error("通过搜索框添加标签过程中发生错误:",pe)}}},placeholder:"搜索标签...",className:"w-full px-2 py-1 pr-16 border border-gray-300 dark:border-gray-600 rounded-lg text-xs focus:ring-0",style:{backgroundColor:"var(--theme-background)"}}),c.jsx("button",{onClick:async X=>{if(X.stopPropagation(),Me.trim()){const Z=Me.trim();try{const pe=Z.toLowerCase();if(o.find(He=>(He.name||He.label||He.title||He.id||"").toLowerCase()===pe)){console.log("标签已存在，不允许重复创建:",Z);return}const Ee=await et.addTag({name:Z,isPinned:!1,children:[]});if(Ee){await et.setTagColor(Z,De),m(Qe=>({...Qe,[Z]:De})),console.log("通过+号按钮添加标签成功:",Z,"颜色:",De,"ID:",Ee.id),window.dispatchEvent(new CustomEvent("tagsUpdated",{detail:{action:"add",tag:Ee,tagName:Z}}));const He=et.getTags();let Ye=[];try{const Qe=localStorage.getItem("memeos_favorite_tags");Qe&&(Ye=JSON.parse(Qe))}catch(Qe){console.error("获取收藏状态失败:",Qe)}const pt=He.map(Qe=>({...Qe,isFavorite:Ye.includes(Qe.name||Qe.label||Qe.title||Qe.id||"unknown")}));i(pt),Ke("")}else console.error("通过+号按钮添加标签失败")}catch(pe){console.error("通过+号按钮添加标签过程中发生错误:",pe)}}},className:"absolute right-10 top-1/2 transform -translate-y-1/2 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"添加标签",children:c.jsx(za,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),!D&&c.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:[c.jsx("button",{ref:F,onClick:()=>dt(!ut),className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"选择标签颜色",children:c.jsx("div",{className:"w-5 h-5 rounded-full border border-gray-300 dark:border-gray-600",style:{backgroundColor:De}})}),c.jsx(na,{isOpen:ut,triggerRef:F,onClose:()=>dt(!1),className:"min-w-[200px] max-w-[400px]",children:c.jsxs("div",{className:"rounded-lg shadow-lg p-3 w-full",style:{backgroundColor:"#171717"},children:[c.jsx("div",{className:"grid grid-cols-6 gap-2 mb-4",children:rs.map(X=>c.jsx("button",{onClick:async()=>{nt(X.hexColor),D&&(await Ve(D.name,X.hexColor),ue(null)),dt(!1),console.log("已选择颜色:",X.hexColor)},className:"w-6 h-6 rounded-full border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform",style:{backgroundColor:X.hexColor},title:X.name},X.value))}),c.jsxs("div",{className:"pt-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"自定义颜色"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"color",value:De,onChange:async X=>{const Z=X.target.value;nt(Z),D&&await Ve(D.name,Z)},className:"w-10 h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"}),c.jsx("input",{type:"text",value:De,onChange:async X=>{const Z=X.target.value,pe=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;(pe.test(Z)||Z==="")&&(nt(Z),D&&pe.test(Z)&&await Ve(D.name,Z))},placeholder:"#000000",className:"flex-1 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-sm focus:ring-0"})]})]})]})})]})]})}),c.jsxs("div",{className:"flex-1 min-h-0 mb-4 relative",children:[D&&c.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-light-bg dark:bg-dark-surface rounded-lg p-6 shadow-xl max-w-md w-full mx-4",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-light-elevated dark:bg-dark-elevated mb-4",children:c.jsx(n1,{className:"h-6 w-6 text-light-text dark:text-dark-text"})}),c.jsx("h3",{className:"text-lg font-medium text-light-text dark:text-dark-text mb-2",children:"设置标签颜色"}),c.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:D.name})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("div",{className:"grid grid-cols-8 gap-3 mb-6",children:rs.map(X=>c.jsx("button",{onClick:async()=>{nt(X.hexColor),await Ve(D.name,X.hexColor),ue(null),dt(!1),console.log("标签颜色已更新:",D.name,"->",X.hexColor)},className:"w-8 h-8 rounded-full border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform",style:{backgroundColor:X.hexColor},title:X.name},X.value))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-3",children:"自定义颜色"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"color",value:De,onChange:async X=>{const Z=X.target.value;nt(Z),await Ve(D.name,Z)},className:"w-12 h-10 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"}),c.jsx("input",{type:"text",value:De,onChange:async X=>{const Z=X.target.value,pe=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;(pe.test(Z)||Z==="")&&(nt(Z),pe.test(Z)&&await Ve(D.name,Z))},placeholder:"#000000",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-sm focus:ring-0"})]})]})]}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx("button",{onClick:()=>{ue(null),dt(!1)},className:"px-4 py-2 bg-light-elevated dark:bg-dark-elevated hover:bg-light-border dark:hover:bg-dark-border text-light-text dark:text-dark-text rounded-md transition-colors",children:"取消"}),c.jsx("button",{onClick:async()=>{De&&(await Ve(D.name,De),ue(null),dt(!1))},className:"px-4 py-2 bg-light-bg dark:bg-dark-bg hover:bg-light-border dark:hover:bg-dark-border text-light-text dark:text-dark-text rounded-md transition-colors",children:"确认"})]})]})}),c.jsx("div",{className:"h-full overflow-y-auto hide-scrollbar smooth-scroll-container scrollbar-smooth scrollbar-hide",children:h?c.jsx("div",{className:"text-sm text-theme-text-muted py-4 text-center",children:"加载中..."}):(()=>{const X=be(o,Me);return X.length>0?c.jsx("div",{className:"space-y-1",children:je(X)}):c.jsx("div",{className:"text-sm text-theme-text-muted py-4 text-center",children:Me?"没有找到匹配的标签":"暂无标签"})})()})]}),j&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-light-bg dark:bg-dark-surface rounded-lg p-6 shadow-xl max-w-sm w-full mx-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-light-elevated dark:bg-dark-elevated mb-4",children:c.jsx(n1,{className:"h-6 w-6 text-light-text dark:text-dark-text"})}),c.jsx("h3",{className:"text-lg font-medium text-light-text dark:text-dark-text mb-2",children:"重命名标签"}),c.jsx("div",{className:"mb-4",children:c.jsx("input",{type:"text",value:C,onChange:X=>k(X.target.value),placeholder:"输入新的标签名称",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-sm focus:ring-0",onKeyPress:X=>X.key==="Enter"&&me(),autoFocus:!0})})]}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx("button",{onClick:()=>{_(null),k("")},className:"px-4 py-2 bg-light-elevated dark:bg-dark-elevated hover:bg-light-border dark:hover:bg-dark-border text-light-text dark:text-dark-text rounded-md transition-colors",children:"取消"}),c.jsx("button",{onClick:me,className:"px-4 py-2 bg-light-bg dark:bg-dark-bg hover:bg-light-border dark:hover:bg-dark-border text-light-text dark:text-dark-text rounded-md transition-colors",children:"确认重命名"})]})]})}),Y&&c.jsx(dX,{isOpen:Y,onClose:Ne,onConfirm:$,title:Q.title,message:Q.message,type:Q.type}),v&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-light-bg dark:bg-dark-surface rounded-lg p-6 shadow-xl max-w-sm w-full mx-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:c.jsx(As,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),c.jsx("h3",{className:"text-lg font-medium text-light-text dark:text-dark-text mb-2",children:"删除标签"}),c.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted mb-4",children:['确定要删除标签 "',y&&(typeof y=="string"?y:y.name),'" 吗？',c.jsx("br",{}),"删除后，该标签将从所有笔记中移除。"]})]}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx("button",{onClick:K,className:"px-4 py-2 bg-light-elevated dark:bg-dark-elevated hover:bg-light-border dark:hover:bg-dark-border text-light-text dark:text-dark-text rounded-md transition-colors",children:"取消"}),c.jsx("button",{onClick:oe,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md transition-colors",children:"确认删除"})]})]})})]})})},hX=({updateTags:e,dateFilter:t,onDateFilter:n,selectedTag:r,onTagChange:s})=>{const[o,i]=N.useState([]),[l,u]=N.useState(!0),[f,m]=N.useState(null),[h,g]=N.useState([]),[p,b]=N.useState([]),[v,T]=N.useState(!1),[y,E]=N.useState(!1),[w,I]=N.useState(!1),[j,_]=N.useState(!1);N.useState(!1);const[C,k]=N.useState(0),[R,P]=N.useState(""),[Y,z]=N.useState(!1),Q=N.useRef(null),[M,le]=N.useState({}),[Ne,$]=N.useState(!1),[G,H]=N.useState(0),[U,ee]=N.useState(!1),te=N.useRef(null),{darkMode:V,toggleDarkMode:xe}=ca(),we=js(),Le=la();o2();const Ve=[{name:"蓝色",value:"blue",hexColor:"#3B82F6"},{name:"绿色",value:"green",hexColor:"#10B981"},{name:"红色",value:"red",hexColor:"#EF4444"},{name:"黄色",value:"yellow",hexColor:"#F59E0B"},{name:"紫色",value:"purple",hexColor:"#8B5CF6"},{name:"粉色",value:"pink",hexColor:"#EC4899"},{name:"青色",value:"cyan",hexColor:"#06B6D4"},{name:"橙色",value:"orange",hexColor:"#F97316"},{name:"灰色",value:"gray",hexColor:"#6B7280"},{name:"靛蓝",value:"indigo",hexColor:"#6366F1"},{name:"石灰",value:"lime",hexColor:"#84CC16"},{name:"翠绿",value:"emerald",hexColor:"#059669"},{name:"天蓝",value:"sky",hexColor:"#0EA5E9"},{name:"玫瑰",value:"rose",hexColor:"#F43F5E"},{name:"琥珀",value:"amber",hexColor:"#D97706"},{name:"青柠",value:"teal",hexColor:"#14B8A6"}];TF(".notes-list-container",{defaultPosition:"bottom-right",mobilePosition:"bottom-right",desktopPosition:"bottom-right"});const Me=N.useCallback(()=>window.innerWidth<1024,[]);N.useCallback(()=>{Me()?(T(!1),E(!0),window.location.pathname!=="/"&&we("/")):E(!y)},[Me,y,we]);const Ke=N.useCallback(J=>{s&&typeof s=="function"&&s(J),window.dispatchEvent(new CustomEvent("tagFilterChanged",{detail:{tagName:J}}))},[s]);N.useEffect(()=>(window.handleTagFilter=Ke,()=>{delete window.handleTagFilter}),[Ke]);const De=N.useCallback(async(J,me,be={})=>{try{await C1(J,me),be.preventReload?i(ye=>ye.map(je=>je.id===J?{...je,...me}:je)):(await F(),await ie())}catch(ye){m("更新笔记失败"),console.error(ye),await F()}}),nt=o.filter(J=>{var be,ye,je;return R===""||((be=J.title)==null?void 0:be.toLowerCase().includes(R.toLowerCase()))||((ye=J.content)==null?void 0:ye.toLowerCase().includes(R.toLowerCase()))||((je=J.tags)==null?void 0:je.some(X=>X.toLowerCase().includes(R.toLowerCase())))}),ut=async J=>{var ye,je,X;if(console.log("[HomePage] handleDeleteNote被调用，笔记ID:",J),!o.find(Z=>Z.id===J)){console.error("[HomePage] 未找到要删除的笔记");return}console.log("[HomePage] 开始删除流程，移动到回收站");const be=[...o];i(Z=>Z.filter(pe=>pe.id!==J));try{console.log("[HomePage] 调用deleteNote API"),await dm(J),console.log("[HomePage] deleteNote API调用成功"),await ie(),console.log("[HomePage] 删除完成，已移动到回收站，标签已刷新")}catch(Z){const pe=((je=(ye=Z.response)==null?void 0:ye.data)==null?void 0:je.message)||"删除笔记失败，请重试";m(pe),console.error("[DELETE] 删除笔记失败:",((X=Z.response)==null?void 0:X.data)||Z),i(be)}},dt=async(J,me)=>{const be=[...o],ye=o.map(je=>je.id===J?{...je,is_pinned:!je.is_pinned}:je);ye.sort(jh),i(ye);try{await fm(J)}catch(je){i(be),m("置顶操作失败"),console.error("[PIN] 置顶操作失败:",je)}},D=J=>{if(console.log("[跳转] handleNoteClick被调用，笔记ID:",J,"类型:",typeof J),console.log("[跳转] 当前路径:",window.location.pathname),window.location.pathname!=="/"){console.log("[跳转] 不在主页，跳转到主页并带上note参数"),we(`/?note=${J}`);return}const me=document.querySelector(`[data-note-id="${J}"]`);console.log("[跳转] 查找笔记元素:",me,"选择器:",`[data-note-id="${J}"]`),me?(console.log("[跳转] 找到笔记元素，开始滚动和高亮"),me.scrollIntoView({behavior:"smooth",block:"center"}),me.style.transition="all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",me.style.transform="scale(1.03)",me.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",me.classList.add("shadow-card-hover"),setTimeout(()=>{me.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",me.style.transform="scale(1)",me.style.boxShadow="",me.classList.remove("shadow-card-hover")},1500)):console.log("[跳转] 未找到笔记元素，可用笔记:",o.map(be=>`${be.id}:${be.title}`))};N.useEffect(()=>{(async()=>{try{const me=await r1();Object.keys(me).length>0&&localStorage.setItem("tagColors",JSON.stringify(me)),le(me),$(!0)}catch(me){console.error("加载标签颜色失败:",me);const be=localStorage.getItem("tagColors");be&&le(JSON.parse(be)),$(!0)}})()},[]),N.useEffect(()=>{const J=async ye=>{try{const je=await r1();le(je),localStorage.setItem("tagColors",JSON.stringify(je))}catch(je){console.error("同步标签颜色失败:",je);const{tagName:X,color:Z}=ye.detail||{};X&&Z&&le(pe=>({...pe,[X]:Z}))}},me=ye=>{const{tagName:je}=ye.detail||{};console.log("🎯 HomePage收到标签筛选变化事件:",{tagName:je})},be=()=>{console.log("🎯 HomePage收到筛选清除事件"),k(ye=>ye+1)};return window.addEventListener("tagColorsUpdated",J),window.addEventListener("tagFilterChanged",me),window.addEventListener("filterCleared",be),()=>{window.removeEventListener("tagColorsUpdated",J),window.removeEventListener("tagFilterChanged",me),window.removeEventListener("filterCleared",be)}},[]);const ue=J=>{if(!J)return{backgroundColor:"#6B7280",color:"#ffffff"};const me=M[J];if(me&&me.startsWith("#"))return{backgroundColor:me,color:"#ffffff"};const be=Ve.find(ye=>ye.value===me);return be?{backgroundColor:be.hexColor,color:"#ffffff"}:{backgroundColor:"#6B7280",color:"#ffffff"}},F=N.useCallback(async(J="")=>{try{u(!0);let me=await y2(J),be=[];if(me&&Array.isArray(me.notes)?be=me.notes:Array.isArray(me)?be=me:(console.error("API返回的数据格式不正确:",me),be=[]),t)try{be=be.filter(ye=>(X=>{if(!X)return!1;let Z;return X.includes("T")&&X.includes("Z")?(Z=a1(X),Z=new Date(Z.getTime()+Z.getTimezoneOffset()*6e4)):X.includes("-")&&X.includes(":")?Z=new Date(X):Z=new Date(X),Tt(Z,"yyyy-MM-dd")===t})(ye.created_at))}catch(ye){console.error("日期筛选错误:",ye),be=[]}if(r)try{be=be.filter(ye=>ye.tags?typeof ye.tags=="string"?ye.tags.split(",").map(X=>X.trim()).filter(X=>X).includes(r):Array.isArray(ye.tags)?ye.tags.some(je=>typeof je=="string"?je===r:typeof je=="object"&&je.name?je.name===r:!1):!1:!1)}catch(ye){console.error("标签筛选错误:",ye),be=[]}try{be.sort(jh)}catch(ye){console.error("排序错误:",ye),be=[]}i(be),H(be.length),m(null)}catch(me){console.error("加载笔记失败:",me),m("加载笔记失败"),i([]),H(0)}finally{u(!1)}},[t,r]),A=async()=>{try{const J=await jy();b(J),e&&typeof e=="function"&&e(J)}catch(J){console.error("加载标签失败:",J)}},L=async()=>{try{const J=await S_();g(J)}catch(J){console.error("加载笔记日期失败:",J)}},K=()=>{te.current&&te.current.scrollTo({top:0,behavior:"smooth"})};N.useEffect(()=>{const J=me=>{Q.current&&!Q.current.contains(me.target)&&z(!1)};return Y&&document.addEventListener("mousedown",J),()=>{document.removeEventListener("mousedown",J)}},[Y]);const oe=N.useCallback(()=>{if(!te.current)return;const{scrollTop:J}=te.current;ee(J>300)},[]);N.useEffect(()=>{i([]),F()},[t,r,F]),N.useEffect(()=>{const me=new URLSearchParams(Le.search).get("note");me&&!l&&o.length>0&&setTimeout(()=>{const be=document.querySelector(`[data-note-id="${me}"]`);if(be){be.scrollIntoView({behavior:"smooth",block:"center"}),be.style.transition="all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",be.style.transform="scale(1.03)",be.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",be.classList.add("shadow-card-hover"),setTimeout(()=>{be.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",be.style.transform="scale(1)",be.style.boxShadow="",be.classList.remove("shadow-card-hover")},1500);const ye=window.location.pathname;window.history.replaceState({},"",ye)}},500)},[Le.search,l,o]),N.useEffect(()=>{const J=te.current;if(J)return J.addEventListener("scroll",oe),()=>{J.removeEventListener("scroll",oe)}},[oe]);const ie=async()=>{try{const J=await jy();b(J),e&&typeof e=="function"&&e(J)}catch(J){console.error("刷新标签失败:",J)}};return N.useEffect(()=>{A(),L()},[]),N.useEffect(()=>{const J=()=>{ie()};return window.addEventListener("focus",J),()=>{window.removeEventListener("focus",J)}},[]),N.useEffect(()=>(window.refreshNotes=async()=>{await F()},window.refreshTags=async()=>{await ie()},()=>{delete window.refreshNotes,delete window.refreshTags}),[F,ie]),c.jsxs("div",{className:"flex min-h-screen",children:[(v||y)&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-5 lg:hidden",onClick:()=>{T(!1),E(!1)}}),c.jsxs("div",{className:`${w?"w-16":"w-40"} h-screen flex flex-col fixed left-0 top-0 z-20 transform transition-all duration-500 ease-out shadow-2xl lg:shadow-none bg-theme-surface ${v?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[c.jsx("div",{className:"flex-1 p-4 overflow-y-auto overflow-x-hidden hide-scrollbar scrollbar-hide",children:c.jsxs("div",{className:"flex flex-col space-y-1 w-full",children:[" ",c.jsxs("button",{onClick:()=>we("/"),className:"w-full flex items-center justify-start px-3 py-3 h-12 rounded-lg hover:bg-theme-hover transition-colors text-theme-text group",title:"返回笔记列表",children:[c.jsx(xh,{className:"w-5 h-5 flex-shrink-0 group-hover:scale-110 transition-transform"}),!w&&c.jsx("span",{className:"font-medium ml-3",children:"笔记"})]}),c.jsxs("button",{onClick:xe,className:"w-full flex items-center justify-start px-3 py-3 h-12 rounded-lg hover:bg-theme-hover transition-colors text-theme-text group",title:V?"切换到浅色模式":"切换到深色模式",children:[c.jsx(db,{className:"w-5 h-5 flex-shrink-0 group-hover:scale-110 transition-transform"}),!w&&c.jsx("span",{className:"font-medium ml-3",children:V?"浅色":"深色"})]}),c.jsxs("button",{onClick:()=>we("/note-tasks"),className:"w-full flex items-center justify-start px-3 py-3 h-12 rounded-lg hover:bg-theme-hover transition-colors text-theme-text group",children:[c.jsx(cm,{className:"w-5 h-5 flex-shrink-0 group-hover:scale-110 transition-transform"}),!w&&c.jsx("span",{className:"font-medium ml-3",children:"任务"})]}),c.jsxs(Cy,{to:"/enhanced-backup-manager",className:"w-full flex items-center justify-start px-3 py-3 h-12 rounded-lg hover:bg-theme-hover transition-colors text-theme-text group",children:[c.jsx(dF,{className:"w-5 h-5 flex-shrink-0 group-hover:scale-110 transition-transform"}),!w&&c.jsx("span",{className:"font-medium ml-3",children:"备份"})]}),c.jsxs("button",{className:"w-full flex items-center justify-start px-3 py-3 h-12 rounded-lg hover:bg-theme-hover transition-colors text-theme-text group",children:[c.jsx("svg",{className:"w-5 h-5 flex-shrink-0 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),!w&&c.jsx("span",{className:"font-medium ml-3",children:"统计"})]}),c.jsxs(Cy,{to:"/recycle-bin",className:"w-full flex items-center justify-start px-3 py-3 h-12 rounded-lg hover:bg-theme-hover transition-colors text-theme-text group",children:[c.jsx(As,{className:"w-5 h-5 flex-shrink-0 group-hover:scale-110 transition-transform"}),!w&&c.jsx("span",{className:"font-medium ml-3",children:"回收站"})]}),c.jsxs("button",{onClick:()=>we("/settings"),className:"w-full flex items-center justify-start px-3 py-3 h-12 rounded-lg hover:bg-theme-hover transition-colors text-theme-text group",children:[c.jsx(ac,{className:"w-5 h-5 flex-shrink-0 group-hover:scale-110 transition-transform"}),!w&&c.jsx("span",{className:"font-medium ml-3",children:"设置"})]})]})}),c.jsx("div",{className:"flex-shrink-0 p-4 bg-theme-surface border-t border-theme-border",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("button",{onClick:()=>I(!w),className:"p-2 rounded-lg hover:bg-theme-hover transition-colors text-theme-text",title:"收起侧边栏",children:c.jsx("svg",{className:`w-5 h-5 transition-transform ${w?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})})})]}),c.jsxs(y_,{className:"flex-1 flex flex-col min-h-screen lg:ml-40 lg:mr-80 md:ml-0 md:mr-0 sm:ml-0 sm:mr-0",type:"bg",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto scroll-smooth hide-scrollbar smooth-scroll-container scrollbar-smooth scrollbar-hide notes-list-container",ref:te,children:[c.jsx("div",{className:"sticky top-0 z-10 bg-theme-surface/80 backdrop-blur-sm px-4 py-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-xl font-bold text-theme-text",children:"灰灰笔记"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"relative",ref:Q,children:Y?c.jsxs("div",{className:"flex items-center bg-theme-surface rounded-lg shadow-lg",children:[c.jsx("svg",{className:"w-4 h-4 text-theme-text-secondary ml-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c.jsx("input",{type:"text",placeholder:"搜索笔记...",value:R,onChange:J=>P(J.target.value),className:"w-48 px-2 py-1 bg-transparent text-sm text-theme-text placeholder-theme-text-secondary focus:outline-none focus:ring-0 border-0 shadow-none",autoFocus:!0}),c.jsx("button",{onClick:()=>{z(!1),P("")},className:"p-1 hover:bg-theme-hover rounded-full transition-colors",title:"关闭搜索",children:c.jsx("svg",{className:"w-4 h-4 text-theme-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):c.jsx("button",{onClick:()=>z(!0),className:"p-2 rounded-lg hover:bg-theme-hover transition-colors text-theme-text",title:"搜索笔记",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),c.jsx("button",{onClick:()=>{F(),ie()},className:"p-2 rounded-lg hover:bg-theme-hover transition-colors text-theme-text",title:"刷新笔记列表",children:c.jsx(Iy,{className:"w-5 h-5"})}),c.jsx("button",{onClick:xe,className:"p-2 rounded-lg hover:bg-theme-hover transition-colors text-theme-text",title:V?"切换到浅色模式":"切换到深色模式",children:V?c.jsx(db,{className:"w-5 h-5"}):c.jsx(cF,{className:"w-5 h-5"})})]})]})}),c.jsx("div",{className:"px-4 py-6",children:c.jsxs(c.Fragment,{children:[(t||r||R)&&c.jsxs("div",{className:"mb-6 flex items-center gap-2 flex-wrap",children:[c.jsx("span",{className:"text-sm text-theme-text-muted",children:"当前筛选:"}),R&&c.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm",children:[c.jsxs("span",{children:["搜索: ",R]}),c.jsx("button",{onClick:()=>P(""),className:"ml-1 hover:bg-yellow-200 rounded-full p-0.5 transition-colors",title:"清除搜索",children:c.jsx(wn,{size:12})})]}),t&&c.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-theme-primary/10 text-theme-primary rounded-full text-sm",children:[c.jsxs("span",{children:["日期: ",Tt(new Date(t),"yyyy-MM-dd")]}),c.jsx("button",{onClick:()=>n(null),className:"ml-1 hover:bg-theme-primary/20 rounded-full p-0.5 transition-colors",title:"清除日期筛选",children:c.jsx(wn,{size:12})})]}),r&&c.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 rounded-full text-sm",style:Ne?ue(r):{backgroundColor:"#6B7280",color:"#ffffff"},children:[c.jsxs("span",{children:["标签: #",r]}),c.jsx("button",{onClick:()=>s(null),className:"ml-1 hover:bg-black/20 dark:hover:bg-white/20 rounded-full p-0.5 transition-colors",title:"清除标签筛选",children:c.jsx(wn,{size:12,className:"text-white"})})]}),c.jsx("button",{onClick:()=>{P(""),n(null),s(null),window.dispatchEvent(new CustomEvent("filterCleared"))},className:"px-3 py-1 bg-theme-hover text-theme-text-secondary rounded-full text-sm hover:bg-theme-hover/80 transition-colors",title:"清除所有筛选",children:"清除所有"})]}),f&&c.jsx("div",{className:"bg-theme-danger/10 border-l-4 border-theme-danger text-theme-danger p-4 rounded mb-6",role:"alert",children:c.jsx("p",{children:f})}),l?c.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-10 animate-in fade-in-0 duration-300",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-slate-500 shadow-lg mx-auto mb-4"}),c.jsx("p",{className:"text-xl font-medium text-theme-text",children:"笔记正在加载..."})]})}):nt.length>0?c.jsx(c.Fragment,{children:c.jsx("div",{className:"flex flex-col items-center space-y-paper-vertical",children:nt.map((J,me)=>c.jsx(W2,{note:J,onEdit:De,onDelete:ut,onPin:dt,onNoteClick:D,notes:nt,"data-note-id":J.id,style:{animationDelay:`${me*100}ms`,animationFillMode:"both"}},J.id))})}):c.jsx(G2,{message:R?"没有找到匹配的笔记":"还没有笔记",subMessage:R?"尝试其他关键词":"开始创建你的第一个笔记吧！"})]})})]}),c.jsx("div",{className:`fixed bottom-8 z-[99999] ${j?"right-8":"right-[calc(20rem+2rem)]"}`,children:c.jsx("button",{onClick:J=>{J.stopPropagation(),we("/edit")},className:"bg-yellow-400 hover:bg-yellow-500 text-white p-4 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-yellow-300 focus:ring-offset-2 group",title:"创建新笔记",children:c.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})]}),U&&c.jsx("button",{onClick:K,className:"fixed bottom-8 right-8 z-50 bg-theme-surface hover:bg-theme-hover text-theme-text border border-theme-border p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-theme-border focus:ring-offset-2 group",title:"回到顶部",children:c.jsx(JP,{className:"h-5 w-5"})}),!j&&c.jsxs("div",{className:`w-80 h-screen flex flex-col fixed right-0 top-0 z-20 transform transition-all duration-500 ease-out shadow-2xl lg:shadow-none bg-theme-surface hide-scrollbar scrollbar-hide ${y?"translate-x-0":"translate-x-full lg:translate-x-0"}`,children:[c.jsx("div",{className:"flex-1 p-4 overflow-y-auto overflow-x-hidden hide-scrollbar scrollbar-hide",children:c.jsx(fX,{onTagsChange:J=>{b(J),e&&typeof e=="function"&&e(J)},onDateChange:n,selectedDate:t,noteDates:h})}),c.jsx("div",{className:"flex-shrink-0 p-4 bg-white/10 dark:bg:black/10",children:c.jsxs("div",{className:"text-xs text-theme-text opacity-70 drop-shadow-sm",children:[G,"条笔记"]})})]})]})},mX=()=>{const{tagName:e}=o2(),t=js(),[n,r]=N.useState([]),[s,o]=N.useState(!0),[i,l]=N.useState(null),u=async()=>{try{o(!0);const b=await __(e);b.sort(jh),r(b),l(null)}catch(b){console.error("加载笔记失败:",b),l("加载笔记失败"),r([])}finally{o(!1)}},f=N.useCallback(async(b,v,T={})=>{try{await C1(b,v),T.preventReload?r(y=>y.map(E=>E.id===b?{...E,...v}:E)):await u()}catch(y){l("更新笔记失败"),console.error(y),await u()}},[]),m=async b=>{const v=n.find(T=>T.id===b);if(!v){console.error("[TagsPage] 未找到要删除的笔记");return}try{const T=JSON.parse(localStorage.getItem("deletedNotes")||"[]"),y={...v,deletedAt:new Date().toISOString(),originalId:b};T.unshift(y),T.length>100&&T.splice(100),localStorage.setItem("deletedNotes",JSON.stringify(T)),await dm(b),await u()}catch(T){l("删除笔记失败"),console.error(T);try{const E=JSON.parse(localStorage.getItem("deletedNotes")||"[]").filter(w=>w.originalId!==b);localStorage.setItem("deletedNotes",JSON.stringify(E))}catch(y){console.error("[TagsPage] 清理回收站失败:",y)}}},h=async(b,v)=>{const T=[...n],y=n.map(E=>E.id===b?{...E,is_pinned:!E.is_pinned}:E);y.sort(jh),r(y);try{await fm(b)}catch(E){r(T),l("置顶操作失败"),console.error("[PIN] 置顶操作失败:",E)}},g=b=>{const v=document.querySelector(`[data-note-id="${b}"]`);v&&(v.scrollIntoView({behavior:"smooth",block:"center"}),v.style.transition="all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",v.style.transform="scale(1.03)",v.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",v.classList.add("shadow-card-hover"),setTimeout(()=>{v.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",v.style.transform="scale(1)",v.style.boxShadow="",v.classList.remove("shadow-card-hover")},1500))},p=()=>{t("/")};return N.useEffect(()=>{e&&u()},[e]),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:p,className:"flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:[c.jsx(E1,{className:"mr-2"}),"返回"]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(lc,{className:"text-primary-500"}),c.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["标签: ",decodeURIComponent(e)]})]})]}),i&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded",role:"alert",children:c.jsx("p",{children:i})}),s?c.jsx("div",{className:"flex justify-center py-8",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):n.length>0?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["找到 ",n.length,' 个包含标签 "',decodeURIComponent(e),'" 的笔记']}),n.map(b=>c.jsx("div",{"data-note-id":b.id,className:"w-full max-w-2xl mx-auto",children:c.jsx(W2,{note:b,onEdit:f,onDelete:m,onPin:h,onNoteClick:g,notes:n})},b.id))]}):c.jsx(G2,{message:`没有找到包含标签 "${decodeURIComponent(e)}" 的笔记`,subMessage:"创建一个新笔记并添加这个标签吧！"})]})},pX=()=>{const{date:e}=o2(),[t,n]=N.useState([]),[r,s]=N.useState(!0),[o,i]=N.useState(null);js();const l=async()=>{try{s(!0),console.log(`加载日期 ${e} 的笔记`);const g=await A_(e);console.log(`获取到 ${g.length} 条笔记`),n(g),i(null)}catch(g){i("加载笔记失败"),console.error(g)}finally{s(!1)}};N.useEffect(()=>{e?l():i("无效的日期参数")},[e]);const u=async(g,p)=>{try{await C1(g,p),await l()}catch(b){i("更新笔记失败"),console.error(b)}},f=async g=>{const p=t.find(b=>b.id===g);if(!p){console.error("[DatePage] 未找到要删除的笔记");return}try{const b=JSON.parse(localStorage.getItem("deletedNotes")||"[]"),v={...p,deletedAt:new Date().toISOString(),originalId:g};b.unshift(v),b.length>100&&b.splice(100),localStorage.setItem("deletedNotes",JSON.stringify(b)),await dm(g),n(t.filter(T=>T.id!==g))}catch(b){i("删除笔记失败"),console.error(b);try{const T=JSON.parse(localStorage.getItem("deletedNotes")||"[]").filter(y=>y.originalId!==g);localStorage.setItem("deletedNotes",JSON.stringify(T))}catch(v){console.error("[DatePage] 清理回收站失败:",v)}}},m=g=>{const p=document.querySelector(`[data-note-id="${g}"]`);p&&(p.scrollIntoView({behavior:"smooth",block:"center"}),p.style.transition="all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",p.style.transform="scale(1.03)",p.style.boxShadow="0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",p.classList.add("shadow-card-hover"),setTimeout(()=>{p.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",p.style.transform="scale(1)",p.style.boxShadow="",p.classList.remove("shadow-card-hover")},1500))},h=g=>{try{const p=a1(g);return Tt(p,"yyyy年MM月dd日 EEEE",{locale:Rn})}catch{return g}};return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx(Cy,{to:"/",className:"mr-3 p-2 rounded-md hover:bg-theme-elevated",children:c.jsx(E1,{className:"h-5 w-5"})}),c.jsxs("div",{className:"flex items-center",children:[c.jsx(tr,{className:"mr-2 h-5 w-5 text-primary-500"}),c.jsx("h2",{className:"text-2xl font-bold",children:h(e)})]})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded",role:"alert",children:c.jsx("p",{children:o})}),r?c.jsx("div",{className:"flex justify-center py-8",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):t.length>0?c.jsx("div",{className:"space-y-4",children:t.map(g=>c.jsx("div",{"data-note-id":g.id,className:"w-full max-w-2xl mx-auto",children:c.jsx(W2,{note:g,onEdit:u,onDelete:f,onNoteClick:m,notes:t})},g.id))}):c.jsx(G2,{message:`${h(e)}没有笔记`,subMessage:"这一天还没有创建笔记"})]})},gX=({onDateFilter:e=()=>{},currentDateFilter:t=null})=>{const[n,r]=N.useState(new Date),[s,o]=N.useState(null),[i,l]=N.useState([]);N.useEffect(()=>{if(t)try{o(a1(t))}catch(p){console.error("日期解析错误:",p),o(null)}else o(null)},[t]),N.useEffect(()=>{(async()=>{try{const b=Tt(Th(n),"yyyy-MM-dd"),v=Tt(i1(n),"yyyy-MM-dd");try{const T=await k_(b,v,!0),y=Array.isArray(T)?T.map(E=>a1(E)):[];l(y)}catch(T){console.error("获取日期失败:",T),l([])}}catch(b){console.error("日历组件错误:",b),l([])}})()},[n]);const u=()=>{r(v2(n,1))},f=()=>{r(hm(n,1))},m=p=>{if(!fu(p,n))return;const b=Tt(p,"yyyy-MM-dd");s&&Tt(s,"yyyy-MM-dd")===b?(o(null),typeof e=="function"&&e(null)):(o(p),typeof e=="function"&&e(b))},h=()=>{o(null),e(null)},g=()=>{const p=Th(n),b=i1(p),v=p,T=b,y="d",E=[];let w=[],I=v,j="";const C=["日","一","二","三","四","五","六"].map((k,R)=>c.jsx("div",{className:"text-center py-1 text-xs font-medium text-gray-500 dark:text-gray-400",children:k},R));for(E.unshift(c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:C},"header"));I<=T;){for(let k=0;k<7;k++){j=Tt(I,y);const R=I,P=i.some(Y=>Tt(Y,"yyyy-MM-dd")===Tt(R,"yyyy-MM-dd"));s&&_1(I,s),w.push(c.jsx("div",{className:`
              calendar-day-cell h-7 w-7 flex items-center justify-center text-xs rounded-full cursor-pointer
              ${ni(I)?"bg-primary-500 text-white":""}
              ${!ni(I)&&fu(I,p)?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-600"}
              ${s&&Tt(I,"yyyy-MM-dd")===Tt(s,"yyyy-MM-dd")?"ring-2 ring-primary-500 font-bold bg-primary-100 dark:bg-primary-900/50":""}
              ${P&&!ni(I)?"font-bold text-primary-600 dark:text-primary-400":""}
              ${fu(I,p)?"hover:bg-theme-elevated":"pointer-events-none"}"
            `,onClick:()=>fu(I,p)&&m(R),title:Tt(I,"yyyy年MM月dd日"),children:j},I.toString())),I=new Date(I.setDate(I.getDate()+1))}E.push(c.jsx("div",{className:"grid grid-cols-7 gap-1",children:w},I.toString())),w=[]}return c.jsx("div",{className:"mt-1",children:E})};return c.jsxs("div",{className:"calendar bg-surface dark:bg-gray-800 rounded-lg shadow-sm p-3 mb-4",children:[c.jsxs("div",{className:"header flex justify-between items-center mb-2",children:[c.jsx(tr,{className:"text-primary-500"}),c.jsx("h2",{className:"text-sm font-medium",children:"日历"}),c.jsx("div",{className:"flex",children:s?c.jsx("button",{onClick:h,className:"p-1 hover:bg-theme-elevated rounded text-red-500",title:"清除筛选",children:c.jsx(wn,{className:"h-4 w-4"})}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:u,className:"p-1 hover:bg-theme-elevated rounded",title:"上个月",children:c.jsx(h2,{className:"h-4 w-4"})}),c.jsx("button",{onClick:f,className:"p-1 hover:bg-theme-elevated rounded",title:"下个月",children:c.jsx(t1,{className:"h-4 w-4"})})]})})]}),s?c.jsx("div",{className:"text-center mb-2 p-1 bg-primary-50 dark:bg-primary-900/30 rounded-md",children:c.jsx("span",{className:"text-xs font-medium text-primary-600 dark:text-primary-400",children:s&&Tt(s,"yyyy年MM月dd日",{locale:Rn})})}):c.jsx("div",{className:"text-center text-sm font-medium mb-2",children:Tt(n,"yyyy年MM月",{locale:Rn})}),g()]})},yX=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"mb-6 flex items-center",children:[c.jsx(tr,{className:"mr-2 h-6 w-6 text-primary-500"}),c.jsx("h2",{className:"text-2xl font-bold",children:"日历视图"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("h3",{className:"text-lg font-medium",children:Tt(No(new Date,"Asia/Shanghai"),"yyyy年MM月",{locale:Rn})}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"点击日期查看对应的笔记"})]}),c.jsx(gX,{})]})]}),xX=()=>{js();const[e,t]=N.useState([]),[n,r]=N.useState([]),[s,o]=N.useState(""),[i,l]=N.useState(!1),[u,f]=N.useState(null),[m,h]=N.useState(!1),[g,p]=N.useState(null),b=async(k="")=>{try{h(!0),p(null);const R=await b_(k);R&&R.notes&&Array.isArray(R.notes)?(t(R.notes),window.recycleBinCount=R.notes.length):(console.warn("[RecycleBin] fetchRecycleBin 返回的数据格式不正确，重置为空数组"),t([]),window.recycleBinCount=0)}catch(R){console.error("加载回收站失败:",R),p("加载回收站失败"),window.recycleBinCount=0}finally{h(!1)}};N.useEffect(()=>{b(s)},[s]),N.useEffect(()=>{const k=async()=>{try{await E_(),await b(s)}catch(P){console.error("清理过期笔记失败:",P)}};k();const R=setInterval(k,60*60*1e3);return()=>clearInterval(R)},[]);const v=Array.isArray(e)?e.filter(k=>k.content.toLowerCase().includes(s.toLowerCase())||k.tags&&k.tags.some(R=>(typeof R=="string"?R:R.name).toLowerCase().includes(s.toLowerCase()))):[];Array.isArray(e)||(console.warn("[RecycleBin] deletedNotes 不是数组，重置为空数组"),t([]));const T=k=>{r(R=>R.includes(k)?R.filter(P=>P!==k):[...R,k])},y=()=>{n.length===v.length?r([]):r(v.map(k=>k.note_id))},E=async k=>{try{console.log("恢复笔记 - 传入的noteIds:",k),console.log("恢复笔记 - noteIds类型:",typeof k),console.log("恢复笔记 - 是否为数组:",Array.isArray(k)),k.forEach((M,le)=>{console.log(`ID ${le}: 值=${M}, 类型=${typeof M}`)});const R=await w_(k);console.log("[恢复操作] API返回结果:",R),console.log("[恢复操作] restoredCount:",R.restoredCount),console.log("[恢复操作] successCount:",R.successCount),console.log("[恢复操作] duplicateCount:",R.duplicateCount),console.log("[恢复操作] errorCount:",R.errorCount);const P=R.restoredCount||R.successCount||0,Y=R.duplicateCount||0,z=R.errorCount||0;let Q="";P>0&&(Q+=`成功恢复 ${P} 条笔记`),Y>0&&(Q&&(Q+="，"),Q+=`跳过重复 ${Y} 条笔记`),z>0&&(Q&&(Q+="，"),Q+=`失败 ${z} 条笔记`),alert(Q||"恢复操作完成，但没有笔记被恢复"),await b(s),r([]),l(!1)}catch(R){console.error("恢复失败:",R),p("恢复笔记失败")}},w=async k=>{try{console.log("永久删除 - 传入的noteIds:",k),console.log("永久删除 - noteIds类型:",typeof k),console.log("永久删除 - 是否为数组:",Array.isArray(k)),k.forEach((R,P)=>{console.log(`ID ${P}: 值=${R}, 类型=${typeof R}`)}),await T_(k),await b(s),r([]),l(!1)}catch(R){console.error("删除失败:",R),p("永久删除笔记失败")}},I=(k,R)=>{f({action:k,noteIds:R}),l(!0)},j=()=>{u&&(u.action==="restore"?E(u.noteIds):u.action==="delete"&&w(u.noteIds)),l(!1),f(null)},_=k=>k.length>100?k.substring(0,100)+"...":k,C=k=>typeof k=="string"?k:k.name;return c.jsxs("div",{className:"w-full min-h-screen flex flex-col",children:[g&&c.jsx("div",{className:"mx-4 mt-4 p-3 bg-red-100 border border-red-400 text-red-700",children:g}),c.jsxs("div",{className:"p-4 bg-theme-surface",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"relative flex-1 max-w-md",children:[c.jsx(um,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-theme-text-muted"}),c.jsx("input",{type:"text",placeholder:"搜索已删除的笔记...",value:s,onChange:k=>o(k.target.value),className:"w-full pl-10 pr-4 py-2 bg-theme-surface text-theme-text focus:outline-none focus:ring-0"})]}),n.length>0&&c.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[c.jsxs("button",{onClick:()=>I("restore",n),className:"flex items-center space-x-1 px-3 py-2 bg-theme-success hover:bg-theme-success/90 text-white text-sm",children:[c.jsx(Iy,{className:"h-4 w-4"}),c.jsxs("span",{children:["恢复 (",n.length,")"]})]}),c.jsxs("button",{onClick:()=>I("delete",n),className:"flex items-center space-x-1 px-3 py-2 bg-theme-error hover:bg-theme-error/90 text-white text-sm",children:[c.jsx(As,{className:"h-4 w-4"}),c.jsxs("span",{children:["永久删除 (",n.length,")"]})]})]})]}),v.length>0&&c.jsx("div",{className:"mt-2",children:c.jsx("button",{onClick:y,className:"text-sm text-theme-primary hover:underline",children:n.length===v.length?"取消全选":"全选"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto smooth-scroll-container scrollbar-smooth hide-scrollbar scrollbar-hide bg-theme-bg",children:m?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-theme-primary mx-auto mb-4"}),c.jsx("p",{className:"text-theme-text-muted",children:"加载中..."})]}):v.length===0?c.jsxs("div",{className:"text-center py-12 bg-theme-surface",children:[c.jsx(As,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-theme-text-muted",children:s?"没有找到匹配的笔记":"回收站为空"})]}):c.jsx("div",{className:"space-y-3",children:v.map(k=>c.jsx("div",{className:`p-4 transition-colors bg-theme-surface ${n.includes(k.note_id)?"bg-theme-primary/10":"hover:bg-theme-hover"}`,children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("input",{type:"checkbox",checked:n.includes(k.note_id),onChange:()=>T(k.note_id),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-theme-text mb-2",children:_(k.content)}),k.tags&&Array.isArray(k.tags)&&k.tags.length>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:k.tags.map((R,P)=>c.jsxs("span",{className:"px-2 py-1 bg-theme-hover text-theme-text-secondary text-xs",children:["#",C(R)]},P))}),c.jsxs("p",{className:"text-xs text-theme-text-muted",children:["删除于: ",Tt(No(new Date(k.deletedAt),"Asia/Shanghai"),"yyyy年MM月dd日 HH:mm",{locale:Rn})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>I("restore",[k.note_id]),className:"p-2 text-theme-success hover:bg-theme-success/10 transition-colors",title:"恢复",children:c.jsx(Iy,{className:"h-4 w-4"})}),c.jsx("button",{onClick:()=>I("delete",[k.note_id]),className:"p-2 text-theme-error hover:bg-theme-error/10 transition-colors",title:"永久删除",children:c.jsx(As,{className:"h-4 w-4"})})]})]})},k.note_id))})}),i&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:c.jsxs("div",{className:"bg-theme-surface p-6 max-w-md w-full mx-4",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx(f2,{className:"h-6 w-6 text-yellow-500"}),c.jsx("h3",{className:"text-lg font-semibold text-theme-text",children:"确认操作"})]}),c.jsx("p",{className:"text-theme-text-secondary mb-6",children:(u==null?void 0:u.action)==="restore"?`确定要恢复 ${u.noteIds.length} 条笔记吗？`:`确定要永久删除 ${u.noteIds.length} 条笔记吗？此操作无法撤销。`}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-theme-text-secondary hover:bg-theme-hover",children:"取消"}),c.jsx("button",{onClick:j,className:`px-4 py-2 text-white ${(u==null?void 0:u.action)==="restore"?"bg-theme-success hover:bg-theme-success/90":"bg-theme-error hover:bg-theme-error/90"}`,children:(u==null?void 0:u.action)==="restore"?"恢复":"永久删除"})]})]})})]})},vX=()=>(ca(),js(),c.jsx("div",{className:"min-h-screen bg-theme-bg p-4",children:c.jsx("div",{className:"max-w-6xl mx-auto",children:c.jsx(xX,{})})}));const bX=()=>{const[e,t]=N.useState([]),[n,r]=N.useState([]),[s,o]=N.useState({}),[i,l]=N.useState({}),[u,f]=N.useState(!1),[m,h]=N.useState({type:"",text:""}),[g,p]=N.useState("backups"),[b,v]=N.useState({isOpen:!1,title:"",message:"",onConfirm:null,onCancel:null}),[T,y]=N.useState({autoBackup:!0,backupInterval:10,compressionEnabled:!0}),E=async()=>{try{f(!0),console.log("开始加载数据");const[G,H,U]=await Promise.all([wr.getAllBackups(),wr.getSettings(),wr.getBackupStats()]),te=await(await fetch("/api/history/all")).json(),V=te.success?te.history:[];let xe=[];try{xe=wr.getStoredBackups(),console.log("从本地存储获取到导入的备份:",xe.length,"个")}catch(Ve){console.error("获取导入的备份失败:",Ve)}const we=[...G,...xe];console.log("数据加载结果:",{backupsData:G,importedBackups:xe,historyData:V,settingsData:H,statsData:U}),t(we),r(V),o(H),l(U.stats||{});const Le={...H,autoBackup:H.autoBackup??!0,compressionEnabled:H.compressionEnabled??!0};y(Le),console.log("数据状态更新完成")}catch(G){console.error("加载数据失败:",G),w("加载数据失败: "+G.message,"error")}finally{f(!1)}};N.useEffect(()=>{E()},[]);const w=(G,H="info")=>{h({text:G,type:H}),setTimeout(()=>h({text:"",type:""}),3e3)},I=(G,H,U,ee)=>{v({isOpen:!0,title:G,message:H,onConfirm:U,onCancel:ee||(()=>v({...b,isOpen:!1}))})},j=()=>{v({...b,isOpen:!1})},_=async(G=null)=>{try{f(!0),console.log("开始创建备份:",{noteId:G});const H=await wr.createBackup(G,"manual");console.log("备份创建结果:",H),H.success?(await fetch("/api/history/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"backup",description:`创建${G?"单笔记":"完整"}备份`,details:{backupType:G?"single":"full",backupId:H.backupId,notesCount:H.notesCount||0,createdAt:new Date().toISOString()}})}),w(`备份成功！备份了 ${H.notesCount} 条笔记`,"success"),console.log("备份成功，开始重新加载数据"),await E(),console.log("数据重新加载完成")):w("备份失败: "+H.error,"error")}catch(H){console.error("备份创建异常:",H),w("备份失败: "+H.message,"error")}finally{f(!1)}},C=async G=>{I("确认恢复备份","确定要恢复此备份吗？当前数据将被覆盖。",async()=>{const H=e.find(ee=>ee.id===G),U=H&&H.isImported;try{f(!0);let ee;if(U){w("导入的备份需要重新选择原始备份文件才能恢复。请在弹出的文件选择对话框中选择对应的备份文件（.json或.zip格式）。","info");const te=document.createElement("input");te.type="file",te.accept=".json,.zip",te.onchange=async V=>{const xe=Array.from(V.target.files);if(xe.length===0){f(!1);return}try{if(ee=await wr.importBackups(xe),ee.success){await fetch("/api/history/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"restore",description:"恢复导入的备份",details:{backupId:G,backupType:"imported",notesCount:ee.importedNotesCount||0,restoredAt:new Date().toISOString()}})});let we=`恢复成功！恢复了 ${ee.importedNotesCount||0} 条笔记`;ee.skippedCount>0&&(we+=`，跳过了 ${ee.skippedCount} 个重复笔记`),w(we,"success"),await E()}else w("恢复失败: "+ee.error,"error")}catch(we){w("恢复失败: "+we.message,"error")}finally{f(!1)}},te.click();return}else if(ee=await wr.restoreBackup(G),ee.success){await fetch("/api/history/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"restore",description:"恢复备份",details:{backupId:G,backupType:"server",notesCount:ee.successCount||0,restoredAt:new Date().toISOString()}})});let te=`恢复成功！恢复了 ${ee.successCount||0} 条笔记`;ee.skippedCount>0&&(te+=`，跳过了 ${ee.skippedCount} 个重复笔记`),w(te,"success"),await E()}else w("恢复失败: "+ee.error,"error")}catch(ee){w("恢复失败: "+ee.message,"error")}finally{U||f(!1)}})},k=async G=>{I("确认删除备份","确定要删除此备份吗？此操作不可撤销。",async()=>{try{f(!0);const H=e.find(te=>te.id===G),U=H&&H.isImported;let ee;U?ee=await wr.deleteImportedBackup(G):ee=await wr.deleteBackup(G),ee.success?(await fetch("/api/history/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",description:U?"删除导入的备份":"删除备份",details:{backupId:G,backupType:U?"imported":"server",deletedAt:new Date().toISOString()}})}),w("备份删除成功","success"),await E()):w("删除失败: "+ee.error,"error")}catch(H){w("删除失败: "+H.message,"error")}finally{f(!1)}})},R=async(G=null)=>{try{if(f(!0),G){const U=e.find(te=>te.id===G);if(U&&U.isImported){w("导入的备份无法直接导出，请使用原始备份文件","warning"),f(!1);return}}console.log("开始导出备份:",{backupId:G});const H=await wr.exportBackup(G);console.log("导出结果:",H),H.success?(await fetch("/api/history/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:G?"export_single":"export_all",description:G?"导出单条笔记备份":"导出全部笔记备份",details:{backupId:G,exportedAt:new Date().toISOString(),notesCount:H.notesCount||0}})}),w("导出成功！格式: JSON","success")):w("导出失败: "+H.error,"error")}catch(H){console.error("导出异常:",H),w("导出失败: "+H.message,"error")}finally{f(!1)}},P=async()=>{try{f(!0);const G=document.createElement("input");G.type="file",G.accept=".json,.zip",G.multiple=!0,G.onchange=async U=>{const ee=Array.from(U.target.files);if(ee.length===0){f(!1),console.log("用户取消了文件选择");return}try{console.log("开始直接导入并恢复备份文件:",ee.map(V=>V.name));const te=await wr.importBackups(ee);if(console.log("导入恢复结果:",te),console.log("[恢复调试] 完整返回对象:",JSON.stringify(te,null,2)),console.log("[恢复调试] importedNotesCount:",te.importedNotesCount),console.log("[恢复调试] skippedCount:",te.skippedCount),console.log("[恢复调试] success:",te.success),console.log("[恢复调试] message:",te.message),console.log("[恢复调试] details:",te.details),te.details&&Array.isArray(te.details)&&(console.log("[恢复调试] details数组长度:",te.details.length),te.details.forEach((V,xe)=>{console.log(`[恢复调试] detail[${xe}]:`,{backupId:V.backupId,success:V.success,hasResults:!!V.results,resultsLength:V.results?V.results.length:0,results:V.results})})),te.success){await fetch("/api/history/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"import_and_restore",description:"直接导入并恢复备份",details:{importedAt:new Date().toISOString(),filesCount:ee.length,notesCount:te.importedNotesCount||0,duplicateNotesCount:te.skippedCount||0}})});let V=`备份导入恢复成功！恢复了 ${te.importedNotesCount||0} 条笔记`;te.skippedCount>0&&(V+=`，跳过了 ${te.skippedCount} 个重复笔记`),w(V,"success")}else w("导入恢复失败: "+te.error,"error")}catch(te){console.error("导入恢复异常:",te),w("导入恢复失败: "+te.message,"error")}finally{f(!1)}};const H=()=>{setTimeout(()=>{document.activeElement!==G&&G.files.length===0&&(f(!1),console.log("用户取消了文件选择（通过焦点检测）"),document.removeEventListener("focus",H,!0),window.removeEventListener("focus",H,!0))},100)};document.addEventListener("focus",H,!0),window.addEventListener("focus",H,!0),w("注意：将直接导入并恢复备份文件（支持JSON和ZIP格式），ZIP文件会自动提取，通过哈希对比避免重复，导入后不会出现在备份列表中","info"),G.click(),setTimeout(()=>{u&&(f(!1),console.log("导入操作超时，重置状态"),document.removeEventListener("focus",H,!0),window.removeEventListener("focus",H,!0))},3e4)}catch(G){console.error("导入备份异常:",G),w("导入失败: "+G.message,"error"),f(!1)}},Y=async()=>{try{f(!0);const G={...s,...T};await wr.saveSettings(G)?(w("设置保存成功","success"),o(G),y({...G}),!s.autoBackup&&G.autoBackup&&await fetch("/api/history/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"enable_auto_backup",description:"启用自动备份功能",details:{enabledAt:new Date().toISOString(),interval:G.backupInterval}})})):w("设置保存失败","error")}catch(G){w("设置保存失败: "+G.message,"error")}finally{f(!1)}},z=async()=>{try{f(!0);const G=await wr.checkAutoBackup();G.success?(w(G.message,"success"),await E()):w("自动备份检查失败: "+G.error,"error")}catch(G){w("自动备份检查失败: "+G.message,"error")}finally{f(!1)}},Q=async()=>{try{f(!0);const G=await wr.resetSettings();if(G.success){const H=wr.getDefaultSettings();y(H),await fetch("/api/history/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reset_settings",description:"重置设置",details:{resetAt:new Date().toISOString()}})}),w(G.message,"success")}else w(G.error,"error")}catch(G){w("重置设置失败: "+G.message,"error")}finally{f(!1)}},M=async()=>{I("确认清除历史记录","确定要清除所有历史记录吗？此操作不可撤销。",async()=>{try{f(!0),(await(await fetch("/api/history/clear?type=system",{method:"DELETE"})).json()).success?(r([]),w("历史记录已清除","success")):w("清除历史记录失败","error")}catch(G){console.error("清除历史记录失败:",G),w("清除历史记录失败: "+G.message,"error")}finally{f(!1)}})},le=G=>{try{return Ch(No(new Date(G),"Asia/Shanghai"),"yyyy-MM-dd HH:mm:ss",{locale:Rn})}catch{return G}},Ne=G=>{if(!G||G===0)return"0 B";const H=1024,U=["B","KB","MB","GB"],ee=Math.floor(Math.log(G)/Math.log(H));return parseFloat((G/Math.pow(H,ee)).toFixed(2))+" "+U[ee]},$=G=>{var U;if(G.notesCount)return G.notesCount;const H=((U=G.data)==null?void 0:U.notes)||G.notes;return H&&Array.isArray(H)?H.length:"未知"};return c.jsxs("div",{className:"backup-manager-page",children:[c.jsx("style",{children:`

        `}),b.isOpen&&c.jsx("div",{className:"confirm-dialog-overlay",children:c.jsxs("div",{className:"confirm-dialog",children:[c.jsx("div",{className:"confirm-dialog-header",children:c.jsx("h3",{children:b.title})}),c.jsx("div",{className:"confirm-dialog-body",children:c.jsx("p",{children:b.message})}),c.jsxs("div",{className:"confirm-dialog-footer",children:[c.jsx("button",{className:"btn btn-secondary",onClick:b.onCancel,children:"取消"}),c.jsx("button",{className:"btn btn-danger",onClick:()=>{b.onConfirm(),j()},children:"确认"})]})]})}),c.jsxs("div",{className:"backup-container",children:[m.text&&c.jsx("div",{className:`message ${m.type}`,children:m.text}),c.jsx("div",{className:"stats-section",children:c.jsxs("div",{className:"stats-grid",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"总备份数:"}),c.jsx("span",{className:"stat-value",children:i.totalBackups||0})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"历史记录:"}),c.jsx("span",{className:"stat-value",children:n.length})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"当前备份笔记数:"}),c.jsx("span",{className:"stat-value",children:i.totalNotes||0})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"存储大小:"}),c.jsx("span",{className:"stat-value",children:Ne(i.storageSize||0)})]})]})}),c.jsxs("div",{className:"tabs",children:[c.jsx("button",{className:`tab ${g==="backups"?"active":""}`,onClick:()=>p("backups"),children:"备份管理"}),c.jsx("button",{className:`tab ${g==="history"?"active":""}`,onClick:()=>p("history"),children:"历史记录"}),c.jsx("button",{className:`tab ${g==="settings"?"active":""}`,onClick:()=>p("settings"),children:"备份设置"})]}),g==="backups"&&c.jsxs("div",{className:"tab-content",children:[c.jsxs("div",{className:"backup-actions",children:[c.jsx("button",{className:"btn btn-primary",onClick:()=>_(),disabled:u,children:u?"创建中...":"创建完整备份"}),c.jsx("button",{className:"btn btn-secondary",onClick:z,disabled:u,children:u?"检查中...":"检查自动备份"}),c.jsx("button",{className:"btn btn-secondary",onClick:P,disabled:u,children:u?"导入中...":"导入所有备份 (JSON)"})]}),c.jsxs("div",{className:"backup-list",children:[c.jsx("h3",{children:"备份列表"}),e.length===0?c.jsx("p",{children:"暂无备份"}):c.jsx("div",{className:"backup-items",children:e.map(G=>c.jsxs("div",{className:"backup-item",children:[c.jsxs("div",{className:"backup-info",children:[c.jsxs("div",{className:"backup-header",children:[c.jsx("span",{className:"backup-id",children:G.backup_id||G.id}),c.jsx("span",{className:"backup-type",children:G.isImported?"导入备份":(G.backup_type||G.type)==="manual"?"手动备份":"自动备份"}),c.jsx("span",{className:"backup-time",children:le(G.created_at||G.timestamp)})]}),c.jsxs("div",{className:"backup-details",children:[c.jsxs("span",{className:"backup-notes",children:["笔记数: ",$(G)]}),c.jsx("span",{className:"backup-features",children:G.version&&c.jsxs("span",{className:"version",children:["v",G.version]})})]})]}),c.jsxs("div",{className:"backup-actions",children:[c.jsx("button",{className:"btn btn-small btn-success",onClick:()=>C(G.backup_id||G.id),disabled:u,children:"恢复"}),c.jsx("button",{className:"btn btn-small btn-secondary",onClick:()=>R(G.backup_id||G.id),disabled:u,children:"导出备份"}),c.jsx("button",{className:"btn btn-small btn-danger",onClick:()=>k(G.backup_id||G.id),disabled:u,children:"删除"})]})]},G.backup_id||G.id))})]})]}),g==="history"&&c.jsxs("div",{className:"tab-content",children:[c.jsx("div",{className:"history-actions",children:c.jsx("button",{className:"btn btn-danger",onClick:M,disabled:u,children:u?"清除中...":"清除所有历史记录"})}),c.jsxs("div",{className:"history-list",children:[c.jsx("h3",{children:"操作历史记录"}),n.length===0?c.jsx("p",{children:"暂无历史记录"}):c.jsx("div",{className:"history-items",children:n.filter(G=>["backup","restore","delete","settings","reset_settings","export_single","export_all","clear_history","enable_auto_backup","import_all"].includes(G.action)).map(G=>{var H;return c.jsx("div",{className:"history-item",children:c.jsxs("div",{className:"history-info",children:[c.jsxs("div",{className:"history-header",children:[c.jsx("span",{className:"history-action",children:G.description||G.action}),c.jsx("span",{className:"history-time",children:le(G.timestamp||G.createdAt)})]}),c.jsx("div",{className:"history-details",children:c.jsx("span",{className:"history-notes",children:G.notesCount!==void 0?`涉及笔记: ${G.notesCount}`:G.action==="settings"?"备份设置":`涉及笔记: ${((H=G.notes)==null?void 0:H.length)||0}`})})]})},G.id)})})]})]}),g==="settings"&&c.jsx("div",{className:"tab-content",children:c.jsxs("div",{className:"settings-form",children:[c.jsx("h3",{children:"备份设置"}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{children:[c.jsx("input",{type:"checkbox",checked:T.autoBackup,onChange:G=>y({...T,autoBackup:G.target.checked})}),"启用自动备份"]})}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"备份间隔 (分钟):"}),c.jsx("input",{type:"number",min:"1",max:"1440",value:T.backupInterval,onChange:G=>y({...T,backupInterval:parseInt(G.target.value)})})]}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{children:[c.jsx("input",{type:"checkbox",checked:T.compressionEnabled,onChange:G=>y({...T,compressionEnabled:G.target.checked})}),"启用数据压缩"]})}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{className:"btn btn-primary",onClick:Y,disabled:u,children:u?"保存中...":"保存设置"}),c.jsx("button",{className:"btn btn-secondary",onClick:Q,disabled:u,children:u?"重置中...":"重置为默认"})]})]})})]})]})},wX=()=>{var o,i;const[e,t]=N.useState({}),[n,r]=N.useState([]);N.useEffect(()=>{const l={userAgent:navigator.userAgent,timestamp:new Date().toISOString(),localStorage:Object.keys(localStorage),sessionStorage:Object.keys(sessionStorage)};t(l);const u=console.log;return console.log=(...f)=>{u(...f),r(m=>[...m.slice(-49),{timestamp:new Date().toISOString(),message:f.map(h=>typeof h=="object"?JSON.stringify(h):String(h)).join(" ")}])},()=>{console.log=u}},[]);const s=()=>{r([])};return c.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[c.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Debug Page"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Information"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"User Agent:"})," ",e.userAgent]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Timestamp:"})," ",e.timestamp]}),c.jsx("div",{children:c.jsx("strong",{children:"LocalStorage Keys:"})}),c.jsx("ul",{className:"ml-4 list-disc",children:(o=e.localStorage)==null?void 0:o.map(l=>c.jsx("li",{children:l},l))}),c.jsx("div",{children:c.jsx("strong",{children:"SessionStorage Keys:"})}),c.jsx("ul",{className:"ml-4 list-disc",children:(i=e.sessionStorage)==null?void 0:i.map(l=>c.jsx("li",{children:l},l))})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Console Logs"}),c.jsx("button",{onClick:s,className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:"Clear Logs"})]}),c.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 rounded p-4 h-96 overflow-y-auto font-mono text-xs",children:n.length===0?c.jsx("div",{className:"text-gray-500",children:"No logs captured yet..."}):n.map((l,u)=>c.jsxs("div",{className:"mb-2 border-b border-gray-300 dark:border-gray-700 pb-2",children:[c.jsxs("div",{className:"text-blue-600 dark:text-blue-400",children:["[",l.timestamp,"]"]}),c.jsx("div",{className:"text-gray-800 dark:text-gray-200",children:l.message})]},u))})]})]}),c.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Functions"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx("button",{onClick:()=>console.log("Test log message"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Test Console Log"}),c.jsx("button",{onClick:()=>console.warn("Test warning message"),className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Test Console Warning"}),c.jsx("button",{onClick:()=>console.error("Test error message"),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Test Console Error"})]})]})]})},TX=()=>{const e=js(),[t,n]=N.useState(!1),r=async o=>{n(!0);try{const i=await v_(o);console.log("笔记创建成功:",i),e("/")}catch(i){console.error("创建笔记失败:",i),alert("创建笔记失败，请重试")}finally{n(!1)}},s=()=>{e("/")};return c.jsx("div",{className:"min-h-screen bg-theme-surface",children:c.jsx("div",{className:"w-full flex justify-center px-4 py-6 pt-12",children:c.jsx("div",{className:"w-[70%] max-w-none rounded-lg shadow-sm border border-theme-border",style:{backgroundColor:"var(--theme-surface)"},children:c.jsx(Z_,{onSubmit:r,onCancel:s,submitText:"发布",showCancel:!0,isEditMode:!1,autoFocus:!0,initialTags:[],overrideWidth:"w-full"})})})})},EX=({initialContent:e="",initialTags:t=[],initialDate:n=null,note:r=null,onSubmit:s,onCancel:o,submitText:i="发布",showCancel:l=!1,isEditMode:u=!1,onNoteClick:f=null,autoFocus:m=!1,cardStyle:h=null,cardSettings:g=null,isActive:p=!1,onActivate:b=null})=>{const[v,T]=N.useState((r==null?void 0:r.content)||e||""),[y,E]=N.useState(()=>{if(r&&Array.isArray(r.tags)&&r.tags.length>0){if(typeof r.tags[0]=="string")return r.tags;if(r.tags[0]&&r.tags[0].name)return r.tags.map(ue=>ue.name)}return t||[]}),[w,I]=N.useState(r!=null&&r.created_at?new Date(r.created_at):n||new Date);N.useState(new Date);const[j,_]=N.useState(!1),[C,k]=N.useState(""),[R,P]=N.useState(null),[Y,z]=N.useState({}),[Q,M]=N.useState(!1),le=N.useRef(null),Ne=N.useRef(null),$=N.useRef(null);N.useState(!1),N.useState(!1),N.useState(!1),N.useState(!1),N.useState(!1);const[G,H]=N.useState(!1),[U,ee]=N.useState(null),[te,V]=N.useState(null);N.useRef(null),N.useRef(null),N.useRef(null),N.useRef(null),N.useRef(null),N.useRef(null),N.useRef(null);const{darkMode:xe}=ca(),we=async()=>{try{try{const ue=et.getTagColors();if(Object.keys(ue).length>0)z(ue);else{const F=JSON.parse(localStorage.getItem("tagColors")||"{}");Object.keys(F).length>0&&z(F)}}catch(ue){console.error("从localConfigManager加载颜色失败:",ue);try{const F=JSON.parse(localStorage.getItem("tagColors")||"{}");Object.keys(F).length>0&&z(F)}catch(F){console.error("从本地存储加载颜色也失败:",F)}}try{const ue=await r1();z(F=>{const A={...ue,...F};if(Object.keys(ue).length>0){localStorage.setItem("tagColors",JSON.stringify(A));try{Object.entries(ue).forEach(([L,K])=>{et.setTagColor(L,K)})}catch(L){console.error("更新localConfigManager失败:",L)}}return A})}catch(ue){console.log("从服务器获取标签颜色失败，使用本地数据:",ue)}M(!0)}catch(ue){console.error("加载颜色数据失败:",ue),M(!0)}};N.useEffect(()=>{we()},[]),N.useEffect(()=>{m&&p&&Ne.current&&Ne.current.focus()},[m,p]),N.useEffect(()=>{const ue=F=>{if(p){if(F.key==="Escape"){Me();return}if(F.key==="/"&&!F.shiftKey&&!F.ctrlKey&&!F.altKey&&!F.metaKey){const A=Ne.current;if(A&&document.activeElement===A){const L=A.selectionStart,K=v.substring(0,L);v.substring(L);const oe=K.lastIndexOf(`
`),ie=K.substring(oe+1);(ie.trim()===""||ie==="/")&&(F.preventDefault(),H(!0))}}}};return document.addEventListener("keydown",ue),()=>{document.removeEventListener("keydown",ue)}},[p,v]);const Le=ue=>{T(ue)},Ve=ue=>{ue.preventDefault(),s&&s({content:v,tags:y,date:w,mood:U,weather:te})},Me=N.useCallback(()=>{o&&o()},[o]),Ke=ue=>{E(y.filter(F=>F!==ue))},De=async(ue,F=!1)=>{try{_(!0),k(""),P(null);const L=`![图片](${(await vh(ue)).url})`,K=Ne.current;if(K){const oe=K.selectionStart,ie=K.selectionEnd,J=v.substring(0,oe)+L+v.substring(ie);T(J),setTimeout(()=>{K.focus(),K.setSelectionRange(oe+L.length,oe+L.length)},0)}}catch(A){console.error("图片上传失败:",A),k("图片上传失败"),P(ue)}finally{_(!1)}},nt=()=>{R&&De(R,!0)},ut=ue=>Y[ue]?fb(Y[ue]):fb(mb()),dt=ue=>Y[ue]?hb(Y[ue]):hb(mb()),D=async ue=>{const A=ue.clipboardData.items;let L=!1;for(let K=0;K<A.length;K++)if(A[K].type.startsWith("image/")){L=!0;break}if(L){ue.preventDefault();for(let K=0;K<A.length;K++){const oe=A[K];if(oe.type.startsWith("image/")){const ie=oe.getAsFile();if(ie){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(ie.type)){k("不支持的图片格式。请使用 JPEG、PNG、GIF 或 WebP 格式。");return}await De(ie)}return}}}};return p?c.jsxs("div",{ref:$,className:"fixed inset-0 z-50",style:{backgroundColor:xe?"#111827":"#ffffff"},onClick:ue=>{ue.target===$.current&&b&&b()},children:[c.jsxs("div",{className:"h-full flex flex-col",children:[c.jsxs("div",{className:"flex-1 flex flex-col",children:[Array.isArray(y)&&y.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 px-8 pt-8 pb-2",children:y.map(ue=>c.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${ut(ue)}`,style:dt(ue),children:["#",ue,c.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),Ke(ue)},className:"ml-1 hover:text-red-500 transition-colors",title:"移除标签",children:c.jsx(wn,{size:12})})]},ue))}),c.jsx("textarea",{ref:Ne,value:v,onChange:ue=>Le(ue.target.value),onPaste:D,placeholder:"",className:"flex-1 w-full px-8 py-4 resize-none outline-none text-lg",style:{backgroundColor:"transparent",color:xe?"#e2e8f0":"#1F2937",fontSize:"16px",lineHeight:"1.5",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},autoFocus:!0})]}),c.jsxs("div",{className:"fixed bottom-8 right-8 flex flex-col gap-2",children:[c.jsx("button",{type:"button",onClick:Ve,className:"flex items-center justify-center w-12 h-12 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{backgroundColor:"rgba(59, 130, 246, 0.9)",color:"white"},title:i,children:c.jsx(p_,{size:20})}),c.jsx("button",{type:"button",onClick:Me,className:"flex items-center justify-center w-10 h-10 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{backgroundColor:"rgba(107, 114, 128, 0.8)",color:"white"},title:"关闭",children:c.jsx(wn,{size:18})})]}),c.jsx("div",{className:"fixed bottom-4 left-4 text-xs opacity-50",style:{color:xe?"#e2e8f0":"#1F2937"},children:"按 / 打开命令菜单 • Esc 退出"})]}),c.jsx("input",{type:"file",ref:le,accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:ue=>{var A;const F=(A=ue.target.files)==null?void 0:A[0];F&&De(F)}}),C&&c.jsxs("div",{className:"fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 flex items-center gap-2",children:[c.jsx("span",{children:C}),R&&c.jsx("button",{type:"button",onClick:nt,className:"text-blue-200 hover:text-blue-100 underline text-sm",disabled:j,children:"重试"})]})]}):null},CX=()=>{const[e,t]=N.useState(!1),[n,r]=N.useState(""),[s,o]=N.useState([]),[i,l]=N.useState([]),u=h=>{console.log("提交的笔记数据:",h);const g={id:Date.now(),content:h.content,tags:h.tags,date:h.date,mood:h.mood,weather:h.weather,createdAt:new Date};l(p=>[g,...p]),r(h.content),o(h.tags),t(!1)},f=()=>{t(!1)},m=()=>{t(!0)};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"全屏编辑器演示"}),c.jsx("div",{className:"mb-6",children:c.jsx("button",{onClick:m,className:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 shadow-lg",children:"打开全屏编辑器"})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"编辑器状态"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"激活状态:"})," ",e?"已激活":"未激活"]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"当前内容:"})," ",n||"无内容"]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"当前标签:"})," ",s.length>0?s.join(", "):"无标签"]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:["已提交的笔记 (",i.length,")"]}),i.length===0?c.jsx("p",{className:"text-gray-500 text-center py-8",children:"暂无提交的笔记"}):c.jsx("div",{className:"space-y-4",children:i.map(h=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[h.mood&&c.jsx("span",{className:"text-lg",children:h.mood}),h.weather&&c.jsx("span",{className:"text-lg",children:h.weather})]}),c.jsx("span",{className:"text-sm text-gray-500",children:new Date(h.createdAt).toLocaleString()})]}),c.jsx("div",{className:"mb-3",children:c.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:h.content})}),h.tags.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:h.tags.map((g,p)=>c.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:["#",g]},p))})]},h.id))})]})]}),c.jsx(EX,{isActive:e,onActivate:m,onSubmit:u,onCancel:f,initialContent:n,initialTags:s,submitText:"发布笔记",showCancel:!0,autoFocus:!0})]})},GT=e=>{let t;const n=new Set,r=(f,m)=>{const h=typeof f=="function"?f(t):f;if(!Object.is(h,t)){const g=t;t=m??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(p=>p(t,g))}},s=()=>t,l={setState:r,getState:s,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f))},u=t=e(r,s,l);return l},_X=e=>e?GT(e):GT,NX=e=>e;function SX(e,t=NX){const n=St.useSyncExternalStore(e.subscribe,St.useCallback(()=>t(e.getState()),[e,t]),St.useCallback(()=>t(e.getInitialState()),[e,t]));return St.useDebugValue(n),n}const KT=e=>{const t=_X(e),n=r=>SX(t,r);return Object.assign(n,t),n},kX=e=>e?KT(e):KT;var Lh={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Lh.exports;(function(e,t){(function(){var n,r="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",f=500,m="__lodash_placeholder__",h=1,g=2,p=4,b=1,v=2,T=1,y=2,E=4,w=8,I=16,j=32,_=64,C=128,k=256,R=512,P=30,Y="...",z=800,Q=16,M=1,le=2,Ne=3,$=1/0,G=9007199254740991,H=17976931348623157e292,U=0/0,ee=4294967295,te=ee-1,V=ee>>>1,xe=[["ary",C],["bind",T],["bindKey",y],["curry",w],["curryRight",I],["flip",R],["partial",j],["partialRight",_],["rearg",k]],we="[object Arguments]",Le="[object Array]",Ve="[object AsyncFunction]",Me="[object Boolean]",Ke="[object Date]",De="[object DOMException]",nt="[object Error]",ut="[object Function]",dt="[object GeneratorFunction]",D="[object Map]",ue="[object Number]",F="[object Null]",A="[object Object]",L="[object Promise]",K="[object Proxy]",oe="[object RegExp]",ie="[object Set]",J="[object String]",me="[object Symbol]",be="[object Undefined]",ye="[object WeakMap]",je="[object WeakSet]",X="[object ArrayBuffer]",Z="[object DataView]",pe="[object Float32Array]",ge="[object Float64Array]",Ee="[object Int8Array]",He="[object Int16Array]",Ye="[object Int32Array]",pt="[object Uint8Array]",Qe="[object Uint8ClampedArray]",Et="[object Uint16Array]",Dt="[object Uint32Array]",$n=/\b__p \+= '';/g,$t=/\b(__p \+=) '' \+/g,us=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Fs=/&(?:amp|lt|gt|quot|#39);/g,Ut=/[&<>"']/g,un=RegExp(Fs.source),Nn=RegExp(Ut.source),kr=/<%-([\s\S]+?)%>/g,Wn=/<%([\s\S]+?)%>/g,Zt=/<%=([\s\S]+?)%>/g,or=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kr=/^\w*$/,sn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ir=/[\\^$.*+?()[\]{}|]/g,hn=RegExp(ir.source),jn=/^\s+/,lo=/\s/,ds=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ln=/\{\n\/\* \[wrapped with (.+)\] \*/,Bs=/,? & /,fi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nc=/[()=,{}\[\]\/\s]/,D1=/\\(\\)?/g,Yr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fa=/\w*$/,Ce=/^[-+]0x[0-9a-f]+$/i,$e=/^0b[01]+$/i,Ge=/^\[object .+?Constructor\]$/,rt=/^0o[0-7]+$/i,Ue=/^(?:0|[1-9]\d*)$/,ne=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fe=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ie="\\ud800-\\udfff",We="\\u0300-\\u036f",Vt="\\ufe20-\\ufe2f",Sn="\\u20d0-\\u20ff",gr=We+Vt+Sn,Dn="\\u2700-\\u27bf",yr="a-z\\xdf-\\xf6\\xf8-\\xff",TN="\\xac\\xb1\\xd7\\xf7",EN="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",CN="\\u2000-\\u206f",_N=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i5="A-Z\\xc0-\\xd6\\xd8-\\xde",a5="\\ufe0e\\ufe0f",l5=TN+EN+CN+_N,Gm="['’]",NN="["+Ie+"]",c5="["+l5+"]",M1="["+gr+"]",u5="\\d+",SN="["+Dn+"]",d5="["+yr+"]",f5="[^"+Ie+l5+u5+Dn+yr+i5+"]",Km="\\ud83c[\\udffb-\\udfff]",kN="(?:"+M1+"|"+Km+")",h5="[^"+Ie+"]",Ym="(?:\\ud83c[\\udde6-\\uddff]){2}",Vm="[\\ud800-\\udbff][\\udc00-\\udfff]",el="["+i5+"]",m5="\\u200d",p5="(?:"+d5+"|"+f5+")",AN="(?:"+el+"|"+f5+")",g5="(?:"+Gm+"(?:d|ll|m|re|s|t|ve))?",y5="(?:"+Gm+"(?:D|LL|M|RE|S|T|VE))?",x5=kN+"?",v5="["+a5+"]?",ON="(?:"+m5+"(?:"+[h5,Ym,Vm].join("|")+")"+v5+x5+")*",RN="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",IN="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",b5=v5+x5+ON,jN="(?:"+[SN,Ym,Vm].join("|")+")"+b5,LN="(?:"+[h5+M1+"?",M1,Ym,Vm,NN].join("|")+")",DN=RegExp(Gm,"g"),MN=RegExp(M1,"g"),qm=RegExp(Km+"(?="+Km+")|"+LN+b5,"g"),PN=RegExp([el+"?"+d5+"+"+g5+"(?="+[c5,el,"$"].join("|")+")",AN+"+"+y5+"(?="+[c5,el+p5,"$"].join("|")+")",el+"?"+p5+"+"+g5,el+"+"+y5,IN,RN,u5,jN].join("|"),"g"),FN=RegExp("["+m5+Ie+gr+a5+"]"),BN=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zN=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],UN=-1,on={};on[pe]=on[ge]=on[Ee]=on[He]=on[Ye]=on[pt]=on[Qe]=on[Et]=on[Dt]=!0,on[we]=on[Le]=on[X]=on[Me]=on[Z]=on[Ke]=on[nt]=on[ut]=on[D]=on[ue]=on[A]=on[oe]=on[ie]=on[J]=on[ye]=!1;var en={};en[we]=en[Le]=en[X]=en[Z]=en[Me]=en[Ke]=en[pe]=en[ge]=en[Ee]=en[He]=en[Ye]=en[D]=en[ue]=en[A]=en[oe]=en[ie]=en[J]=en[me]=en[pt]=en[Qe]=en[Et]=en[Dt]=!0,en[nt]=en[ut]=en[ye]=!1;var HN={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},$N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},WN={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},GN={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},KN=parseFloat,YN=parseInt,w5=typeof xo=="object"&&xo&&xo.Object===Object&&xo,VN=typeof self=="object"&&self&&self.Object===Object&&self,Xn=w5||VN||Function("return this")(),Qm=t&&!t.nodeType&&t,ha=Qm&&!0&&e&&!e.nodeType&&e,T5=ha&&ha.exports===Qm,Xm=T5&&w5.process,fs=function(){try{var de=ha&&ha.require&&ha.require("util").types;return de||Xm&&Xm.binding&&Xm.binding("util")}catch{}}(),E5=fs&&fs.isArrayBuffer,C5=fs&&fs.isDate,_5=fs&&fs.isMap,N5=fs&&fs.isRegExp,S5=fs&&fs.isSet,k5=fs&&fs.isTypedArray;function Vr(de,_e,ve){switch(ve.length){case 0:return de.call(_e);case 1:return de.call(_e,ve[0]);case 2:return de.call(_e,ve[0],ve[1]);case 3:return de.call(_e,ve[0],ve[1],ve[2])}return de.apply(_e,ve)}function qN(de,_e,ve,Xe){for(var ft=-1,zt=de==null?0:de.length;++ft<zt;){var Mn=de[ft];_e(Xe,Mn,ve(Mn),de)}return Xe}function hs(de,_e){for(var ve=-1,Xe=de==null?0:de.length;++ve<Xe&&_e(de[ve],ve,de)!==!1;);return de}function QN(de,_e){for(var ve=de==null?0:de.length;ve--&&_e(de[ve],ve,de)!==!1;);return de}function A5(de,_e){for(var ve=-1,Xe=de==null?0:de.length;++ve<Xe;)if(!_e(de[ve],ve,de))return!1;return!0}function hi(de,_e){for(var ve=-1,Xe=de==null?0:de.length,ft=0,zt=[];++ve<Xe;){var Mn=de[ve];_e(Mn,ve,de)&&(zt[ft++]=Mn)}return zt}function P1(de,_e){var ve=de==null?0:de.length;return!!ve&&tl(de,_e,0)>-1}function Jm(de,_e,ve){for(var Xe=-1,ft=de==null?0:de.length;++Xe<ft;)if(ve(_e,de[Xe]))return!0;return!1}function dn(de,_e){for(var ve=-1,Xe=de==null?0:de.length,ft=Array(Xe);++ve<Xe;)ft[ve]=_e(de[ve],ve,de);return ft}function mi(de,_e){for(var ve=-1,Xe=_e.length,ft=de.length;++ve<Xe;)de[ft+ve]=_e[ve];return de}function Zm(de,_e,ve,Xe){var ft=-1,zt=de==null?0:de.length;for(Xe&&zt&&(ve=de[++ft]);++ft<zt;)ve=_e(ve,de[ft],ft,de);return ve}function XN(de,_e,ve,Xe){var ft=de==null?0:de.length;for(Xe&&ft&&(ve=de[--ft]);ft--;)ve=_e(ve,de[ft],ft,de);return ve}function e0(de,_e){for(var ve=-1,Xe=de==null?0:de.length;++ve<Xe;)if(_e(de[ve],ve,de))return!0;return!1}var JN=t0("length");function ZN(de){return de.split("")}function eS(de){return de.match(fi)||[]}function O5(de,_e,ve){var Xe;return ve(de,function(ft,zt,Mn){if(_e(ft,zt,Mn))return Xe=zt,!1}),Xe}function F1(de,_e,ve,Xe){for(var ft=de.length,zt=ve+(Xe?1:-1);Xe?zt--:++zt<ft;)if(_e(de[zt],zt,de))return zt;return-1}function tl(de,_e,ve){return _e===_e?fS(de,_e,ve):F1(de,R5,ve)}function tS(de,_e,ve,Xe){for(var ft=ve-1,zt=de.length;++ft<zt;)if(Xe(de[ft],_e))return ft;return-1}function R5(de){return de!==de}function I5(de,_e){var ve=de==null?0:de.length;return ve?r0(de,_e)/ve:U}function t0(de){return function(_e){return _e==null?n:_e[de]}}function n0(de){return function(_e){return de==null?n:de[_e]}}function j5(de,_e,ve,Xe,ft){return ft(de,function(zt,Mn,Xt){ve=Xe?(Xe=!1,zt):_e(ve,zt,Mn,Xt)}),ve}function nS(de,_e){var ve=de.length;for(de.sort(_e);ve--;)de[ve]=de[ve].value;return de}function r0(de,_e){for(var ve,Xe=-1,ft=de.length;++Xe<ft;){var zt=_e(de[Xe]);zt!==n&&(ve=ve===n?zt:ve+zt)}return ve}function s0(de,_e){for(var ve=-1,Xe=Array(de);++ve<de;)Xe[ve]=_e(ve);return Xe}function rS(de,_e){return dn(_e,function(ve){return[ve,de[ve]]})}function L5(de){return de&&de.slice(0,F5(de)+1).replace(jn,"")}function qr(de){return function(_e){return de(_e)}}function o0(de,_e){return dn(_e,function(ve){return de[ve]})}function Sc(de,_e){return de.has(_e)}function D5(de,_e){for(var ve=-1,Xe=de.length;++ve<Xe&&tl(_e,de[ve],0)>-1;);return ve}function M5(de,_e){for(var ve=de.length;ve--&&tl(_e,de[ve],0)>-1;);return ve}function sS(de,_e){for(var ve=de.length,Xe=0;ve--;)de[ve]===_e&&++Xe;return Xe}var oS=n0(HN),iS=n0($N);function aS(de){return"\\"+GN[de]}function lS(de,_e){return de==null?n:de[_e]}function nl(de){return FN.test(de)}function cS(de){return BN.test(de)}function uS(de){for(var _e,ve=[];!(_e=de.next()).done;)ve.push(_e.value);return ve}function i0(de){var _e=-1,ve=Array(de.size);return de.forEach(function(Xe,ft){ve[++_e]=[ft,Xe]}),ve}function P5(de,_e){return function(ve){return de(_e(ve))}}function pi(de,_e){for(var ve=-1,Xe=de.length,ft=0,zt=[];++ve<Xe;){var Mn=de[ve];(Mn===_e||Mn===m)&&(de[ve]=m,zt[ft++]=ve)}return zt}function B1(de){var _e=-1,ve=Array(de.size);return de.forEach(function(Xe){ve[++_e]=Xe}),ve}function dS(de){var _e=-1,ve=Array(de.size);return de.forEach(function(Xe){ve[++_e]=[Xe,Xe]}),ve}function fS(de,_e,ve){for(var Xe=ve-1,ft=de.length;++Xe<ft;)if(de[Xe]===_e)return Xe;return-1}function hS(de,_e,ve){for(var Xe=ve+1;Xe--;)if(de[Xe]===_e)return Xe;return Xe}function rl(de){return nl(de)?pS(de):JN(de)}function zs(de){return nl(de)?gS(de):ZN(de)}function F5(de){for(var _e=de.length;_e--&&lo.test(de.charAt(_e)););return _e}var mS=n0(WN);function pS(de){for(var _e=qm.lastIndex=0;qm.test(de);)++_e;return _e}function gS(de){return de.match(qm)||[]}function yS(de){return de.match(PN)||[]}var xS=function de(_e){_e=_e==null?Xn:sl.defaults(Xn.Object(),_e,sl.pick(Xn,zN));var ve=_e.Array,Xe=_e.Date,ft=_e.Error,zt=_e.Function,Mn=_e.Math,Xt=_e.Object,a0=_e.RegExp,vS=_e.String,ms=_e.TypeError,z1=ve.prototype,bS=zt.prototype,ol=Xt.prototype,U1=_e["__core-js_shared__"],H1=bS.toString,Wt=ol.hasOwnProperty,wS=0,B5=function(){var a=/[^.]+$/.exec(U1&&U1.keys&&U1.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),$1=ol.toString,TS=H1.call(Xt),ES=Xn._,CS=a0("^"+H1.call(Wt).replace(ir,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W1=T5?_e.Buffer:n,gi=_e.Symbol,G1=_e.Uint8Array,z5=W1?W1.allocUnsafe:n,K1=P5(Xt.getPrototypeOf,Xt),U5=Xt.create,H5=ol.propertyIsEnumerable,Y1=z1.splice,$5=gi?gi.isConcatSpreadable:n,kc=gi?gi.iterator:n,ma=gi?gi.toStringTag:n,V1=function(){try{var a=va(Xt,"defineProperty");return a({},"",{}),a}catch{}}(),_S=_e.clearTimeout!==Xn.clearTimeout&&_e.clearTimeout,NS=Xe&&Xe.now!==Xn.Date.now&&Xe.now,SS=_e.setTimeout!==Xn.setTimeout&&_e.setTimeout,q1=Mn.ceil,Q1=Mn.floor,l0=Xt.getOwnPropertySymbols,kS=W1?W1.isBuffer:n,W5=_e.isFinite,AS=z1.join,OS=P5(Xt.keys,Xt),Pn=Mn.max,ar=Mn.min,RS=Xe.now,IS=_e.parseInt,G5=Mn.random,jS=z1.reverse,c0=va(_e,"DataView"),Ac=va(_e,"Map"),u0=va(_e,"Promise"),il=va(_e,"Set"),Oc=va(_e,"WeakMap"),Rc=va(Xt,"create"),X1=Oc&&new Oc,al={},LS=ba(c0),DS=ba(Ac),MS=ba(u0),PS=ba(il),FS=ba(Oc),J1=gi?gi.prototype:n,Ic=J1?J1.valueOf:n,K5=J1?J1.toString:n;function W(a){if(xn(a)&&!gt(a)&&!(a instanceof Ot)){if(a instanceof ps)return a;if(Wt.call(a,"__wrapped__"))return Y9(a)}return new ps(a)}var ll=function(){function a(){}return function(d){if(!mn(d))return{};if(U5)return U5(d);a.prototype=d;var x=new a;return a.prototype=n,x}}();function Z1(){}function ps(a,d){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}W.templateSettings={escape:kr,evaluate:Wn,interpolate:Zt,variable:"",imports:{_:W}},W.prototype=Z1.prototype,W.prototype.constructor=W,ps.prototype=ll(Z1.prototype),ps.prototype.constructor=ps;function Ot(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ee,this.__views__=[]}function BS(){var a=new Ot(this.__wrapped__);return a.__actions__=Ar(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Ar(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Ar(this.__views__),a}function zS(){if(this.__filtered__){var a=new Ot(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function US(){var a=this.__wrapped__.value(),d=this.__dir__,x=gt(a),S=d<0,B=x?a.length:0,q=Zk(0,B,this.__views__),re=q.start,ce=q.end,he=ce-re,ke=S?ce:re-1,Oe=this.__iteratees__,Re=Oe.length,qe=0,tt=ar(he,this.__takeCount__);if(!x||!S&&B==he&&tt==he)return g9(a,this.__actions__);var lt=[];e:for(;he--&&qe<tt;){ke+=d;for(var wt=-1,ct=a[ke];++wt<Re;){var _t=Oe[wt],It=_t.iteratee,Jr=_t.type,br=It(ct);if(Jr==le)ct=br;else if(!br){if(Jr==M)continue e;break e}}lt[qe++]=ct}return lt}Ot.prototype=ll(Z1.prototype),Ot.prototype.constructor=Ot;function pa(a){var d=-1,x=a==null?0:a.length;for(this.clear();++d<x;){var S=a[d];this.set(S[0],S[1])}}function HS(){this.__data__=Rc?Rc(null):{},this.size=0}function $S(a){var d=this.has(a)&&delete this.__data__[a];return this.size-=d?1:0,d}function WS(a){var d=this.__data__;if(Rc){var x=d[a];return x===u?n:x}return Wt.call(d,a)?d[a]:n}function GS(a){var d=this.__data__;return Rc?d[a]!==n:Wt.call(d,a)}function KS(a,d){var x=this.__data__;return this.size+=this.has(a)?0:1,x[a]=Rc&&d===n?u:d,this}pa.prototype.clear=HS,pa.prototype.delete=$S,pa.prototype.get=WS,pa.prototype.has=GS,pa.prototype.set=KS;function Ro(a){var d=-1,x=a==null?0:a.length;for(this.clear();++d<x;){var S=a[d];this.set(S[0],S[1])}}function YS(){this.__data__=[],this.size=0}function VS(a){var d=this.__data__,x=ed(d,a);if(x<0)return!1;var S=d.length-1;return x==S?d.pop():Y1.call(d,x,1),--this.size,!0}function qS(a){var d=this.__data__,x=ed(d,a);return x<0?n:d[x][1]}function QS(a){return ed(this.__data__,a)>-1}function XS(a,d){var x=this.__data__,S=ed(x,a);return S<0?(++this.size,x.push([a,d])):x[S][1]=d,this}Ro.prototype.clear=YS,Ro.prototype.delete=VS,Ro.prototype.get=qS,Ro.prototype.has=QS,Ro.prototype.set=XS;function Io(a){var d=-1,x=a==null?0:a.length;for(this.clear();++d<x;){var S=a[d];this.set(S[0],S[1])}}function JS(){this.size=0,this.__data__={hash:new pa,map:new(Ac||Ro),string:new pa}}function ZS(a){var d=fd(this,a).delete(a);return this.size-=d?1:0,d}function ek(a){return fd(this,a).get(a)}function tk(a){return fd(this,a).has(a)}function nk(a,d){var x=fd(this,a),S=x.size;return x.set(a,d),this.size+=x.size==S?0:1,this}Io.prototype.clear=JS,Io.prototype.delete=ZS,Io.prototype.get=ek,Io.prototype.has=tk,Io.prototype.set=nk;function ga(a){var d=-1,x=a==null?0:a.length;for(this.__data__=new Io;++d<x;)this.add(a[d])}function rk(a){return this.__data__.set(a,u),this}function sk(a){return this.__data__.has(a)}ga.prototype.add=ga.prototype.push=rk,ga.prototype.has=sk;function Us(a){var d=this.__data__=new Ro(a);this.size=d.size}function ok(){this.__data__=new Ro,this.size=0}function ik(a){var d=this.__data__,x=d.delete(a);return this.size=d.size,x}function ak(a){return this.__data__.get(a)}function lk(a){return this.__data__.has(a)}function ck(a,d){var x=this.__data__;if(x instanceof Ro){var S=x.__data__;if(!Ac||S.length<s-1)return S.push([a,d]),this.size=++x.size,this;x=this.__data__=new Io(S)}return x.set(a,d),this.size=x.size,this}Us.prototype.clear=ok,Us.prototype.delete=ik,Us.prototype.get=ak,Us.prototype.has=lk,Us.prototype.set=ck;function Y5(a,d){var x=gt(a),S=!x&&wa(a),B=!x&&!S&&wi(a),q=!x&&!S&&!B&&fl(a),re=x||S||B||q,ce=re?s0(a.length,vS):[],he=ce.length;for(var ke in a)(d||Wt.call(a,ke))&&!(re&&(ke=="length"||B&&(ke=="offset"||ke=="parent")||q&&(ke=="buffer"||ke=="byteLength"||ke=="byteOffset")||Mo(ke,he)))&&ce.push(ke);return ce}function V5(a){var d=a.length;return d?a[w0(0,d-1)]:n}function uk(a,d){return hd(Ar(a),ya(d,0,a.length))}function dk(a){return hd(Ar(a))}function d0(a,d,x){(x!==n&&!Hs(a[d],x)||x===n&&!(d in a))&&jo(a,d,x)}function jc(a,d,x){var S=a[d];(!(Wt.call(a,d)&&Hs(S,x))||x===n&&!(d in a))&&jo(a,d,x)}function ed(a,d){for(var x=a.length;x--;)if(Hs(a[x][0],d))return x;return-1}function fk(a,d,x,S){return yi(a,function(B,q,re){d(S,B,x(B),re)}),S}function q5(a,d){return a&&uo(d,Gn(d),a)}function hk(a,d){return a&&uo(d,Rr(d),a)}function jo(a,d,x){d=="__proto__"&&V1?V1(a,d,{configurable:!0,enumerable:!0,value:x,writable:!0}):a[d]=x}function f0(a,d){for(var x=-1,S=d.length,B=ve(S),q=a==null;++x<S;)B[x]=q?n:K0(a,d[x]);return B}function ya(a,d,x){return a===a&&(x!==n&&(a=a<=x?a:x),d!==n&&(a=a>=d?a:d)),a}function gs(a,d,x,S,B,q){var re,ce=d&h,he=d&g,ke=d&p;if(x&&(re=B?x(a,S,B,q):x(a)),re!==n)return re;if(!mn(a))return a;var Oe=gt(a);if(Oe){if(re=t7(a),!ce)return Ar(a,re)}else{var Re=lr(a),qe=Re==ut||Re==dt;if(wi(a))return v9(a,ce);if(Re==A||Re==we||qe&&!B){if(re=he||qe?{}:F9(a),!ce)return he?Wk(a,hk(re,a)):$k(a,q5(re,a))}else{if(!en[Re])return B?a:{};re=n7(a,Re,ce)}}q||(q=new Us);var tt=q.get(a);if(tt)return tt;q.set(a,re),hv(a)?a.forEach(function(ct){re.add(gs(ct,d,x,ct,a,q))}):dv(a)&&a.forEach(function(ct,_t){re.set(_t,gs(ct,d,x,_t,a,q))});var lt=ke?he?I0:R0:he?Rr:Gn,wt=Oe?n:lt(a);return hs(wt||a,function(ct,_t){wt&&(_t=ct,ct=a[_t]),jc(re,_t,gs(ct,d,x,_t,a,q))}),re}function mk(a){var d=Gn(a);return function(x){return Q5(x,a,d)}}function Q5(a,d,x){var S=x.length;if(a==null)return!S;for(a=Xt(a);S--;){var B=x[S],q=d[B],re=a[B];if(re===n&&!(B in a)||!q(re))return!1}return!0}function X5(a,d,x){if(typeof a!="function")throw new ms(i);return zc(function(){a.apply(n,x)},d)}function Lc(a,d,x,S){var B=-1,q=P1,re=!0,ce=a.length,he=[],ke=d.length;if(!ce)return he;x&&(d=dn(d,qr(x))),S?(q=Jm,re=!1):d.length>=s&&(q=Sc,re=!1,d=new ga(d));e:for(;++B<ce;){var Oe=a[B],Re=x==null?Oe:x(Oe);if(Oe=S||Oe!==0?Oe:0,re&&Re===Re){for(var qe=ke;qe--;)if(d[qe]===Re)continue e;he.push(Oe)}else q(d,Re,S)||he.push(Oe)}return he}var yi=C9(co),J5=C9(m0,!0);function pk(a,d){var x=!0;return yi(a,function(S,B,q){return x=!!d(S,B,q),x}),x}function td(a,d,x){for(var S=-1,B=a.length;++S<B;){var q=a[S],re=d(q);if(re!=null&&(ce===n?re===re&&!Xr(re):x(re,ce)))var ce=re,he=q}return he}function gk(a,d,x,S){var B=a.length;for(x=vt(x),x<0&&(x=-x>B?0:B+x),S=S===n||S>B?B:vt(S),S<0&&(S+=B),S=x>S?0:pv(S);x<S;)a[x++]=d;return a}function Z5(a,d){var x=[];return yi(a,function(S,B,q){d(S,B,q)&&x.push(S)}),x}function Jn(a,d,x,S,B){var q=-1,re=a.length;for(x||(x=s7),B||(B=[]);++q<re;){var ce=a[q];d>0&&x(ce)?d>1?Jn(ce,d-1,x,S,B):mi(B,ce):S||(B[B.length]=ce)}return B}var h0=_9(),e9=_9(!0);function co(a,d){return a&&h0(a,d,Gn)}function m0(a,d){return a&&e9(a,d,Gn)}function nd(a,d){return hi(d,function(x){return Po(a[x])})}function xa(a,d){d=vi(d,a);for(var x=0,S=d.length;a!=null&&x<S;)a=a[fo(d[x++])];return x&&x==S?a:n}function t9(a,d,x){var S=d(a);return gt(a)?S:mi(S,x(a))}function xr(a){return a==null?a===n?be:F:ma&&ma in Xt(a)?Jk(a):d7(a)}function p0(a,d){return a>d}function yk(a,d){return a!=null&&Wt.call(a,d)}function xk(a,d){return a!=null&&d in Xt(a)}function vk(a,d,x){return a>=ar(d,x)&&a<Pn(d,x)}function g0(a,d,x){for(var S=x?Jm:P1,B=a[0].length,q=a.length,re=q,ce=ve(q),he=1/0,ke=[];re--;){var Oe=a[re];re&&d&&(Oe=dn(Oe,qr(d))),he=ar(Oe.length,he),ce[re]=!x&&(d||B>=120&&Oe.length>=120)?new ga(re&&Oe):n}Oe=a[0];var Re=-1,qe=ce[0];e:for(;++Re<B&&ke.length<he;){var tt=Oe[Re],lt=d?d(tt):tt;if(tt=x||tt!==0?tt:0,!(qe?Sc(qe,lt):S(ke,lt,x))){for(re=q;--re;){var wt=ce[re];if(!(wt?Sc(wt,lt):S(a[re],lt,x)))continue e}qe&&qe.push(lt),ke.push(tt)}}return ke}function bk(a,d,x,S){return co(a,function(B,q,re){d(S,x(B),q,re)}),S}function Dc(a,d,x){d=vi(d,a),a=H9(a,d);var S=a==null?a:a[fo(xs(d))];return S==null?n:Vr(S,a,x)}function n9(a){return xn(a)&&xr(a)==we}function wk(a){return xn(a)&&xr(a)==X}function Tk(a){return xn(a)&&xr(a)==Ke}function Mc(a,d,x,S,B){return a===d?!0:a==null||d==null||!xn(a)&&!xn(d)?a!==a&&d!==d:Ek(a,d,x,S,Mc,B)}function Ek(a,d,x,S,B,q){var re=gt(a),ce=gt(d),he=re?Le:lr(a),ke=ce?Le:lr(d);he=he==we?A:he,ke=ke==we?A:ke;var Oe=he==A,Re=ke==A,qe=he==ke;if(qe&&wi(a)){if(!wi(d))return!1;re=!0,Oe=!1}if(qe&&!Oe)return q||(q=new Us),re||fl(a)?D9(a,d,x,S,B,q):Qk(a,d,he,x,S,B,q);if(!(x&b)){var tt=Oe&&Wt.call(a,"__wrapped__"),lt=Re&&Wt.call(d,"__wrapped__");if(tt||lt){var wt=tt?a.value():a,ct=lt?d.value():d;return q||(q=new Us),B(wt,ct,x,S,q)}}return qe?(q||(q=new Us),Xk(a,d,x,S,B,q)):!1}function Ck(a){return xn(a)&&lr(a)==D}function y0(a,d,x,S){var B=x.length,q=B,re=!S;if(a==null)return!q;for(a=Xt(a);B--;){var ce=x[B];if(re&&ce[2]?ce[1]!==a[ce[0]]:!(ce[0]in a))return!1}for(;++B<q;){ce=x[B];var he=ce[0],ke=a[he],Oe=ce[1];if(re&&ce[2]){if(ke===n&&!(he in a))return!1}else{var Re=new Us;if(S)var qe=S(ke,Oe,he,a,d,Re);if(!(qe===n?Mc(Oe,ke,b|v,S,Re):qe))return!1}}return!0}function r9(a){if(!mn(a)||i7(a))return!1;var d=Po(a)?CS:Ge;return d.test(ba(a))}function _k(a){return xn(a)&&xr(a)==oe}function Nk(a){return xn(a)&&lr(a)==ie}function Sk(a){return xn(a)&&vd(a.length)&&!!on[xr(a)]}function s9(a){return typeof a=="function"?a:a==null?Ir:typeof a=="object"?gt(a)?a9(a[0],a[1]):i9(a):Nv(a)}function x0(a){if(!Bc(a))return OS(a);var d=[];for(var x in Xt(a))Wt.call(a,x)&&x!="constructor"&&d.push(x);return d}function kk(a){if(!mn(a))return u7(a);var d=Bc(a),x=[];for(var S in a)S=="constructor"&&(d||!Wt.call(a,S))||x.push(S);return x}function v0(a,d){return a<d}function o9(a,d){var x=-1,S=Or(a)?ve(a.length):[];return yi(a,function(B,q,re){S[++x]=d(B,q,re)}),S}function i9(a){var d=L0(a);return d.length==1&&d[0][2]?z9(d[0][0],d[0][1]):function(x){return x===a||y0(x,a,d)}}function a9(a,d){return M0(a)&&B9(d)?z9(fo(a),d):function(x){var S=K0(x,a);return S===n&&S===d?Y0(x,a):Mc(d,S,b|v)}}function rd(a,d,x,S,B){a!==d&&h0(d,function(q,re){if(B||(B=new Us),mn(q))Ak(a,d,re,x,rd,S,B);else{var ce=S?S(F0(a,re),q,re+"",a,d,B):n;ce===n&&(ce=q),d0(a,re,ce)}},Rr)}function Ak(a,d,x,S,B,q,re){var ce=F0(a,x),he=F0(d,x),ke=re.get(he);if(ke){d0(a,x,ke);return}var Oe=q?q(ce,he,x+"",a,d,re):n,Re=Oe===n;if(Re){var qe=gt(he),tt=!qe&&wi(he),lt=!qe&&!tt&&fl(he);Oe=he,qe||tt||lt?gt(ce)?Oe=ce:Tn(ce)?Oe=Ar(ce):tt?(Re=!1,Oe=v9(he,!0)):lt?(Re=!1,Oe=b9(he,!0)):Oe=[]:Uc(he)||wa(he)?(Oe=ce,wa(ce)?Oe=gv(ce):(!mn(ce)||Po(ce))&&(Oe=F9(he))):Re=!1}Re&&(re.set(he,Oe),B(Oe,he,S,q,re),re.delete(he)),d0(a,x,Oe)}function l9(a,d){var x=a.length;if(x)return d+=d<0?x:0,Mo(d,x)?a[d]:n}function c9(a,d,x){d.length?d=dn(d,function(q){return gt(q)?function(re){return xa(re,q.length===1?q[0]:q)}:q}):d=[Ir];var S=-1;d=dn(d,qr(at()));var B=o9(a,function(q,re,ce){var he=dn(d,function(ke){return ke(q)});return{criteria:he,index:++S,value:q}});return nS(B,function(q,re){return Hk(q,re,x)})}function Ok(a,d){return u9(a,d,function(x,S){return Y0(a,S)})}function u9(a,d,x){for(var S=-1,B=d.length,q={};++S<B;){var re=d[S],ce=xa(a,re);x(ce,re)&&Pc(q,vi(re,a),ce)}return q}function Rk(a){return function(d){return xa(d,a)}}function b0(a,d,x,S){var B=S?tS:tl,q=-1,re=d.length,ce=a;for(a===d&&(d=Ar(d)),x&&(ce=dn(a,qr(x)));++q<re;)for(var he=0,ke=d[q],Oe=x?x(ke):ke;(he=B(ce,Oe,he,S))>-1;)ce!==a&&Y1.call(ce,he,1),Y1.call(a,he,1);return a}function d9(a,d){for(var x=a?d.length:0,S=x-1;x--;){var B=d[x];if(x==S||B!==q){var q=B;Mo(B)?Y1.call(a,B,1):C0(a,B)}}return a}function w0(a,d){return a+Q1(G5()*(d-a+1))}function Ik(a,d,x,S){for(var B=-1,q=Pn(q1((d-a)/(x||1)),0),re=ve(q);q--;)re[S?q:++B]=a,a+=x;return re}function T0(a,d){var x="";if(!a||d<1||d>G)return x;do d%2&&(x+=a),d=Q1(d/2),d&&(a+=a);while(d);return x}function Ct(a,d){return B0(U9(a,d,Ir),a+"")}function jk(a){return V5(hl(a))}function Lk(a,d){var x=hl(a);return hd(x,ya(d,0,x.length))}function Pc(a,d,x,S){if(!mn(a))return a;d=vi(d,a);for(var B=-1,q=d.length,re=q-1,ce=a;ce!=null&&++B<q;){var he=fo(d[B]),ke=x;if(he==="__proto__"||he==="constructor"||he==="prototype")return a;if(B!=re){var Oe=ce[he];ke=S?S(Oe,he,ce):n,ke===n&&(ke=mn(Oe)?Oe:Mo(d[B+1])?[]:{})}jc(ce,he,ke),ce=ce[he]}return a}var f9=X1?function(a,d){return X1.set(a,d),a}:Ir,Dk=V1?function(a,d){return V1(a,"toString",{configurable:!0,enumerable:!1,value:q0(d),writable:!0})}:Ir;function Mk(a){return hd(hl(a))}function ys(a,d,x){var S=-1,B=a.length;d<0&&(d=-d>B?0:B+d),x=x>B?B:x,x<0&&(x+=B),B=d>x?0:x-d>>>0,d>>>=0;for(var q=ve(B);++S<B;)q[S]=a[S+d];return q}function Pk(a,d){var x;return yi(a,function(S,B,q){return x=d(S,B,q),!x}),!!x}function sd(a,d,x){var S=0,B=a==null?S:a.length;if(typeof d=="number"&&d===d&&B<=V){for(;S<B;){var q=S+B>>>1,re=a[q];re!==null&&!Xr(re)&&(x?re<=d:re<d)?S=q+1:B=q}return B}return E0(a,d,Ir,x)}function E0(a,d,x,S){var B=0,q=a==null?0:a.length;if(q===0)return 0;d=x(d);for(var re=d!==d,ce=d===null,he=Xr(d),ke=d===n;B<q;){var Oe=Q1((B+q)/2),Re=x(a[Oe]),qe=Re!==n,tt=Re===null,lt=Re===Re,wt=Xr(Re);if(re)var ct=S||lt;else ke?ct=lt&&(S||qe):ce?ct=lt&&qe&&(S||!tt):he?ct=lt&&qe&&!tt&&(S||!wt):tt||wt?ct=!1:ct=S?Re<=d:Re<d;ct?B=Oe+1:q=Oe}return ar(q,te)}function h9(a,d){for(var x=-1,S=a.length,B=0,q=[];++x<S;){var re=a[x],ce=d?d(re):re;if(!x||!Hs(ce,he)){var he=ce;q[B++]=re===0?0:re}}return q}function m9(a){return typeof a=="number"?a:Xr(a)?U:+a}function Qr(a){if(typeof a=="string")return a;if(gt(a))return dn(a,Qr)+"";if(Xr(a))return K5?K5.call(a):"";var d=a+"";return d=="0"&&1/a==-$?"-0":d}function xi(a,d,x){var S=-1,B=P1,q=a.length,re=!0,ce=[],he=ce;if(x)re=!1,B=Jm;else if(q>=s){var ke=d?null:Vk(a);if(ke)return B1(ke);re=!1,B=Sc,he=new ga}else he=d?[]:ce;e:for(;++S<q;){var Oe=a[S],Re=d?d(Oe):Oe;if(Oe=x||Oe!==0?Oe:0,re&&Re===Re){for(var qe=he.length;qe--;)if(he[qe]===Re)continue e;d&&he.push(Re),ce.push(Oe)}else B(he,Re,x)||(he!==ce&&he.push(Re),ce.push(Oe))}return ce}function C0(a,d){return d=vi(d,a),a=H9(a,d),a==null||delete a[fo(xs(d))]}function p9(a,d,x,S){return Pc(a,d,x(xa(a,d)),S)}function od(a,d,x,S){for(var B=a.length,q=S?B:-1;(S?q--:++q<B)&&d(a[q],q,a););return x?ys(a,S?0:q,S?q+1:B):ys(a,S?q+1:0,S?B:q)}function g9(a,d){var x=a;return x instanceof Ot&&(x=x.value()),Zm(d,function(S,B){return B.func.apply(B.thisArg,mi([S],B.args))},x)}function _0(a,d,x){var S=a.length;if(S<2)return S?xi(a[0]):[];for(var B=-1,q=ve(S);++B<S;)for(var re=a[B],ce=-1;++ce<S;)ce!=B&&(q[B]=Lc(q[B]||re,a[ce],d,x));return xi(Jn(q,1),d,x)}function y9(a,d,x){for(var S=-1,B=a.length,q=d.length,re={};++S<B;){var ce=S<q?d[S]:n;x(re,a[S],ce)}return re}function N0(a){return Tn(a)?a:[]}function S0(a){return typeof a=="function"?a:Ir}function vi(a,d){return gt(a)?a:M0(a,d)?[a]:K9(Ht(a))}var Fk=Ct;function bi(a,d,x){var S=a.length;return x=x===n?S:x,!d&&x>=S?a:ys(a,d,x)}var x9=_S||function(a){return Xn.clearTimeout(a)};function v9(a,d){if(d)return a.slice();var x=a.length,S=z5?z5(x):new a.constructor(x);return a.copy(S),S}function k0(a){var d=new a.constructor(a.byteLength);return new G1(d).set(new G1(a)),d}function Bk(a,d){var x=d?k0(a.buffer):a.buffer;return new a.constructor(x,a.byteOffset,a.byteLength)}function zk(a){var d=new a.constructor(a.source,fa.exec(a));return d.lastIndex=a.lastIndex,d}function Uk(a){return Ic?Xt(Ic.call(a)):{}}function b9(a,d){var x=d?k0(a.buffer):a.buffer;return new a.constructor(x,a.byteOffset,a.length)}function w9(a,d){if(a!==d){var x=a!==n,S=a===null,B=a===a,q=Xr(a),re=d!==n,ce=d===null,he=d===d,ke=Xr(d);if(!ce&&!ke&&!q&&a>d||q&&re&&he&&!ce&&!ke||S&&re&&he||!x&&he||!B)return 1;if(!S&&!q&&!ke&&a<d||ke&&x&&B&&!S&&!q||ce&&x&&B||!re&&B||!he)return-1}return 0}function Hk(a,d,x){for(var S=-1,B=a.criteria,q=d.criteria,re=B.length,ce=x.length;++S<re;){var he=w9(B[S],q[S]);if(he){if(S>=ce)return he;var ke=x[S];return he*(ke=="desc"?-1:1)}}return a.index-d.index}function T9(a,d,x,S){for(var B=-1,q=a.length,re=x.length,ce=-1,he=d.length,ke=Pn(q-re,0),Oe=ve(he+ke),Re=!S;++ce<he;)Oe[ce]=d[ce];for(;++B<re;)(Re||B<q)&&(Oe[x[B]]=a[B]);for(;ke--;)Oe[ce++]=a[B++];return Oe}function E9(a,d,x,S){for(var B=-1,q=a.length,re=-1,ce=x.length,he=-1,ke=d.length,Oe=Pn(q-ce,0),Re=ve(Oe+ke),qe=!S;++B<Oe;)Re[B]=a[B];for(var tt=B;++he<ke;)Re[tt+he]=d[he];for(;++re<ce;)(qe||B<q)&&(Re[tt+x[re]]=a[B++]);return Re}function Ar(a,d){var x=-1,S=a.length;for(d||(d=ve(S));++x<S;)d[x]=a[x];return d}function uo(a,d,x,S){var B=!x;x||(x={});for(var q=-1,re=d.length;++q<re;){var ce=d[q],he=S?S(x[ce],a[ce],ce,x,a):n;he===n&&(he=a[ce]),B?jo(x,ce,he):jc(x,ce,he)}return x}function $k(a,d){return uo(a,D0(a),d)}function Wk(a,d){return uo(a,M9(a),d)}function id(a,d){return function(x,S){var B=gt(x)?qN:fk,q=d?d():{};return B(x,a,at(S,2),q)}}function cl(a){return Ct(function(d,x){var S=-1,B=x.length,q=B>1?x[B-1]:n,re=B>2?x[2]:n;for(q=a.length>3&&typeof q=="function"?(B--,q):n,re&&vr(x[0],x[1],re)&&(q=B<3?n:q,B=1),d=Xt(d);++S<B;){var ce=x[S];ce&&a(d,ce,S,q)}return d})}function C9(a,d){return function(x,S){if(x==null)return x;if(!Or(x))return a(x,S);for(var B=x.length,q=d?B:-1,re=Xt(x);(d?q--:++q<B)&&S(re[q],q,re)!==!1;);return x}}function _9(a){return function(d,x,S){for(var B=-1,q=Xt(d),re=S(d),ce=re.length;ce--;){var he=re[a?ce:++B];if(x(q[he],he,q)===!1)break}return d}}function Gk(a,d,x){var S=d&T,B=Fc(a);function q(){var re=this&&this!==Xn&&this instanceof q?B:a;return re.apply(S?x:this,arguments)}return q}function N9(a){return function(d){d=Ht(d);var x=nl(d)?zs(d):n,S=x?x[0]:d.charAt(0),B=x?bi(x,1).join(""):d.slice(1);return S[a]()+B}}function ul(a){return function(d){return Zm(Cv(Ev(d).replace(DN,"")),a,"")}}function Fc(a){return function(){var d=arguments;switch(d.length){case 0:return new a;case 1:return new a(d[0]);case 2:return new a(d[0],d[1]);case 3:return new a(d[0],d[1],d[2]);case 4:return new a(d[0],d[1],d[2],d[3]);case 5:return new a(d[0],d[1],d[2],d[3],d[4]);case 6:return new a(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new a(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var x=ll(a.prototype),S=a.apply(x,d);return mn(S)?S:x}}function Kk(a,d,x){var S=Fc(a);function B(){for(var q=arguments.length,re=ve(q),ce=q,he=dl(B);ce--;)re[ce]=arguments[ce];var ke=q<3&&re[0]!==he&&re[q-1]!==he?[]:pi(re,he);if(q-=ke.length,q<x)return R9(a,d,ad,B.placeholder,n,re,ke,n,n,x-q);var Oe=this&&this!==Xn&&this instanceof B?S:a;return Vr(Oe,this,re)}return B}function S9(a){return function(d,x,S){var B=Xt(d);if(!Or(d)){var q=at(x,3);d=Gn(d),x=function(ce){return q(B[ce],ce,B)}}var re=a(d,x,S);return re>-1?B[q?d[re]:re]:n}}function k9(a){return Do(function(d){var x=d.length,S=x,B=ps.prototype.thru;for(a&&d.reverse();S--;){var q=d[S];if(typeof q!="function")throw new ms(i);if(B&&!re&&dd(q)=="wrapper")var re=new ps([],!0)}for(S=re?S:x;++S<x;){q=d[S];var ce=dd(q),he=ce=="wrapper"?j0(q):n;he&&P0(he[0])&&he[1]==(C|w|j|k)&&!he[4].length&&he[9]==1?re=re[dd(he[0])].apply(re,he[3]):re=q.length==1&&P0(q)?re[ce]():re.thru(q)}return function(){var ke=arguments,Oe=ke[0];if(re&&ke.length==1&&gt(Oe))return re.plant(Oe).value();for(var Re=0,qe=x?d[Re].apply(this,ke):Oe;++Re<x;)qe=d[Re].call(this,qe);return qe}})}function ad(a,d,x,S,B,q,re,ce,he,ke){var Oe=d&C,Re=d&T,qe=d&y,tt=d&(w|I),lt=d&R,wt=qe?n:Fc(a);function ct(){for(var _t=arguments.length,It=ve(_t),Jr=_t;Jr--;)It[Jr]=arguments[Jr];if(tt)var br=dl(ct),Zr=sS(It,br);if(S&&(It=T9(It,S,B,tt)),q&&(It=E9(It,q,re,tt)),_t-=Zr,tt&&_t<ke){var En=pi(It,br);return R9(a,d,ad,ct.placeholder,x,It,En,ce,he,ke-_t)}var $s=Re?x:this,Bo=qe?$s[a]:a;return _t=It.length,ce?It=f7(It,ce):lt&&_t>1&&It.reverse(),Oe&&he<_t&&(It.length=he),this&&this!==Xn&&this instanceof ct&&(Bo=wt||Fc(Bo)),Bo.apply($s,It)}return ct}function A9(a,d){return function(x,S){return bk(x,a,d(S),{})}}function ld(a,d){return function(x,S){var B;if(x===n&&S===n)return d;if(x!==n&&(B=x),S!==n){if(B===n)return S;typeof x=="string"||typeof S=="string"?(x=Qr(x),S=Qr(S)):(x=m9(x),S=m9(S)),B=a(x,S)}return B}}function A0(a){return Do(function(d){return d=dn(d,qr(at())),Ct(function(x){var S=this;return a(d,function(B){return Vr(B,S,x)})})})}function cd(a,d){d=d===n?" ":Qr(d);var x=d.length;if(x<2)return x?T0(d,a):d;var S=T0(d,q1(a/rl(d)));return nl(d)?bi(zs(S),0,a).join(""):S.slice(0,a)}function Yk(a,d,x,S){var B=d&T,q=Fc(a);function re(){for(var ce=-1,he=arguments.length,ke=-1,Oe=S.length,Re=ve(Oe+he),qe=this&&this!==Xn&&this instanceof re?q:a;++ke<Oe;)Re[ke]=S[ke];for(;he--;)Re[ke++]=arguments[++ce];return Vr(qe,B?x:this,Re)}return re}function O9(a){return function(d,x,S){return S&&typeof S!="number"&&vr(d,x,S)&&(x=S=n),d=Fo(d),x===n?(x=d,d=0):x=Fo(x),S=S===n?d<x?1:-1:Fo(S),Ik(d,x,S,a)}}function ud(a){return function(d,x){return typeof d=="string"&&typeof x=="string"||(d=vs(d),x=vs(x)),a(d,x)}}function R9(a,d,x,S,B,q,re,ce,he,ke){var Oe=d&w,Re=Oe?re:n,qe=Oe?n:re,tt=Oe?q:n,lt=Oe?n:q;d|=Oe?j:_,d&=~(Oe?_:j),d&E||(d&=~(T|y));var wt=[a,d,B,tt,Re,lt,qe,ce,he,ke],ct=x.apply(n,wt);return P0(a)&&$9(ct,wt),ct.placeholder=S,W9(ct,a,d)}function O0(a){var d=Mn[a];return function(x,S){if(x=vs(x),S=S==null?0:ar(vt(S),292),S&&W5(x)){var B=(Ht(x)+"e").split("e"),q=d(B[0]+"e"+(+B[1]+S));return B=(Ht(q)+"e").split("e"),+(B[0]+"e"+(+B[1]-S))}return d(x)}}var Vk=il&&1/B1(new il([,-0]))[1]==$?function(a){return new il(a)}:J0;function I9(a){return function(d){var x=lr(d);return x==D?i0(d):x==ie?dS(d):rS(d,a(d))}}function Lo(a,d,x,S,B,q,re,ce){var he=d&y;if(!he&&typeof a!="function")throw new ms(i);var ke=S?S.length:0;if(ke||(d&=~(j|_),S=B=n),re=re===n?re:Pn(vt(re),0),ce=ce===n?ce:vt(ce),ke-=B?B.length:0,d&_){var Oe=S,Re=B;S=B=n}var qe=he?n:j0(a),tt=[a,d,x,S,B,Oe,Re,q,re,ce];if(qe&&c7(tt,qe),a=tt[0],d=tt[1],x=tt[2],S=tt[3],B=tt[4],ce=tt[9]=tt[9]===n?he?0:a.length:Pn(tt[9]-ke,0),!ce&&d&(w|I)&&(d&=~(w|I)),!d||d==T)var lt=Gk(a,d,x);else d==w||d==I?lt=Kk(a,d,ce):(d==j||d==(T|j))&&!B.length?lt=Yk(a,d,x,S):lt=ad.apply(n,tt);var wt=qe?f9:$9;return W9(wt(lt,tt),a,d)}function j9(a,d,x,S){return a===n||Hs(a,ol[x])&&!Wt.call(S,x)?d:a}function L9(a,d,x,S,B,q){return mn(a)&&mn(d)&&(q.set(d,a),rd(a,d,n,L9,q),q.delete(d)),a}function qk(a){return Uc(a)?n:a}function D9(a,d,x,S,B,q){var re=x&b,ce=a.length,he=d.length;if(ce!=he&&!(re&&he>ce))return!1;var ke=q.get(a),Oe=q.get(d);if(ke&&Oe)return ke==d&&Oe==a;var Re=-1,qe=!0,tt=x&v?new ga:n;for(q.set(a,d),q.set(d,a);++Re<ce;){var lt=a[Re],wt=d[Re];if(S)var ct=re?S(wt,lt,Re,d,a,q):S(lt,wt,Re,a,d,q);if(ct!==n){if(ct)continue;qe=!1;break}if(tt){if(!e0(d,function(_t,It){if(!Sc(tt,It)&&(lt===_t||B(lt,_t,x,S,q)))return tt.push(It)})){qe=!1;break}}else if(!(lt===wt||B(lt,wt,x,S,q))){qe=!1;break}}return q.delete(a),q.delete(d),qe}function Qk(a,d,x,S,B,q,re){switch(x){case Z:if(a.byteLength!=d.byteLength||a.byteOffset!=d.byteOffset)return!1;a=a.buffer,d=d.buffer;case X:return!(a.byteLength!=d.byteLength||!q(new G1(a),new G1(d)));case Me:case Ke:case ue:return Hs(+a,+d);case nt:return a.name==d.name&&a.message==d.message;case oe:case J:return a==d+"";case D:var ce=i0;case ie:var he=S&b;if(ce||(ce=B1),a.size!=d.size&&!he)return!1;var ke=re.get(a);if(ke)return ke==d;S|=v,re.set(a,d);var Oe=D9(ce(a),ce(d),S,B,q,re);return re.delete(a),Oe;case me:if(Ic)return Ic.call(a)==Ic.call(d)}return!1}function Xk(a,d,x,S,B,q){var re=x&b,ce=R0(a),he=ce.length,ke=R0(d),Oe=ke.length;if(he!=Oe&&!re)return!1;for(var Re=he;Re--;){var qe=ce[Re];if(!(re?qe in d:Wt.call(d,qe)))return!1}var tt=q.get(a),lt=q.get(d);if(tt&&lt)return tt==d&&lt==a;var wt=!0;q.set(a,d),q.set(d,a);for(var ct=re;++Re<he;){qe=ce[Re];var _t=a[qe],It=d[qe];if(S)var Jr=re?S(It,_t,qe,d,a,q):S(_t,It,qe,a,d,q);if(!(Jr===n?_t===It||B(_t,It,x,S,q):Jr)){wt=!1;break}ct||(ct=qe=="constructor")}if(wt&&!ct){var br=a.constructor,Zr=d.constructor;br!=Zr&&"constructor"in a&&"constructor"in d&&!(typeof br=="function"&&br instanceof br&&typeof Zr=="function"&&Zr instanceof Zr)&&(wt=!1)}return q.delete(a),q.delete(d),wt}function Do(a){return B0(U9(a,n,Q9),a+"")}function R0(a){return t9(a,Gn,D0)}function I0(a){return t9(a,Rr,M9)}var j0=X1?function(a){return X1.get(a)}:J0;function dd(a){for(var d=a.name+"",x=al[d],S=Wt.call(al,d)?x.length:0;S--;){var B=x[S],q=B.func;if(q==null||q==a)return B.name}return d}function dl(a){var d=Wt.call(W,"placeholder")?W:a;return d.placeholder}function at(){var a=W.iteratee||Q0;return a=a===Q0?s9:a,arguments.length?a(arguments[0],arguments[1]):a}function fd(a,d){var x=a.__data__;return o7(d)?x[typeof d=="string"?"string":"hash"]:x.map}function L0(a){for(var d=Gn(a),x=d.length;x--;){var S=d[x],B=a[S];d[x]=[S,B,B9(B)]}return d}function va(a,d){var x=lS(a,d);return r9(x)?x:n}function Jk(a){var d=Wt.call(a,ma),x=a[ma];try{a[ma]=n;var S=!0}catch{}var B=$1.call(a);return S&&(d?a[ma]=x:delete a[ma]),B}var D0=l0?function(a){return a==null?[]:(a=Xt(a),hi(l0(a),function(d){return H5.call(a,d)}))}:Z0,M9=l0?function(a){for(var d=[];a;)mi(d,D0(a)),a=K1(a);return d}:Z0,lr=xr;(c0&&lr(new c0(new ArrayBuffer(1)))!=Z||Ac&&lr(new Ac)!=D||u0&&lr(u0.resolve())!=L||il&&lr(new il)!=ie||Oc&&lr(new Oc)!=ye)&&(lr=function(a){var d=xr(a),x=d==A?a.constructor:n,S=x?ba(x):"";if(S)switch(S){case LS:return Z;case DS:return D;case MS:return L;case PS:return ie;case FS:return ye}return d});function Zk(a,d,x){for(var S=-1,B=x.length;++S<B;){var q=x[S],re=q.size;switch(q.type){case"drop":a+=re;break;case"dropRight":d-=re;break;case"take":d=ar(d,a+re);break;case"takeRight":a=Pn(a,d-re);break}}return{start:a,end:d}}function e7(a){var d=a.match(Ln);return d?d[1].split(Bs):[]}function P9(a,d,x){d=vi(d,a);for(var S=-1,B=d.length,q=!1;++S<B;){var re=fo(d[S]);if(!(q=a!=null&&x(a,re)))break;a=a[re]}return q||++S!=B?q:(B=a==null?0:a.length,!!B&&vd(B)&&Mo(re,B)&&(gt(a)||wa(a)))}function t7(a){var d=a.length,x=new a.constructor(d);return d&&typeof a[0]=="string"&&Wt.call(a,"index")&&(x.index=a.index,x.input=a.input),x}function F9(a){return typeof a.constructor=="function"&&!Bc(a)?ll(K1(a)):{}}function n7(a,d,x){var S=a.constructor;switch(d){case X:return k0(a);case Me:case Ke:return new S(+a);case Z:return Bk(a,x);case pe:case ge:case Ee:case He:case Ye:case pt:case Qe:case Et:case Dt:return b9(a,x);case D:return new S;case ue:case J:return new S(a);case oe:return zk(a);case ie:return new S;case me:return Uk(a)}}function r7(a,d){var x=d.length;if(!x)return a;var S=x-1;return d[S]=(x>1?"& ":"")+d[S],d=d.join(x>2?", ":" "),a.replace(ds,`{
/* [wrapped with `+d+`] */
`)}function s7(a){return gt(a)||wa(a)||!!($5&&a&&a[$5])}function Mo(a,d){var x=typeof a;return d=d??G,!!d&&(x=="number"||x!="symbol"&&Ue.test(a))&&a>-1&&a%1==0&&a<d}function vr(a,d,x){if(!mn(x))return!1;var S=typeof d;return(S=="number"?Or(x)&&Mo(d,x.length):S=="string"&&d in x)?Hs(x[d],a):!1}function M0(a,d){if(gt(a))return!1;var x=typeof a;return x=="number"||x=="symbol"||x=="boolean"||a==null||Xr(a)?!0:Kr.test(a)||!or.test(a)||d!=null&&a in Xt(d)}function o7(a){var d=typeof a;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?a!=="__proto__":a===null}function P0(a){var d=dd(a),x=W[d];if(typeof x!="function"||!(d in Ot.prototype))return!1;if(a===x)return!0;var S=j0(x);return!!S&&a===S[0]}function i7(a){return!!B5&&B5 in a}var a7=U1?Po:ep;function Bc(a){var d=a&&a.constructor,x=typeof d=="function"&&d.prototype||ol;return a===x}function B9(a){return a===a&&!mn(a)}function z9(a,d){return function(x){return x==null?!1:x[a]===d&&(d!==n||a in Xt(x))}}function l7(a){var d=yd(a,function(S){return x.size===f&&x.clear(),S}),x=d.cache;return d}function c7(a,d){var x=a[1],S=d[1],B=x|S,q=B<(T|y|C),re=S==C&&x==w||S==C&&x==k&&a[7].length<=d[8]||S==(C|k)&&d[7].length<=d[8]&&x==w;if(!(q||re))return a;S&T&&(a[2]=d[2],B|=x&T?0:E);var ce=d[3];if(ce){var he=a[3];a[3]=he?T9(he,ce,d[4]):ce,a[4]=he?pi(a[3],m):d[4]}return ce=d[5],ce&&(he=a[5],a[5]=he?E9(he,ce,d[6]):ce,a[6]=he?pi(a[5],m):d[6]),ce=d[7],ce&&(a[7]=ce),S&C&&(a[8]=a[8]==null?d[8]:ar(a[8],d[8])),a[9]==null&&(a[9]=d[9]),a[0]=d[0],a[1]=B,a}function u7(a){var d=[];if(a!=null)for(var x in Xt(a))d.push(x);return d}function d7(a){return $1.call(a)}function U9(a,d,x){return d=Pn(d===n?a.length-1:d,0),function(){for(var S=arguments,B=-1,q=Pn(S.length-d,0),re=ve(q);++B<q;)re[B]=S[d+B];B=-1;for(var ce=ve(d+1);++B<d;)ce[B]=S[B];return ce[d]=x(re),Vr(a,this,ce)}}function H9(a,d){return d.length<2?a:xa(a,ys(d,0,-1))}function f7(a,d){for(var x=a.length,S=ar(d.length,x),B=Ar(a);S--;){var q=d[S];a[S]=Mo(q,x)?B[q]:n}return a}function F0(a,d){if(!(d==="constructor"&&typeof a[d]=="function")&&d!="__proto__")return a[d]}var $9=G9(f9),zc=SS||function(a,d){return Xn.setTimeout(a,d)},B0=G9(Dk);function W9(a,d,x){var S=d+"";return B0(a,r7(S,h7(e7(S),x)))}function G9(a){var d=0,x=0;return function(){var S=RS(),B=Q-(S-x);if(x=S,B>0){if(++d>=z)return arguments[0]}else d=0;return a.apply(n,arguments)}}function hd(a,d){var x=-1,S=a.length,B=S-1;for(d=d===n?S:d;++x<d;){var q=w0(x,B),re=a[q];a[q]=a[x],a[x]=re}return a.length=d,a}var K9=l7(function(a){var d=[];return a.charCodeAt(0)===46&&d.push(""),a.replace(sn,function(x,S,B,q){d.push(B?q.replace(D1,"$1"):S||x)}),d});function fo(a){if(typeof a=="string"||Xr(a))return a;var d=a+"";return d=="0"&&1/a==-$?"-0":d}function ba(a){if(a!=null){try{return H1.call(a)}catch{}try{return a+""}catch{}}return""}function h7(a,d){return hs(xe,function(x){var S="_."+x[0];d&x[1]&&!P1(a,S)&&a.push(S)}),a.sort()}function Y9(a){if(a instanceof Ot)return a.clone();var d=new ps(a.__wrapped__,a.__chain__);return d.__actions__=Ar(a.__actions__),d.__index__=a.__index__,d.__values__=a.__values__,d}function m7(a,d,x){(x?vr(a,d,x):d===n)?d=1:d=Pn(vt(d),0);var S=a==null?0:a.length;if(!S||d<1)return[];for(var B=0,q=0,re=ve(q1(S/d));B<S;)re[q++]=ys(a,B,B+=d);return re}function p7(a){for(var d=-1,x=a==null?0:a.length,S=0,B=[];++d<x;){var q=a[d];q&&(B[S++]=q)}return B}function g7(){var a=arguments.length;if(!a)return[];for(var d=ve(a-1),x=arguments[0],S=a;S--;)d[S-1]=arguments[S];return mi(gt(x)?Ar(x):[x],Jn(d,1))}var y7=Ct(function(a,d){return Tn(a)?Lc(a,Jn(d,1,Tn,!0)):[]}),x7=Ct(function(a,d){var x=xs(d);return Tn(x)&&(x=n),Tn(a)?Lc(a,Jn(d,1,Tn,!0),at(x,2)):[]}),v7=Ct(function(a,d){var x=xs(d);return Tn(x)&&(x=n),Tn(a)?Lc(a,Jn(d,1,Tn,!0),n,x):[]});function b7(a,d,x){var S=a==null?0:a.length;return S?(d=x||d===n?1:vt(d),ys(a,d<0?0:d,S)):[]}function w7(a,d,x){var S=a==null?0:a.length;return S?(d=x||d===n?1:vt(d),d=S-d,ys(a,0,d<0?0:d)):[]}function T7(a,d){return a&&a.length?od(a,at(d,3),!0,!0):[]}function E7(a,d){return a&&a.length?od(a,at(d,3),!0):[]}function C7(a,d,x,S){var B=a==null?0:a.length;return B?(x&&typeof x!="number"&&vr(a,d,x)&&(x=0,S=B),gk(a,d,x,S)):[]}function V9(a,d,x){var S=a==null?0:a.length;if(!S)return-1;var B=x==null?0:vt(x);return B<0&&(B=Pn(S+B,0)),F1(a,at(d,3),B)}function q9(a,d,x){var S=a==null?0:a.length;if(!S)return-1;var B=S-1;return x!==n&&(B=vt(x),B=x<0?Pn(S+B,0):ar(B,S-1)),F1(a,at(d,3),B,!0)}function Q9(a){var d=a==null?0:a.length;return d?Jn(a,1):[]}function _7(a){var d=a==null?0:a.length;return d?Jn(a,$):[]}function N7(a,d){var x=a==null?0:a.length;return x?(d=d===n?1:vt(d),Jn(a,d)):[]}function S7(a){for(var d=-1,x=a==null?0:a.length,S={};++d<x;){var B=a[d];S[B[0]]=B[1]}return S}function X9(a){return a&&a.length?a[0]:n}function k7(a,d,x){var S=a==null?0:a.length;if(!S)return-1;var B=x==null?0:vt(x);return B<0&&(B=Pn(S+B,0)),tl(a,d,B)}function A7(a){var d=a==null?0:a.length;return d?ys(a,0,-1):[]}var O7=Ct(function(a){var d=dn(a,N0);return d.length&&d[0]===a[0]?g0(d):[]}),R7=Ct(function(a){var d=xs(a),x=dn(a,N0);return d===xs(x)?d=n:x.pop(),x.length&&x[0]===a[0]?g0(x,at(d,2)):[]}),I7=Ct(function(a){var d=xs(a),x=dn(a,N0);return d=typeof d=="function"?d:n,d&&x.pop(),x.length&&x[0]===a[0]?g0(x,n,d):[]});function j7(a,d){return a==null?"":AS.call(a,d)}function xs(a){var d=a==null?0:a.length;return d?a[d-1]:n}function L7(a,d,x){var S=a==null?0:a.length;if(!S)return-1;var B=S;return x!==n&&(B=vt(x),B=B<0?Pn(S+B,0):ar(B,S-1)),d===d?hS(a,d,B):F1(a,R5,B,!0)}function D7(a,d){return a&&a.length?l9(a,vt(d)):n}var M7=Ct(J9);function J9(a,d){return a&&a.length&&d&&d.length?b0(a,d):a}function P7(a,d,x){return a&&a.length&&d&&d.length?b0(a,d,at(x,2)):a}function F7(a,d,x){return a&&a.length&&d&&d.length?b0(a,d,n,x):a}var B7=Do(function(a,d){var x=a==null?0:a.length,S=f0(a,d);return d9(a,dn(d,function(B){return Mo(B,x)?+B:B}).sort(w9)),S});function z7(a,d){var x=[];if(!(a&&a.length))return x;var S=-1,B=[],q=a.length;for(d=at(d,3);++S<q;){var re=a[S];d(re,S,a)&&(x.push(re),B.push(S))}return d9(a,B),x}function z0(a){return a==null?a:jS.call(a)}function U7(a,d,x){var S=a==null?0:a.length;return S?(x&&typeof x!="number"&&vr(a,d,x)?(d=0,x=S):(d=d==null?0:vt(d),x=x===n?S:vt(x)),ys(a,d,x)):[]}function H7(a,d){return sd(a,d)}function $7(a,d,x){return E0(a,d,at(x,2))}function W7(a,d){var x=a==null?0:a.length;if(x){var S=sd(a,d);if(S<x&&Hs(a[S],d))return S}return-1}function G7(a,d){return sd(a,d,!0)}function K7(a,d,x){return E0(a,d,at(x,2),!0)}function Y7(a,d){var x=a==null?0:a.length;if(x){var S=sd(a,d,!0)-1;if(Hs(a[S],d))return S}return-1}function V7(a){return a&&a.length?h9(a):[]}function q7(a,d){return a&&a.length?h9(a,at(d,2)):[]}function Q7(a){var d=a==null?0:a.length;return d?ys(a,1,d):[]}function X7(a,d,x){return a&&a.length?(d=x||d===n?1:vt(d),ys(a,0,d<0?0:d)):[]}function J7(a,d,x){var S=a==null?0:a.length;return S?(d=x||d===n?1:vt(d),d=S-d,ys(a,d<0?0:d,S)):[]}function Z7(a,d){return a&&a.length?od(a,at(d,3),!1,!0):[]}function eA(a,d){return a&&a.length?od(a,at(d,3)):[]}var tA=Ct(function(a){return xi(Jn(a,1,Tn,!0))}),nA=Ct(function(a){var d=xs(a);return Tn(d)&&(d=n),xi(Jn(a,1,Tn,!0),at(d,2))}),rA=Ct(function(a){var d=xs(a);return d=typeof d=="function"?d:n,xi(Jn(a,1,Tn,!0),n,d)});function sA(a){return a&&a.length?xi(a):[]}function oA(a,d){return a&&a.length?xi(a,at(d,2)):[]}function iA(a,d){return d=typeof d=="function"?d:n,a&&a.length?xi(a,n,d):[]}function U0(a){if(!(a&&a.length))return[];var d=0;return a=hi(a,function(x){if(Tn(x))return d=Pn(x.length,d),!0}),s0(d,function(x){return dn(a,t0(x))})}function Z9(a,d){if(!(a&&a.length))return[];var x=U0(a);return d==null?x:dn(x,function(S){return Vr(d,n,S)})}var aA=Ct(function(a,d){return Tn(a)?Lc(a,d):[]}),lA=Ct(function(a){return _0(hi(a,Tn))}),cA=Ct(function(a){var d=xs(a);return Tn(d)&&(d=n),_0(hi(a,Tn),at(d,2))}),uA=Ct(function(a){var d=xs(a);return d=typeof d=="function"?d:n,_0(hi(a,Tn),n,d)}),dA=Ct(U0);function fA(a,d){return y9(a||[],d||[],jc)}function hA(a,d){return y9(a||[],d||[],Pc)}var mA=Ct(function(a){var d=a.length,x=d>1?a[d-1]:n;return x=typeof x=="function"?(a.pop(),x):n,Z9(a,x)});function ev(a){var d=W(a);return d.__chain__=!0,d}function pA(a,d){return d(a),a}function md(a,d){return d(a)}var gA=Do(function(a){var d=a.length,x=d?a[0]:0,S=this.__wrapped__,B=function(q){return f0(q,a)};return d>1||this.__actions__.length||!(S instanceof Ot)||!Mo(x)?this.thru(B):(S=S.slice(x,+x+(d?1:0)),S.__actions__.push({func:md,args:[B],thisArg:n}),new ps(S,this.__chain__).thru(function(q){return d&&!q.length&&q.push(n),q}))});function yA(){return ev(this)}function xA(){return new ps(this.value(),this.__chain__)}function vA(){this.__values__===n&&(this.__values__=mv(this.value()));var a=this.__index__>=this.__values__.length,d=a?n:this.__values__[this.__index__++];return{done:a,value:d}}function bA(){return this}function wA(a){for(var d,x=this;x instanceof Z1;){var S=Y9(x);S.__index__=0,S.__values__=n,d?B.__wrapped__=S:d=S;var B=S;x=x.__wrapped__}return B.__wrapped__=a,d}function TA(){var a=this.__wrapped__;if(a instanceof Ot){var d=a;return this.__actions__.length&&(d=new Ot(this)),d=d.reverse(),d.__actions__.push({func:md,args:[z0],thisArg:n}),new ps(d,this.__chain__)}return this.thru(z0)}function EA(){return g9(this.__wrapped__,this.__actions__)}var CA=id(function(a,d,x){Wt.call(a,x)?++a[x]:jo(a,x,1)});function _A(a,d,x){var S=gt(a)?A5:pk;return x&&vr(a,d,x)&&(d=n),S(a,at(d,3))}function NA(a,d){var x=gt(a)?hi:Z5;return x(a,at(d,3))}var SA=S9(V9),kA=S9(q9);function AA(a,d){return Jn(pd(a,d),1)}function OA(a,d){return Jn(pd(a,d),$)}function RA(a,d,x){return x=x===n?1:vt(x),Jn(pd(a,d),x)}function tv(a,d){var x=gt(a)?hs:yi;return x(a,at(d,3))}function nv(a,d){var x=gt(a)?QN:J5;return x(a,at(d,3))}var IA=id(function(a,d,x){Wt.call(a,x)?a[x].push(d):jo(a,x,[d])});function jA(a,d,x,S){a=Or(a)?a:hl(a),x=x&&!S?vt(x):0;var B=a.length;return x<0&&(x=Pn(B+x,0)),bd(a)?x<=B&&a.indexOf(d,x)>-1:!!B&&tl(a,d,x)>-1}var LA=Ct(function(a,d,x){var S=-1,B=typeof d=="function",q=Or(a)?ve(a.length):[];return yi(a,function(re){q[++S]=B?Vr(d,re,x):Dc(re,d,x)}),q}),DA=id(function(a,d,x){jo(a,x,d)});function pd(a,d){var x=gt(a)?dn:o9;return x(a,at(d,3))}function MA(a,d,x,S){return a==null?[]:(gt(d)||(d=d==null?[]:[d]),x=S?n:x,gt(x)||(x=x==null?[]:[x]),c9(a,d,x))}var PA=id(function(a,d,x){a[x?0:1].push(d)},function(){return[[],[]]});function FA(a,d,x){var S=gt(a)?Zm:j5,B=arguments.length<3;return S(a,at(d,4),x,B,yi)}function BA(a,d,x){var S=gt(a)?XN:j5,B=arguments.length<3;return S(a,at(d,4),x,B,J5)}function zA(a,d){var x=gt(a)?hi:Z5;return x(a,xd(at(d,3)))}function UA(a){var d=gt(a)?V5:jk;return d(a)}function HA(a,d,x){(x?vr(a,d,x):d===n)?d=1:d=vt(d);var S=gt(a)?uk:Lk;return S(a,d)}function $A(a){var d=gt(a)?dk:Mk;return d(a)}function WA(a){if(a==null)return 0;if(Or(a))return bd(a)?rl(a):a.length;var d=lr(a);return d==D||d==ie?a.size:x0(a).length}function GA(a,d,x){var S=gt(a)?e0:Pk;return x&&vr(a,d,x)&&(d=n),S(a,at(d,3))}var KA=Ct(function(a,d){if(a==null)return[];var x=d.length;return x>1&&vr(a,d[0],d[1])?d=[]:x>2&&vr(d[0],d[1],d[2])&&(d=[d[0]]),c9(a,Jn(d,1),[])}),gd=NS||function(){return Xn.Date.now()};function YA(a,d){if(typeof d!="function")throw new ms(i);return a=vt(a),function(){if(--a<1)return d.apply(this,arguments)}}function rv(a,d,x){return d=x?n:d,d=a&&d==null?a.length:d,Lo(a,C,n,n,n,n,d)}function sv(a,d){var x;if(typeof d!="function")throw new ms(i);return a=vt(a),function(){return--a>0&&(x=d.apply(this,arguments)),a<=1&&(d=n),x}}var H0=Ct(function(a,d,x){var S=T;if(x.length){var B=pi(x,dl(H0));S|=j}return Lo(a,S,d,x,B)}),ov=Ct(function(a,d,x){var S=T|y;if(x.length){var B=pi(x,dl(ov));S|=j}return Lo(d,S,a,x,B)});function iv(a,d,x){d=x?n:d;var S=Lo(a,w,n,n,n,n,n,d);return S.placeholder=iv.placeholder,S}function av(a,d,x){d=x?n:d;var S=Lo(a,I,n,n,n,n,n,d);return S.placeholder=av.placeholder,S}function lv(a,d,x){var S,B,q,re,ce,he,ke=0,Oe=!1,Re=!1,qe=!0;if(typeof a!="function")throw new ms(i);d=vs(d)||0,mn(x)&&(Oe=!!x.leading,Re="maxWait"in x,q=Re?Pn(vs(x.maxWait)||0,d):q,qe="trailing"in x?!!x.trailing:qe);function tt(En){var $s=S,Bo=B;return S=B=n,ke=En,re=a.apply(Bo,$s),re}function lt(En){return ke=En,ce=zc(_t,d),Oe?tt(En):re}function wt(En){var $s=En-he,Bo=En-ke,Sv=d-$s;return Re?ar(Sv,q-Bo):Sv}function ct(En){var $s=En-he,Bo=En-ke;return he===n||$s>=d||$s<0||Re&&Bo>=q}function _t(){var En=gd();if(ct(En))return It(En);ce=zc(_t,wt(En))}function It(En){return ce=n,qe&&S?tt(En):(S=B=n,re)}function Jr(){ce!==n&&x9(ce),ke=0,S=he=B=ce=n}function br(){return ce===n?re:It(gd())}function Zr(){var En=gd(),$s=ct(En);if(S=arguments,B=this,he=En,$s){if(ce===n)return lt(he);if(Re)return x9(ce),ce=zc(_t,d),tt(he)}return ce===n&&(ce=zc(_t,d)),re}return Zr.cancel=Jr,Zr.flush=br,Zr}var VA=Ct(function(a,d){return X5(a,1,d)}),qA=Ct(function(a,d,x){return X5(a,vs(d)||0,x)});function QA(a){return Lo(a,R)}function yd(a,d){if(typeof a!="function"||d!=null&&typeof d!="function")throw new ms(i);var x=function(){var S=arguments,B=d?d.apply(this,S):S[0],q=x.cache;if(q.has(B))return q.get(B);var re=a.apply(this,S);return x.cache=q.set(B,re)||q,re};return x.cache=new(yd.Cache||Io),x}yd.Cache=Io;function xd(a){if(typeof a!="function")throw new ms(i);return function(){var d=arguments;switch(d.length){case 0:return!a.call(this);case 1:return!a.call(this,d[0]);case 2:return!a.call(this,d[0],d[1]);case 3:return!a.call(this,d[0],d[1],d[2])}return!a.apply(this,d)}}function XA(a){return sv(2,a)}var JA=Fk(function(a,d){d=d.length==1&&gt(d[0])?dn(d[0],qr(at())):dn(Jn(d,1),qr(at()));var x=d.length;return Ct(function(S){for(var B=-1,q=ar(S.length,x);++B<q;)S[B]=d[B].call(this,S[B]);return Vr(a,this,S)})}),$0=Ct(function(a,d){var x=pi(d,dl($0));return Lo(a,j,n,d,x)}),cv=Ct(function(a,d){var x=pi(d,dl(cv));return Lo(a,_,n,d,x)}),ZA=Do(function(a,d){return Lo(a,k,n,n,n,d)});function eO(a,d){if(typeof a!="function")throw new ms(i);return d=d===n?d:vt(d),Ct(a,d)}function tO(a,d){if(typeof a!="function")throw new ms(i);return d=d==null?0:Pn(vt(d),0),Ct(function(x){var S=x[d],B=bi(x,0,d);return S&&mi(B,S),Vr(a,this,B)})}function nO(a,d,x){var S=!0,B=!0;if(typeof a!="function")throw new ms(i);return mn(x)&&(S="leading"in x?!!x.leading:S,B="trailing"in x?!!x.trailing:B),lv(a,d,{leading:S,maxWait:d,trailing:B})}function rO(a){return rv(a,1)}function sO(a,d){return $0(S0(d),a)}function oO(){if(!arguments.length)return[];var a=arguments[0];return gt(a)?a:[a]}function iO(a){return gs(a,p)}function aO(a,d){return d=typeof d=="function"?d:n,gs(a,p,d)}function lO(a){return gs(a,h|p)}function cO(a,d){return d=typeof d=="function"?d:n,gs(a,h|p,d)}function uO(a,d){return d==null||Q5(a,d,Gn(d))}function Hs(a,d){return a===d||a!==a&&d!==d}var dO=ud(p0),fO=ud(function(a,d){return a>=d}),wa=n9(function(){return arguments}())?n9:function(a){return xn(a)&&Wt.call(a,"callee")&&!H5.call(a,"callee")},gt=ve.isArray,hO=E5?qr(E5):wk;function Or(a){return a!=null&&vd(a.length)&&!Po(a)}function Tn(a){return xn(a)&&Or(a)}function mO(a){return a===!0||a===!1||xn(a)&&xr(a)==Me}var wi=kS||ep,pO=C5?qr(C5):Tk;function gO(a){return xn(a)&&a.nodeType===1&&!Uc(a)}function yO(a){if(a==null)return!0;if(Or(a)&&(gt(a)||typeof a=="string"||typeof a.splice=="function"||wi(a)||fl(a)||wa(a)))return!a.length;var d=lr(a);if(d==D||d==ie)return!a.size;if(Bc(a))return!x0(a).length;for(var x in a)if(Wt.call(a,x))return!1;return!0}function xO(a,d){return Mc(a,d)}function vO(a,d,x){x=typeof x=="function"?x:n;var S=x?x(a,d):n;return S===n?Mc(a,d,n,x):!!S}function W0(a){if(!xn(a))return!1;var d=xr(a);return d==nt||d==De||typeof a.message=="string"&&typeof a.name=="string"&&!Uc(a)}function bO(a){return typeof a=="number"&&W5(a)}function Po(a){if(!mn(a))return!1;var d=xr(a);return d==ut||d==dt||d==Ve||d==K}function uv(a){return typeof a=="number"&&a==vt(a)}function vd(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=G}function mn(a){var d=typeof a;return a!=null&&(d=="object"||d=="function")}function xn(a){return a!=null&&typeof a=="object"}var dv=_5?qr(_5):Ck;function wO(a,d){return a===d||y0(a,d,L0(d))}function TO(a,d,x){return x=typeof x=="function"?x:n,y0(a,d,L0(d),x)}function EO(a){return fv(a)&&a!=+a}function CO(a){if(a7(a))throw new ft(o);return r9(a)}function _O(a){return a===null}function NO(a){return a==null}function fv(a){return typeof a=="number"||xn(a)&&xr(a)==ue}function Uc(a){if(!xn(a)||xr(a)!=A)return!1;var d=K1(a);if(d===null)return!0;var x=Wt.call(d,"constructor")&&d.constructor;return typeof x=="function"&&x instanceof x&&H1.call(x)==TS}var G0=N5?qr(N5):_k;function SO(a){return uv(a)&&a>=-G&&a<=G}var hv=S5?qr(S5):Nk;function bd(a){return typeof a=="string"||!gt(a)&&xn(a)&&xr(a)==J}function Xr(a){return typeof a=="symbol"||xn(a)&&xr(a)==me}var fl=k5?qr(k5):Sk;function kO(a){return a===n}function AO(a){return xn(a)&&lr(a)==ye}function OO(a){return xn(a)&&xr(a)==je}var RO=ud(v0),IO=ud(function(a,d){return a<=d});function mv(a){if(!a)return[];if(Or(a))return bd(a)?zs(a):Ar(a);if(kc&&a[kc])return uS(a[kc]());var d=lr(a),x=d==D?i0:d==ie?B1:hl;return x(a)}function Fo(a){if(!a)return a===0?a:0;if(a=vs(a),a===$||a===-$){var d=a<0?-1:1;return d*H}return a===a?a:0}function vt(a){var d=Fo(a),x=d%1;return d===d?x?d-x:d:0}function pv(a){return a?ya(vt(a),0,ee):0}function vs(a){if(typeof a=="number")return a;if(Xr(a))return U;if(mn(a)){var d=typeof a.valueOf=="function"?a.valueOf():a;a=mn(d)?d+"":d}if(typeof a!="string")return a===0?a:+a;a=L5(a);var x=$e.test(a);return x||rt.test(a)?YN(a.slice(2),x?2:8):Ce.test(a)?U:+a}function gv(a){return uo(a,Rr(a))}function jO(a){return a?ya(vt(a),-G,G):a===0?a:0}function Ht(a){return a==null?"":Qr(a)}var LO=cl(function(a,d){if(Bc(d)||Or(d)){uo(d,Gn(d),a);return}for(var x in d)Wt.call(d,x)&&jc(a,x,d[x])}),yv=cl(function(a,d){uo(d,Rr(d),a)}),wd=cl(function(a,d,x,S){uo(d,Rr(d),a,S)}),DO=cl(function(a,d,x,S){uo(d,Gn(d),a,S)}),MO=Do(f0);function PO(a,d){var x=ll(a);return d==null?x:q5(x,d)}var FO=Ct(function(a,d){a=Xt(a);var x=-1,S=d.length,B=S>2?d[2]:n;for(B&&vr(d[0],d[1],B)&&(S=1);++x<S;)for(var q=d[x],re=Rr(q),ce=-1,he=re.length;++ce<he;){var ke=re[ce],Oe=a[ke];(Oe===n||Hs(Oe,ol[ke])&&!Wt.call(a,ke))&&(a[ke]=q[ke])}return a}),BO=Ct(function(a){return a.push(n,L9),Vr(xv,n,a)});function zO(a,d){return O5(a,at(d,3),co)}function UO(a,d){return O5(a,at(d,3),m0)}function HO(a,d){return a==null?a:h0(a,at(d,3),Rr)}function $O(a,d){return a==null?a:e9(a,at(d,3),Rr)}function WO(a,d){return a&&co(a,at(d,3))}function GO(a,d){return a&&m0(a,at(d,3))}function KO(a){return a==null?[]:nd(a,Gn(a))}function YO(a){return a==null?[]:nd(a,Rr(a))}function K0(a,d,x){var S=a==null?n:xa(a,d);return S===n?x:S}function VO(a,d){return a!=null&&P9(a,d,yk)}function Y0(a,d){return a!=null&&P9(a,d,xk)}var qO=A9(function(a,d,x){d!=null&&typeof d.toString!="function"&&(d=$1.call(d)),a[d]=x},q0(Ir)),QO=A9(function(a,d,x){d!=null&&typeof d.toString!="function"&&(d=$1.call(d)),Wt.call(a,d)?a[d].push(x):a[d]=[x]},at),XO=Ct(Dc);function Gn(a){return Or(a)?Y5(a):x0(a)}function Rr(a){return Or(a)?Y5(a,!0):kk(a)}function JO(a,d){var x={};return d=at(d,3),co(a,function(S,B,q){jo(x,d(S,B,q),S)}),x}function ZO(a,d){var x={};return d=at(d,3),co(a,function(S,B,q){jo(x,B,d(S,B,q))}),x}var eR=cl(function(a,d,x){rd(a,d,x)}),xv=cl(function(a,d,x,S){rd(a,d,x,S)}),tR=Do(function(a,d){var x={};if(a==null)return x;var S=!1;d=dn(d,function(q){return q=vi(q,a),S||(S=q.length>1),q}),uo(a,I0(a),x),S&&(x=gs(x,h|g|p,qk));for(var B=d.length;B--;)C0(x,d[B]);return x});function nR(a,d){return vv(a,xd(at(d)))}var rR=Do(function(a,d){return a==null?{}:Ok(a,d)});function vv(a,d){if(a==null)return{};var x=dn(I0(a),function(S){return[S]});return d=at(d),u9(a,x,function(S,B){return d(S,B[0])})}function sR(a,d,x){d=vi(d,a);var S=-1,B=d.length;for(B||(B=1,a=n);++S<B;){var q=a==null?n:a[fo(d[S])];q===n&&(S=B,q=x),a=Po(q)?q.call(a):q}return a}function oR(a,d,x){return a==null?a:Pc(a,d,x)}function iR(a,d,x,S){return S=typeof S=="function"?S:n,a==null?a:Pc(a,d,x,S)}var bv=I9(Gn),wv=I9(Rr);function aR(a,d,x){var S=gt(a),B=S||wi(a)||fl(a);if(d=at(d,4),x==null){var q=a&&a.constructor;B?x=S?new q:[]:mn(a)?x=Po(q)?ll(K1(a)):{}:x={}}return(B?hs:co)(a,function(re,ce,he){return d(x,re,ce,he)}),x}function lR(a,d){return a==null?!0:C0(a,d)}function cR(a,d,x){return a==null?a:p9(a,d,S0(x))}function uR(a,d,x,S){return S=typeof S=="function"?S:n,a==null?a:p9(a,d,S0(x),S)}function hl(a){return a==null?[]:o0(a,Gn(a))}function dR(a){return a==null?[]:o0(a,Rr(a))}function fR(a,d,x){return x===n&&(x=d,d=n),x!==n&&(x=vs(x),x=x===x?x:0),d!==n&&(d=vs(d),d=d===d?d:0),ya(vs(a),d,x)}function hR(a,d,x){return d=Fo(d),x===n?(x=d,d=0):x=Fo(x),a=vs(a),vk(a,d,x)}function mR(a,d,x){if(x&&typeof x!="boolean"&&vr(a,d,x)&&(d=x=n),x===n&&(typeof d=="boolean"?(x=d,d=n):typeof a=="boolean"&&(x=a,a=n)),a===n&&d===n?(a=0,d=1):(a=Fo(a),d===n?(d=a,a=0):d=Fo(d)),a>d){var S=a;a=d,d=S}if(x||a%1||d%1){var B=G5();return ar(a+B*(d-a+KN("1e-"+((B+"").length-1))),d)}return w0(a,d)}var pR=ul(function(a,d,x){return d=d.toLowerCase(),a+(x?Tv(d):d)});function Tv(a){return V0(Ht(a).toLowerCase())}function Ev(a){return a=Ht(a),a&&a.replace(ne,oS).replace(MN,"")}function gR(a,d,x){a=Ht(a),d=Qr(d);var S=a.length;x=x===n?S:ya(vt(x),0,S);var B=x;return x-=d.length,x>=0&&a.slice(x,B)==d}function yR(a){return a=Ht(a),a&&Nn.test(a)?a.replace(Ut,iS):a}function xR(a){return a=Ht(a),a&&hn.test(a)?a.replace(ir,"\\$&"):a}var vR=ul(function(a,d,x){return a+(x?"-":"")+d.toLowerCase()}),bR=ul(function(a,d,x){return a+(x?" ":"")+d.toLowerCase()}),wR=N9("toLowerCase");function TR(a,d,x){a=Ht(a),d=vt(d);var S=d?rl(a):0;if(!d||S>=d)return a;var B=(d-S)/2;return cd(Q1(B),x)+a+cd(q1(B),x)}function ER(a,d,x){a=Ht(a),d=vt(d);var S=d?rl(a):0;return d&&S<d?a+cd(d-S,x):a}function CR(a,d,x){a=Ht(a),d=vt(d);var S=d?rl(a):0;return d&&S<d?cd(d-S,x)+a:a}function _R(a,d,x){return x||d==null?d=0:d&&(d=+d),IS(Ht(a).replace(jn,""),d||0)}function NR(a,d,x){return(x?vr(a,d,x):d===n)?d=1:d=vt(d),T0(Ht(a),d)}function SR(){var a=arguments,d=Ht(a[0]);return a.length<3?d:d.replace(a[1],a[2])}var kR=ul(function(a,d,x){return a+(x?"_":"")+d.toLowerCase()});function AR(a,d,x){return x&&typeof x!="number"&&vr(a,d,x)&&(d=x=n),x=x===n?ee:x>>>0,x?(a=Ht(a),a&&(typeof d=="string"||d!=null&&!G0(d))&&(d=Qr(d),!d&&nl(a))?bi(zs(a),0,x):a.split(d,x)):[]}var OR=ul(function(a,d,x){return a+(x?" ":"")+V0(d)});function RR(a,d,x){return a=Ht(a),x=x==null?0:ya(vt(x),0,a.length),d=Qr(d),a.slice(x,x+d.length)==d}function IR(a,d,x){var S=W.templateSettings;x&&vr(a,d,x)&&(d=n),a=Ht(a),d=wd({},d,S,j9);var B=wd({},d.imports,S.imports,j9),q=Gn(B),re=o0(B,q),ce,he,ke=0,Oe=d.interpolate||fe,Re="__p += '",qe=a0((d.escape||fe).source+"|"+Oe.source+"|"+(Oe===Zt?Yr:fe).source+"|"+(d.evaluate||fe).source+"|$","g"),tt="//# sourceURL="+(Wt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++UN+"]")+`
`;a.replace(qe,function(ct,_t,It,Jr,br,Zr){return It||(It=Jr),Re+=a.slice(ke,Zr).replace(Se,aS),_t&&(ce=!0,Re+=`' +
__e(`+_t+`) +
'`),br&&(he=!0,Re+=`';
`+br+`;
__p += '`),It&&(Re+=`' +
((__t = (`+It+`)) == null ? '' : __t) +
'`),ke=Zr+ct.length,ct}),Re+=`';
`;var lt=Wt.call(d,"variable")&&d.variable;if(!lt)Re=`with (obj) {
`+Re+`
}
`;else if(Nc.test(lt))throw new ft(l);Re=(he?Re.replace($n,""):Re).replace($t,"$1").replace(us,"$1;"),Re="function("+(lt||"obj")+`) {
`+(lt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ce?", __e = _.escape":"")+(he?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Re+`return __p
}`;var wt=_v(function(){return zt(q,tt+"return "+Re).apply(n,re)});if(wt.source=Re,W0(wt))throw wt;return wt}function jR(a){return Ht(a).toLowerCase()}function LR(a){return Ht(a).toUpperCase()}function DR(a,d,x){if(a=Ht(a),a&&(x||d===n))return L5(a);if(!a||!(d=Qr(d)))return a;var S=zs(a),B=zs(d),q=D5(S,B),re=M5(S,B)+1;return bi(S,q,re).join("")}function MR(a,d,x){if(a=Ht(a),a&&(x||d===n))return a.slice(0,F5(a)+1);if(!a||!(d=Qr(d)))return a;var S=zs(a),B=M5(S,zs(d))+1;return bi(S,0,B).join("")}function PR(a,d,x){if(a=Ht(a),a&&(x||d===n))return a.replace(jn,"");if(!a||!(d=Qr(d)))return a;var S=zs(a),B=D5(S,zs(d));return bi(S,B).join("")}function FR(a,d){var x=P,S=Y;if(mn(d)){var B="separator"in d?d.separator:B;x="length"in d?vt(d.length):x,S="omission"in d?Qr(d.omission):S}a=Ht(a);var q=a.length;if(nl(a)){var re=zs(a);q=re.length}if(x>=q)return a;var ce=x-rl(S);if(ce<1)return S;var he=re?bi(re,0,ce).join(""):a.slice(0,ce);if(B===n)return he+S;if(re&&(ce+=he.length-ce),G0(B)){if(a.slice(ce).search(B)){var ke,Oe=he;for(B.global||(B=a0(B.source,Ht(fa.exec(B))+"g")),B.lastIndex=0;ke=B.exec(Oe);)var Re=ke.index;he=he.slice(0,Re===n?ce:Re)}}else if(a.indexOf(Qr(B),ce)!=ce){var qe=he.lastIndexOf(B);qe>-1&&(he=he.slice(0,qe))}return he+S}function BR(a){return a=Ht(a),a&&un.test(a)?a.replace(Fs,mS):a}var zR=ul(function(a,d,x){return a+(x?" ":"")+d.toUpperCase()}),V0=N9("toUpperCase");function Cv(a,d,x){return a=Ht(a),d=x?n:d,d===n?cS(a)?yS(a):eS(a):a.match(d)||[]}var _v=Ct(function(a,d){try{return Vr(a,n,d)}catch(x){return W0(x)?x:new ft(x)}}),UR=Do(function(a,d){return hs(d,function(x){x=fo(x),jo(a,x,H0(a[x],a))}),a});function HR(a){var d=a==null?0:a.length,x=at();return a=d?dn(a,function(S){if(typeof S[1]!="function")throw new ms(i);return[x(S[0]),S[1]]}):[],Ct(function(S){for(var B=-1;++B<d;){var q=a[B];if(Vr(q[0],this,S))return Vr(q[1],this,S)}})}function $R(a){return mk(gs(a,h))}function q0(a){return function(){return a}}function WR(a,d){return a==null||a!==a?d:a}var GR=k9(),KR=k9(!0);function Ir(a){return a}function Q0(a){return s9(typeof a=="function"?a:gs(a,h))}function YR(a){return i9(gs(a,h))}function VR(a,d){return a9(a,gs(d,h))}var qR=Ct(function(a,d){return function(x){return Dc(x,a,d)}}),QR=Ct(function(a,d){return function(x){return Dc(a,x,d)}});function X0(a,d,x){var S=Gn(d),B=nd(d,S);x==null&&!(mn(d)&&(B.length||!S.length))&&(x=d,d=a,a=this,B=nd(d,Gn(d)));var q=!(mn(x)&&"chain"in x)||!!x.chain,re=Po(a);return hs(B,function(ce){var he=d[ce];a[ce]=he,re&&(a.prototype[ce]=function(){var ke=this.__chain__;if(q||ke){var Oe=a(this.__wrapped__),Re=Oe.__actions__=Ar(this.__actions__);return Re.push({func:he,args:arguments,thisArg:a}),Oe.__chain__=ke,Oe}return he.apply(a,mi([this.value()],arguments))})}),a}function XR(){return Xn._===this&&(Xn._=ES),this}function J0(){}function JR(a){return a=vt(a),Ct(function(d){return l9(d,a)})}var ZR=A0(dn),eI=A0(A5),tI=A0(e0);function Nv(a){return M0(a)?t0(fo(a)):Rk(a)}function nI(a){return function(d){return a==null?n:xa(a,d)}}var rI=O9(),sI=O9(!0);function Z0(){return[]}function ep(){return!1}function oI(){return{}}function iI(){return""}function aI(){return!0}function lI(a,d){if(a=vt(a),a<1||a>G)return[];var x=ee,S=ar(a,ee);d=at(d),a-=ee;for(var B=s0(S,d);++x<a;)d(x);return B}function cI(a){return gt(a)?dn(a,fo):Xr(a)?[a]:Ar(K9(Ht(a)))}function uI(a){var d=++wS;return Ht(a)+d}var dI=ld(function(a,d){return a+d},0),fI=O0("ceil"),hI=ld(function(a,d){return a/d},1),mI=O0("floor");function pI(a){return a&&a.length?td(a,Ir,p0):n}function gI(a,d){return a&&a.length?td(a,at(d,2),p0):n}function yI(a){return I5(a,Ir)}function xI(a,d){return I5(a,at(d,2))}function vI(a){return a&&a.length?td(a,Ir,v0):n}function bI(a,d){return a&&a.length?td(a,at(d,2),v0):n}var wI=ld(function(a,d){return a*d},1),TI=O0("round"),EI=ld(function(a,d){return a-d},0);function CI(a){return a&&a.length?r0(a,Ir):0}function _I(a,d){return a&&a.length?r0(a,at(d,2)):0}return W.after=YA,W.ary=rv,W.assign=LO,W.assignIn=yv,W.assignInWith=wd,W.assignWith=DO,W.at=MO,W.before=sv,W.bind=H0,W.bindAll=UR,W.bindKey=ov,W.castArray=oO,W.chain=ev,W.chunk=m7,W.compact=p7,W.concat=g7,W.cond=HR,W.conforms=$R,W.constant=q0,W.countBy=CA,W.create=PO,W.curry=iv,W.curryRight=av,W.debounce=lv,W.defaults=FO,W.defaultsDeep=BO,W.defer=VA,W.delay=qA,W.difference=y7,W.differenceBy=x7,W.differenceWith=v7,W.drop=b7,W.dropRight=w7,W.dropRightWhile=T7,W.dropWhile=E7,W.fill=C7,W.filter=NA,W.flatMap=AA,W.flatMapDeep=OA,W.flatMapDepth=RA,W.flatten=Q9,W.flattenDeep=_7,W.flattenDepth=N7,W.flip=QA,W.flow=GR,W.flowRight=KR,W.fromPairs=S7,W.functions=KO,W.functionsIn=YO,W.groupBy=IA,W.initial=A7,W.intersection=O7,W.intersectionBy=R7,W.intersectionWith=I7,W.invert=qO,W.invertBy=QO,W.invokeMap=LA,W.iteratee=Q0,W.keyBy=DA,W.keys=Gn,W.keysIn=Rr,W.map=pd,W.mapKeys=JO,W.mapValues=ZO,W.matches=YR,W.matchesProperty=VR,W.memoize=yd,W.merge=eR,W.mergeWith=xv,W.method=qR,W.methodOf=QR,W.mixin=X0,W.negate=xd,W.nthArg=JR,W.omit=tR,W.omitBy=nR,W.once=XA,W.orderBy=MA,W.over=ZR,W.overArgs=JA,W.overEvery=eI,W.overSome=tI,W.partial=$0,W.partialRight=cv,W.partition=PA,W.pick=rR,W.pickBy=vv,W.property=Nv,W.propertyOf=nI,W.pull=M7,W.pullAll=J9,W.pullAllBy=P7,W.pullAllWith=F7,W.pullAt=B7,W.range=rI,W.rangeRight=sI,W.rearg=ZA,W.reject=zA,W.remove=z7,W.rest=eO,W.reverse=z0,W.sampleSize=HA,W.set=oR,W.setWith=iR,W.shuffle=$A,W.slice=U7,W.sortBy=KA,W.sortedUniq=V7,W.sortedUniqBy=q7,W.split=AR,W.spread=tO,W.tail=Q7,W.take=X7,W.takeRight=J7,W.takeRightWhile=Z7,W.takeWhile=eA,W.tap=pA,W.throttle=nO,W.thru=md,W.toArray=mv,W.toPairs=bv,W.toPairsIn=wv,W.toPath=cI,W.toPlainObject=gv,W.transform=aR,W.unary=rO,W.union=tA,W.unionBy=nA,W.unionWith=rA,W.uniq=sA,W.uniqBy=oA,W.uniqWith=iA,W.unset=lR,W.unzip=U0,W.unzipWith=Z9,W.update=cR,W.updateWith=uR,W.values=hl,W.valuesIn=dR,W.without=aA,W.words=Cv,W.wrap=sO,W.xor=lA,W.xorBy=cA,W.xorWith=uA,W.zip=dA,W.zipObject=fA,W.zipObjectDeep=hA,W.zipWith=mA,W.entries=bv,W.entriesIn=wv,W.extend=yv,W.extendWith=wd,X0(W,W),W.add=dI,W.attempt=_v,W.camelCase=pR,W.capitalize=Tv,W.ceil=fI,W.clamp=fR,W.clone=iO,W.cloneDeep=lO,W.cloneDeepWith=cO,W.cloneWith=aO,W.conformsTo=uO,W.deburr=Ev,W.defaultTo=WR,W.divide=hI,W.endsWith=gR,W.eq=Hs,W.escape=yR,W.escapeRegExp=xR,W.every=_A,W.find=SA,W.findIndex=V9,W.findKey=zO,W.findLast=kA,W.findLastIndex=q9,W.findLastKey=UO,W.floor=mI,W.forEach=tv,W.forEachRight=nv,W.forIn=HO,W.forInRight=$O,W.forOwn=WO,W.forOwnRight=GO,W.get=K0,W.gt=dO,W.gte=fO,W.has=VO,W.hasIn=Y0,W.head=X9,W.identity=Ir,W.includes=jA,W.indexOf=k7,W.inRange=hR,W.invoke=XO,W.isArguments=wa,W.isArray=gt,W.isArrayBuffer=hO,W.isArrayLike=Or,W.isArrayLikeObject=Tn,W.isBoolean=mO,W.isBuffer=wi,W.isDate=pO,W.isElement=gO,W.isEmpty=yO,W.isEqual=xO,W.isEqualWith=vO,W.isError=W0,W.isFinite=bO,W.isFunction=Po,W.isInteger=uv,W.isLength=vd,W.isMap=dv,W.isMatch=wO,W.isMatchWith=TO,W.isNaN=EO,W.isNative=CO,W.isNil=NO,W.isNull=_O,W.isNumber=fv,W.isObject=mn,W.isObjectLike=xn,W.isPlainObject=Uc,W.isRegExp=G0,W.isSafeInteger=SO,W.isSet=hv,W.isString=bd,W.isSymbol=Xr,W.isTypedArray=fl,W.isUndefined=kO,W.isWeakMap=AO,W.isWeakSet=OO,W.join=j7,W.kebabCase=vR,W.last=xs,W.lastIndexOf=L7,W.lowerCase=bR,W.lowerFirst=wR,W.lt=RO,W.lte=IO,W.max=pI,W.maxBy=gI,W.mean=yI,W.meanBy=xI,W.min=vI,W.minBy=bI,W.stubArray=Z0,W.stubFalse=ep,W.stubObject=oI,W.stubString=iI,W.stubTrue=aI,W.multiply=wI,W.nth=D7,W.noConflict=XR,W.noop=J0,W.now=gd,W.pad=TR,W.padEnd=ER,W.padStart=CR,W.parseInt=_R,W.random=mR,W.reduce=FA,W.reduceRight=BA,W.repeat=NR,W.replace=SR,W.result=sR,W.round=TI,W.runInContext=de,W.sample=UA,W.size=WA,W.snakeCase=kR,W.some=GA,W.sortedIndex=H7,W.sortedIndexBy=$7,W.sortedIndexOf=W7,W.sortedLastIndex=G7,W.sortedLastIndexBy=K7,W.sortedLastIndexOf=Y7,W.startCase=OR,W.startsWith=RR,W.subtract=EI,W.sum=CI,W.sumBy=_I,W.template=IR,W.times=lI,W.toFinite=Fo,W.toInteger=vt,W.toLength=pv,W.toLower=jR,W.toNumber=vs,W.toSafeInteger=jO,W.toString=Ht,W.toUpper=LR,W.trim=DR,W.trimEnd=MR,W.trimStart=PR,W.truncate=FR,W.unescape=BR,W.uniqueId=uI,W.upperCase=zR,W.upperFirst=V0,W.each=tv,W.eachRight=nv,W.first=X9,X0(W,function(){var a={};return co(W,function(d,x){Wt.call(W.prototype,x)||(a[x]=d)}),a}(),{chain:!1}),W.VERSION=r,hs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){W[a].placeholder=W}),hs(["drop","take"],function(a,d){Ot.prototype[a]=function(x){x=x===n?1:Pn(vt(x),0);var S=this.__filtered__&&!d?new Ot(this):this.clone();return S.__filtered__?S.__takeCount__=ar(x,S.__takeCount__):S.__views__.push({size:ar(x,ee),type:a+(S.__dir__<0?"Right":"")}),S},Ot.prototype[a+"Right"]=function(x){return this.reverse()[a](x).reverse()}}),hs(["filter","map","takeWhile"],function(a,d){var x=d+1,S=x==M||x==Ne;Ot.prototype[a]=function(B){var q=this.clone();return q.__iteratees__.push({iteratee:at(B,3),type:x}),q.__filtered__=q.__filtered__||S,q}}),hs(["head","last"],function(a,d){var x="take"+(d?"Right":"");Ot.prototype[a]=function(){return this[x](1).value()[0]}}),hs(["initial","tail"],function(a,d){var x="drop"+(d?"":"Right");Ot.prototype[a]=function(){return this.__filtered__?new Ot(this):this[x](1)}}),Ot.prototype.compact=function(){return this.filter(Ir)},Ot.prototype.find=function(a){return this.filter(a).head()},Ot.prototype.findLast=function(a){return this.reverse().find(a)},Ot.prototype.invokeMap=Ct(function(a,d){return typeof a=="function"?new Ot(this):this.map(function(x){return Dc(x,a,d)})}),Ot.prototype.reject=function(a){return this.filter(xd(at(a)))},Ot.prototype.slice=function(a,d){a=vt(a);var x=this;return x.__filtered__&&(a>0||d<0)?new Ot(x):(a<0?x=x.takeRight(-a):a&&(x=x.drop(a)),d!==n&&(d=vt(d),x=d<0?x.dropRight(-d):x.take(d-a)),x)},Ot.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ot.prototype.toArray=function(){return this.take(ee)},co(Ot.prototype,function(a,d){var x=/^(?:filter|find|map|reject)|While$/.test(d),S=/^(?:head|last)$/.test(d),B=W[S?"take"+(d=="last"?"Right":""):d],q=S||/^find/.test(d);B&&(W.prototype[d]=function(){var re=this.__wrapped__,ce=S?[1]:arguments,he=re instanceof Ot,ke=ce[0],Oe=he||gt(re),Re=function(_t){var It=B.apply(W,mi([_t],ce));return S&&qe?It[0]:It};Oe&&x&&typeof ke=="function"&&ke.length!=1&&(he=Oe=!1);var qe=this.__chain__,tt=!!this.__actions__.length,lt=q&&!qe,wt=he&&!tt;if(!q&&Oe){re=wt?re:new Ot(this);var ct=a.apply(re,ce);return ct.__actions__.push({func:md,args:[Re],thisArg:n}),new ps(ct,qe)}return lt&&wt?a.apply(this,ce):(ct=this.thru(Re),lt?S?ct.value()[0]:ct.value():ct)})}),hs(["pop","push","shift","sort","splice","unshift"],function(a){var d=z1[a],x=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",S=/^(?:pop|shift)$/.test(a);W.prototype[a]=function(){var B=arguments;if(S&&!this.__chain__){var q=this.value();return d.apply(gt(q)?q:[],B)}return this[x](function(re){return d.apply(gt(re)?re:[],B)})}}),co(Ot.prototype,function(a,d){var x=W[d];if(x){var S=x.name+"";Wt.call(al,S)||(al[S]=[]),al[S].push({name:d,func:x})}}),al[ad(n,y).name]=[{name:"wrapper",func:n}],Ot.prototype.clone=BS,Ot.prototype.reverse=zS,Ot.prototype.value=US,W.prototype.at=gA,W.prototype.chain=yA,W.prototype.commit=xA,W.prototype.next=vA,W.prototype.plant=wA,W.prototype.reverse=TA,W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=EA,W.prototype.first=W.prototype.head,kc&&(W.prototype[kc]=bA),W},sl=xS();ha?((ha.exports=sl)._=sl,Qm._=sl):Xn._=sl}).call(xo)})(Lh,Lh.exports);var AX=Lh.exports;function OX(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return N.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const Bm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Tc(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function K2(e){return"nodeType"in e}function Gr(e){var t,n;return e?Tc(e)?e:K2(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Y2(e){const{Document:t}=Gr(e);return e instanceof t}function I1(e){return Tc(e)?!1:e instanceof Gr(e).HTMLElement}function z6(e){return e instanceof Gr(e).SVGElement}function Ec(e){return e?Tc(e)?e.document:K2(e)?Y2(e)?e:I1(e)||z6(e)?e.ownerDocument:document:document:document}const ko=Bm?N.useLayoutEffect:N.useEffect;function V2(e){const t=N.useRef(e);return ko(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function RX(){const e=N.useRef(null),t=N.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=N.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function d1(e,t){t===void 0&&(t=[e]);const n=N.useRef(e);return ko(()=>{n.current!==e&&(n.current=e)},t),n}function j1(e,t){const n=N.useRef();return N.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Dh(e){const t=V2(e),n=N.useRef(null),r=N.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function Qy(e){const t=N.useRef();return N.useEffect(()=>{t.current=e},[e]),t.current}let wg={};function L1(e,t){return N.useMemo(()=>{if(t)return t;const n=wg[e]==null?0:wg[e]+1;return wg[e]=n,e+"-"+n},[e,t])}function U6(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,i)=>{const l=Object.entries(i);for(const[u,f]of l){const m=o[u];m!=null&&(o[u]=m+e*f)}return o},{...t})}}const Xl=U6(1),f1=U6(-1);function IX(e){return"clientX"in e&&"clientY"in e}function q2(e){if(!e)return!1;const{KeyboardEvent:t}=Gr(e.target);return t&&e instanceof t}function jX(e){if(!e)return!1;const{TouchEvent:t}=Gr(e.target);return t&&e instanceof t}function Xy(e){if(jX(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return IX(e)?{x:e.clientX,y:e.clientY}:null}const h1=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[h1.Translate.toString(e),h1.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),YT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function LX(e){return e.matches(YT)?e:e.querySelector(YT)}const DX={display:"none"};function MX(e){let{id:t,value:n}=e;return St.createElement("div",{id:t,style:DX},n)}function PX(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return St.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function FX(){const[e,t]=N.useState("");return{announce:N.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const H6=N.createContext(null);function BX(e){const t=N.useContext(H6);N.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function zX(){const[e]=N.useState(()=>new Set),t=N.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[N.useCallback(r=>{let{type:s,event:o}=r;e.forEach(i=>{var l;return(l=i[s])==null?void 0:l.call(i,o)})},[e]),t]}const UX={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},HX={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function $X(e){let{announcements:t=HX,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=UX}=e;const{announce:o,announcement:i}=FX(),l=L1("DndLiveRegion"),[u,f]=N.useState(!1);if(N.useEffect(()=>{f(!0)},[]),BX(N.useMemo(()=>({onDragStart(h){let{active:g}=h;o(t.onDragStart({active:g}))},onDragMove(h){let{active:g,over:p}=h;t.onDragMove&&o(t.onDragMove({active:g,over:p}))},onDragOver(h){let{active:g,over:p}=h;o(t.onDragOver({active:g,over:p}))},onDragEnd(h){let{active:g,over:p}=h;o(t.onDragEnd({active:g,over:p}))},onDragCancel(h){let{active:g,over:p}=h;o(t.onDragCancel({active:g,over:p}))}}),[o,t])),!u)return null;const m=St.createElement(St.Fragment,null,St.createElement(MX,{id:r,value:s.draggable}),St.createElement(PX,{id:l,announcement:i}));return n?Fr.createPortal(m,n):m}var Un;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Un||(Un={}));function Mh(){}function VT(e,t){return N.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function WX(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return N.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const so=Object.freeze({x:0,y:0});function $6(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function W6(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function GX(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function qT(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function G6(e,t){if(!e||e.length===0)return null;const[n]=e;return t?n[t]:n}function QT(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const KX=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=QT(t,t.left,t.top),o=[];for(const i of r){const{id:l}=i,u=n.get(l);if(u){const f=$6(QT(u),s);o.push({id:l,data:{droppableContainer:i,value:f}})}}return o.sort(W6)},YX=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=qT(t),o=[];for(const i of r){const{id:l}=i,u=n.get(l);if(u){const f=qT(u),m=s.reduce((g,p,b)=>g+$6(f[b],p),0),h=Number((m/4).toFixed(4));o.push({id:l,data:{droppableContainer:i,value:h}})}}return o.sort(W6)};function VX(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),i=s-r,l=o-n;if(r<s&&n<o){const u=t.width*t.height,f=e.width*e.height,m=i*l,h=m/(u+f-m);return Number(h.toFixed(4))}return 0}const qX=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:i}=o,l=n.get(i);if(l){const u=VX(l,t);u>0&&s.push({id:i,data:{droppableContainer:o,value:u}})}}return s.sort(GX)};function QX(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function K6(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:so}function XX(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const JX=XX(1);function ZX(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function eJ(e,t,n){const r=ZX(t);if(!r)return e;const{scaleX:s,scaleY:o,x:i,y:l}=r,u=e.left-i-(1-s)*parseFloat(n),f=e.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),m=s?e.width/s:e.width,h=o?e.height/o:e.height;return{width:m,height:h,top:f,right:u+m,bottom:f+h,left:u}}const tJ={ignoreTransform:!1};function Cc(e,t){t===void 0&&(t=tJ);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:m}=Gr(e).getComputedStyle(e);f&&(n=eJ(n,f,m))}const{top:r,left:s,width:o,height:i,bottom:l,right:u}=n;return{top:r,left:s,width:o,height:i,bottom:l,right:u}}function XT(e){return Cc(e,{ignoreTransform:!0})}function nJ(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function rJ(e,t){return t===void 0&&(t=Gr(e).getComputedStyle(e)),t.position==="fixed"}function sJ(e,t){t===void 0&&(t=Gr(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function zm(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Y2(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!I1(s)||z6(s)||n.includes(s))return n;const o=Gr(e).getComputedStyle(s);return s!==e&&sJ(s,o)&&n.push(s),rJ(s,o)?n:r(s.parentNode)}return e?r(e):n}function Y6(e){const[t]=zm(e,1);return t??null}function Tg(e){return!Bm||!e?null:Tc(e)?e:K2(e)?Y2(e)||e===Ec(e).scrollingElement?window:I1(e)?e:null:null}function V6(e){return Tc(e)?e.scrollX:e.scrollLeft}function q6(e){return Tc(e)?e.scrollY:e.scrollTop}function Jy(e){return{x:V6(e),y:q6(e)}}var Vn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Vn||(Vn={}));function Q6(e){return!Bm||!e?!1:e===document.scrollingElement}function X6(e){const t={x:0,y:0},n=Q6(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const oJ={x:.2,y:.2};function iJ(e,t,n,r,s){let{top:o,left:i,right:l,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=oJ);const{isTop:f,isBottom:m,isLeft:h,isRight:g}=X6(e),p={x:0,y:0},b={x:0,y:0},v={height:t.height*s.y,width:t.width*s.x};return!f&&o<=t.top+v.height?(p.y=Vn.Backward,b.y=r*Math.abs((t.top+v.height-o)/v.height)):!m&&u>=t.bottom-v.height&&(p.y=Vn.Forward,b.y=r*Math.abs((t.bottom-v.height-u)/v.height)),!g&&l>=t.right-v.width?(p.x=Vn.Forward,b.x=r*Math.abs((t.right-v.width-l)/v.width)):!h&&i<=t.left+v.width&&(p.x=Vn.Backward,b.x=r*Math.abs((t.left+v.width-i)/v.width)),{direction:p,speed:b}}function aJ(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function J6(e){return e.reduce((t,n)=>Xl(t,Jy(n)),so)}function lJ(e){return e.reduce((t,n)=>t+V6(n),0)}function cJ(e){return e.reduce((t,n)=>t+q6(n),0)}function uJ(e,t){if(t===void 0&&(t=Cc),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);Y6(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const dJ=[["x",["left","right"],lJ],["y",["top","bottom"],cJ]];class Q2{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=zm(n),s=J6(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,i,l]of dJ)for(const u of i)Object.defineProperty(this,u,{get:()=>{const f=l(r),m=s[o]-f;return this.rect[u]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Iu{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function fJ(e){const{EventTarget:t}=Gr(e);return e instanceof t?e:Ec(e)}function Eg(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ts;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ts||(Ts={}));function JT(e){e.preventDefault()}function hJ(e){e.stopPropagation()}var jt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(jt||(jt={}));const Z6={start:[jt.Space,jt.Enter],cancel:[jt.Esc],end:[jt.Space,jt.Enter,jt.Tab]},mJ=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case jt.Right:return{...n,x:n.x+25};case jt.Left:return{...n,x:n.x-25};case jt.Down:return{...n,y:n.y+25};case jt.Up:return{...n,y:n.y-25}}};class X2{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Iu(Ec(n)),this.windowListeners=new Iu(Gr(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ts.Resize,this.handleCancel),this.windowListeners.add(Ts.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ts.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&uJ(r),n(so)}handleKeyDown(t){if(q2(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=Z6,coordinateGetter:i=mJ,scrollBehavior:l="smooth"}=s,{code:u}=t;if(o.end.includes(u)){this.handleEnd(t);return}if(o.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:f}=r.current,m=f?{x:f.left,y:f.top}:so;this.referenceCoordinates||(this.referenceCoordinates=m);const h=i(t,{active:n,context:r.current,currentCoordinates:m});if(h){const g=f1(h,m),p={x:0,y:0},{scrollableAncestors:b}=r.current;for(const v of b){const T=t.code,{isTop:y,isRight:E,isLeft:w,isBottom:I,maxScroll:j,minScroll:_}=X6(v),C=aJ(v),k={x:Math.min(T===jt.Right?C.right-C.width/2:C.right,Math.max(T===jt.Right?C.left:C.left+C.width/2,h.x)),y:Math.min(T===jt.Down?C.bottom-C.height/2:C.bottom,Math.max(T===jt.Down?C.top:C.top+C.height/2,h.y))},R=T===jt.Right&&!E||T===jt.Left&&!w,P=T===jt.Down&&!I||T===jt.Up&&!y;if(R&&k.x!==h.x){const Y=v.scrollLeft+g.x,z=T===jt.Right&&Y<=j.x||T===jt.Left&&Y>=_.x;if(z&&!g.y){v.scrollTo({left:Y,behavior:l});return}z?p.x=v.scrollLeft-Y:p.x=T===jt.Right?v.scrollLeft-j.x:v.scrollLeft-_.x,p.x&&v.scrollBy({left:-p.x,behavior:l});break}else if(P&&k.y!==h.y){const Y=v.scrollTop+g.y,z=T===jt.Down&&Y<=j.y||T===jt.Up&&Y>=_.y;if(z&&!g.x){v.scrollTo({top:Y,behavior:l});return}z?p.y=v.scrollTop-Y:p.y=T===jt.Down?v.scrollTop-j.y:v.scrollTop-_.y,p.y&&v.scrollBy({top:-p.y,behavior:l});break}}this.handleMove(t,Xl(f1(h,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}X2.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Z6,onActivation:s}=t,{active:o}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=o.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function ZT(e){return!!(e&&"distance"in e)}function eE(e){return!!(e&&"delay"in e)}class J2{constructor(t,n,r){var s;r===void 0&&(r=fJ(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:i}=o;this.props=t,this.events=n,this.document=Ec(i),this.documentListeners=new Iu(this.document),this.listeners=new Iu(r),this.windowListeners=new Iu(Gr(i)),this.initialCoordinates=(s=Xy(o))!=null?s:so,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ts.Resize,this.handleCancel),this.windowListeners.add(Ts.DragStart,JT),this.windowListeners.add(Ts.VisibilityChange,this.handleCancel),this.windowListeners.add(Ts.ContextMenu,JT),this.documentListeners.add(Ts.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(ZT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ts.Click,hJ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ts.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:i,options:{activationConstraint:l}}=o;if(!s)return;const u=(n=Xy(t))!=null?n:so,f=f1(s,u);if(!r&&l){if(ZT(l)){if(l.tolerance!=null&&Eg(f,l.tolerance))return this.handleCancel();if(Eg(f,l.distance))return this.handleStart()}if(eE(l)&&Eg(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}t.cancelable&&t.preventDefault(),i(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===jt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const pJ={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Z2 extends J2{constructor(t){const{event:n}=t,r=Ec(n.target);super(t,pJ,r)}}Z2.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const gJ={move:{name:"mousemove"},end:{name:"mouseup"}};var Zy;(function(e){e[e.RightClick=2]="RightClick"})(Zy||(Zy={}));class yJ extends J2{constructor(t){super(t,gJ,Ec(t.event.target))}}yJ.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Zy.RightClick?!1:(r==null||r({event:n}),!0)}}];const Cg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class xJ extends J2{constructor(t){super(t,Cg)}static setup(){return window.addEventListener(Cg.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Cg.move.name,t)};function t(){}}}xJ.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var ju;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(ju||(ju={}));var Ph;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ph||(Ph={}));function vJ(e){let{acceleration:t,activator:n=ju.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:i=5,order:l=Ph.TreeOrder,pointerCoordinates:u,scrollableAncestors:f,scrollableAncestorRects:m,delta:h,threshold:g}=e;const p=wJ({delta:h,disabled:!o}),[b,v]=RX(),T=N.useRef({x:0,y:0}),y=N.useRef({x:0,y:0}),E=N.useMemo(()=>{switch(n){case ju.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case ju.DraggableRect:return s}},[n,s,u]),w=N.useRef(null),I=N.useCallback(()=>{const _=w.current;if(!_)return;const C=T.current.x*y.current.x,k=T.current.y*y.current.y;_.scrollBy(C,k)},[]),j=N.useMemo(()=>l===Ph.TreeOrder?[...f].reverse():f,[l,f]);N.useEffect(()=>{if(!o||!f.length||!E){v();return}for(const _ of j){if((r==null?void 0:r(_))===!1)continue;const C=f.indexOf(_),k=m[C];if(!k)continue;const{direction:R,speed:P}=iJ(_,k,E,t,g);for(const Y of["x","y"])p[Y][R[Y]]||(P[Y]=0,R[Y]=0);if(P.x>0||P.y>0){v(),w.current=_,b(I,i),T.current=P,y.current=R;return}}T.current={x:0,y:0},y.current={x:0,y:0},v()},[t,I,r,v,o,i,JSON.stringify(E),JSON.stringify(p),b,f,j,m,JSON.stringify(g)])}const bJ={x:{[Vn.Backward]:!1,[Vn.Forward]:!1},y:{[Vn.Backward]:!1,[Vn.Forward]:!1}};function wJ(e){let{delta:t,disabled:n}=e;const r=Qy(t);return j1(s=>{if(n||!r||!s)return bJ;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Vn.Backward]:s.x[Vn.Backward]||o.x===-1,[Vn.Forward]:s.x[Vn.Forward]||o.x===1},y:{[Vn.Backward]:s.y[Vn.Backward]||o.y===-1,[Vn.Forward]:s.y[Vn.Forward]||o.y===1}}},[n,t,r])}function TJ(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return j1(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function EJ(e,t){return N.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...o]},[]),[e,t])}var m1;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(m1||(m1={}));var ex;(function(e){e.Optimized="optimized"})(ex||(ex={}));const tE=new Map;function CJ(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,i]=N.useState(null),{frequency:l,measure:u,strategy:f}=s,m=N.useRef(e),h=T(),g=d1(h),p=N.useCallback(function(y){y===void 0&&(y=[]),!g.current&&i(E=>E===null?y:E.concat(y.filter(w=>!E.includes(w))))},[g]),b=N.useRef(null),v=j1(y=>{if(h&&!n)return tE;if(!y||y===tE||m.current!==e||o!=null){const E=new Map;for(let w of e){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){E.set(w.id,w.rect.current);continue}const I=w.node.current,j=I?new Q2(u(I),I):null;w.rect.current=j,j&&E.set(w.id,j)}return E}return y},[e,o,n,h,u]);return N.useEffect(()=>{m.current=e},[e]),N.useEffect(()=>{h||p()},[n,h]),N.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),N.useEffect(()=>{h||typeof l!="number"||b.current!==null||(b.current=setTimeout(()=>{p(),b.current=null},l))},[l,h,p,...r]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:o!=null};function T(){switch(f){case m1.Always:return!1;case m1.BeforeDragging:return n;default:return!n}}}function eN(e,t){return j1(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function _J(e,t){return eN(e,t)}function NJ(e){let{callback:t,disabled:n}=e;const r=V2(t),s=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return N.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Um(e){let{callback:t,disabled:n}=e;const r=V2(t),s=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return N.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function SJ(e){return new Q2(Cc(e),e)}function nE(e,t,n){t===void 0&&(t=SJ);const[r,s]=N.useState(null);function o(){s(u=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=u??n)!=null?f:null}const m=t(e);return JSON.stringify(u)===JSON.stringify(m)?u:m})}const i=NJ({callback(u){if(e)for(const f of u){const{type:m,target:h}=f;if(m==="childList"&&h instanceof HTMLElement&&h.contains(e)){o();break}}}}),l=Um({callback:o});return ko(()=>{o(),e?(l==null||l.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),i==null||i.disconnect())},[e]),r}function kJ(e){const t=eN(e);return K6(e,t)}const rE=[];function AJ(e){const t=N.useRef(e),n=j1(r=>e?r&&r!==rE&&e&&t.current&&e.parentNode===t.current.parentNode?r:zm(e):rE,[e]);return N.useEffect(()=>{t.current=e},[e]),n}function OJ(e){const[t,n]=N.useState(null),r=N.useRef(e),s=N.useCallback(o=>{const i=Tg(o.target);i&&n(l=>l?(l.set(i,Jy(i)),new Map(l)):null)},[]);return N.useEffect(()=>{const o=r.current;if(e!==o){i(o);const l=e.map(u=>{const f=Tg(u);return f?(f.addEventListener("scroll",s,{passive:!0}),[f,Jy(f)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(o)};function i(l){l.forEach(u=>{const f=Tg(u);f==null||f.removeEventListener("scroll",s)})}},[s,e]),N.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,i)=>Xl(o,i),so):J6(e):so,[e,t])}function sE(e,t){t===void 0&&(t=[]);const n=N.useRef(null);return N.useEffect(()=>{n.current=null},t),N.useEffect(()=>{const r=e!==so;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?f1(e,n.current):so}function RJ(e){N.useEffect(()=>{if(!Bm)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function IJ(e,t){return N.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=i=>{o(i,t)},n},{}),[e,t])}function tN(e){return N.useMemo(()=>e?nJ(e):null,[e])}const oE=[];function jJ(e,t){t===void 0&&(t=Cc);const[n]=e,r=tN(n?Gr(n):null),[s,o]=N.useState(oE);function i(){o(()=>e.length?e.map(u=>Q6(u)?r:new Q2(t(u),u)):oE)}const l=Um({callback:i});return ko(()=>{l==null||l.disconnect(),i(),e.forEach(u=>l==null?void 0:l.observe(u))},[e]),s}function LJ(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return I1(t)?t:e}function DJ(e){let{measure:t}=e;const[n,r]=N.useState(null),s=N.useCallback(f=>{for(const{target:m}of f)if(I1(m)){r(h=>{const g=t(m);return h?{...h,width:g.width,height:g.height}:g});break}},[t]),o=Um({callback:s}),i=N.useCallback(f=>{const m=LJ(f);o==null||o.disconnect(),m&&(o==null||o.observe(m)),r(m?t(m):null)},[t,o]),[l,u]=Dh(i);return N.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const MJ=[{sensor:Z2,options:{}},{sensor:X2,options:{}}],PJ={current:{}},Pf={draggable:{measure:XT},droppable:{measure:XT,strategy:m1.WhileDragging,frequency:ex.Optimized},dragOverlay:{measure:Cc}};class Lu extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const FJ={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Lu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Mh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Pf,measureDroppableContainers:Mh,windowRect:null,measuringScheduled:!1},BJ={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Mh,draggableNodes:new Map,over:null,measureDroppableContainers:Mh},Hm=N.createContext(BJ),nN=N.createContext(FJ);function zJ(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Lu}}}function UJ(e,t){switch(t.type){case Un.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Un.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Un.DragEnd:case Un.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Un.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Lu(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Un.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new Lu(e.droppable.containers);return i.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case Un.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Lu(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function HJ(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=N.useContext(Hm),o=Qy(r),i=Qy(n==null?void 0:n.id);return N.useEffect(()=>{if(!t&&!r&&o&&i!=null){if(!q2(o)||document.activeElement===o.target)return;const l=s.get(i);if(!l)return;const{activatorNode:u,node:f}=l;if(!u.current&&!f.current)return;requestAnimationFrame(()=>{for(const m of[u.current,f.current]){if(!m)continue;const h=LX(m);if(h){h.focus();break}}})}},[r,t,s,i,o]),null}function $J(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function WJ(e){return N.useMemo(()=>({draggable:{...Pf.draggable,...e==null?void 0:e.draggable},droppable:{...Pf.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Pf.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function GJ(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=N.useRef(!1),{x:i,y:l}=typeof s=="boolean"?{x:s,y:s}:s;ko(()=>{if(!i&&!l||!t){o.current=!1;return}if(o.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const m=n(f),h=K6(m,r);if(i||(h.x=0),l||(h.y=0),o.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const g=Y6(f);g&&g.scrollBy({top:h.y,left:h.x})}},[t,i,l,r,n])}const rN=N.createContext({...so,scaleX:1,scaleY:1});var Mi;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Mi||(Mi={}));const KJ=N.memo(function(t){var n,r,s,o;let{id:i,accessibility:l,autoScroll:u=!0,children:f,sensors:m=MJ,collisionDetection:h=qX,measuring:g,modifiers:p,...b}=t;const v=N.useReducer(UJ,void 0,zJ),[T,y]=v,[E,w]=zX(),[I,j]=N.useState(Mi.Uninitialized),_=I===Mi.Initialized,{draggable:{active:C,nodes:k,translate:R},droppable:{containers:P}}=T,Y=C!=null?k.get(C):null,z=N.useRef({initial:null,translated:null}),Q=N.useMemo(()=>{var Ut;return C!=null?{id:C,data:(Ut=Y==null?void 0:Y.data)!=null?Ut:PJ,rect:z}:null},[C,Y]),M=N.useRef(null),[le,Ne]=N.useState(null),[$,G]=N.useState(null),H=d1(b,Object.values(b)),U=L1("DndDescribedBy",i),ee=N.useMemo(()=>P.getEnabled(),[P]),te=WJ(g),{droppableRects:V,measureDroppableContainers:xe,measuringScheduled:we}=CJ(ee,{dragging:_,dependencies:[R.x,R.y],config:te.droppable}),Le=TJ(k,C),Ve=N.useMemo(()=>$?Xy($):null,[$]),Me=Fs(),Ke=_J(Le,te.draggable.measure);GJ({activeNode:C!=null?k.get(C):null,config:Me.layoutShiftCompensation,initialRect:Ke,measure:te.draggable.measure});const De=nE(Le,te.draggable.measure,Ke),nt=nE(Le?Le.parentElement:null),ut=N.useRef({activatorEvent:null,active:null,activeNode:Le,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),dt=P.getNodeFor((n=ut.current.over)==null?void 0:n.id),D=DJ({measure:te.dragOverlay.measure}),ue=(r=D.nodeRef.current)!=null?r:Le,F=_?(s=D.rect)!=null?s:De:null,A=!!(D.nodeRef.current&&D.rect),L=kJ(A?null:De),K=tN(ue?Gr(ue):null),oe=AJ(_?dt??Le:null),ie=jJ(oe),J=$J(p,{transform:{x:R.x-L.x,y:R.y-L.y,scaleX:1,scaleY:1},activatorEvent:$,active:Q,activeNodeRect:De,containerNodeRect:nt,draggingNodeRect:F,over:ut.current.over,overlayNodeRect:D.rect,scrollableAncestors:oe,scrollableAncestorRects:ie,windowRect:K}),me=Ve?Xl(Ve,R):null,be=OJ(oe),ye=sE(be),je=sE(be,[De]),X=Xl(J,ye),Z=F?JX(F,J):null,pe=Q&&Z?h({active:Q,collisionRect:Z,droppableRects:V,droppableContainers:ee,pointerCoordinates:me}):null,ge=G6(pe,"id"),[Ee,He]=N.useState(null),Ye=A?J:Xl(J,je),pt=QX(Ye,(o=Ee==null?void 0:Ee.rect)!=null?o:null,De),Qe=N.useRef(null),Et=N.useCallback((Ut,un)=>{let{sensor:Nn,options:kr}=un;if(M.current==null)return;const Wn=k.get(M.current);if(!Wn)return;const Zt=Ut.nativeEvent,or=new Nn({active:M.current,activeNode:Wn,event:Zt,options:kr,context:ut,onAbort(sn){if(!k.get(sn))return;const{onDragAbort:hn}=H.current,jn={id:sn};hn==null||hn(jn),E({type:"onDragAbort",event:jn})},onPending(sn,ir,hn,jn){if(!k.get(sn))return;const{onDragPending:ds}=H.current,Ln={id:sn,constraint:ir,initialCoordinates:hn,offset:jn};ds==null||ds(Ln),E({type:"onDragPending",event:Ln})},onStart(sn){const ir=M.current;if(ir==null)return;const hn=k.get(ir);if(!hn)return;const{onDragStart:jn}=H.current,lo={activatorEvent:Zt,active:{id:ir,data:hn.data,rect:z}};Fr.unstable_batchedUpdates(()=>{jn==null||jn(lo),j(Mi.Initializing),y({type:Un.DragStart,initialCoordinates:sn,active:ir}),E({type:"onDragStart",event:lo}),Ne(Qe.current),G(Zt)})},onMove(sn){y({type:Un.DragMove,coordinates:sn})},onEnd:Kr(Un.DragEnd),onCancel:Kr(Un.DragCancel)});Qe.current=or;function Kr(sn){return async function(){const{active:hn,collisions:jn,over:lo,scrollAdjustedTranslate:ds}=ut.current;let Ln=null;if(hn&&ds){const{cancelDrop:Bs}=H.current;Ln={activatorEvent:Zt,active:hn,collisions:jn,delta:ds,over:lo},sn===Un.DragEnd&&typeof Bs=="function"&&await Promise.resolve(Bs(Ln))&&(sn=Un.DragCancel)}M.current=null,Fr.unstable_batchedUpdates(()=>{y({type:sn}),j(Mi.Uninitialized),He(null),Ne(null),G(null),Qe.current=null;const Bs=sn===Un.DragEnd?"onDragEnd":"onDragCancel";if(Ln){const fi=H.current[Bs];fi==null||fi(Ln),E({type:Bs,event:Ln})}})}}},[k]),Dt=N.useCallback((Ut,un)=>(Nn,kr)=>{const Wn=Nn.nativeEvent,Zt=k.get(kr);if(M.current!==null||!Zt||Wn.dndKit||Wn.defaultPrevented)return;const or={active:Zt};Ut(Nn,un.options,or)===!0&&(Wn.dndKit={capturedBy:un.sensor},M.current=kr,Et(Nn,un))},[k,Et]),$n=EJ(m,Dt);RJ(m),ko(()=>{De&&I===Mi.Initializing&&j(Mi.Initialized)},[De,I]),N.useEffect(()=>{const{onDragMove:Ut}=H.current,{active:un,activatorEvent:Nn,collisions:kr,over:Wn}=ut.current;if(!un||!Nn)return;const Zt={active:un,activatorEvent:Nn,collisions:kr,delta:{x:X.x,y:X.y},over:Wn};Fr.unstable_batchedUpdates(()=>{Ut==null||Ut(Zt),E({type:"onDragMove",event:Zt})})},[X.x,X.y]),N.useEffect(()=>{const{active:Ut,activatorEvent:un,collisions:Nn,droppableContainers:kr,scrollAdjustedTranslate:Wn}=ut.current;if(!Ut||M.current==null||!un||!Wn)return;const{onDragOver:Zt}=H.current,or=kr.get(ge),Kr=or&&or.rect.current?{id:or.id,rect:or.rect.current,data:or.data,disabled:or.disabled}:null,sn={active:Ut,activatorEvent:un,collisions:Nn,delta:{x:Wn.x,y:Wn.y},over:Kr};Fr.unstable_batchedUpdates(()=>{He(Kr),Zt==null||Zt(sn),E({type:"onDragOver",event:sn})})},[ge]),ko(()=>{ut.current={activatorEvent:$,active:Q,activeNode:Le,collisionRect:Z,collisions:pe,droppableRects:V,draggableNodes:k,draggingNode:ue,draggingNodeRect:F,droppableContainers:P,over:Ee,scrollableAncestors:oe,scrollAdjustedTranslate:X},z.current={initial:F,translated:Z}},[Q,Le,pe,Z,k,ue,F,V,P,Ee,oe,X]),vJ({...Me,delta:R,draggingRect:Z,pointerCoordinates:me,scrollableAncestors:oe,scrollableAncestorRects:ie});const $t=N.useMemo(()=>({active:Q,activeNode:Le,activeNodeRect:De,activatorEvent:$,collisions:pe,containerNodeRect:nt,dragOverlay:D,draggableNodes:k,droppableContainers:P,droppableRects:V,over:Ee,measureDroppableContainers:xe,scrollableAncestors:oe,scrollableAncestorRects:ie,measuringConfiguration:te,measuringScheduled:we,windowRect:K}),[Q,Le,De,$,pe,nt,D,k,P,V,Ee,xe,oe,ie,te,we,K]),us=N.useMemo(()=>({activatorEvent:$,activators:$n,active:Q,activeNodeRect:De,ariaDescribedById:{draggable:U},dispatch:y,draggableNodes:k,over:Ee,measureDroppableContainers:xe}),[$,$n,Q,De,y,U,k,Ee,xe]);return St.createElement(H6.Provider,{value:w},St.createElement(Hm.Provider,{value:us},St.createElement(nN.Provider,{value:$t},St.createElement(rN.Provider,{value:pt},f)),St.createElement(HJ,{disabled:(l==null?void 0:l.restoreFocus)===!1})),St.createElement($X,{...l,hiddenTextDescribedById:U}));function Fs(){const Ut=(le==null?void 0:le.autoScrollEnabled)===!1,un=typeof u=="object"?u.enabled===!1:u===!1,Nn=_&&!Ut&&!un;return typeof u=="object"?{...u,enabled:Nn}:{enabled:Nn}}}),YJ=N.createContext(null),iE="button",VJ="Draggable";function qJ(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=L1(VJ),{activators:i,activatorEvent:l,active:u,activeNodeRect:f,ariaDescribedById:m,draggableNodes:h,over:g}=N.useContext(Hm),{role:p=iE,roleDescription:b="draggable",tabIndex:v=0}=s??{},T=(u==null?void 0:u.id)===t,y=N.useContext(T?rN:YJ),[E,w]=Dh(),[I,j]=Dh(),_=IJ(i,t),C=d1(n);ko(()=>(h.set(t,{id:t,key:o,node:E,activatorNode:I,data:C}),()=>{const R=h.get(t);R&&R.key===o&&h.delete(t)}),[h,t]);const k=N.useMemo(()=>({role:p,tabIndex:v,"aria-disabled":r,"aria-pressed":T&&p===iE?!0:void 0,"aria-roledescription":b,"aria-describedby":m.draggable}),[r,p,v,T,b,m.draggable]);return{active:u,activatorEvent:l,activeNodeRect:f,attributes:k,isDragging:T,listeners:r?void 0:_,node:E,over:g,setNodeRef:w,setActivatorNodeRef:j,transform:y}}function QJ(){return N.useContext(nN)}const XJ="Droppable",JJ={timeout:25};function ZJ(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=L1(XJ),{active:i,dispatch:l,over:u,measureDroppableContainers:f}=N.useContext(Hm),m=N.useRef({disabled:n}),h=N.useRef(!1),g=N.useRef(null),p=N.useRef(null),{disabled:b,updateMeasurementsFor:v,timeout:T}={...JJ,...s},y=d1(v??r),E=N.useCallback(()=>{if(!h.current){h.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{f(Array.isArray(y.current)?y.current:[y.current]),p.current=null},T)},[T]),w=Um({callback:E,disabled:b||!i}),I=N.useCallback((k,R)=>{w&&(R&&(w.unobserve(R),h.current=!1),k&&w.observe(k))},[w]),[j,_]=Dh(I),C=d1(t);return N.useEffect(()=>{!w||!j.current||(w.disconnect(),h.current=!1,w.observe(j.current))},[j,w]),N.useEffect(()=>(l({type:Un.RegisterDroppable,element:{id:r,key:o,disabled:n,node:j,rect:g,data:C}}),()=>l({type:Un.UnregisterDroppable,key:o,id:r})),[r]),N.useEffect(()=>{n!==m.current.disabled&&(l({type:Un.SetDroppableDisabled,id:r,key:o,disabled:n}),m.current.disabled=n)},[r,o,n,l]),{active:i,rect:g,isOver:(u==null?void 0:u.id)===r,node:j,over:u,setNodeRef:_}}function e5(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function eZ(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function lf(e){return e!==null&&e>=0}function tZ(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function nZ(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const sN=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=e5(t,r,n),i=t[s],l=o[s];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},cf={scaleX:1,scaleY:1},rZ=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:i}=e;const l=(t=o[n])!=null?t:r;if(!l)return null;if(s===n){const f=o[i];return f?{x:0,y:n<i?f.top+f.height-(l.top+l.height):f.top-l.top,...cf}:null}const u=sZ(o,s,n);return s>n&&s<=i?{x:0,y:-l.height-u,...cf}:s<n&&s>=i?{x:0,y:l.height+u,...cf}:{x:0,y:0,...cf}};function sZ(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const oN="Sortable",iN=St.createContext({activeIndex:-1,containerId:oN,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:sN,disabled:{draggable:!1,droppable:!1}});function oZ(e){let{children:t,id:n,items:r,strategy:s=sN,disabled:o=!1}=e;const{active:i,dragOverlay:l,droppableRects:u,over:f,measureDroppableContainers:m}=QJ(),h=L1(oN,n),g=l.rect!==null,p=N.useMemo(()=>r.map(_=>typeof _=="object"&&"id"in _?_.id:_),[r]),b=i!=null,v=i?p.indexOf(i.id):-1,T=f?p.indexOf(f.id):-1,y=N.useRef(p),E=!tZ(p,y.current),w=T!==-1&&v===-1||E,I=nZ(o);ko(()=>{E&&b&&m(p)},[E,p,b,m]),N.useEffect(()=>{y.current=p},[p]);const j=N.useMemo(()=>({activeIndex:v,containerId:h,disabled:I,disableTransforms:w,items:p,overIndex:T,useDragOverlay:g,sortedRects:eZ(p,u),strategy:s}),[v,h,I.draggable,I.droppable,w,p,T,u,g,s]);return St.createElement(iN.Provider,{value:j},t)}const iZ=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return e5(n,r,s).indexOf(t)},aZ=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:i,previousItems:l,previousContainerId:u,transition:f}=e;return!f||!r||l!==o&&s===i?!1:n?!0:i!==s&&t===u},lZ={duration:200,easing:"ease"},aN="transform",cZ=h1.Transition.toString({property:aN,duration:0,easing:"linear"}),uZ={roleDescription:"sortable"};function dZ(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,i]=N.useState(null),l=N.useRef(n);return ko(()=>{if(!t&&n!==l.current&&r.current){const u=s.current;if(u){const f=Cc(r.current,{ignoreTransform:!0}),m={x:u.left-f.left,y:u.top-f.top,scaleX:u.width/f.width,scaleY:u.height/f.height};(m.x||m.y)&&i(m)}}n!==l.current&&(l.current=n)},[t,n,r,s]),N.useEffect(()=>{o&&i(null)},[o]),o}function fZ(e){let{animateLayoutChanges:t=aZ,attributes:n,disabled:r,data:s,getNewIndex:o=iZ,id:i,strategy:l,resizeObserverConfig:u,transition:f=lZ}=e;const{items:m,containerId:h,activeIndex:g,disabled:p,disableTransforms:b,sortedRects:v,overIndex:T,useDragOverlay:y,strategy:E}=N.useContext(iN),w=hZ(r,p),I=m.indexOf(i),j=N.useMemo(()=>({sortable:{containerId:h,index:I,items:m},...s}),[h,s,I,m]),_=N.useMemo(()=>m.slice(m.indexOf(i)),[m,i]),{rect:C,node:k,isOver:R,setNodeRef:P}=ZJ({id:i,data:j,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...u}}),{active:Y,activatorEvent:z,activeNodeRect:Q,attributes:M,setNodeRef:le,listeners:Ne,isDragging:$,over:G,setActivatorNodeRef:H,transform:U}=qJ({id:i,data:j,attributes:{...uZ,...n},disabled:w.draggable}),ee=OX(P,le),te=!!Y,V=te&&!b&&lf(g)&&lf(T),xe=!y&&$,we=xe&&V?U:null,Ve=V?we??(l??E)({rects:v,activeNodeRect:Q,activeIndex:g,overIndex:T,index:I}):null,Me=lf(g)&&lf(T)?o({id:i,items:m,activeIndex:g,overIndex:T}):I,Ke=Y==null?void 0:Y.id,De=N.useRef({activeId:Ke,items:m,newIndex:Me,containerId:h}),nt=m!==De.current.items,ut=t({active:Y,containerId:h,isDragging:$,isSorting:te,id:i,index:I,items:m,newIndex:De.current.newIndex,previousItems:De.current.items,previousContainerId:De.current.containerId,transition:f,wasDragging:De.current.activeId!=null}),dt=dZ({disabled:!ut,index:I,node:k,rect:C});return N.useEffect(()=>{te&&De.current.newIndex!==Me&&(De.current.newIndex=Me),h!==De.current.containerId&&(De.current.containerId=h),m!==De.current.items&&(De.current.items=m)},[te,Me,h,m]),N.useEffect(()=>{if(Ke===De.current.activeId)return;if(Ke!=null&&De.current.activeId==null){De.current.activeId=Ke;return}const ue=setTimeout(()=>{De.current.activeId=Ke},50);return()=>clearTimeout(ue)},[Ke]),{active:Y,activeIndex:g,attributes:M,data:j,rect:C,index:I,newIndex:Me,items:m,isOver:R,isSorting:te,isDragging:$,listeners:Ne,node:k,overIndex:T,over:G,setNodeRef:ee,setActivatorNodeRef:H,setDroppableNodeRef:P,setDraggableNodeRef:le,transform:dt??Ve,transition:D()};function D(){if(dt||nt&&De.current.newIndex===I)return cZ;if(!(xe&&!q2(z)||!f)&&(te||ut))return h1.Transition.toString({...f,property:aN})}}function hZ(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Fh(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const mZ=[jt.Down,jt.Right,jt.Up,jt.Left],pZ=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:o,over:i,scrollableAncestors:l}}=t;if(mZ.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];o.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const g=s.get(h.id);if(g)switch(e.code){case jt.Down:r.top<g.top&&u.push(h);break;case jt.Up:r.top>g.top&&u.push(h);break;case jt.Left:r.left>g.left&&u.push(h);break;case jt.Right:r.left<g.left&&u.push(h);break}});const f=YX({active:n,collisionRect:r,droppableRects:s,droppableContainers:u,pointerCoordinates:null});let m=G6(f,"id");if(m===(i==null?void 0:i.id)&&f.length>1&&(m=f[1].id),m!=null){const h=o.get(n.id),g=o.get(m),p=g?s.get(g.id):null,b=g==null?void 0:g.node.current;if(b&&p&&h&&g){const T=zm(b).some((_,C)=>l[C]!==_),y=lN(h,g),E=gZ(h,g),w=T||!y?{x:0,y:0}:{x:E?r.width-p.width:0,y:E?r.height-p.height:0},I={x:p.left,y:p.top};return w.x&&w.y?I:f1(I,w)}}}};function lN(e,t){return!Fh(e)||!Fh(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function gZ(e,t){return!Fh(e)||!Fh(t)||!lN(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const yZ=({id:e,content:t,type:n,onChange:r})=>{const[s,o]=N.useState(!1),[i,l]=N.useState(t),{attributes:u,listeners:f,setNodeRef:m,transform:h,transition:g,isDragging:p}=fZ({id:e}),b={transform:h1.Transform.toString(h),transition:g,opacity:p?.8:1},v=N.useCallback(w=>{l(w),r(e,w)},[e,r]),T=N.useCallback(()=>{o(!1),v(i)},[i,v]),y=N.useCallback(w=>{w.key==="Enter"&&!w.shiftKey?(w.preventDefault(),T()):w.key==="Escape"&&(w.preventDefault(),o(!1),l(t))},[t,T]),E=()=>s?c.jsx("textarea",{value:i,onChange:w=>l(w.target.value),onBlur:T,onKeyDown:y,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-0 resize-none",rows:Math.max(1,i.split(`
`).length),autoFocus:!0}):c.jsx("div",{className:"p-2 cursor-text hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md min-h-[40px]",onClick:()=>o(!0),children:t.split(`
`).map((w,I)=>c.jsx("div",{className:"py-1",children:w},I))});return c.jsxs("div",{ref:m,style:b,className:"relative group mb-2",...u,children:[c.jsx("div",{...f,className:"absolute left-0 top-0 w-5 h-full cursor-move flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-l-md",style:{touchAction:"none"},children:c.jsx("div",{className:"text-gray-400 dark:text-gray-500 text-xs",children:"≡"})}),c.jsx("div",{className:"pl-6 pr-2 border border-gray-200 dark:border-gray-700 rounded-md hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:E()}),p&&c.jsx("div",{className:"absolute left-0 right-0 h-0.5 bg-blue-500 top-0"})]})},xZ=kX(e=>({content:"",blocks:[],setContent:t=>e({content:t}),setBlocks:t=>e({blocks:Array.isArray(t)?t:[]}),loadFromStorage:()=>{const t=localStorage.getItem("blocksuite-content");if(t)try{const n=JSON.parse(t);return n&&n.blocks&&!Array.isArray(n.blocks)&&(n.blocks=[]),n}catch{return null}return null},saveToStorage:t=>{localStorage.setItem("blocksuite-content",JSON.stringify(t))}})),vZ=[{id:"heading1",label:"标题1",type:"h1"},{id:"todo",label:"待办列表",type:"todo"},{id:"divider",label:"分割线",type:"divider"},{id:"image",label:"图片",type:"image"}],bZ=()=>{const[e,t]=N.useState(!1),[n,r]=N.useState({x:0,y:0});N.useState(null);const[s,o]=N.useState(""),[i,l]=N.useState(null),u=N.useRef(null),{content:f,blocks:m,setContent:h,setBlocks:g,loadFromStorage:p,saveToStorage:b}=xZ();N.useEffect(()=>{const j=p();j&&j.blocks&&Array.isArray(j.blocks)?g(j.blocks):g([{id:"block-1",type:"text",content:"欢迎使用 BlockSuite 编辑器"},{id:"block-2",type:"text",content:"输入 / 打开命令菜单"}])},[p,g]),N.useEffect(()=>{const j=AX.debounce(()=>{b({blocks:m})},1500);return j(),()=>{j.cancel()}},[m,b]),N.useEffect(()=>{const j=_=>{if(_.key==="/"&&!_.shiftKey&&!_.ctrlKey&&!_.altKey&&!_.metaKey){_.preventDefault();const C=window.getSelection();if(C.rangeCount>0){const R=C.getRangeAt(0).getBoundingClientRect();r({x:R.left,y:R.bottom+window.scrollY}),t(!0),o("")}}};return document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}},[]);const v=N.useCallback((j,_)=>{g(C=>C.map(k=>k.id===j?{...k,content:_}:k))},[g]),T=N.useCallback(j=>{const _={id:`block-${Date.now()}`,type:j.type,content:I(j.type)};g(C=>[...C,_]),t(!1)},[g]),y=WX(VT(Z2),VT(X2,{coordinateGetter:pZ})),E=N.useCallback(j=>{const{active:_,over:C}=j;if(C&&_.id!==C.id&&Array.isArray(m)){const k=m.findIndex(P=>P.id===_.id),R=m.findIndex(P=>P.id===C.id);k!==-1&&R!==-1&&g(e5(m,k,R))}l(null)},[m,g]),w=vZ.filter(j=>j.label.toLowerCase().includes(s.toLowerCase())),I=j=>{switch(j){case"h1":return"# 标题";case"todo":return"- [ ] 待办事项";case"divider":return"---";case"image":return"![图片](url)";default:return"新块"}};return c.jsx(KJ,{sensors:y,collisionDetection:KX,onDragEnd:E,children:c.jsxs("div",{className:"block-suite-editor relative w-full h-full bg-white dark:bg-gray-900",children:[c.jsx("div",{ref:u,className:"w-full h-full min-h-[500px] p-4 focus:outline-none",children:c.jsx(oZ,{items:Array.isArray(m)?m.map(j=>j.id):[],strategy:rZ,children:Array.isArray(m)?m.map(j=>c.jsx(yZ,{id:j.id,content:j.content,type:j.type,onChange:v},j.id)):null})}),e&&c.jsxs("div",{className:"absolute z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",style:{left:n.x,top:n.y,minWidth:"200px"},children:[c.jsx("div",{className:"p-2",children:c.jsx("input",{type:"text",placeholder:"搜索命令...",className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-0",value:s,onChange:j=>o(j.target.value),autoFocus:!0})}),c.jsx("div",{className:"max-h-60 overflow-y-auto",children:w.map(j=>c.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-700",onClick:()=>T(j),children:j.label},j.id))})]}),e&&c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)})]})})},wZ=()=>c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"BlockSuite 编辑器演示"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"使用 BlockSuite 构建的现代化块编辑器，支持拖拽排序、命令菜单和自动保存"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"编辑器"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"输入 / 打开命令菜单，拖拽左侧手柄重新排序"})]}),c.jsx("div",{className:"h-[600px] relative",children:c.jsx(bZ,{})})]}),c.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-blue-600 dark:text-blue-400 text-sm font-bold",children:"1"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"块编辑"})]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"基于 BlockSuite 引擎的现代化块编辑体验"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-green-600 dark:text-green-400 text-sm font-bold",children:"2"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"命令菜单"})]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"输入 / 快速插入标题、待办、分割线等"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-purple-600 dark:text-purple-400 text-sm font-bold",children:"3"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"拖拽排序"})]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"拖拽左侧手柄重新排列内容块顺序"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-orange-600 dark:text-orange-400 text-sm font-bold",children:"4"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"自动保存"})]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"防抖1.5秒自动保存到本地存储"})]})]})]})}),TZ=()=>{const[e,t]=N.useState("desktop"),[n,r]=N.useState(16),[s,o]=N.useState(1.6);N.useEffect(()=>{const p=()=>{const b=window.innerWidth;b<=400?(t("mobile-small"),r(12),o(1.4)):b<=768?(t("mobile"),r(14),o(1.5)):b>=769&&b<=1024?(t("tablet"),r(15),o(1.55)):b>=1920?(t("large-desktop"),r(18),o(1.65)):(t("desktop"),r(16),o(1.6))};return p(),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}},[]);const i=p=>{switch(e){case"mobile-small":return p*.75;case"mobile":return p*.875;case"tablet":return p*.938;case"large-desktop":return p*1.125;default:return p}},l=p=>{switch(e){case"mobile-small":return Math.max(p*.875,1.2);case"mobile":return Math.max(p*.938,1.3);case"tablet":return Math.max(p*.969,1.35);case"large-desktop":return Math.min(p*1.031,1.8);default:return p}};return{deviceType:e,fontSize:n,lineHeight:s,calculateResponsiveFontSize:i,calculateResponsiveLineHeight:l,getResponsiveFontStyle:(p={})=>{const{baseSize:b=16,baseLineHeight:v=1.6,weight:T="normal",family:y="inherit"}=p;return{fontSize:`${i(b)}px`,lineHeight:l(v),fontWeight:T,fontFamily:y}},getDeviceClass:p=>({"mobile-small":`${p}-mobile-small`,mobile:`${p}-mobile`,tablet:`${p}-tablet`,desktop:`${p}-desktop`,"large-desktop":`${p}-large-desktop`})[e]||p,isMobile:()=>e==="mobile"||e==="mobile-small",isTablet:()=>e==="tablet",isDesktop:()=>e==="desktop"||e==="large-desktop"}},EZ=()=>{const{deviceType:e,fontSize:t,lineHeight:n,getResponsiveFontStyle:r,isMobile:s,isTablet:o,isDesktop:i}=TZ(),[l,u]=N.useState(16),[f,m]=N.useState(1.6);r({baseSize:24,baseLineHeight:1.3,weight:"600"}),r({baseSize:16,baseLineHeight:1.6,weight:"normal"});const h=r({baseSize:l,baseLineHeight:f,weight:"normal"}),p=(()=>{const T=window.innerWidth;return{deviceType:e,screenWidth:T,fontSize:t,lineHeight:n,isMobile:s(),isTablet:o(),isDesktop:i()}})(),b=[{name:"标题",size:24,lineHeight:1.3,weight:"600"},{name:"副标题",size:18,lineHeight:1.4,weight:"500"},{name:"正文",size:16,lineHeight:1.6,weight:"normal"},{name:"小字",size:14,lineHeight:1.5,weight:"normal"},{name:"注释",size:12,lineHeight:1.4,weight:"normal"}],v=[{title:"文章内容",description:"长篇文章需要良好的可读性，适当的字体大小和行高能够减少阅读疲劳。",className:"responsive-body-text text-readable"},{title:"导航菜单",description:"导航菜单需要清晰易读，在不同设备上保持良好的可点击性。",className:"responsive-nav"},{title:"按钮文本",description:"按钮文本需要醒目且易于点击，在移动设备上需要更大的点击区域。",className:"responsive-button"},{title:"卡片内容",description:"卡片内容需要在有限空间内展示信息，同时保持良好的可读性。",className:"responsive-card-content"}];return c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-6 lg:p-8",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"跨设备字体大小优化方案"}),c.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"基于设备类型和屏幕尺寸的智能字体大小适配策略，确保在各种设备上都能提供最佳的阅读体验。"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"当前设备信息"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"设备类型"}),c.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e==="mobile-small"&&"小屏手机",e==="mobile"&&"手机",e==="tablet"&&"平板",e==="desktop"&&"桌面",e==="large-desktop"&&"大屏桌面"]})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"屏幕宽度"}),c.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[p.screenWidth,"px"]})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"基础字体大小"}),c.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[t,"px"]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"响应式字体示例"}),c.jsx("div",{className:"space-y-6",children:b.map((T,y)=>{const E=r({baseSize:T.size,baseLineHeight:T.lineHeight,weight:T.weight});return c.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:T.name}),c.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["桌面: ",T.size,"px → 当前: ",E.fontSize.replace("px",""),"px"]})]}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-300",style:E,children:["这是",T.name,"的示例文本，展示了在不同设备上的字体大小和行高适配效果。 当前字体大小为 ",E.fontSize,"，行高为 ",E.lineHeight,"。"]})]},y)})})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"自定义字体测试"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"基础字体大小 (px)"}),c.jsx("input",{type:"range",min:"10",max:"32",value:l,onChange:T=>u(parseInt(T.target.value)),className:"w-full"}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.jsx("span",{children:"10px"}),c.jsxs("span",{className:"font-medium",children:[l,"px"]}),c.jsx("span",{children:"32px"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"基础行高"}),c.jsx("input",{type:"range",min:"1.2",max:"2.0",step:"0.1",value:f,onChange:T=>m(parseFloat(T.target.value)),className:"w-full"}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.jsx("span",{children:"1.2"}),c.jsx("span",{className:"font-medium",children:f}),c.jsx("span",{children:"2.0"})]})]})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"自定义字体效果预览"}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-300",style:h,children:["这是自定义字体的示例文本。您可以通过上方的滑块调整基础字体大小和行高， 系统会根据当前设备类型自动计算适配的字体大小和行高。 当前字体大小为 ",h.fontSize,"，行高为 ",h.lineHeight,"。"]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"应用场景示例"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:v.map((T,y)=>c.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:T.title}),c.jsx("p",{className:T.className+" text-gray-600 dark:text-gray-300 mb-3",children:T.description}),c.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["使用的CSS类: ",c.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:T.className})]})]},y))})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"使用说明"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"1. CSS类使用"}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:c.jsx("code",{className:"text-sm text-gray-600 dark:text-gray-300",children:`<div class="text-responsive-base leading-responsive">
  响应式文本内容
</div>`})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"2. React钩子使用"}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:c.jsx("code",{className:"text-sm text-gray-600 dark:text-gray-300",children:`import { useFontOptimization } from '../hooks/useFontOptimization';

const MyComponent = () => {
  const { getResponsiveFontStyle } = useFontOptimization();
  
  const style = getResponsiveFontStyle({
    baseSize: 16,
    baseLineHeight: 1.6,
    weight: 'normal',
  });
  
  return <div style={style}>响应式文本</div>;
};`})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"3. 工具类使用"}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:c.jsx("code",{className:"text-sm text-gray-600 dark:text-gray-300",children:`import FontOptimizationUtils from '../utils/fontOptimizationUtils';

// 计算响应式字体大小
const fontSize = FontOptimizationUtils.calculateFontSize(16, 'mobile');

// 生成响应式样式
const style = FontOptimizationUtils.generateResponsiveFontStyle({
  baseSize: 16,
  baseLineHeight: 1.6,
});`})})]})]})]})]})})},CZ=()=>{js();const[e,t]=N.useState({}),[n,r]=N.useState(!0),[s,o]=N.useState("");N.useEffect(()=>{(async()=>{try{const f=et.getUserPreferences();t(f)}catch(f){console.error("加载用户偏好设置失败:",f)}finally{r(!1)}})()},[]);const i=async(u,f)=>{const m={...e,[u]:f};t(m);try{await et.setUserPreferences(m),o("保存成功"),setTimeout(()=>o(""),2e3)}catch(h){console.error("保存设置失败:",h),o("保存失败"),setTimeout(()=>o(""),2e3)}},l=async u=>{await i("expandImages",u)};return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-theme-bg",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"正在加载设置..."})]})}):c.jsx("div",{className:"min-h-screen bg-theme-bg",children:c.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-theme-surface rounded-lg shadow-sm p-6",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(m_,{className:"h-5 w-5 mr-2 text-primary-600 dark:text-primary-400"}),c.jsx("h2",{className:"text-lg font-semibold text-theme-text",children:"图片设置"})]}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-theme-border",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-theme-text",children:"笔记图片是否展开"}),c.jsx("p",{className:"text-sm text-theme-text-secondary mt-1",children:"控制笔记中包含的图片是否默认展开显示"})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"radio",name:"imageExpand",checked:e.expandImages!==!1,onChange:()=>l(!0),className:"mr-2 text-primary-600 focus:ring-primary-500"}),c.jsx("span",{className:"text-sm text-theme-text",children:"展开"})]}),c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"radio",name:"imageExpand",checked:e.expandImages===!1,onChange:()=>l(!1),className:"mr-2 text-primary-600 focus:ring-primary-500"}),c.jsx("span",{className:"text-sm text-theme-text",children:"折叠"})]})]})]})})]}),c.jsxs("div",{className:"bg-theme-surface rounded-lg shadow-sm p-6",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(ac,{className:"h-5 w-5 mr-2 text-primary-600 dark:text-primary-400"}),c.jsx("h2",{className:"text-lg font-semibold text-theme-text",children:"布局设置"})]}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-theme-border",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-theme-text",children:"笔记宽度"}),c.jsx("p",{className:"text-sm text-theme-text-secondary mt-1",children:"控制笔记卡片的显示宽度"})]}),c.jsx("div",{className:"flex items-center space-x-2",children:c.jsxs("select",{value:e.cardWidth||"70%",onChange:u=>i("cardWidth",u.target.value),className:"px-3 py-2 border border-theme-border rounded-md bg-theme-bg text-theme-text focus:outline-none focus:ring-0",children:[c.jsx("option",{value:"50%",children:"50% - 窄"}),c.jsx("option",{value:"60%",children:"60% - 较窄"}),c.jsx("option",{value:"70%",children:"75% - 标准"}),c.jsx("option",{value:"80%",children:"80% - 较宽"}),c.jsx("option",{value:"90%",children:"92% - 宽"}),c.jsx("option",{value:"100%",children:"100% - 全宽"})]})})]})})]}),c.jsxs("div",{className:"bg-theme-surface rounded-lg shadow-sm p-6",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(ac,{className:"h-5 w-5 mr-2 text-primary-600 dark:text-primary-400"}),c.jsx("h2",{className:"text-lg font-semibold text-theme-text",children:"其他设置"})]}),c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-theme-text-secondary",children:"更多设置选项正在开发中..."})})]})]})})})},_Z=()=>{var ue;const[e,t]=N.useState([]),[n,r]=N.useState([]),[s,o]=N.useState("inbox"),[i,l]=N.useState(!1),[u,f]=N.useState(""),[m,h]=N.useState(new Set),[g,p]=N.useState(!1),[b,v]=N.useState(""),[T,y]=N.useState(""),[E,w]=N.useState(""),[I,j]=N.useState(""),[_,C]=N.useState({visible:!1,x:0,y:0,task:null}),[k,R]=N.useState([]),[P,Y]=N.useState(0),z=[{id:"inbox",name:"收件箱",icon:jp,color:"#3498db"},{id:"today",name:"今日",icon:tr,color:"#52c4b3"},{id:"scheduled",name:"计划日程",icon:ns,color:"#f39c12"},{id:"someday",name:"某天",icon:_o,color:"#9b59b6"},{id:"completed",name:"已完成",icon:Vl,color:"#95a5a6"}];N.useEffect(()=>{const F=()=>{_.visible&&$()};return document.addEventListener("click",F),()=>{document.removeEventListener("click",F)}},[_.visible]),N.useEffect(()=>{const F=[{id:"1",title:"完成项目报告",project:"项目a",dueDate:new Date,completed:!1,important:!0,tags:["办公"],priority:"high"},{id:"2",title:"团队会议",project:"项目a",dueDate:new Date,completed:!1,important:!1,tags:["会议"],priority:"medium"},{id:"3",title:"代码审查",project:"项目b",dueDate:nn(new Date,1),completed:!1,important:!1,tags:["开发"],priority:"high"},{id:"4",title:"学习新技术",project:null,dueDate:null,completed:!1,important:!1,tags:["学习"],priority:"low"}],A=[{id:"1",name:"项目a",color:"#52c4b3",taskCount:5,completedCount:2,subProjects:[{id:"1-1",name:"前端开发",taskCount:3,completedCount:1},{id:"1-2",name:"后端开发",taskCount:2,completedCount:1}]},{id:"2",name:"项目b",color:"#3498db",taskCount:3,completedCount:1,subProjects:[]},{id:"3",name:"个人学习",color:"#9b59b6",taskCount:2,completedCount:0,subProjects:[]}];t(F),r(A),Q()},[]);const Q=async()=>{try{const F=await Bl.get("/api/inbox");R(F.data.data);const A=await Bl.get("/api/inbox/unread-count");Y(A.data.data.count)}catch(F){console.error("加载收件箱数据失败:",F)}},M=async(F,A="",L="card",K=null)=>{try{const oe=await Bl.post("/api/inbox",{title:F,content:A,source:L,source_id:K});return R(ie=>[oe.data.data,...ie]),Y(ie=>ie+1),oe.data.data}catch(oe){return console.error("创建收件箱项目失败:",oe),null}},le=async F=>{try{await Bl.patch(`/api/inbox/${F}/read`),R(A=>A.map(L=>L.id===F?{...L,is_read:!0}:L)),Y(A=>Math.max(0,A-1))}catch(A){console.error("标记已读失败:",A)}},Ne=(F,A)=>{F.preventDefault(),C({visible:!0,x:F.clientX,y:F.clientY,task:A})},$=()=>{C({visible:!1,x:0,y:0,task:null})},G=F=>{t(A=>A.map(L=>L.id===F?{...L,important:!L.important}:L)),$()},H=F=>{t(A=>A.map(L=>L.id===F?{...L,completed:!L.completed}:L)),$()},U=F=>{t(A=>A.map(L=>L.id===F?{...L,dueDate:new Date}:L)),$()},ee=F=>{t(A=>A.map(L=>L.id===F?{...L,dueDate:nn(new Date,1)}:L)),$()},te=(F,A)=>{t(L=>L.map(K=>K.id===F?{...K,dueDate:new Date(A)}:K)),$()},V=(F,A)=>{console.log(`移动任务 ${F} 到列表 ${A}`),$()},xe=F=>{t(A=>A.filter(L=>L.id!==F)),$()},we=()=>{const F=new Date;if(s==="inbox")return k;switch(s){case"today":return e.filter(A=>!A.completed&&A.dueDate&&ni(A.dueDate));case"scheduled":return e.filter(A=>!A.completed&&A.dueDate&&!ni(A.dueDate));case"someday":return e.filter(A=>!A.completed&&A.dueDate&&A.dueDate>nn(F,1));case"completed":return e.filter(A=>A.completed);default:return e}},Le=()=>{const F=e.filter(K=>K.dueDate&&ni(K.dueDate)),A=F.filter(K=>K.completed).length,L=F.length;return L>0?A/L*100:0},Ve=F=>{const A={title:F,dueDate:null,tags:[],project:null},L=F.match(/\b(due|截止|到期)\s+(\d{1,2}:\d{2}|今天|明天|today|tomorrow)\b/i);if(L){const ie=L[2];if(ie.includes("今天")||ie.includes("today"))A.dueDate=new Date;else if(ie.includes("明天")||ie.includes("tomorrow"))A.dueDate=nn(new Date,1);else if(ie.includes(":")){const[J,me]=ie.split(":").map(Number),be=new Date;be.setHours(J,me,0,0),A.dueDate=be}}const K=F.match(/#([^\s#]+)/g);K&&(A.tags=K.map(ie=>ie.substring(1)));const oe=F.match(/@([^\s@]+)/g);return oe&&(A.project=oe[0].substring(1)),A},Me=()=>{if(!u.trim())return;const F=Ve(u);let A=F.dueDate;if(T){const K=new Date(T);if(E){const[oe,ie]=E.split(":").map(Number);K.setHours(oe,ie,0,0)}A=K}const L={id:Date.now().toString(),title:F.title,project:F.project||b,dueDate:A,completed:!1,tags:F.tags,priority:"medium",repeat:I};t([L,...e]),M(F.title,`来源: 卡片创建
项目: ${F.project||b||"无"}
截止日期: ${A?Tt(A,"yyyy-MM-dd HH:mm"):"无"}
标签: ${F.tags.join(", ")||"无"}`,"card",L.id),f(""),y(""),w(""),j(""),p(!1),l(!1)},Ke=F=>{t(e.map(A=>A.id===F?{...A,completed:!A.completed,completedAt:A.completed?null:new Date}:A))},De=F=>{const A=new Set(m);A.has(F)?A.delete(F):A.add(F),h(A)},nt=F=>{const L=2*Math.PI*20,K=L,oe=L-F/100*L;return c.jsxs("div",{className:"relative w-10 h-10",children:[c.jsxs("svg",{className:"w-10 h-10 transform -rotate-90",viewBox:"0 0 50 50",children:[c.jsx("circle",{cx:"25",cy:"25",r:20,stroke:"var(--theme-border)","stroke-width":"4",fill:"none"}),c.jsx("circle",{cx:"25",cy:"25",r:20,stroke:"var(--theme-primary)","stroke-width":"4",fill:"none","stroke-dasharray":K,"stroke-dashoffset":oe,"stroke-linecap":"round",className:"transition-all duration-300 ease-in-out"})]}),c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium",style:{color:"var(--theme-text-tertiary)"},children:[Math.round(F),"%"]})]})},ut=(F,A=0)=>F.map(L=>c.jsxs("div",{className:"mb-1",children:[c.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg cursor-pointer transition-colors duration-200 ${s===L.id,""}`,style:{paddingLeft:`${A*16+8}px`,backgroundColor:s===L.id?"var(--theme-primary)20":"transparent"},onMouseOver:K=>{s!==L.id&&(K.currentTarget.style.backgroundColor="var(--theme-elevated)")},onMouseOut:K=>{s!==L.id&&(K.currentTarget.style.backgroundColor="transparent")},onClick:()=>o(L.id),children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[L.subProjects&&L.subProjects.length>0&&c.jsx("button",{onClick:K=>{K.stopPropagation(),De(L.id)},className:"p-1 rounded transition-colors",style:{color:"var(--theme-text-tertiary)"},onMouseOver:K=>K.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:K=>K.currentTarget.style.backgroundColor="transparent",children:m.has(L.id)?c.jsx(Rp,{className:"w-4 h-4"}):c.jsx(t1,{className:"w-4 h-4"})}),c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:L.color}}),c.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-text)"},children:L.name})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("span",{className:"text-xs",style:{color:"var(--theme-text-tertiary)"},children:[L.completedCount,"/",L.taskCount]}),L.taskCount>0&&c.jsx("div",{className:"w-16 h-1 rounded-full overflow-hidden",style:{backgroundColor:"var(--theme-border)"},children:c.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${L.completedCount/L.taskCount*100}%`,backgroundColor:L.color}})})]})]}),L.subProjects&&L.subProjects.length>0&&m.has(L.id)&&c.jsx("div",{className:"ml-2",children:ut(L.subProjects,A+1)})]},L.id)),dt=we(),D=Le();return c.jsxs("div",{className:"flex h-screen",style:{backgroundColor:"var(--theme-bg)"},children:[c.jsxs("div",{className:"w-64 border-r border-gray-200 flex flex-col",style:{backgroundColor:"var(--theme-surface)"},children:[c.jsx("div",{className:"p-4",style:{borderBottom:"1px solid var(--theme-border)"},children:c.jsx("h1",{className:"text-xl font-bold",style:{color:"var(--theme-text)"},children:"任务管理"})}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:"var(--theme-text-tertiary)"},children:"智能列表"}),c.jsx("div",{className:"space-y-1",children:z.map(F=>{const A=St.createElement(F.icon,{className:`w-4 h-4 ${s===F.id?"text-white":""}`});return c.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-all duration-200 ${s===F.id?"text-white":""}`,style:{backgroundColor:s===F.id?F.color:"transparent",color:s===F.id?"white":"var(--theme-text)"},onMouseOver:L=>{s!==F.id&&(L.currentTarget.style.backgroundColor="var(--theme-elevated)")},onMouseOut:L=>{s!==F.id&&(L.currentTarget.style.backgroundColor="transparent")},onClick:()=>o(F.id),children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[A,c.jsx("span",{className:"text-sm font-medium",children:F.name}),F.id==="inbox"&&P>0&&c.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"var(--theme-error)",color:"white"},children:P})]}),F.id==="today"&&nt(D)]},F.id)})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h2",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:"var(--theme-text-tertiary)"},children:"项目"}),c.jsx("button",{className:"transition-colors",style:{color:"var(--theme-text-secondary)"},onMouseOver:F=>F.currentTarget.style.color="var(--theme-text)",onMouseOut:F=>F.currentTarget.style.color="var(--theme-text-secondary)",children:c.jsx(za,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"space-y-1",children:ut(n)})]})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col",children:[c.jsx("div",{className:"px-6 py-4",style:{backgroundColor:"var(--theme-surface)",borderBottom:"1px solid var(--theme-border)"},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--theme-text)"},children:((ue=z.find(F=>F.id===s))==null?void 0:ue.name)||"项目任务"}),c.jsxs("p",{className:"text-sm mt-1",style:{color:"var(--theme-text-tertiary)"},children:[dt.length," 个任务"]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{className:"p-2 rounded-lg transition-colors",style:{color:"var(--theme-text-secondary)"},onMouseOver:F=>{F.currentTarget.style.color="var(--theme-text)",F.currentTarget.style.backgroundColor="var(--theme-elevated)"},onMouseOut:F=>{F.currentTarget.style.color="var(--theme-text-secondary)",F.currentTarget.style.backgroundColor="transparent"},children:c.jsx(um,{className:"w-5 h-5"})}),c.jsx("button",{className:"p-2 rounded-lg transition-colors",style:{color:"var(--theme-text-secondary)"},onMouseOver:F=>{F.currentTarget.style.color="var(--theme-text)",F.currentTarget.style.backgroundColor="var(--theme-elevated)"},onMouseOut:F=>{F.currentTarget.style.color="var(--theme-text-secondary)",F.currentTarget.style.backgroundColor="transparent"},onClick:()=>l(!0),children:c.jsx(za,{className:"w-5 h-5"})})]})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 pb-32",children:dt.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full",style:{color:"var(--theme-text-tertiary)"},children:[c.jsx(jp,{className:"w-16 h-16 mb-4"}),c.jsx("p",{className:"text-lg",children:s==="inbox"?"收件箱为空":"暂无任务"}),c.jsx("p",{className:"text-sm mt-1",children:s==="inbox"?"创建任务后会自动出现在这里":"点击 + 按钮创建新任务"})]}):c.jsx("div",{className:"space-y-2",children:dt.map(F=>s==="inbox"?c.jsx("div",{className:`p-4 rounded-lg border hover:shadow-md transition-all duration-200 ${F.is_read?"":"border-l-4"}`,style:{backgroundColor:"var(--theme-elevated)",borderColor:"var(--theme-border)",borderLeftColor:F.is_read?"var(--theme-border)":"var(--theme-primary)"},onContextMenu:A=>Ne(A,F),children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("button",{onClick:()=>le(F.id),className:`mt-1 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors duration-200 ${F.is_read,""}`,style:{backgroundColor:F.is_read?"var(--theme-text-tertiary)":"var(--theme-primary)",borderColor:F.is_read?"var(--theme-text-tertiary)":"var(--theme-primary)",color:"white"},children:F.is_read&&c.jsx(Br,{className:"w-3 h-3"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${F.is_read?"":"font-medium"}`,style:{color:F.is_read?"var(--theme-text-secondary)":"var(--theme-text)"},children:F.title}),F.content&&c.jsx("p",{className:"text-xs mt-1 whitespace-pre-line",style:{color:"var(--theme-text-tertiary)"},children:F.content}),c.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[c.jsx("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:c.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--theme-elevated)",color:"var(--theme-text)"},children:["来源: ",F.source==="card"?"卡片":F.source]})}),F.created_at&&c.jsxs("div",{className:"flex items-center space-x-1 text-xs",style:{color:"var(--theme-text-tertiary)"},children:[c.jsx(ns,{className:"w-3 h-3"}),c.jsx("span",{children:Tt(new Date(F.created_at),"MM-dd HH:mm",{locale:Rn})})]})]})]})]})},F.id):c.jsx("div",{className:"p-4 rounded-lg border hover:shadow-md transition-all duration-200",style:{backgroundColor:"var(--theme-elevated)",borderColor:"var(--theme-border)"},onContextMenu:A=>Ne(A,F),children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("button",{onClick:()=>Ke(F.id),className:`mt-1 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors duration-200 ${F.completed,""}`,style:{backgroundColor:F.completed?"var(--theme-success)":"transparent",borderColor:F.completed?"var(--theme-success)":"var(--theme-border)",color:F.completed?"white":"transparent"},onMouseOver:A=>{F.completed||(A.currentTarget.style.borderColor="var(--theme-success)")},onMouseOut:A=>{F.completed||(A.currentTarget.style.borderColor="var(--theme-border)")},children:F.completed&&c.jsx(Br,{className:"w-3 h-3"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${F.completed?"line-through":""}`,style:{color:F.completed?"var(--theme-text-tertiary)":"var(--theme-text)"},children:F.title}),c.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[F.project&&c.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--theme-primary)20",color:"var(--theme-primary)"},children:["@",F.project]}),F.dueDate&&c.jsxs("div",{className:"flex items-center space-x-1 text-xs",style:{color:"var(--theme-text-tertiary)"},children:[c.jsx(ns,{className:"w-3 h-3"}),c.jsx("span",{children:Tt(F.dueDate,"MM-dd HH:mm",{locale:Rn})})]}),F.tags&&F.tags.length>0&&c.jsx("div",{className:"flex items-center space-x-1",children:F.tags.map(A=>c.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--theme-elevated)",color:"var(--theme-text)"},children:["#",A]},A))})]})]})]})},F.id))})})]}),i&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50",children:c.jsx("div",{className:"w-full max-w-2xl rounded-t-2xl shadow-2xl transform transition-all duration-300",style:{backgroundColor:"var(--theme-surface)"},children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--theme-text)"},children:"新建任务"}),c.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-lg transition-colors",style:{color:"var(--theme-text-secondary)"},onMouseOver:F=>{F.currentTarget.style.color="var(--theme-text)",F.currentTarget.style.backgroundColor="var(--theme-elevated)"},onMouseOut:F=>{F.currentTarget.style.color="var(--theme-text-secondary)",F.currentTarget.style.backgroundColor="transparent"},children:c.jsx(wn,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-end space-x-3 mb-3",children:c.jsxs("div",{className:"flex-1 relative",children:[u===""?c.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 pointer-events-none flex items-center justify-center",children:c.jsx(za,{className:"w-4 h-4",style:{color:"var(--theme-text-tertiary)"}})}):c.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 pointer-events-none w-5 h-5 rounded-full flex items-center justify-center",style:{border:"1px solid var(--theme-text)",backgroundColor:"transparent"}}),c.jsx("input",{type:"text",value:u,onChange:F=>f(F.target.value),onKeyDown:F=>F.key==="Enter"&&Me(),placeholder:"添加新任务...",className:"w-full pl-12 pr-4 py-3 bg-transparent border-2 rounded-full focus:outline-none transition-all duration-200",style:{color:"var(--theme-text)",borderColor:"var(--theme-border)",boxShadow:"none"},onFocus:F=>{F.currentTarget.style.borderColor="var(--theme-primary)",F.currentTarget.style.boxShadow="0 0 0 2px var(--theme-primary)20"},onBlur:F=>{F.currentTarget.style.borderColor="var(--theme-border)",F.currentTarget.style.boxShadow="none"},autoFocus:!0})]})}),c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>{document.getElementById("list-dropdown").classList.toggle("hidden")},className:"flex items-center space-x-2 px-3 py-2 border rounded-lg transition-colors duration-200",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="var(--theme-surface)",children:[c.jsx(jp,{className:"w-4 h-4",style:{color:"var(--theme-text-secondary)"}}),c.jsx("span",{className:"text-sm",style:{color:"var(--theme-text)"},children:"列表"}),c.jsx(Rp,{className:"w-3 h-3",style:{color:"var(--theme-text-tertiary)"}})]}),c.jsx("div",{id:"list-dropdown",className:"hidden absolute bottom-full left-0 mb-2 w-48 rounded-lg shadow-lg z-50",style:{backgroundColor:"var(--theme-surface)",border:"1px solid var(--theme-border)"},children:c.jsx("div",{className:"py-2",children:z.map(F=>{const A=St.createElement(F.icon,{className:"w-4 h-4",style:{color:"var(--theme-text-secondary)"}});return c.jsxs("button",{onClick:()=>{o(F.id),document.getElementById("list-dropdown").classList.add("hidden")},className:"w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors",style:{color:"var(--theme-text)"},onMouseOver:L=>L.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:L=>L.currentTarget.style.backgroundColor="transparent",children:[A,c.jsx("span",{className:"text-sm",style:{color:"var(--theme-text)"},children:F.name})]},F.id)})})})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>{document.getElementById("date-input").focus()},className:"flex items-center space-x-2 px-3 py-2 border rounded-lg transition-colors duration-200",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="var(--theme-surface)",children:[c.jsx(tr,{className:"w-4 h-4",style:{color:"var(--theme-text-secondary)"}}),c.jsx("span",{className:"text-sm",style:{color:"var(--theme-text)"},children:"日期"})]}),c.jsx("input",{id:"date-input",type:"date",value:T,onChange:F=>y(F.target.value),className:"absolute bottom-full left-0 mb-2 w-48 px-3 py-2 border rounded-lg focus:outline-none opacity-0 pointer-events-none",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)",color:"var(--theme-text)",boxShadow:"none"},onFocus:F=>{F.currentTarget.style.boxShadow="0 0 0 2px var(--theme-primary)20"},onBlur:F=>{F.currentTarget.style.boxShadow="none"}})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>{document.getElementById("time-input").focus()},className:"flex items-center space-x-2 px-3 py-2 border rounded-lg transition-colors duration-200",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="var(--theme-surface)",children:[c.jsx(ns,{className:"w-4 h-4",style:{color:"var(--theme-text-secondary)"}}),c.jsx("span",{className:"text-sm",style:{color:"var(--theme-text)"},children:"时间"})]}),c.jsx("input",{id:"time-input",type:"time",value:E,onChange:F=>w(F.target.value),className:"absolute bottom-full left-0 mb-2 w-48 px-3 py-2 border rounded-lg focus:outline-none opacity-0 pointer-events-none",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)",color:"var(--theme-text)",boxShadow:"none"},onFocus:F=>{F.currentTarget.style.boxShadow="0 0 0 2px var(--theme-primary)20"},onBlur:F=>{F.currentTarget.style.boxShadow="none"}})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>{document.getElementById("repeat-dropdown").classList.toggle("hidden")},className:"flex items-center space-x-2 px-3 py-2 border rounded-lg transition-colors duration-200",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="var(--theme-surface)",children:[c.jsx(Vl,{className:"w-4 h-4",style:{color:"var(--theme-text-secondary)"}}),c.jsx("span",{className:"text-sm",style:{color:"var(--theme-text)"},children:"重复"}),c.jsx(Rp,{className:"w-3 h-3",style:{color:"var(--theme-text-tertiary)"}})]}),c.jsx("div",{id:"repeat-dropdown",className:"hidden absolute bottom-full left-0 mb-2 w-48 rounded-lg shadow-lg z-50",style:{backgroundColor:"var(--theme-surface)",border:"1px solid var(--theme-border)"},children:c.jsx("div",{className:"py-2",children:[{value:"",label:"不重复"},{value:"daily",label:"每天"},{value:"weekly",label:"每周"},{value:"monthly",label:"每月"},{value:"yearly",label:"每年"}].map(F=>c.jsx("button",{onClick:()=>{j(F.value),document.getElementById("repeat-dropdown").classList.add("hidden")},className:"w-full px-4 py-2 text-left text-sm transition-colors",style:{color:"var(--theme-text)"},onMouseOver:A=>A.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:A=>A.currentTarget.style.backgroundColor="transparent",children:F.label},F.value))})})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 text-xs",style:{color:"var(--theme-text-tertiary)"},children:[T&&c.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 rounded-full",style:{backgroundColor:"var(--theme-primary)20",color:"var(--theme-primary)"},children:[c.jsx(tr,{className:"w-3 h-3"}),c.jsx("span",{children:T})]}),E&&c.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 rounded-full",style:{backgroundColor:"var(--theme-success)20",color:"var(--theme-success)"},children:[c.jsx(ns,{className:"w-3 h-3"}),c.jsx("span",{children:E})]}),I&&c.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 rounded-full",style:{backgroundColor:"var(--theme-accent)20",color:"var(--theme-accent)"},children:[c.jsx(Vl,{className:"w-3 h-3"}),c.jsx("span",{children:I==="daily"?"每天":I==="weekly"?"每周":I==="monthly"?"每月":"每年"})]})]})]}),u&&c.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--theme-elevated)"},children:[c.jsx("p",{className:"text-xs mb-2",style:{color:"var(--theme-text-tertiary)"},children:"自动解析："}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ve(u).dueDate&&c.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--theme-primary)20",color:"var(--theme-primary)"},children:[c.jsx(ns,{className:"w-3 h-3 mr-1"}),Tt(Ve(u).dueDate,"MM-dd HH:mm")]}),Ve(u).project&&c.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--theme-success)20",color:"var(--theme-success)"},children:["@",Ve(u).project]}),Ve(u).tags.map(F=>c.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"var(--theme-accent)20",color:"var(--theme-accent)"},children:["#",F]},F))]})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 rounded-lg font-medium transition-colors",style:{color:"var(--theme-text-secondary)"},onMouseOver:F=>F.currentTarget.style.color="var(--theme-text)",onMouseOut:F=>F.currentTarget.style.color="var(--theme-text-secondary)",children:"取消"}),c.jsx("button",{onClick:Me,disabled:!u.trim(),className:`px-6 py-2 rounded-lg font-medium transition-colors ${u.trim()?"":"cursor-not-allowed"}`,style:{backgroundColor:u.trim()?"var(--theme-primary)":"var(--theme-border)",color:u.trim()?"white":"var(--theme-text-tertiary)"},onMouseOver:F=>{u.trim()&&(F.currentTarget.style.backgroundColor="var(--theme-primary)80")},onMouseOut:F=>{u.trim()&&(F.currentTarget.style.backgroundColor="var(--theme-primary)")},children:"创建任务"})]})]})]})})}),_.visible&&c.jsx("div",{className:"fixed z-50 rounded-lg shadow-lg border",style:{left:_.x,top:_.y,backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)",minWidth:"200px"},onClick:$,children:c.jsxs("div",{className:"py-1",children:[s==="inbox"?c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors",style:{color:"var(--theme-text)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="transparent",onClick:()=>le(_.task.id),children:[c.jsx(Br,{className:"w-4 h-4",style:{color:_.task.is_read?"var(--theme-success)":"var(--theme-text-secondary)"}}),c.jsxs("span",{className:"text-sm",children:["标记为",_.task.is_read?"未读":"已读"]})]}),c.jsx("div",{className:"border-t my-1",style:{borderColor:"var(--theme-border)"}}),c.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors",style:{color:"var(--theme-error)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-error)20",onMouseOut:F=>F.currentTarget.style.backgroundColor="transparent",onClick:()=>{R(F=>F.filter(A=>A.id!==_.task.id)),_.task.is_read||Y(F=>Math.max(0,F-1)),$()},children:[c.jsx(As,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:"从收件箱中删除"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors",style:{color:"var(--theme-text)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="transparent",onClick:()=>G(_.task.id),children:[c.jsx(_o,{className:"w-4 h-4",style:{color:_.task.important?"var(--theme-warning)":"var(--theme-text-secondary)"}}),c.jsx("span",{className:"text-sm",children:"标记为重要"})]}),c.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors",style:{color:"var(--theme-text)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="transparent",onClick:()=>H(_.task.id),children:[c.jsx(Br,{className:"w-4 h-4",style:{color:_.task.completed?"var(--theme-success)":"var(--theme-text-secondary)"}}),c.jsx("span",{className:"text-sm",children:"标记为已完成"})]})]}),s!=="inbox"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-t my-1",style:{borderColor:"var(--theme-border)"}}),c.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors",style:{color:"var(--theme-text)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="transparent",onClick:()=>U(_.task.id),children:[c.jsx(tr,{className:"w-4 h-4",style:{color:"var(--theme-primary)"}}),c.jsx("span",{className:"text-sm",children:"今天到期"})]}),c.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors",style:{color:"var(--theme-text)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="transparent",onClick:()=>ee(_.task.id),children:[c.jsx(tr,{className:"w-4 h-4",style:{color:"var(--theme-accent)"}}),c.jsx("span",{className:"text-sm",children:"明天到期"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors",style:{color:"var(--theme-text)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="transparent",children:[c.jsx(ns,{className:"w-4 h-4",style:{color:"var(--theme-text-secondary)"}}),c.jsx("span",{className:"text-sm",children:"选择日期"})]}),c.jsx("input",{type:"date",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:F=>te(_.task.id,F.target.value)})]}),c.jsx("div",{className:"border-t my-1",style:{borderColor:"var(--theme-border)"}}),c.jsxs("div",{className:"relative group",children:[c.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-2 text-left transition-colors",style:{color:"var(--theme-text)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:F=>F.currentTarget.style.backgroundColor="transparent",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(uF,{className:"w-4 h-4",style:{color:"var(--theme-text-secondary)"}}),c.jsx("span",{className:"text-sm",children:"将任务移动到（列表）"})]}),c.jsx(t1,{className:"w-3 h-3",style:{color:"var(--theme-text-tertiary)"}})]}),c.jsx("div",{className:"absolute left-full top-0 ml-1 w-48 rounded-lg shadow-lg border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",style:{backgroundColor:"var(--theme-surface)",borderColor:"var(--theme-border)"},children:c.jsx("div",{className:"py-1",children:z.map(F=>{const A=St.createElement(F.icon,{className:"w-4 h-4",style:{color:"var(--theme-text-secondary)"}});return c.jsxs("button",{onClick:()=>V(_.task.id,F.id),className:"w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors",style:{color:"var(--theme-text)"},onMouseOver:L=>L.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:L=>L.currentTarget.style.backgroundColor="transparent",children:[A,c.jsx("span",{className:"text-sm",children:F.name})]},F.id)})})})]}),c.jsx("div",{className:"border-t my-1",style:{borderColor:"var(--theme-border)"}}),c.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors",style:{color:"var(--theme-error)"},onMouseOver:F=>F.currentTarget.style.backgroundColor="var(--theme-error)20",onMouseOut:F=>F.currentTarget.style.backgroundColor="transparent",onClick:()=>xe(_.task.id),children:[c.jsx(As,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:s==="inbox"?"从收件箱中删除":"删除任务"})]})]})]})})]})},NZ=(e,t,n="")=>{if(!e)return[];const r=e.split(`
`),s=[];return r.forEach((o,i)=>{const l=o.trim();if(l.startsWith("- [ ]")||l.startsWith("- [x]")){const u=l.startsWith("- [x]"),f=l.replace(/^- \[[ x]\] /,"").trim();f&&s.push({id:`${t}_${i}`,text:f,completed:u,source:"note",noteId:t,noteTitle:n,lineIndex:i,createdAt:new Date().toISOString(),completedAt:u?new Date().toISOString():null})}}),s},SZ=e=>{const t=[];return e.forEach(n=>{const r=NZ(n.content,n.id,n.title);t.push(...r)}),t},kZ=(e,t,n)=>{const r=e.split(`
`);if(t>=0&&t<r.length){const s=r[t];(s.trim().startsWith("- [ ]")||s.trim().startsWith("- [x]"))&&(r[t]=n?s.replace("- [ ]","- [x]"):s.replace("- [x]","- [ ]"))}return r.join(`
`)},AZ=e=>{const t=e.length,n=e.filter(i=>i.completed).length,r=t-n,s=e.filter(i=>i.source==="note").length,o=t-s;return{total:t,completed:n,pending:r,fromNotes:s,standalone:o,completionRate:t>0?Math.round(n/t*100):0}},OZ=(e,t)=>{switch(t){case"completed":return e.filter(n=>n.completed);case"pending":return e.filter(n=>!n.completed);case"fromNotes":return e.filter(n=>n.source==="note");case"standalone":return e.filter(n=>n.source==="standalone");default:return e}},RZ=(e,t)=>{if(!t.trim())return e;const n=t.toLowerCase();return e.filter(r=>r.text.toLowerCase().includes(n)||r.noteTitle&&r.noteTitle.toLowerCase().includes(n))},IZ=()=>{const[e,t]=N.useState([]),[n,r]=N.useState([]),[s,o]=N.useState(!1),[i,l]=N.useState(""),[u,f]=N.useState("all"),[m,h]=N.useState("note"),[g,p]=N.useState(!1),[b,v]=N.useState(null),T=js(),y=async()=>{o(!0);try{const k=await y2();r(k);const R=SZ(k);t(R)}catch(k){console.error("加载任务失败:",k)}finally{o(!1)}};N.useEffect(()=>{y()},[]);const E=N.useMemo(()=>{let k=e;return k=OZ(k,u),k=RZ(k,i),k},[e,u,i]),w=N.useMemo(()=>AZ(E),[E]),I=N.useMemo(()=>{if(m==="note"){const k={};return E.forEach(R=>{const P=R.noteId;if(!k[P]){const Y=n.find(z=>z.id===P);k[P]={title:(Y==null?void 0:Y.title)||"",note:Y,tasks:[]}}k[P].tasks.push(R)}),Object.entries(k).map(([R,P])=>({id:R,...P}))}else{const k={};return E.forEach(R=>{const P=R.createdAt?Tt(new Date(R.createdAt),"yyyy-MM-dd"):"无日期";k[P]||(k[P]={title:Tt(new Date(R.createdAt),"MM月dd日 EEEE",{locale:Rn}),tasks:[]}),k[P].tasks.push(R)}),Object.entries(k).map(([R,P])=>({id:R,...P}))}},[E,n,m]),j=async(k,R)=>{const P=e.find(Y=>Y.id===k);if(!(!P||P.source!=="note")){v(k);try{const Y=n.find(Q=>Q.id===P.noteId);if(!Y)return;const z=kZ(Y.content,P.lineIndex,R);await C1(P.noteId,{content:z,updated_at:new Date().toISOString()}),t(Q=>Q.map(M=>M.id===k?{...M,completed:R,completedAt:R?new Date().toISOString():null}:M)),console.log(R?"任务已完成！":"任务已取消完成"),await y()}catch(Y){console.error("同步任务状态到数据库失败:",Y),console.error("同步失败，请重试"),t(z=>z.map(Q=>Q.id===k?{...Q,completed:!R,completedAt:R?null:new Date().toISOString()}:Q))}finally{v(null)}}},_=k=>{T(`/?note=${k}`)},C=k=>{const R=k.text.toLowerCase();return R.includes("紧急")||R.includes("重要")?"border-l-4 border-l-red-500":R.includes("尽快")?"border-l-4 border-l-orange-500":"border-l-4 border-l-gray-300"};return c.jsx("div",{className:"min-h-screen bg-theme-bg text-theme-text",children:c.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-theme-text mb-2",children:"笔记任务"}),c.jsxs("p",{className:"text-theme-text-secondary",children:["从所有笔记中提取的任务列表，共 ",w.total," 个任务"]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-theme-surface p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-theme-text",children:w.total}),c.jsx("div",{className:"text-sm text-theme-text-secondary",children:"总任务"})]}),c.jsxs("div",{className:"bg-theme-surface p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-theme-primary",children:w.pending}),c.jsx("div",{className:"text-sm text-theme-text-secondary",children:"待完成"})]}),c.jsxs("div",{className:"bg-theme-surface p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-theme-success",children:w.completed}),c.jsx("div",{className:"text-sm text-theme-text-secondary",children:"已完成"})]}),c.jsxs("div",{className:"bg-theme-surface p-4 rounded-lg",children:[c.jsxs("div",{className:"text-2xl font-bold text-theme-warning",children:[w.completionRate,"%"]}),c.jsx("div",{className:"text-sm text-theme-text-secondary",children:"完成率"})]})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"relative",children:[c.jsx(um,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-theme-text-secondary",size:18}),c.jsx("input",{type:"text",placeholder:"搜索任务...",value:i,onChange:k=>l(k.target.value),className:"w-full pl-10 pr-4 py-2 bg-theme-surface border border-theme-border rounded-lg focus:outline-none focus:ring-2 focus:ring-theme-primary"})]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>p(!g),className:"px-4 py-2 bg-theme-surface border border-theme-border rounded-lg hover:bg-theme-hover transition-colors flex items-center gap-2",children:[c.jsx(f_,{size:16}),"筛选"]}),c.jsxs("button",{onClick:y,disabled:s,className:"px-4 py-2 bg-theme-surface border border-theme-border rounded-lg hover:bg-theme-hover transition-colors flex items-center gap-2",children:[c.jsx(g2,{size:16,className:s?"animate-spin":""}),"刷新"]})]})]}),g&&c.jsx("div",{className:"bg-theme-surface p-4 rounded-lg mb-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-theme-text mb-2",children:"状态"}),c.jsxs("select",{value:u,onChange:k=>f(k.target.value),className:"w-full px-3 py-2 bg-theme-bg border border-theme-border rounded-lg focus:outline-none focus:ring-2 focus:ring-theme-primary",children:[c.jsx("option",{value:"all",children:"全部"}),c.jsx("option",{value:"pending",children:"待完成"}),c.jsx("option",{value:"completed",children:"已完成"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-theme-text mb-2",children:"分组方式"}),c.jsxs("select",{value:m,onChange:k=>h(k.target.value),className:"w-full px-3 py-2 bg-theme-bg border border-theme-border rounded-lg focus:outline-none focus:ring-2 focus:ring-theme-primary",children:[c.jsx("option",{value:"note",children:"按笔记分组"}),c.jsx("option",{value:"date",children:"按日期分组"})]})]})]})}),s?c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-theme-primary"})}):c.jsx("div",{className:"space-y-6",children:I.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(xh,{className:"mx-auto text-6xl text-theme-text-secondary mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-theme-text mb-2",children:i?"未找到匹配的任务":"暂无任务"}),c.jsx("p",{className:"text-theme-text-secondary",children:i?"尝试修改搜索条件":"在笔记中添加任务列表即可在这里查看"})]}):I.map(k=>c.jsxs("div",{className:"bg-theme-surface rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-theme-text",children:[k.title,c.jsxs("span",{className:"ml-2 text-sm font-normal text-theme-text-secondary",children:["(",k.tasks.length,"个任务)"]})]}),k.note&&c.jsxs("button",{onClick:()=>_(k.id),className:"text-sm text-theme-primary hover:text-theme-primary/80 flex items-center gap-1",children:[c.jsx(rF,{size:14}),"查看笔记"]})]}),c.jsx("div",{className:"space-y-3",children:k.tasks.map(R=>c.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg bg-theme-bg/50 ${C(R)} ${R.completed?"opacity-60 bg-theme-success/10":"hover:bg-theme-hover/50"} transition-all duration-200`,children:[c.jsx("button",{onClick:()=>j(R.id,!R.completed),className:`mt-0.5 flex-shrink-0 p-1 rounded hover:bg-theme-hover transition-colors ${b===R.id?"opacity-50 cursor-not-allowed":""}`,disabled:b===R.id,children:b===R.id?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-theme-primary"}):R.completed?c.jsx(cm,{className:"text-theme-success",size:18}):c.jsx(pF,{className:"text-theme-text-secondary hover:text-theme-primary",size:18})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:`text-theme-text ${R.completed?"line-through":""}`,children:R.text}),c.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-theme-text-secondary",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(tr,{size:14}),Tt(new Date(R.createdAt),"MM-dd")]}),R.noteTitle&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(xh,{size:14}),R.noteTitle]})]})]})]},R.id))})]},k.id))})]})})},jZ=({projectId:e,onBack:t})=>{const[n,r]=N.useState(null),[s,o]=N.useState([]),[i,l]=N.useState("date"),[u,f]=N.useState([]),m={id:e||"1",name:"项目a",color:"#52c4b3",description:"这是一个重要的项目，包含多个任务和子项目",createdAt:new Date("2024-01-01"),taskCount:8,completedCount:3,subProjects:[{id:"1-1",name:"前端开发",taskCount:4,completedCount:2},{id:"1-2",name:"后端开发",taskCount:3,completedCount:1},{id:"1-3",name:"测试部署",taskCount:1,completedCount:0}]},h=[{id:"1",title:"完成项目需求分析",project:"项目a",subproject:"前端开发",dueDate:new Date,completed:!0,tags:["需求"],priority:"high",completedAt:new Date("2024-01-15")},{id:"2",title:"设计ui界面",project:"项目a",subproject:"前端开发",dueDate:nn(new Date,2),completed:!1,tags:["设计","ui"],priority:"high"},{id:"3",title:"开发核心功能",project:"项目a",subproject:"前端开发",dueDate:nn(new Date,5),completed:!1,tags:["开发"],priority:"medium"},{id:"4",title:"api接口设计",project:"项目a",subproject:"后端开发",dueDate:nn(new Date,3),completed:!0,tags:["api","后端"],priority:"high",completedAt:new Date("2024-01-18")},{id:"5",title:"数据库设计",project:"项目a",subproject:"后端开发",dueDate:nn(new Date,7),completed:!1,tags:["数据库"],priority:"medium"},{id:"6",title:"编写测试用例",project:"项目a",subproject:"测试部署",dueDate:nn(new Date,10),completed:!1,tags:["测试"],priority:"low"},{id:"7",title:"部署到生产环境",project:"项目a",subproject:"测试部署",dueDate:nn(new Date,15),completed:!1,tags:["部署"],priority:"high"},{id:"8",title:"项目文档整理",project:"项目a",subproject:null,dueDate:nn(new Date,20),completed:!1,tags:["文档"],priority:"low"}],g=[{id:"archived-1",name:"旧项目a",color:"#95a5a6",taskCount:5,completedCount:5,archivedAt:new Date("2023-12-01")},{id:"archived-2",name:"测试项目",color:"#95a5a6",taskCount:3,completedCount:3,archivedAt:new Date("2023-11-15")}];N.useEffect(()=>{r(m),o(h),f(g)},[e]);const p=C=>{const k={overdue:[],today:[],tomorrow:[],thisweek:[],nextweek:[],later:[],nodate:[]};return C.forEach(R=>{if(!R.dueDate){k.nodate.push(R);return}const P=pz(),Y=nn(P,1),z=nn(P,7),Q=nn(P,14);XB(R.dueDate)&&!R.completed?k.overdue.push(R):zd(R.dueDate,{start:P,end:YB()})?k.today.push(R):zd(R.dueDate,{start:Y,end:nn(Y,1)})?k.tomorrow.push(R):zd(R.dueDate,{start:nn(Y,1),end:z})?k.thisweek.push(R):zd(R.dueDate,{start:z,end:Q})?k.nextweek.push(R):k.later.push(R)}),k},b=C=>{const k={high:[],medium:[],low:[]};return C.forEach(R=>{k[R.priority||"medium"].push(R)}),k},v=C=>{const k={},R=[];return C.forEach(P=>{if(!P.tags||P.tags.length===0){R.push(P);return}P.tags.forEach(Y=>{k[Y]||(k[Y]=[]),k[Y].push(P)})}),{...k,untagged:R}},T=()=>{const C=s.filter(k=>!k.completed);switch(i){case"date":return p(C);case"priority":return b(C);case"tag":return v(C);default:return p(C)}},y=C=>{switch(i){case"date":return{overdue:"已逾期",today:"今天",tomorrow:"明天",thisweek:"本周",nextweek:"下周",later:"更晚",nodate:"无日期"}[C]||C;case"priority":return{high:"高优先级",medium:"中优先级",low:"低优先级"}[C]||C;case"tag":return C==="untagged"?"无标签":`#${C}`;default:return C}},E=C=>{switch(i){case"date":return{overdue:"#ef4444",today:"#f59e0b",tomorrow:"#3b82f6",thisweek:"#8b5cf6",nextweek:"#06b6d4",later:"#64748b",nodate:"#9ca3af"}[C]||"#64748b";case"priority":return{high:"#ef4444",medium:"#f59e0b",low:"#10b981"}[C]||"#64748b";case"tag":return"#64748b";default:return"#64748b"}},w=C=>{o(s.map(k=>k.id===C?{...k,completed:!k.completed,completedAt:k.completed?null:new Date}:k))},I=C=>{o(s.filter(k=>k.id!==C))},j=T(),_=s.filter(C=>C.completed);return n?c.jsxs("div",{className:"flex h-screen",style:{backgroundColor:"var(--theme-bg)"},children:[c.jsxs("div",{className:"flex-1 flex flex-col",children:[c.jsx("div",{className:"border-b border-gray-200",style:{backgroundColor:"var(--theme-surface)"},children:c.jsxs("div",{className:"px-6 py-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",onMouseOver:C=>C.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:C=>C.currentTarget.style.backgroundColor="transparent",children:c.jsx(E1,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:n.color}}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:n.name})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",onMouseOver:C=>C.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:C=>C.currentTarget.style.backgroundColor="transparent",children:c.jsx(ac,{className:"w-5 h-5"})}),c.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",onMouseOver:C=>C.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:C=>C.currentTarget.style.backgroundColor="transparent",children:c.jsx(p2,{className:"w-5 h-5"})})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"项目进度"}),c.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[n.completedCount,"/",n.taskCount," 任务完成"]})]}),c.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full transition-all duration-500 ease-out",style:{width:`${n.completedCount/n.taskCount*100}%`,backgroundColor:n.color}})})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"分组方式："}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("button",{onClick:()=>l("date"),className:`flex items-center space-x-2 px-3 py-1 rounded-lg text-sm transition-colors ${i==="date"?"bg-blue-100 text-blue-700":"text-gray-600"}`,onMouseOver:C=>{i!=="date"&&(C.currentTarget.style.backgroundColor="var(--theme-elevated)")},onMouseOut:C=>{i!=="date"&&(C.currentTarget.style.backgroundColor="transparent")},children:[c.jsx(tr,{className:"w-4 h-4"}),c.jsx("span",{children:"按日期"})]}),c.jsxs("button",{onClick:()=>l("priority"),className:`flex items-center space-x-2 px-3 py-1 rounded-lg text-sm transition-colors ${i==="priority"?"bg-blue-100 text-blue-700":"text-gray-600"}`,onMouseOver:C=>{i!=="priority"&&(C.currentTarget.style.backgroundColor="var(--theme-elevated)")},onMouseOut:C=>{i!=="priority"&&(C.currentTarget.style.backgroundColor="transparent")},children:[c.jsx(_o,{className:"w-4 h-4"}),c.jsx("span",{children:"按优先级"})]}),c.jsxs("button",{onClick:()=>l("tag"),className:`flex items-center space-x-2 px-3 py-1 rounded-lg text-sm transition-colors ${i==="tag"?"bg-blue-100 text-blue-700":"text-gray-600"}`,onMouseOver:C=>{i!=="tag"&&(C.currentTarget.style.backgroundColor="var(--theme-elevated)")},onMouseOut:C=>{i!=="tag"&&(C.currentTarget.style.backgroundColor="transparent")},children:[c.jsx(lc,{className:"w-4 h-4"}),c.jsx("span",{children:"按标签"})]})]})]})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsx("div",{className:"space-y-6 mb-8",children:Object.entries(j).map(([C,k])=>k.length===0?null:c.jsxs("div",{className:"rounded-lg border border-gray-200 overflow-hidden",style:{backgroundColor:"var(--theme-surface)"},children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-200",style:{backgroundColor:`${E(C)}10`},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundcolor:getgroupcolor(groupkey)}}),c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:y(C)}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",k.length,")"]})]}),c.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 rounded transition-colors",onMouseOver:R=>R.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:R=>R.currentTarget.style.backgroundColor="transparent",children:c.jsx("fiplus",{className:"w-4 h-4"})})]})}),c.jsx("div",{className:"divide-y divide-gray-200",children:k.map(R=>c.jsx("div",{className:"p-4 transition-colors duration-200",onMouseOver:P=>P.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:P=>P.currentTarget.style.backgroundColor="transparent",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("button",{onClick:()=>w(R.id),className:`mt-1 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors duration-200 ${R.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-green-500"}`,children:R.completed&&c.jsx(Br,{className:"w-3 h-3"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm ${R.completed?"line-through text-gray-400":"text-gray-800"}`,children:R.title}),c.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[R.subproject&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:R.subproject}),R.dueDate&&c.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[c.jsx(tr,{className:"w-3 h-3"}),c.jsx("span",{children:Tt(R.dueDate,"MM-dd",{locale:Rn})})]}),R.tags&&R.tags.length>0&&c.jsx("div",{className:"flex items-center space-x-1",children:R.tags.map(P=>c.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["#",P]},P))}),R.priority==="high"&&c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"高优先级"})]})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 rounded transition-colors",onMouseOver:P=>P.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:P=>P.currentTarget.style.backgroundColor="transparent",children:c.jsx(n1,{className:"w-4 h-4"})}),c.jsx("button",{className:"p-1 text-gray-400 hover:text-red-600 rounded transition-colors",onClick:()=>I(R.id),onMouseOver:P=>P.currentTarget.style.backgroundColor="var(--theme-error)20",onMouseOut:P=>P.currentTarget.style.backgroundColor="transparent",children:c.jsx(As,{className:"w-4 h-4"})})]})]})},R.id))})]},C))}),_.length>0&&c.jsxs("div",{className:"rounded-lg border border-gray-200 overflow-hidden",style:{backgroundColor:"var(--theme-surface)"},children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-200",style:{backgroundColor:"var(--theme-elevated)"},children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Vl,{className:"w-4 h-4 text-gray-500"}),c.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"已完成任务"}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",_.length,")"]})]})})}),c.jsx("div",{className:"divide-y divide-gray-200",children:_.map(C=>c.jsx("div",{className:"p-4 transition-colors duration-200",onMouseOver:k=>k.currentTarget.style.backgroundColor="var(--theme-elevated)",onMouseOut:k=>k.currentTarget.style.backgroundColor="transparent",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("button",{onClick:()=>w(C.id),className:"mt-1 w-5 h-5 rounded-full bg-green-500 border-2 border-green-500 flex items-center justify-center",children:c.jsx(Br,{className:"w-3 h-3 text-white"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm line-through text-gray-400",children:C.title}),c.jsx("div",{className:"flex items-center space-x-4 mt-2",children:C.completedAt&&c.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[c.jsx(tr,{className:"w-3 h-3"}),c.jsxs("span",{children:["完成于 ",Tt(C.completedAt,"MM-dd",{locale:Rn})]})]})})]})]})},C.id))})]}),u.length>0&&c.jsxs("div",{className:"mt-8",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-3",children:"归档项目"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(C=>c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 hover:shadow-md transition-all duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:C.color}}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:C.name})]}),c.jsx(Vl,{className:"w-4 h-4 text-gray-400"})]}),c.jsxs("div",{className:"text-xs text-gray-500",children:[C.completedCount,"/",C.taskCount," 任务完成"]})]},C.id))})]})]})})]}),c.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3",children:c.jsxs("div",{className:"flex items-center justify-between max-w-6xl mx-auto",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:()=>{const C={id:Date.now(),title:"新任务",completed:!1,dueDate:null,priority:null,tags:[],createdAt:new Date().toISOString()};o([...s,C])},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[c.jsx(za,{className:"w-4 h-4"}),c.jsx("span",{children:"添加任务"})]}),c.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(f_,{className:"w-4 h-4"}),c.jsx("span",{children:"筛选"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(fF,{className:"w-4 h-4"}),c.jsx("span",{children:"分享"})]}),c.jsxs("button",{onClick:()=>{const C={...n,archivedAt:new Date().toISOString()};f([...u,C])},className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx(Vl,{className:"w-4 h-4"}),c.jsx("span",{children:"归档项目"})]})]})]})})]}):c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"加载中..."})]})})},LZ=({isOpen:e,onClose:t,onSave:n,initialTask:r=null,availableProjects:s=[],availableTags:o=[]})=>{const[i,l]=N.useState(""),[u,f]=N.useState({dueDate:null,tags:[],project:null,assignee:null}),[m,h]=N.useState(""),[g,p]=N.useState(!1),[b,v]=N.useState([]),[T,y]=N.useState(""),[E,w]=N.useState(0),I=N.useRef(null),j=N.useRef(null);N.useEffect(()=>{r?(l(r.title||""),f({dueDate:r.dueDate||null,tags:r.tags||[],project:r.project||null,assignee:r.assignee||null}),h(r.notes||"")):_()},[r,e]);const _=()=>{l(""),f({dueDate:null,tags:[],project:null,assignee:null}),h(""),p(!1),v([])},C=$=>{const G={dueDate:null,tags:[],project:null,assignee:null},H={today:new Date,tomorrow:nn(new Date,1),tom:nn(new Date,1),yesterday:nn(new Date,-1),"next week":nn(new Date,7),"next month":nn(new Date,30)},U=/due\s+(\d{1,2}):(\d{2})/i,ee=$.match(U);if(ee){const[,Le,Ve]=ee,Me=new Date;Me.setHours(parseInt(Le),parseInt(Ve),0,0),G.dueDate=Me}Object.entries(H).forEach(([Le,Ve])=>{$.toLowerCase().includes(Le)&&(G.dueDate=Ve)});const te=/@(\S+)/g,V=[...$.matchAll(te)];if(V.length>0){const Le=V[0][1],Ve=s.find(Me=>Me.name.toLowerCase().includes(Le.toLowerCase()));Ve&&(G.project=Ve)}const xe=/#(\S+)/g;return[...$.matchAll(xe)].forEach(Le=>{const Ve=Le[1],Me=o.find(Ke=>Ke.name.toLowerCase().includes(Ve.toLowerCase()));Me&&!G.tags.find(Ke=>Ke.id===Me.id)&&G.tags.push(Me)}),G},k=$=>{const G=$.target.value;l(G),w($.target.selectionStart);const H=C(G);f(H);const U=$.target.selectionStart,ee=G.substring(0,U),te=ee.lastIndexOf("@");if(te!==-1&&te===U-1){R();return}const V=ee.lastIndexOf("#");if(V!==-1&&V===U-1){P();return}const xe=ee.toLowerCase().lastIndexOf("due");if(xe!==-1&&xe===U-3){Y();return}p(!1)},R=()=>{v(s),y("project"),p(!0)},P=()=>{v(o),y("tag"),p(!0)},Y=()=>{const $=[{id:"today",name:"今天",date:new Date},{id:"tomorrow",name:"明天",date:nn(new Date,1)},{id:"next-week",name:"下周",date:nn(new Date,7)},{id:"next-month",name:"下月",date:nn(new Date,30)}];v($),y("date"),p(!0)},z=$=>{const G=i.substring(0,E),H=i.substring(E);let U="",ee=0;switch(T){case"project":U=`${$.name}`,ee=1;break;case"tag":U=`${$.name}`,ee=1;break;case"date":U=` ${Tt($.date,"MM-dd",{locale:Rn})}`,ee=3;break}const te=G.substring(0,G.length-ee)+U+H;l(te),p(!1);const V=C(te);f(V),setTimeout(()=>{if(I.current){I.current.focus();const xe=E-ee+U.length;I.current.setSelectionRange(xe,xe)}},0)},Q=$=>{$.key==="Enter"&&!$.shiftKey?($.preventDefault(),M()):$.key==="Escape"?le():g&&($.key==="ArrowDown"||$.key==="ArrowUp")&&$.preventDefault()},M=()=>{if(!i.trim())return;const $={id:(r==null?void 0:r.id)||Date.now().toString(),title:i.trim(),dueDate:u.dueDate,tags:u.tags,project:u.project,assignee:u.assignee,notes:m.trim(),completed:(r==null?void 0:r.completed)||!1,createdAt:(r==null?void 0:r.createdAt)||new Date,updatedAt:new Date};n($),le()},le=()=>{_(),t()},Ne=$=>$?ni($)?"今天":ZB($)?"明天":Tt($,"MM-dd",{locale:Rn}):"";return N.useEffect(()=>{const $=G=>{j.current&&!j.current.contains(G.target)&&I.current&&!I.current.contains(G.target)&&p(!1)};return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[]),e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50",children:c.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-t-2xl shadow-2xl transform transition-all duration-300 ease-out",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:r?"编辑任务":"新建任务"}),c.jsx("button",{onClick:le,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(wn,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{ref:I,type:"text",value:i,onChange:k,onKeyDown:Q,placeholder:"输入任务标题...",maxLength:60,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-0 focus:border-transparent transition-all duration-200",autoFocus:!0}),c.jsxs("div",{className:"absolute right-3 top-3 text-xs text-gray-400",children:[i.length,"/60"]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 min-h-[32px] p-2 bg-gray-50 rounded-lg",children:[u.dueDate&&c.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[c.jsx(tr,{className:"w-3 h-3"}),c.jsx("span",{children:Ne(u.dueDate)})]}),u.project&&c.jsx("div",{className:"flex items-center space-x-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:c.jsxs("span",{children:["@",u.project.name]})}),u.tags.map($=>c.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:[c.jsx(lc,{className:"w-3 h-3"}),c.jsxs("span",{children:["#",$.name]})]},$.id)),u.assignee&&c.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:[c.jsx(yF,{className:"w-3 h-3"}),c.jsx("span",{children:u.assignee.name})]}),!u.dueDate&&!u.project&&u.tags.length===0&&!u.assignee&&c.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 text-gray-400 text-sm",children:[c.jsx(ns,{className:"w-3 h-3"}),c.jsx("span",{children:"输入 @项目名 #标签 due 时间 来自动解析"})]})]}),c.jsx("div",{children:c.jsx("textarea",{value:m,onChange:$=>h($.target.value),placeholder:"添加笔记...",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-0 focus:border-transparent transition-all duration-200 resize-none"})}),g&&b.length>0&&c.jsx("div",{ref:j,className:"absolute z-10 w-64 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 max-h-60 overflow-y-auto",children:b.map($=>c.jsxs("button",{onClick:()=>z($),className:"w-full px-4 py-2 text-left hover:bg-gray-50 transition-colors duration-150 flex items-center space-x-2",children:[T==="project"&&c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:$.color||"#52C4B3"}}),T==="tag"&&c.jsx(lc,{className:"w-4 h-4 text-gray-400"}),T==="date"&&c.jsx(tr,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-700",children:$.name})]},$.id))})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200",children:[c.jsx("div",{className:"text-xs text-gray-500",children:"按 Enter 保存，Esc 取消"}),c.jsxs("button",{onClick:M,disabled:!i.trim(),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200 ${i.trim()?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[c.jsx(Br,{className:"w-4 h-4"}),c.jsx("span",{children:r?"保存":"创建"})]})]})]})}):null},Ao=Object.create(null);Ao.open="0";Ao.close="1";Ao.ping="2";Ao.pong="3";Ao.message="4";Ao.upgrade="5";Ao.noop="6";const Ff=Object.create(null);Object.keys(Ao).forEach(e=>{Ff[Ao[e]]=e});const tx={type:"error",data:"parser error"},cN=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",uN=typeof ArrayBuffer=="function",dN=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,t5=({type:e,data:t},n,r)=>cN&&t instanceof Blob?n?r(t):aE(t,r):uN&&(t instanceof ArrayBuffer||dN(t))?n?r(t):aE(new Blob([t]),r):r(Ao[e]+(t||"")),aE=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function lE(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let _g;function DZ(e,t){if(cN&&e.data instanceof Blob)return e.data.arrayBuffer().then(lE).then(t);if(uN&&(e.data instanceof ArrayBuffer||dN(e.data)))return t(lE(e.data));t5(e,!1,n=>{_g||(_g=new TextEncoder),t(_g.encode(n))})}const cE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<cE.length;e++)mu[cE.charCodeAt(e)]=e;const MZ=e=>{let t=e.length*.75,n=e.length,r,s=0,o,i,l,u;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const f=new ArrayBuffer(t),m=new Uint8Array(f);for(r=0;r<n;r+=4)o=mu[e.charCodeAt(r)],i=mu[e.charCodeAt(r+1)],l=mu[e.charCodeAt(r+2)],u=mu[e.charCodeAt(r+3)],m[s++]=o<<2|i>>4,m[s++]=(i&15)<<4|l>>2,m[s++]=(l&3)<<6|u&63;return f},PZ=typeof ArrayBuffer=="function",n5=(e,t)=>{if(typeof e!="string")return{type:"message",data:fN(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:FZ(e.substring(1),t)}:Ff[n]?e.length>1?{type:Ff[n],data:e.substring(1)}:{type:Ff[n]}:tx},FZ=(e,t)=>{if(PZ){const n=MZ(e);return fN(n,t)}else return{base64:!0,data:e}},fN=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},hN=String.fromCharCode(30),BZ=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((o,i)=>{t5(o,!1,l=>{r[i]=l,++s===n&&t(r.join(hN))})})},zZ=(e,t)=>{const n=e.split(hN),r=[];for(let s=0;s<n.length;s++){const o=n5(n[s],t);if(r.push(o),o.type==="error")break}return r};function UZ(){return new TransformStream({transform(e,t){DZ(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let Ng;function uf(e){return e.reduce((t,n)=>t+n.length,0)}function df(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function HZ(e,t){Ng||(Ng=new TextDecoder);const n=[];let r=0,s=-1,o=!1;return new TransformStream({transform(i,l){for(n.push(i);;){if(r===0){if(uf(n)<1)break;const u=df(n,1);o=(u[0]&128)===128,s=u[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(uf(n)<2)break;const u=df(n,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(r===2){if(uf(n)<8)break;const u=df(n,8),f=new DataView(u.buffer,u.byteOffset,u.length),m=f.getUint32(0);if(m>Math.pow(2,53-32)-1){l.enqueue(tx);break}s=m*Math.pow(2,32)+f.getUint32(4),r=3}else{if(uf(n)<s)break;const u=df(n,s);l.enqueue(n5(o?u:Ng.decode(u),t)),r=0}if(s===0||s>e){l.enqueue(tx);break}}}})}const mN=4;function On(e){if(e)return $Z(e)}function $Z(e){for(var t in On.prototype)e[t]=On.prototype[t];return e}On.prototype.on=On.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};On.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};On.prototype.off=On.prototype.removeListener=On.prototype.removeAllListeners=On.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};On.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};On.prototype.emitReserved=On.prototype.emit;On.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};On.prototype.hasListeners=function(e){return!!this.listeners(e).length};const $m=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0))(),Ns=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),WZ="arraybuffer";function pN(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const GZ=Ns.setTimeout,KZ=Ns.clearTimeout;function Wm(e,t){t.useNativeTimers?(e.setTimeoutFn=GZ.bind(Ns),e.clearTimeoutFn=KZ.bind(Ns)):(e.setTimeoutFn=Ns.setTimeout.bind(Ns),e.clearTimeoutFn=Ns.clearTimeout.bind(Ns))}const YZ=1.33;function VZ(e){return typeof e=="string"?qZ(e):Math.ceil((e.byteLength||e.size)*YZ)}function qZ(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function gN(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function QZ(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function XZ(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class JZ extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class r5 extends On{constructor(t){super(),this.writable=!1,Wm(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new JZ(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=n5(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=QZ(t);return n.length?"?"+n:""}}class ZZ extends r5{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};zZ(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,BZ(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=gN()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let yN=!1;try{yN=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const eee=yN;function tee(){}class nee extends ZZ{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}let Jl=class Bf extends On{constructor(t,n,r){super(),this.createRequest=t,Wm(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=pN(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Bf.requestsCount++,Bf.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=tee,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Bf.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Jl.requestsCount=0;Jl.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",uE);else if(typeof addEventListener=="function"){const e="onpagehide"in Ns?"pagehide":"unload";addEventListener(e,uE,!1)}}function uE(){for(let e in Jl.requests)Jl.requests.hasOwnProperty(e)&&Jl.requests[e].abort()}const ree=function(){const e=xN({xdomain:!1});return e&&e.responseType!==null}();class see extends nee{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=ree&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Jl(xN,this.uri(),t)}}function xN(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||eee))return new XMLHttpRequest}catch{}if(!t)try{return new Ns[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const vN=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class oee extends r5{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=vN?{}:pN(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;t5(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}s&&$m(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=gN()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Sg=Ns.WebSocket||Ns.MozWebSocket;class iee extends oee{createSocket(t,n,r){return vN?new Sg(t,n,r):n?new Sg(t,n):new Sg(t)}doWrite(t,n){this.ws.send(n)}}class aee extends r5{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=HZ(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=UZ();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const o=()=>{r.read().then(({done:l,value:u})=>{l||(this.onPacket(u),o())}).catch(l=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&$m(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const lee={websocket:iee,webtransport:aee,polling:see},cee=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,uee=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function nx(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=cee.exec(e||""),o={},i=14;for(;i--;)o[uee[i]]=s[i]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=dee(o,o.path),o.queryKey=fee(o,o.query),o}function dee(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function fee(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,o){s&&(n[s]=o)}),n}const rx=typeof addEventListener=="function"&&typeof removeEventListener=="function",zf=[];rx&&addEventListener("offline",()=>{zf.forEach(e=>e())},!1);class Ji extends On{constructor(t,n){if(super(),this.binaryType=WZ,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=nx(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=nx(n.host).host);Wm(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=XZ(this.opts.query)),rx&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},zf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=mN,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Ji.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ji.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=VZ(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,$m(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Ji.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),rx&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=zf.indexOf(this._offlineEventListener);r!==-1&&zf.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ji.protocol=mN;class hee extends Ji{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Ji.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ji.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(m(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=n.name,this.emitReserved("upgradeError",g)}}))};function o(){r||(r=!0,m(),n.close(),n=null)}const i=h=>{const g=new Error("probe error: "+h);g.transport=n.name,o(),this.emitReserved("upgradeError",g)};function l(){i("transport closed")}function u(){i("socket closed")}function f(h){n&&h.name!==n.name&&o()}const m=()=>{n.removeListener("open",s),n.removeListener("error",i),n.removeListener("close",l),this.off("close",u),this.off("upgrading",f)};n.once("open",s),n.once("error",i),n.once("close",l),this.once("close",u),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let mee=class extends hee{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>lee[s]).filter(s=>!!s)),super(t,r)}};function pee(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=nx(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const gee=typeof ArrayBuffer=="function",yee=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,bN=Object.prototype.toString,xee=typeof Blob=="function"||typeof Blob<"u"&&bN.call(Blob)==="[object BlobConstructor]",vee=typeof File=="function"||typeof File<"u"&&bN.call(File)==="[object FileConstructor]";function s5(e){return gee&&(e instanceof ArrayBuffer||yee(e))||xee&&e instanceof Blob||vee&&e instanceof File}function Uf(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Uf(e[n]))return!0;return!1}if(s5(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Uf(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Uf(e[n]))return!0;return!1}function bee(e){const t=[],n=e.data,r=e;return r.data=sx(n,t),r.attachments=t.length,{packet:r,buffers:t}}function sx(e,t){if(!e)return e;if(s5(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=sx(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=sx(e[r],t));return n}return e}function wee(e,t){return e.data=ox(e.data,t),delete e.attachments,e}function ox(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ox(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ox(e[n],t));return e}const Tee=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Eee=5;var Lt;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Lt||(Lt={}));class Cee{constructor(t){this.replacer=t}encode(t){return(t.type===Lt.EVENT||t.type===Lt.ACK)&&Uf(t)?this.encodeAsBinary({type:t.type===Lt.EVENT?Lt.BINARY_EVENT:Lt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Lt.BINARY_EVENT||t.type===Lt.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=bee(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function dE(e){return Object.prototype.toString.call(e)==="[object Object]"}class o5 extends On{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===Lt.BINARY_EVENT;r||n.type===Lt.BINARY_ACK?(n.type=r?Lt.EVENT:Lt.ACK,this.reconstructor=new _ee(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(s5(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(Lt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Lt.BINARY_EVENT||r.type===Lt.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const i=t.substring(o,n);if(i!=Number(i)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(i)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const o=n+1;for(;++n;){const i=t.charAt(n);if(i==null||Number(i)!=i){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(o5.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Lt.CONNECT:return dE(n);case Lt.DISCONNECT:return n===void 0;case Lt.CONNECT_ERROR:return typeof n=="string"||dE(n);case Lt.EVENT:case Lt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Tee.indexOf(n[0])===-1);case Lt.ACK:case Lt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class _ee{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=wee(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Nee=Object.freeze(Object.defineProperty({__proto__:null,Decoder:o5,Encoder:Cee,get PacketType(){return Lt},protocol:Eee},Symbol.toStringTag,{value:"Module"}));function Qs(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const See=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class wN extends On{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Qs(t,"open",this.onopen.bind(this)),Qs(t,"packet",this.onpacket.bind(this)),Qs(t,"error",this.onerror.bind(this)),Qs(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,o;if(See.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:Lt.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const m=this.ids++,h=n.pop();this._registerAckCallback(m,h),i.id=m}const l=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,u=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!l||(u?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),i=(...l)=>{this.io.clearTimeoutFn(o),n.apply(this,l)};i.withError=!0,this.acks[t]=i}emitWithAck(t,...n){return new Promise((r,s)=>{const o=(i,l)=>i?s(i):r(l);o.withError=!0,n.push(o),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...o)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Lt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Lt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Lt.EVENT:case Lt.BINARY_EVENT:this.onevent(t);break;case Lt.ACK:case Lt.BINARY_ACK:this.onack(t);break;case Lt.DISCONNECT:this.ondisconnect();break;case Lt.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:Lt.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Lt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function _c(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}_c.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};_c.prototype.reset=function(){this.attempts=0};_c.prototype.setMin=function(e){this.ms=e};_c.prototype.setMax=function(e){this.max=e};_c.prototype.setJitter=function(e){this.jitter=e};class ix extends On{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Wm(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new _c({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||Nee;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new mee(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Qs(n,"open",function(){r.onopen(),t&&t()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},i=Qs(n,"error",o);if(this._timeout!==!1){const l=this._timeout,u=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),n.close()},l);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Qs(t,"ping",this.onping.bind(this)),Qs(t,"data",this.ondata.bind(this)),Qs(t,"error",this.onerror.bind(this)),Qs(t,"close",this.onclose.bind(this)),Qs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){$m(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new wN(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const iu={};function Hf(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=pee(e,t.path||"/socket.io"),r=n.source,s=n.id,o=n.path,i=iu[s]&&o in iu[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||i;let u;return l?u=new ix(r,t):(iu[s]||(iu[s]=new ix(r,t)),u=iu[s]),n.query&&!t.query&&(t.query=n.queryKey),u.socket(n.path,t)}Object.assign(Hf,{Manager:ix,Socket:wN,io:Hf,connect:Hf});class kee{constructor(){this.socket=null,this.connected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.eventListeners={}}connect(t,n){t&&(this.userId=t),n&&(this.token=n),this.init()}init(){if(this.socket){console.log("[WebSocket] WebSocket已连接，跳过初始化");return}const t={}.VITE_SERVER_URL||"http://localhost:30002";console.log("[WebSocket] 正在连接到服务器:",t),this.socket=Hf(t,{autoConnect:!1,transports:["websocket","polling"],timeout:5e3,reconnection:!0,reconnectionAttempts:this.maxReconnectAttempts,reconnectionDelay:this.reconnectDelay}),this.setupEventListeners(),this.socket.connect()}setupEventListeners(){this.socket.on("connect",()=>{console.log("[WebSocket] 连接成功，Socket ID:",this.socket.id),this.connected=!0,this.reconnectAttempts=0,this.authenticate()}),this.socket.on("disconnect",t=>{console.log("[WebSocket] 连接断开:",t),this.connected=!1}),this.socket.on("connect_error",t=>{console.error("[WebSocket] 连接错误:",t),this.connected=!1}),this.socket.on("reconnect_attempt",t=>{console.log(`[WebSocket] 重连尝试 ${t}/${this.maxReconnectAttempts}`)}),this.socket.on("reconnect",()=>{console.log("[WebSocket] 重连成功"),this.connected=!0,this.authenticate()}),this.socket.on("reconnect_failed",()=>{console.error("[WebSocket] 重连失败"),this.connected=!1}),this.socket.on("references_updated",t=>{console.log("[WebSocket] 收到引用更新事件:",t),this.emit("references_updated",t)})}authenticate(){if(!this.connected){console.warn("[WebSocket] 未连接，无法认证");return}console.log("[WebSocket] 已连接，无需认证")}on(t,n){this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push(n)}off(t,n){if(!this.eventListeners[t])return;const r=this.eventListeners[t].indexOf(n);r>-1&&this.eventListeners[t].splice(r,1)}emit(t,n){this.eventListeners[t]&&this.eventListeners[t].forEach(r=>{try{r(n)}catch(s){console.error(`[WebSocket] 事件处理失败 ${t}:`,s)}})}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.connected=!1,console.log("[WebSocket] 已断开连接"))}isConnected(){return this.connected}}const wl=new kee;function Aee(){console.log("🚀 AppContentWithEdit组件开始渲染");const[e,t]=N.useState(""),[n,r]=N.useState(""),[s,o]=N.useState(null),[i,l]=N.useState([]);N.useState(null);const[u,f]=N.useState(!1),[m,h]=N.useState(!1),[g,p]=N.useState(null),b=la(),v=js();DC(),console.log("✅ AppContentWithEdit状态初始化完成"),N.useEffect(()=>{const P=JSON.parse(localStorage.getItem("user"));if(P){wl.connect(P.id,P.token);const Y=Q=>{f(Q),console.log("WebSocket连接状态:",Q?"已连接":"已断开")},z=Q=>{console.log("收到引用更新事件:",Q),window.dispatchEvent(new CustomEvent("NOTE_REFERENCES_UPDATED",{detail:Q}))};return wl.on("connectionChanged",Y),wl.on("NOTE_REFERENCES_UPDATED",z),()=>{wl.off("connectionChanged",Y),wl.off("NOTE_REFERENCES_UPDATED",z),wl.disconnect()}}},[]);const T=P=>{t(P)},y=P=>{r(P)},E=N.useCallback(P=>{r(P),b.pathname!=="/"&&v("/")},[b.pathname,v]);N.useEffect(()=>(window.handleTagFilter=E,()=>{delete window.handleTagFilter}),[E]);const w=P=>{o(P)},I=P=>{l(P||[])},j=()=>{p(null),h(!0)},_=P=>{p(P),h(!0)},C=P=>{console.log("保存任务:",P),h(!1),p(null)},k=()=>{h(!1),p(null)},R=b.pathname!=="/"&&!b.pathname.startsWith("/task");return c.jsxs(y_,{className:"min-h-screen",type:"bg",children:[c.jsx(bF,{}),R&&c.jsx(xF,{onSearch:T,searchQuery:e,selectedTag:n,onTagChange:y}),c.jsx("div",{className:"flex",children:c.jsx("main",{className:"w-full",children:c.jsxs($D,{children:[c.jsx(Kn,{path:"/debug",element:c.jsx(wX,{})}),c.jsx(Kn,{path:"/",element:c.jsx(hX,{onSearch:T,searchQuery:e,selectedTag:n,onTagChange:y,updateTags:I,dateFilter:s,onDateFilter:w})}),c.jsx(Kn,{path:"/tags/:tagName",element:c.jsx(mX,{})}),c.jsx(Kn,{path:"/date/:date",element:c.jsx(pX,{})}),c.jsx(Kn,{path:"/calendar",element:c.jsx(yX,{})}),c.jsx(Kn,{path:"/tasks",element:c.jsx($4,{to:"/task/dashboard",replace:!0})}),c.jsx(Kn,{path:"/recycle-bin",element:c.jsx(vX,{})}),c.jsx(Kn,{path:"/enhanced-backup-manager",element:c.jsx(bX,{})}),c.jsx(Kn,{path:"/edit",element:c.jsx(TX,{})}),c.jsx(Kn,{path:"/fullscreen-editor",element:c.jsx(CX,{})}),c.jsx(Kn,{path:"/blocksuite-editor",element:c.jsx(wZ,{})}),c.jsx(Kn,{path:"/font-optimization",element:c.jsx(EZ,{})}),c.jsx(Kn,{path:"/settings",element:c.jsx(CZ,{})}),c.jsx(Kn,{path:"/task/dashboard",element:c.jsx(_Z,{onCreateTask:j,onEditTask:_})}),c.jsx(Kn,{path:"/task/project/:projectId",element:c.jsx(jZ,{onEditTask:_})}),c.jsx(Kn,{path:"/note-tasks",element:c.jsx(IZ,{})}),c.jsx(Kn,{path:"*",element:c.jsx($4,{to:"/",replace:!0})})]})})}),c.jsx(LZ,{isOpen:m,onClose:k,onSave:C,initialTask:g,availableProjects:[{id:"1",name:"项目A",color:"#52C4B3"},{id:"2",name:"项目B",color:"#3B82F6"},{id:"3",name:"项目C",color:"#8B5CF6"}],availableTags:[{id:"1",name:"工作"},{id:"2",name:"个人"},{id:"3",name:"紧急"},{id:"4",name:"重要"}]})]})}function Oee(){return c.jsx(rM,{children:c.jsx(Aee,{})})}function Ree(){const[e,t]=N.useState(!1);return N.useEffect(()=>{(async()=>{try{console.log("🔄 正在初始化配置管理器..."),await $P(),console.log("✅ 配置管理器初始化完成")}catch(r){console.error("❌ 应用初始化失败:",r)}finally{t(!0)}})()},[]),c.jsx(nM,{children:e?c.jsx(Oee,{}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-theme-bg",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"正在初始化 灰灰笔记..."})]})})})}class Iee extends St.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("应用错误:",t,n)}render(){var t;return this.state.hasError?c.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-700 dark:text-red-400 mb-2",children:"应用发生错误"}),c.jsx("p",{className:"text-sm text-red-600 dark:text-red-300 mb-2",children:"请刷新页面或联系开发人员"}),c.jsxs("details",{className:"text-xs text-gray-700 dark:text-gray-300 p-2 bg-white dark:bg-gray-800 rounded",children:[c.jsx("summary",{children:"错误详情"}),c.jsx("pre",{className:"mt-2 overflow-auto",children:(t=this.state.error)==null?void 0:t.toString()})]}),c.jsx("button",{className:"mt-3 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>window.location.reload(),children:"刷新页面"})]}):this.props.children}}class jee{constructor(){this.originalConsole={...console},this.isProduction=!0,this.logEnabled=!this.isProduction,this.disabledMethods=["log","info","warn","error","debug"]}disableAllLogs(){this.disabledMethods.forEach(t=>{typeof console[t]=="function"&&(console[t]=()=>{})}),this.logEnabled=!1}enableAllLogs(){this.disabledMethods.forEach(t=>{typeof this.originalConsole[t]=="function"&&(console[t]=this.originalConsole[t])}),this.logEnabled=!0}disableMethods(t){t.forEach(n=>{typeof console[n]=="function"&&(console[n]=()=>{})})}enableMethods(t){t.forEach(n=>{typeof this.originalConsole[n]=="function"&&(console[n]=this.originalConsole[n])})}setupByEnvironment(){this.isProduction?this.disableAllLogs():this.enableAllLogs()}isLogEnabled(){return this.logEnabled}}const Lee=new jee,Dee=()=>Lee.disableAllLogs();Dee();kg.createRoot(document.getElementById("root")).render(c.jsx(St.StrictMode,{children:c.jsx(Iee,{children:c.jsx(QD,{children:c.jsx(Ree,{})})})}));

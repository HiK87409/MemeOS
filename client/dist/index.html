<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/memo-icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="ç°ç°ç¬”è®° - ç®€æ˜“ç¬”è®°åº”ç”¨" />
    <title>ç°ç°ç¬”è®° - ç®€æ˜“ç¬”è®°åº”ç”¨</title>
    
    <!-- ç«‹å³æ‰§è¡Œçš„æ·±è‰²æ¨¡å¼æ£€æµ‹è„šæœ¬ -->
    <script>
      (function() {
        // æ£€æŸ¥localStorageä¸­çš„è®¾ç½®ï¼Œä¸ThemeContextä¿æŒä¸€è‡´
        const savedMode = localStorage.getItem('darkMode');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        // ç¡®å®šæ˜¯å¦åº”è¯¥ä½¿ç”¨æ·±è‰²æ¨¡å¼ï¼Œä¸ThemeContexté€»è¾‘ä¿æŒä¸€è‡´
        let shouldUseDark;
        if (savedMode !== null) {
          try {
            shouldUseDark = JSON.parse(savedMode);
          } catch (error) {
            console.error('è§£ædarkModeè®¾ç½®å¤±è´¥:', error);
            shouldUseDark = prefersDark;
          }
        } else {
          shouldUseDark = prefersDark;
        }
        
        // ç«‹å³åº”ç”¨æ·±è‰²æ¨¡å¼ç±»
        if (shouldUseDark) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
        
        // ç«‹å³åº”ç”¨å¡ç‰‡è®¾ç½®ï¼Œé¿å…é—ªçƒ
        const themeMode = shouldUseDark ? 'dark' : 'light';
        
        // è·å–å…¨å±€å¡ç‰‡è®¾ç½®
        try {
          const globalSettingsKey = `globalCardSettings_${themeMode}`;
          const globalSettings = JSON.parse(localStorage.getItem(globalSettingsKey) || '{}');
          
          // åº”ç”¨å…¨å±€è®¾ç½®åˆ°CSSå˜é‡
          const root = document.documentElement;
          if (globalSettings.backgroundColor) {
            root.style.setProperty('--card-global-bg', globalSettings.backgroundColor);
          }
          if (globalSettings.borderColor) {
            root.style.setProperty('--card-global-border', globalSettings.borderColor);
          }
          if (globalSettings.borderWidth) {
            root.style.setProperty('--card-global-border-width', `${globalSettings.borderWidth}px`);
          }
          if (globalSettings.borderRadius) {
            root.style.setProperty('--card-global-border-radius', `${globalSettings.borderRadius}px`);
          }
          if (globalSettings.shadowSize) {
            root.style.setProperty('--card-global-shadow', globalSettings.shadowSize);
          }
          
          // åº”ç”¨å­—ä½“é¢œè‰²è®¾ç½®
          if (globalSettings.mainTextColor) {
            root.style.setProperty('--card-global-text', globalSettings.mainTextColor);
          }
          if (globalSettings.secondaryTextColor) {
            root.style.setProperty('--card-global-text-secondary', globalSettings.secondaryTextColor);
          }
          if (globalSettings.linkTextColor) {
            root.style.setProperty('--card-global-link', globalSettings.linkTextColor);
          }
        } catch (error) {
          console.error('åº”ç”¨å…¨å±€å¡ç‰‡è®¾ç½®å¤±è´¥:', error);
        }
        
        // ç«‹å³åº”ç”¨åŸºç¡€ä¸»é¢˜é¢œè‰²ï¼Œé¿å…é—ªçƒ
        try {
          if (!document || !document.documentElement) {
            console.warn('DOMæœªå®Œå…¨åŠ è½½ï¼Œè·³è¿‡ä¸»é¢˜é¢œè‰²åº”ç”¨');
            return;
          }
          const root = document.documentElement;
          // åŸºç¡€ä¸»é¢˜é¢œè‰²é…ç½®ï¼ˆä¸colors.jsä¿æŒä¸€è‡´ï¼‰
          const themeColors = {
            dark: {
              bg: '#141415',
              surface: '#1a1a1b',
              elevated: '#1f1f1f',
              text: '#f1f5f9',
              textSecondary: '#cbd5e1',
              textMuted: '#94a3b8',
              border: '#475569',
              primary: '#3b82f6',
              primaryHover: '#2563eb',
              secondary: '#3b82f6',
              secondaryHover: '#2563eb',
              accent: '#8b5cf6',
              success: '#10b981',
              warning: '#f59e0b',
              error: '#ef4444',
              info: '#06b6d4'
            },
            light: {
              bg: '#f8fafc',
              surface: '#e2e8f0',
              elevated: '#f1f5f9',
              text: '#0f172a',
              textSecondary: '#334155',
              textMuted: '#64748b',
              border: '#cbd5e1',
              primary: '#3b82f6',
              primaryHover: '#2563eb',
              secondary: '#3b82f6',
              secondaryHover: '#2563eb',
              accent: '#8b5cf6',
              success: '#10b981',
              warning: '#f59e0b',
              error: '#ef4444',
              info: '#06b6d4'
            }
          };
          
          const colors = themeColors[themeMode];
          
          // åº”ç”¨ä¸»é¢˜é¢œè‰²åˆ°CSSå˜é‡
          root.style.setProperty('--theme-bg', colors.bg);
          root.style.setProperty('--theme-surface', colors.surface);
          root.style.setProperty('--theme-elevated', colors.elevated);
          root.style.setProperty('--theme-text', colors.text);
          root.style.setProperty('--theme-text-secondary', colors.textSecondary);
          root.style.setProperty('--theme-text-muted', colors.textMuted);
          root.style.setProperty('--theme-border', colors.border);
          root.style.setProperty('--theme-primary', colors.primary);
          root.style.setProperty('--theme-primary-hover', colors.primaryHover);
          root.style.setProperty('--theme-secondary', colors.secondary);
          root.style.setProperty('--theme-secondary-hover', colors.secondaryHover);
          root.style.setProperty('--theme-accent', colors.accent);
          root.style.setProperty('--theme-success', colors.success);
          root.style.setProperty('--theme-warning', colors.warning);
          root.style.setProperty('--theme-error', colors.error);
          root.style.setProperty('--theme-info', colors.info);
          
          // è®¾ç½®åŸºç¡€æ ·å¼
          if (document.body) {
            document.body.style.color = colors.text;
            document.body.style.background = colors.bg;
          }
          
          console.log('ğŸ¨ [index.html] ç«‹å³åº”ç”¨ä¸»é¢˜é¢œè‰²:', themeMode);
        } catch (error) {
          console.error('åº”ç”¨ä¸»é¢˜é¢œè‰²å¤±è´¥:', error);
        }
      })();
    </script>
    <script type="module" crossorigin src="/assets/index-1a1b9d0d.js"></script>
    <link rel="stylesheet" href="/assets/index-1a0535e4.css">
  </head>
  <body>
    <div id="root"></div>
    
  </body>
</html>